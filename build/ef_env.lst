ARM GAS  /tmp/ccSGDQKw.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 2
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ef_env.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.update_sector_cache,"ax",%progbits
  20              		.align	1
  21              		.p2align 2,,3
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	update_sector_cache:
  27              	.LVL0:
  28              	.LFB239:
  29              		.file 1 "easyflash/src/ef_env.c"
   1:easyflash/src/ef_env.c **** /*
   2:easyflash/src/ef_env.c ****  * This file is part of the EasyFlash Library.
   3:easyflash/src/ef_env.c ****  *
   4:easyflash/src/ef_env.c ****  * Copyright (c) 2019, Armink, <armink.ztl@gmail.com>
   5:easyflash/src/ef_env.c ****  *
   6:easyflash/src/ef_env.c ****  * Permission is hereby granted, free of charge, to any person obtaining
   7:easyflash/src/ef_env.c ****  * a copy of this software and associated documentation files (the
   8:easyflash/src/ef_env.c ****  * 'Software'), to deal in the Software without restriction, including
   9:easyflash/src/ef_env.c ****  * without limitation the rights to use, copy, modify, merge, publish,
  10:easyflash/src/ef_env.c ****  * distribute, sublicense, and/or sell copies of the Software, and to
  11:easyflash/src/ef_env.c ****  * permit persons to whom the Software is furnished to do so, subject to
  12:easyflash/src/ef_env.c ****  * the following conditions:
  13:easyflash/src/ef_env.c ****  *
  14:easyflash/src/ef_env.c ****  * The above copyright notice and this permission notice shall be
  15:easyflash/src/ef_env.c ****  * included in all copies or substantial portions of the Software.
  16:easyflash/src/ef_env.c ****  *
  17:easyflash/src/ef_env.c ****  * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
  18:easyflash/src/ef_env.c ****  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
  19:easyflash/src/ef_env.c ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
  20:easyflash/src/ef_env.c ****  * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
  21:easyflash/src/ef_env.c ****  * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
  22:easyflash/src/ef_env.c ****  * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
  23:easyflash/src/ef_env.c ****  * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  24:easyflash/src/ef_env.c ****  *
  25:easyflash/src/ef_env.c ****  * Function: Environment variables operating interface. This is the Next Generation version.
  26:easyflash/src/ef_env.c ****  * Created on: 2019-02-02
  27:easyflash/src/ef_env.c ****  */
  28:easyflash/src/ef_env.c **** 
  29:easyflash/src/ef_env.c **** #include <string.h>
ARM GAS  /tmp/ccSGDQKw.s 			page 2


  30:easyflash/src/ef_env.c **** #include <easyflash.h>
  31:easyflash/src/ef_env.c **** 
  32:easyflash/src/ef_env.c **** #if defined(EF_USING_ENV) && !defined(EF_ENV_USING_LEGACY_MODE)
  33:easyflash/src/ef_env.c **** 
  34:easyflash/src/ef_env.c **** #ifndef EF_WRITE_GRAN
  35:easyflash/src/ef_env.c ****     #error "Please configure flash write granularity (in ef_cfg.h)"
  36:easyflash/src/ef_env.c **** #endif
  37:easyflash/src/ef_env.c **** 
  38:easyflash/src/ef_env.c **** #if EF_WRITE_GRAN != 1 && EF_WRITE_GRAN != 8 && EF_WRITE_GRAN != 32 && EF_WRITE_GRAN != 64
  39:easyflash/src/ef_env.c ****     #error "the write gran can be only setting as 1, 8, 32 and 64"
  40:easyflash/src/ef_env.c **** #endif
  41:easyflash/src/ef_env.c **** 
  42:easyflash/src/ef_env.c **** /* magic word(`E`, `F`, `4`, `0`) */
  43:easyflash/src/ef_env.c **** #define SECTOR_MAGIC_WORD                        0x30344645
  44:easyflash/src/ef_env.c **** /* magic word(`K`, `V`, `4`, `0`) */
  45:easyflash/src/ef_env.c **** #define ENV_MAGIC_WORD                           0x3034564B
  46:easyflash/src/ef_env.c **** 
  47:easyflash/src/ef_env.c **** /* the using status sector table length */
  48:easyflash/src/ef_env.c **** #ifndef USING_SECTOR_TABLE_LEN
  49:easyflash/src/ef_env.c ****     #define USING_SECTOR_TABLE_LEN                   4
  50:easyflash/src/ef_env.c **** #endif
  51:easyflash/src/ef_env.c **** 
  52:easyflash/src/ef_env.c **** /* the string ENV value buffer size for legacy ef_get_env() function */
  53:easyflash/src/ef_env.c **** #ifndef EF_STR_ENV_VALUE_MAX_SIZE
  54:easyflash/src/ef_env.c ****     #define EF_STR_ENV_VALUE_MAX_SIZE                128
  55:easyflash/src/ef_env.c **** #endif
  56:easyflash/src/ef_env.c **** 
  57:easyflash/src/ef_env.c **** /* the sector remain threshold before full status */
  58:easyflash/src/ef_env.c **** #ifndef EF_SEC_REMAIN_THRESHOLD
  59:easyflash/src/ef_env.c ****     #define EF_SEC_REMAIN_THRESHOLD                  (ENV_HDR_DATA_SIZE + EF_ENV_NAME_MAX)
  60:easyflash/src/ef_env.c **** #endif
  61:easyflash/src/ef_env.c **** 
  62:easyflash/src/ef_env.c **** /* the total remain empty sector threshold before GC */
  63:easyflash/src/ef_env.c **** #ifndef EF_GC_EMPTY_SEC_THRESHOLD
  64:easyflash/src/ef_env.c ****     #define EF_GC_EMPTY_SEC_THRESHOLD                1
  65:easyflash/src/ef_env.c **** #endif
  66:easyflash/src/ef_env.c **** 
  67:easyflash/src/ef_env.c **** /* the ENV cache table size, it will improve ENV search speed when using cache */
  68:easyflash/src/ef_env.c **** #ifndef EF_ENV_CACHE_TABLE_SIZE
  69:easyflash/src/ef_env.c ****     #define EF_ENV_CACHE_TABLE_SIZE                  16
  70:easyflash/src/ef_env.c **** #endif
  71:easyflash/src/ef_env.c **** 
  72:easyflash/src/ef_env.c **** /* the sector cache table size, it will improve ENV save speed when using cache */
  73:easyflash/src/ef_env.c **** #ifndef EF_SECTOR_CACHE_TABLE_SIZE
  74:easyflash/src/ef_env.c ****     #define EF_SECTOR_CACHE_TABLE_SIZE               4
  75:easyflash/src/ef_env.c **** #endif
  76:easyflash/src/ef_env.c **** 
  77:easyflash/src/ef_env.c **** #if EF_ENV_CACHE_TABLE_SIZE > 0xFFFF
  78:easyflash/src/ef_env.c ****     #error "The ENV cache table size must less than 0xFFFF"
  79:easyflash/src/ef_env.c **** #endif
  80:easyflash/src/ef_env.c **** 
  81:easyflash/src/ef_env.c **** #if (EF_ENV_CACHE_TABLE_SIZE > 0) && (EF_SECTOR_CACHE_TABLE_SIZE > 0)
  82:easyflash/src/ef_env.c ****     #define EF_ENV_USING_CACHE
  83:easyflash/src/ef_env.c **** #endif
  84:easyflash/src/ef_env.c **** 
  85:easyflash/src/ef_env.c **** /* the sector is not combined value */
  86:easyflash/src/ef_env.c **** #define SECTOR_NOT_COMBINED                      0xFFFFFFFF
ARM GAS  /tmp/ccSGDQKw.s 			page 3


  87:easyflash/src/ef_env.c **** /* the next address is get failed */
  88:easyflash/src/ef_env.c **** #define FAILED_ADDR                              0xFFFFFFFF
  89:easyflash/src/ef_env.c **** 
  90:easyflash/src/ef_env.c **** /* Return the most contiguous size aligned at specified width. RT_ALIGN(13, 4)
  91:easyflash/src/ef_env.c ****  * would return 16.
  92:easyflash/src/ef_env.c ****  */
  93:easyflash/src/ef_env.c **** #define EF_ALIGN(size, align)                    (((size) + (align) - 1) & ~((align) - 1))
  94:easyflash/src/ef_env.c **** /* align by write granularity */
  95:easyflash/src/ef_env.c **** #define EF_WG_ALIGN(size)                        (EF_ALIGN(size, (EF_WRITE_GRAN + 7)/8))
  96:easyflash/src/ef_env.c **** /**
  97:easyflash/src/ef_env.c ****  * Return the down number of aligned at specified width. RT_ALIGN_DOWN(13, 4)
  98:easyflash/src/ef_env.c ****  * would return 12.
  99:easyflash/src/ef_env.c ****  */
 100:easyflash/src/ef_env.c **** #define EF_ALIGN_DOWN(size, align)               ((size) & ~((align) - 1))
 101:easyflash/src/ef_env.c **** /* align down by write granularity */
 102:easyflash/src/ef_env.c **** #define EF_WG_ALIGN_DOWN(size)                   (EF_ALIGN_DOWN(size, (EF_WRITE_GRAN + 7)/8))
 103:easyflash/src/ef_env.c **** 
 104:easyflash/src/ef_env.c **** #if (EF_WRITE_GRAN == 1)
 105:easyflash/src/ef_env.c ****     #define STATUS_TABLE_SIZE(status_number)         ((status_number * EF_WRITE_GRAN + 7)/8)
 106:easyflash/src/ef_env.c **** #else
 107:easyflash/src/ef_env.c ****     #define STATUS_TABLE_SIZE(status_number)         (((status_number - 1) * EF_WRITE_GRAN + 7)/8)
 108:easyflash/src/ef_env.c **** #endif
 109:easyflash/src/ef_env.c **** 
 110:easyflash/src/ef_env.c **** #define STORE_STATUS_TABLE_SIZE                  STATUS_TABLE_SIZE(SECTOR_STORE_STATUS_NUM)
 111:easyflash/src/ef_env.c **** #define DIRTY_STATUS_TABLE_SIZE                  STATUS_TABLE_SIZE(SECTOR_DIRTY_STATUS_NUM)
 112:easyflash/src/ef_env.c **** #define ENV_STATUS_TABLE_SIZE                    STATUS_TABLE_SIZE(ENV_STATUS_NUM)
 113:easyflash/src/ef_env.c **** 
 114:easyflash/src/ef_env.c **** #define SECTOR_SIZE                              EF_ERASE_MIN_SIZE
 115:easyflash/src/ef_env.c **** #define SECTOR_NUM                               (ENV_AREA_SIZE / (EF_ERASE_MIN_SIZE))
 116:easyflash/src/ef_env.c **** 
 117:easyflash/src/ef_env.c **** #if (SECTOR_NUM < 2)
 118:easyflash/src/ef_env.c ****     #error "The sector number must lager then or equal to 2"
 119:easyflash/src/ef_env.c **** #endif
 120:easyflash/src/ef_env.c **** 
 121:easyflash/src/ef_env.c **** #if (EF_GC_EMPTY_SEC_THRESHOLD == 0 || EF_GC_EMPTY_SEC_THRESHOLD >= SECTOR_NUM)
 122:easyflash/src/ef_env.c ****     #error "There is at least one empty sector for GC."
 123:easyflash/src/ef_env.c **** #endif
 124:easyflash/src/ef_env.c **** 
 125:easyflash/src/ef_env.c **** #define SECTOR_HDR_DATA_SIZE                     (EF_WG_ALIGN(sizeof(struct sector_hdr_data)))
 126:easyflash/src/ef_env.c **** #define SECTOR_DIRTY_OFFSET                      ((unsigned long)(&((struct sector_hdr_data *)0)->s
 127:easyflash/src/ef_env.c **** #define ENV_HDR_DATA_SIZE                        (EF_WG_ALIGN(sizeof(struct env_hdr_data)))
 128:easyflash/src/ef_env.c **** #define ENV_MAGIC_OFFSET                         ((unsigned long)(&((struct env_hdr_data *)0)->magi
 129:easyflash/src/ef_env.c **** #define ENV_LEN_OFFSET                           ((unsigned long)(&((struct env_hdr_data *)0)->len)
 130:easyflash/src/ef_env.c **** #define ENV_NAME_LEN_OFFSET                      ((unsigned long)(&((struct env_hdr_data *)0)->name
 131:easyflash/src/ef_env.c **** 
 132:easyflash/src/ef_env.c **** #define VER_NUM_ENV_NAME                         "__ver_num__"
 133:easyflash/src/ef_env.c **** 
 134:easyflash/src/ef_env.c **** enum sector_store_status
 135:easyflash/src/ef_env.c **** {
 136:easyflash/src/ef_env.c ****     SECTOR_STORE_UNUSED,
 137:easyflash/src/ef_env.c ****     SECTOR_STORE_EMPTY,
 138:easyflash/src/ef_env.c ****     SECTOR_STORE_USING,
 139:easyflash/src/ef_env.c ****     SECTOR_STORE_FULL,
 140:easyflash/src/ef_env.c ****     SECTOR_STORE_STATUS_NUM,
 141:easyflash/src/ef_env.c **** };
 142:easyflash/src/ef_env.c **** typedef enum sector_store_status sector_store_status_t;
 143:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 4


 144:easyflash/src/ef_env.c **** enum sector_dirty_status
 145:easyflash/src/ef_env.c **** {
 146:easyflash/src/ef_env.c ****     SECTOR_DIRTY_UNUSED,
 147:easyflash/src/ef_env.c ****     SECTOR_DIRTY_FALSE,
 148:easyflash/src/ef_env.c ****     SECTOR_DIRTY_TRUE,
 149:easyflash/src/ef_env.c ****     SECTOR_DIRTY_GC,
 150:easyflash/src/ef_env.c ****     SECTOR_DIRTY_STATUS_NUM,
 151:easyflash/src/ef_env.c **** };
 152:easyflash/src/ef_env.c **** typedef enum sector_dirty_status sector_dirty_status_t;
 153:easyflash/src/ef_env.c **** 
 154:easyflash/src/ef_env.c **** struct sector_hdr_data
 155:easyflash/src/ef_env.c **** {
 156:easyflash/src/ef_env.c ****     struct
 157:easyflash/src/ef_env.c ****     {
 158:easyflash/src/ef_env.c ****         uint8_t store[STORE_STATUS_TABLE_SIZE];  /**< sector store status @see sector_store_status_
 159:easyflash/src/ef_env.c ****         uint8_t dirty[DIRTY_STATUS_TABLE_SIZE];  /**< sector dirty status @see sector_dirty_status_
 160:easyflash/src/ef_env.c ****     } status_table;
 161:easyflash/src/ef_env.c ****     uint32_t magic;                              /**< magic word(`E`, `F`, `4`, `0`) */
 162:easyflash/src/ef_env.c ****     uint32_t combined;                           /**< the combined next sector number, 0xFFFFFFFF: 
 163:easyflash/src/ef_env.c ****     uint32_t reserved;
 164:easyflash/src/ef_env.c **** };
 165:easyflash/src/ef_env.c **** typedef struct sector_hdr_data *sector_hdr_data_t;
 166:easyflash/src/ef_env.c **** 
 167:easyflash/src/ef_env.c **** struct sector_meta_data
 168:easyflash/src/ef_env.c **** {
 169:easyflash/src/ef_env.c ****     bool check_ok;                               /**< sector header check is OK */
 170:easyflash/src/ef_env.c ****     struct
 171:easyflash/src/ef_env.c ****     {
 172:easyflash/src/ef_env.c ****         sector_store_status_t store;             /**< sector store status @see sector_store_status_
 173:easyflash/src/ef_env.c ****         sector_dirty_status_t dirty;             /**< sector dirty status @see sector_dirty_status_
 174:easyflash/src/ef_env.c ****     } status;
 175:easyflash/src/ef_env.c ****     uint32_t addr;                               /**< sector start address */
 176:easyflash/src/ef_env.c ****     uint32_t magic;                              /**< magic word(`E`, `F`, `4`, `0`) */
 177:easyflash/src/ef_env.c ****     uint32_t combined;                           /**< the combined next sector number, 0xFFFFFFFF: 
 178:easyflash/src/ef_env.c ****     size_t remain;                               /**< remain size */
 179:easyflash/src/ef_env.c ****     uint32_t empty_env;                          /**< the next empty ENV node start address */
 180:easyflash/src/ef_env.c **** };
 181:easyflash/src/ef_env.c **** typedef struct sector_meta_data *sector_meta_data_t;
 182:easyflash/src/ef_env.c **** 
 183:easyflash/src/ef_env.c **** struct env_hdr_data
 184:easyflash/src/ef_env.c **** {
 185:easyflash/src/ef_env.c ****     uint8_t status_table[ENV_STATUS_TABLE_SIZE]; /**< ENV node status, @see node_status_t */
 186:easyflash/src/ef_env.c ****     uint32_t magic;                              /**< magic word(`K`, `V`, `4`, `0`) */
 187:easyflash/src/ef_env.c ****     uint32_t len;                                /**< ENV node total length (header + name + value)
 188:easyflash/src/ef_env.c ****     uint32_t crc32;                              /**< ENV node crc32(name_len + data_len + name + v
 189:easyflash/src/ef_env.c ****     uint8_t name_len;                            /**< name length */
 190:easyflash/src/ef_env.c ****     uint32_t value_len;                          /**< value length */
 191:easyflash/src/ef_env.c **** };
 192:easyflash/src/ef_env.c **** typedef struct env_hdr_data *env_hdr_data_t;
 193:easyflash/src/ef_env.c **** 
 194:easyflash/src/ef_env.c **** struct env_cache_node
 195:easyflash/src/ef_env.c **** {
 196:easyflash/src/ef_env.c ****     uint16_t name_crc;                           /**< ENV name's CRC32 low 16bit value */
 197:easyflash/src/ef_env.c ****     uint16_t active;                             /**< ENV node access active degree */
 198:easyflash/src/ef_env.c ****     uint32_t addr;                               /**< ENV node address */
 199:easyflash/src/ef_env.c **** };
 200:easyflash/src/ef_env.c **** typedef struct env_cache_node *env_cache_node_t;
ARM GAS  /tmp/ccSGDQKw.s 			page 5


 201:easyflash/src/ef_env.c **** 
 202:easyflash/src/ef_env.c **** struct sector_cache_node
 203:easyflash/src/ef_env.c **** {
 204:easyflash/src/ef_env.c ****     uint32_t addr;                               /**< sector start address */
 205:easyflash/src/ef_env.c ****     uint32_t empty_addr;                         /**< sector empty address */
 206:easyflash/src/ef_env.c **** };
 207:easyflash/src/ef_env.c **** typedef struct sector_cache_node *sector_cache_node_t;
 208:easyflash/src/ef_env.c **** 
 209:easyflash/src/ef_env.c **** static void gc_collect(void);
 210:easyflash/src/ef_env.c **** 
 211:easyflash/src/ef_env.c **** /* ENV start address in flash */
 212:easyflash/src/ef_env.c **** static uint32_t env_start_addr = 0;
 213:easyflash/src/ef_env.c **** /* default ENV set, must be initialized by user */
 214:easyflash/src/ef_env.c **** static ef_env const *default_env_set;
 215:easyflash/src/ef_env.c **** /* default ENV set size, must be initialized by user */
 216:easyflash/src/ef_env.c **** static size_t default_env_set_size = 0;
 217:easyflash/src/ef_env.c **** /* initialize OK flag */
 218:easyflash/src/ef_env.c **** static bool init_ok = false;
 219:easyflash/src/ef_env.c **** /* request a GC check */
 220:easyflash/src/ef_env.c **** static bool gc_request = false;
 221:easyflash/src/ef_env.c **** /* is in recovery check status when first reboot */
 222:easyflash/src/ef_env.c **** static bool in_recovery_check = false;
 223:easyflash/src/ef_env.c **** 
 224:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 225:easyflash/src/ef_env.c **** /* ENV cache table */
 226:easyflash/src/ef_env.c **** struct env_cache_node env_cache_table[EF_ENV_CACHE_TABLE_SIZE] = { 0 };
 227:easyflash/src/ef_env.c **** /* sector cache table, it caching the sector info which status is current using */
 228:easyflash/src/ef_env.c **** struct sector_cache_node sector_cache_table[EF_SECTOR_CACHE_TABLE_SIZE] = { 0 };
 229:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 230:easyflash/src/ef_env.c **** 
 231:easyflash/src/ef_env.c **** static size_t set_status(uint8_t status_table[], size_t status_num, size_t status_index)
 232:easyflash/src/ef_env.c **** {
 233:easyflash/src/ef_env.c ****     size_t byte_index = ~0UL;
 234:easyflash/src/ef_env.c ****     /*
 235:easyflash/src/ef_env.c ****      * | write garn |       status0       |       status1       |      status2         |
 236:easyflash/src/ef_env.c ****      * ---------------------------------------------------------------------------------
 237:easyflash/src/ef_env.c ****      * |    1bit    | 0xFF                | 0x7F                |  0x3F                |
 238:easyflash/src/ef_env.c ****      * |    8bit    | 0xFFFF              | 0x00FF              |  0x0000              |
 239:easyflash/src/ef_env.c ****      * |   32bit    | 0xFFFFFFFF FFFFFFFF | 0x00FFFFFF FFFFFFFF |  0x00FFFFFF 00FFFFFF |
 240:easyflash/src/ef_env.c ****      */
 241:easyflash/src/ef_env.c ****     memset(status_table, 0xFF, STATUS_TABLE_SIZE(status_num));
 242:easyflash/src/ef_env.c ****     if (status_index > 0)
 243:easyflash/src/ef_env.c ****     {
 244:easyflash/src/ef_env.c **** #if (EF_WRITE_GRAN == 1)
 245:easyflash/src/ef_env.c ****         byte_index = (status_index - 1) / 8;
 246:easyflash/src/ef_env.c ****         status_table[byte_index] &= ~(0x80 >> ((status_index - 1) % 8));
 247:easyflash/src/ef_env.c **** #else
 248:easyflash/src/ef_env.c ****         byte_index = (status_index - 1) * (EF_WRITE_GRAN / 8);
 249:easyflash/src/ef_env.c ****         status_table[byte_index] = 0x00;
 250:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 251:easyflash/src/ef_env.c ****     }
 252:easyflash/src/ef_env.c **** 
 253:easyflash/src/ef_env.c ****     return byte_index;
 254:easyflash/src/ef_env.c **** }
 255:easyflash/src/ef_env.c **** 
 256:easyflash/src/ef_env.c **** static size_t get_status(uint8_t status_table[], size_t status_num)
 257:easyflash/src/ef_env.c **** {
ARM GAS  /tmp/ccSGDQKw.s 			page 6


 258:easyflash/src/ef_env.c ****     size_t i = 0, status_num_bak = --status_num;
 259:easyflash/src/ef_env.c **** 
 260:easyflash/src/ef_env.c ****     while (status_num --)
 261:easyflash/src/ef_env.c ****     {
 262:easyflash/src/ef_env.c ****         /* get the first 0 position from end address to start address */
 263:easyflash/src/ef_env.c **** #if (EF_WRITE_GRAN == 1)
 264:easyflash/src/ef_env.c ****         if ((status_table[status_num / 8] & (0x80 >> (status_num % 8))) == 0x00)
 265:easyflash/src/ef_env.c ****         {
 266:easyflash/src/ef_env.c ****             break;
 267:easyflash/src/ef_env.c ****         }
 268:easyflash/src/ef_env.c **** #else /*  (EF_WRITE_GRAN == 8) ||  (EF_WRITE_GRAN == 32) ||  (EF_WRITE_GRAN == 64) */
 269:easyflash/src/ef_env.c ****         if (status_table[status_num * EF_WRITE_GRAN / 8] == 0x00)
 270:easyflash/src/ef_env.c ****         {
 271:easyflash/src/ef_env.c ****             break;
 272:easyflash/src/ef_env.c ****         }
 273:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 274:easyflash/src/ef_env.c ****         i++;
 275:easyflash/src/ef_env.c ****     }
 276:easyflash/src/ef_env.c **** 
 277:easyflash/src/ef_env.c ****     return status_num_bak - i;
 278:easyflash/src/ef_env.c **** }
 279:easyflash/src/ef_env.c **** 
 280:easyflash/src/ef_env.c **** static EfErrCode write_status(uint32_t addr, uint8_t status_table[], size_t status_num, size_t stat
 281:easyflash/src/ef_env.c **** {
 282:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 283:easyflash/src/ef_env.c ****     size_t byte_index;
 284:easyflash/src/ef_env.c **** 
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_index < status_num);
 286:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 287:easyflash/src/ef_env.c **** 
 288:easyflash/src/ef_env.c ****     /* set the status first */
 289:easyflash/src/ef_env.c ****     byte_index = set_status(status_table, status_num, status_index);
 290:easyflash/src/ef_env.c **** 
 291:easyflash/src/ef_env.c ****     /* the first status table value is all 1, so no need to write flash */
 292:easyflash/src/ef_env.c ****     if (byte_index == ~0UL)
 293:easyflash/src/ef_env.c ****     {
 294:easyflash/src/ef_env.c ****         return EF_NO_ERR;
 295:easyflash/src/ef_env.c ****     }
 296:easyflash/src/ef_env.c **** #if (EF_WRITE_GRAN == 1)
 297:easyflash/src/ef_env.c ****     result = ef_port_write(addr + byte_index, (uint32_t *)&status_table[byte_index], 1);
 298:easyflash/src/ef_env.c **** #else /*  (EF_WRITE_GRAN == 8) ||  (EF_WRITE_GRAN == 32) ||  (EF_WRITE_GRAN == 64) */
 299:easyflash/src/ef_env.c ****     /* write the status by write granularity
 300:easyflash/src/ef_env.c ****      * some flash (like stm32 onchip) NOT supported repeated write before erase */
 301:easyflash/src/ef_env.c ****     result = ef_port_write(addr + byte_index, (uint32_t *) &status_table[byte_index], EF_WRITE_GRAN
 302:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 303:easyflash/src/ef_env.c **** 
 304:easyflash/src/ef_env.c ****     return result;
 305:easyflash/src/ef_env.c **** }
 306:easyflash/src/ef_env.c **** 
 307:easyflash/src/ef_env.c **** static size_t read_status(uint32_t addr, uint8_t status_table[], size_t total_num)
 308:easyflash/src/ef_env.c **** {
 309:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 310:easyflash/src/ef_env.c **** 
 311:easyflash/src/ef_env.c ****     ef_port_read(addr, (uint32_t *) status_table, STATUS_TABLE_SIZE(total_num));
 312:easyflash/src/ef_env.c **** 
 313:easyflash/src/ef_env.c ****     return get_status(status_table, total_num);
 314:easyflash/src/ef_env.c **** }
ARM GAS  /tmp/ccSGDQKw.s 			page 7


 315:easyflash/src/ef_env.c **** 
 316:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 317:easyflash/src/ef_env.c **** /*
 318:easyflash/src/ef_env.c ****  * It's only caching the current using status sector's empty_addr
 319:easyflash/src/ef_env.c ****  */
 320:easyflash/src/ef_env.c **** static void update_sector_cache(uint32_t sec_addr, uint32_t empty_addr)
 321:easyflash/src/ef_env.c **** {
  30              		.loc 1 321 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
 322:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_SECTOR_CACHE_TABLE_SIZE;
  34              		.loc 1 322 5 view .LVU1
 323:easyflash/src/ef_env.c **** 
 324:easyflash/src/ef_env.c ****     for (i = 0; i < EF_SECTOR_CACHE_TABLE_SIZE; i++)
  35              		.loc 1 324 5 view .LVU2
  36              		.loc 1 324 17 view .LVU3
  37 0000 154A     		ldr	r2, .L14
 321:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_SECTOR_CACHE_TABLE_SIZE;
  38              		.loc 1 321 1 is_stmt 0 view .LVU4
  39 0002 10B5     		push	{r4, lr}
  40              		.cfi_def_cfa_offset 8
  41              		.cfi_offset 4, -8
  42              		.cfi_offset 14, -4
 322:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_SECTOR_CACHE_TABLE_SIZE;
  43              		.loc 1 322 15 view .LVU5
  44 0004 4FF0040C 		mov	ip, #4
  45              		.loc 1 324 12 view .LVU6
  46 0008 0023     		movs	r3, #0
 325:easyflash/src/ef_env.c ****     {
 326:easyflash/src/ef_env.c ****         if ((empty_addr > sec_addr) && (empty_addr < sec_addr + SECTOR_SIZE))
  47              		.loc 1 326 63 view .LVU7
  48 000a 00F5003E 		add	lr, r0, #131072
  49              	.LVL1:
  50              	.L6:
  51              		.loc 1 326 9 is_stmt 1 view .LVU8
 327:easyflash/src/ef_env.c ****         {
 328:easyflash/src/ef_env.c ****             /* update the sector empty_addr in cache */
 329:easyflash/src/ef_env.c ****             if (sector_cache_table[i].addr == sec_addr)
 330:easyflash/src/ef_env.c ****             {
 331:easyflash/src/ef_env.c ****                 sector_cache_table[i].addr = sec_addr;
 332:easyflash/src/ef_env.c ****                 sector_cache_table[i].empty_addr = empty_addr;
 333:easyflash/src/ef_env.c ****                 return;
 334:easyflash/src/ef_env.c ****             }
 335:easyflash/src/ef_env.c ****             else if ((sector_cache_table[i].addr == FAILED_ADDR) && (empty_index == EF_SECTOR_CACHE
 336:easyflash/src/ef_env.c ****             {
 337:easyflash/src/ef_env.c ****                 empty_index = i;
 338:easyflash/src/ef_env.c ****             }
 339:easyflash/src/ef_env.c ****         }
 340:easyflash/src/ef_env.c ****         else if (sector_cache_table[i].addr == sec_addr)
  52              		.loc 1 340 14 view .LVU9
 326:easyflash/src/ef_env.c ****         {
  53              		.loc 1 326 12 is_stmt 0 view .LVU10
  54 000e 8842     		cmp	r0, r1
 329:easyflash/src/ef_env.c ****             {
  55              		.loc 1 329 38 view .LVU11
  56 0010 52F83340 		ldr	r4, [r2, r3, lsl #3]
ARM GAS  /tmp/ccSGDQKw.s 			page 8


 326:easyflash/src/ef_env.c ****         {
  57              		.loc 1 326 12 view .LVU12
  58 0014 15D2     		bcs	.L2
 329:easyflash/src/ef_env.c ****             {
  59              		.loc 1 329 13 is_stmt 1 discriminator 1 view .LVU13
 335:easyflash/src/ef_env.c ****             {
  60              		.loc 1 335 18 discriminator 1 view .LVU14
 326:easyflash/src/ef_env.c ****         {
  61              		.loc 1 326 37 is_stmt 0 discriminator 1 view .LVU15
  62 0016 8E45     		cmp	lr, r1
  63 0018 13D9     		bls	.L2
 329:easyflash/src/ef_env.c ****             {
  64              		.loc 1 329 16 view .LVU16
  65 001a 8442     		cmp	r4, r0
  66 001c 18D0     		beq	.L13
 335:easyflash/src/ef_env.c ****             {
  67              		.loc 1 335 21 view .LVU17
  68 001e 0134     		adds	r4, r4, #1
  69 0020 03D1     		bne	.L5
 335:easyflash/src/ef_env.c ****             {
  70              		.loc 1 335 66 discriminator 1 view .LVU18
  71 0022 BCF1040F 		cmp	ip, #4
  72 0026 08BF     		it	eq
  73 0028 9C46     		moveq	ip, r3
  74              	.LVL2:
  75              	.L5:
 324:easyflash/src/ef_env.c ****     {
  76              		.loc 1 324 49 is_stmt 1 discriminator 2 view .LVU19
 324:easyflash/src/ef_env.c ****     {
  77              		.loc 1 324 50 is_stmt 0 discriminator 2 view .LVU20
  78 002a 0133     		adds	r3, r3, #1
  79              	.LVL3:
 324:easyflash/src/ef_env.c ****     {
  80              		.loc 1 324 17 is_stmt 1 discriminator 2 view .LVU21
 324:easyflash/src/ef_env.c ****     {
  81              		.loc 1 324 5 is_stmt 0 discriminator 2 view .LVU22
  82 002c 042B     		cmp	r3, #4
  83 002e EED1     		bne	.L6
 341:easyflash/src/ef_env.c ****         {
 342:easyflash/src/ef_env.c ****             /* delete the sector which status is not current using */
 343:easyflash/src/ef_env.c ****             sector_cache_table[i].addr = FAILED_ADDR;
 344:easyflash/src/ef_env.c ****             return;
 345:easyflash/src/ef_env.c ****         }
 346:easyflash/src/ef_env.c ****     }
 347:easyflash/src/ef_env.c ****     /* add the sector empty_addr to cache */
 348:easyflash/src/ef_env.c ****     if (empty_index < EF_SECTOR_CACHE_TABLE_SIZE)
  84              		.loc 1 348 5 is_stmt 1 view .LVU23
  85              		.loc 1 348 8 is_stmt 0 view .LVU24
  86 0030 BCF1040F 		cmp	ip, #4
  87 0034 04D0     		beq	.L1
 349:easyflash/src/ef_env.c ****     {
 350:easyflash/src/ef_env.c ****         sector_cache_table[empty_index].addr = sec_addr;
  88              		.loc 1 350 9 is_stmt 1 view .LVU25
 351:easyflash/src/ef_env.c ****         sector_cache_table[empty_index].empty_addr = empty_addr;
  89              		.loc 1 351 52 is_stmt 0 view .LVU26
  90 0036 02EBCC03 		add	r3, r2, ip, lsl #3
  91              	.LVL4:
ARM GAS  /tmp/ccSGDQKw.s 			page 9


 350:easyflash/src/ef_env.c ****         sector_cache_table[empty_index].empty_addr = empty_addr;
  92              		.loc 1 350 46 view .LVU27
  93 003a 42F83C00 		str	r0, [r2, ip, lsl #3]
  94              		.loc 1 351 9 is_stmt 1 view .LVU28
  95              		.loc 1 351 52 is_stmt 0 view .LVU29
  96 003e 5960     		str	r1, [r3, #4]
  97              	.L1:
 352:easyflash/src/ef_env.c ****     }
 353:easyflash/src/ef_env.c **** }
  98              		.loc 1 353 1 view .LVU30
  99 0040 10BD     		pop	{r4, pc}
 100              	.LVL5:
 101              	.L2:
 340:easyflash/src/ef_env.c ****         {
 102              		.loc 1 340 17 view .LVU31
 103 0042 8442     		cmp	r4, r0
 104 0044 F1D1     		bne	.L5
 343:easyflash/src/ef_env.c ****             return;
 105              		.loc 1 343 13 is_stmt 1 view .LVU32
 343:easyflash/src/ef_env.c ****             return;
 106              		.loc 1 343 40 is_stmt 0 view .LVU33
 107 0046 4FF0FF31 		mov	r1, #-1
 108              	.LVL6:
 343:easyflash/src/ef_env.c ****             return;
 109              		.loc 1 343 40 view .LVU34
 110 004a 42F83310 		str	r1, [r2, r3, lsl #3]
 344:easyflash/src/ef_env.c ****         }
 111              		.loc 1 344 13 is_stmt 1 view .LVU35
 112              		.loc 1 353 1 is_stmt 0 view .LVU36
 113 004e 10BD     		pop	{r4, pc}
 114              	.LVL7:
 115              	.L13:
 331:easyflash/src/ef_env.c ****                 sector_cache_table[i].empty_addr = empty_addr;
 116              		.loc 1 331 17 is_stmt 1 view .LVU37
 332:easyflash/src/ef_env.c ****                 return;
 117              		.loc 1 332 17 view .LVU38
 332:easyflash/src/ef_env.c ****                 return;
 118              		.loc 1 332 50 is_stmt 0 view .LVU39
 119 0050 02EBC303 		add	r3, r2, r3, lsl #3
 120              	.LVL8:
 332:easyflash/src/ef_env.c ****                 return;
 121              		.loc 1 332 50 view .LVU40
 122 0054 5960     		str	r1, [r3, #4]
 333:easyflash/src/ef_env.c ****             }
 123              		.loc 1 333 17 is_stmt 1 view .LVU41
 124              		.loc 1 353 1 is_stmt 0 view .LVU42
 125 0056 10BD     		pop	{r4, pc}
 126              	.L15:
 127              		.align	2
 128              	.L14:
 129 0058 00000000 		.word	.LANCHOR0
 130              		.cfi_endproc
 131              	.LFE239:
 133              		.section	.text.gc_check_cb,"ax",%progbits
 134              		.align	1
 135              		.p2align 2,,3
 136              		.syntax unified
ARM GAS  /tmp/ccSGDQKw.s 			page 10


 137              		.thumb
 138              		.thumb_func
 140              	gc_check_cb:
 141              	.LVL9:
 142              	.LFB270:
 354:easyflash/src/ef_env.c **** 
 355:easyflash/src/ef_env.c **** /*
 356:easyflash/src/ef_env.c ****  * Get sector info from cache. It's return true when cache is hit.
 357:easyflash/src/ef_env.c ****  */
 358:easyflash/src/ef_env.c **** static bool get_sector_from_cache(uint32_t sec_addr, uint32_t *empty_addr)
 359:easyflash/src/ef_env.c **** {
 360:easyflash/src/ef_env.c ****     size_t i;
 361:easyflash/src/ef_env.c **** 
 362:easyflash/src/ef_env.c ****     for (i = 0; i < EF_SECTOR_CACHE_TABLE_SIZE; i++)
 363:easyflash/src/ef_env.c ****     {
 364:easyflash/src/ef_env.c ****         if (sector_cache_table[i].addr == sec_addr)
 365:easyflash/src/ef_env.c ****         {
 366:easyflash/src/ef_env.c ****             if (empty_addr)
 367:easyflash/src/ef_env.c ****             {
 368:easyflash/src/ef_env.c ****                 *empty_addr = sector_cache_table[i].empty_addr;
 369:easyflash/src/ef_env.c ****             }
 370:easyflash/src/ef_env.c ****             return true;
 371:easyflash/src/ef_env.c ****         }
 372:easyflash/src/ef_env.c ****     }
 373:easyflash/src/ef_env.c **** 
 374:easyflash/src/ef_env.c ****     return false;
 375:easyflash/src/ef_env.c **** }
 376:easyflash/src/ef_env.c **** 
 377:easyflash/src/ef_env.c **** static void update_env_cache(const char *name, size_t name_len, uint32_t addr)
 378:easyflash/src/ef_env.c **** {
 379:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_ENV_CACHE_TABLE_SIZE, min_activity_index = EF_ENV_CACHE_TABLE_SIZE;
 380:easyflash/src/ef_env.c ****     uint16_t name_crc = (uint16_t)(ef_calc_crc32(0, name, name_len) >> 16), min_activity = 0xFFFF;
 381:easyflash/src/ef_env.c **** 
 382:easyflash/src/ef_env.c ****     for (i = 0; i < EF_ENV_CACHE_TABLE_SIZE; i++)
 383:easyflash/src/ef_env.c ****     {
 384:easyflash/src/ef_env.c ****         if (addr != FAILED_ADDR)
 385:easyflash/src/ef_env.c ****         {
 386:easyflash/src/ef_env.c ****             /* update the ENV address in cache */
 387:easyflash/src/ef_env.c ****             if (env_cache_table[i].name_crc == name_crc)
 388:easyflash/src/ef_env.c ****             {
 389:easyflash/src/ef_env.c ****                 env_cache_table[i].addr = addr;
 390:easyflash/src/ef_env.c ****                 return;
 391:easyflash/src/ef_env.c ****             }
 392:easyflash/src/ef_env.c ****             else if ((env_cache_table[i].addr == FAILED_ADDR) && (empty_index == EF_ENV_CACHE_TABLE
 393:easyflash/src/ef_env.c ****             {
 394:easyflash/src/ef_env.c ****                 empty_index = i;
 395:easyflash/src/ef_env.c ****             }
 396:easyflash/src/ef_env.c ****             else if (env_cache_table[i].addr != FAILED_ADDR)
 397:easyflash/src/ef_env.c ****             {
 398:easyflash/src/ef_env.c ****                 if (env_cache_table[i].active > 0)
 399:easyflash/src/ef_env.c ****                 {
 400:easyflash/src/ef_env.c ****                     env_cache_table[i].active--;
 401:easyflash/src/ef_env.c ****                 }
 402:easyflash/src/ef_env.c ****                 if (env_cache_table[i].active < min_activity)
 403:easyflash/src/ef_env.c ****                 {
 404:easyflash/src/ef_env.c ****                     min_activity_index = i;
 405:easyflash/src/ef_env.c ****                     min_activity = env_cache_table[i].active;
ARM GAS  /tmp/ccSGDQKw.s 			page 11


 406:easyflash/src/ef_env.c ****                 }
 407:easyflash/src/ef_env.c ****             }
 408:easyflash/src/ef_env.c ****         }
 409:easyflash/src/ef_env.c ****         else if (env_cache_table[i].name_crc == name_crc)
 410:easyflash/src/ef_env.c ****         {
 411:easyflash/src/ef_env.c ****             /* delete the ENV */
 412:easyflash/src/ef_env.c ****             env_cache_table[i].addr = FAILED_ADDR;
 413:easyflash/src/ef_env.c ****             env_cache_table[i].active = 0;
 414:easyflash/src/ef_env.c ****             return;
 415:easyflash/src/ef_env.c ****         }
 416:easyflash/src/ef_env.c ****     }
 417:easyflash/src/ef_env.c ****     /* add the ENV to cache, using LRU (Least Recently Used) like algorithm */
 418:easyflash/src/ef_env.c ****     if (empty_index < EF_ENV_CACHE_TABLE_SIZE)
 419:easyflash/src/ef_env.c ****     {
 420:easyflash/src/ef_env.c ****         env_cache_table[empty_index].addr = addr;
 421:easyflash/src/ef_env.c ****         env_cache_table[empty_index].name_crc = name_crc;
 422:easyflash/src/ef_env.c ****         env_cache_table[empty_index].active = 0;
 423:easyflash/src/ef_env.c ****     }
 424:easyflash/src/ef_env.c ****     else if (min_activity_index < EF_ENV_CACHE_TABLE_SIZE)
 425:easyflash/src/ef_env.c ****     {
 426:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].addr = addr;
 427:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].name_crc = name_crc;
 428:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].active = 0;
 429:easyflash/src/ef_env.c ****     }
 430:easyflash/src/ef_env.c **** }
 431:easyflash/src/ef_env.c **** 
 432:easyflash/src/ef_env.c **** /*
 433:easyflash/src/ef_env.c ****  * Get ENV info from cache. It's return true when cache is hit.
 434:easyflash/src/ef_env.c ****  */
 435:easyflash/src/ef_env.c **** static bool get_env_from_cache(const char *name, size_t name_len, uint32_t *addr)
 436:easyflash/src/ef_env.c **** {
 437:easyflash/src/ef_env.c ****     size_t i;
 438:easyflash/src/ef_env.c ****     uint16_t name_crc = (uint16_t)(ef_calc_crc32(0, name, name_len) >> 16);
 439:easyflash/src/ef_env.c **** 
 440:easyflash/src/ef_env.c ****     for (i = 0; i < EF_ENV_CACHE_TABLE_SIZE; i++)
 441:easyflash/src/ef_env.c ****     {
 442:easyflash/src/ef_env.c ****         if ((env_cache_table[i].addr != FAILED_ADDR) && (env_cache_table[i].name_crc == name_crc))
 443:easyflash/src/ef_env.c ****         {
 444:easyflash/src/ef_env.c ****             char saved_name[EF_ENV_NAME_MAX];
 445:easyflash/src/ef_env.c ****             /* read the ENV name in flash */
 446:easyflash/src/ef_env.c ****             ef_port_read(env_cache_table[i].addr + ENV_HDR_DATA_SIZE, (uint32_t *) saved_name, EF_E
 447:easyflash/src/ef_env.c ****             if (!strncmp(name, saved_name, name_len))
 448:easyflash/src/ef_env.c ****             {
 449:easyflash/src/ef_env.c ****                 *addr = env_cache_table[i].addr;
 450:easyflash/src/ef_env.c ****                 if (env_cache_table[i].active >= 0xFFFF - EF_ENV_CACHE_TABLE_SIZE)
 451:easyflash/src/ef_env.c ****                 {
 452:easyflash/src/ef_env.c ****                     env_cache_table[i].active = 0xFFFF;
 453:easyflash/src/ef_env.c ****                 }
 454:easyflash/src/ef_env.c ****                 else
 455:easyflash/src/ef_env.c ****                 {
 456:easyflash/src/ef_env.c ****                     env_cache_table[i].active += EF_ENV_CACHE_TABLE_SIZE;
 457:easyflash/src/ef_env.c ****                 }
 458:easyflash/src/ef_env.c ****                 return true;
 459:easyflash/src/ef_env.c ****             }
 460:easyflash/src/ef_env.c ****         }
 461:easyflash/src/ef_env.c ****     }
 462:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 12


 463:easyflash/src/ef_env.c ****     return false;
 464:easyflash/src/ef_env.c **** }
 465:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 466:easyflash/src/ef_env.c **** 
 467:easyflash/src/ef_env.c **** /*
 468:easyflash/src/ef_env.c ****  * find the continue 0xFF flash address to end address
 469:easyflash/src/ef_env.c ****  */
 470:easyflash/src/ef_env.c **** static uint32_t continue_ff_addr(uint32_t start, uint32_t end)
 471:easyflash/src/ef_env.c **** {
 472:easyflash/src/ef_env.c ****     uint8_t buf[32], last_data = 0x00;
 473:easyflash/src/ef_env.c ****     size_t i, addr = start, read_size;
 474:easyflash/src/ef_env.c **** 
 475:easyflash/src/ef_env.c ****     for (; start < end; start += sizeof(buf))
 476:easyflash/src/ef_env.c ****     {
 477:easyflash/src/ef_env.c ****         if (start + sizeof(buf) < end)
 478:easyflash/src/ef_env.c ****         {
 479:easyflash/src/ef_env.c ****             read_size = sizeof(buf);
 480:easyflash/src/ef_env.c ****         }
 481:easyflash/src/ef_env.c ****         else
 482:easyflash/src/ef_env.c ****         {
 483:easyflash/src/ef_env.c ****             read_size = end - start;
 484:easyflash/src/ef_env.c ****         }
 485:easyflash/src/ef_env.c ****         ef_port_read(start, (uint32_t *) buf, read_size);
 486:easyflash/src/ef_env.c ****         for (i = 0; i < read_size; i++)
 487:easyflash/src/ef_env.c ****         {
 488:easyflash/src/ef_env.c ****             if (last_data != 0xFF && buf[i] == 0xFF)
 489:easyflash/src/ef_env.c ****             {
 490:easyflash/src/ef_env.c ****                 addr = start + i;
 491:easyflash/src/ef_env.c ****             }
 492:easyflash/src/ef_env.c ****             last_data = buf[i];
 493:easyflash/src/ef_env.c ****         }
 494:easyflash/src/ef_env.c ****     }
 495:easyflash/src/ef_env.c **** 
 496:easyflash/src/ef_env.c ****     if (last_data == 0xFF)
 497:easyflash/src/ef_env.c ****     {
 498:easyflash/src/ef_env.c ****         return EF_WG_ALIGN(addr);
 499:easyflash/src/ef_env.c ****     }
 500:easyflash/src/ef_env.c ****     else
 501:easyflash/src/ef_env.c ****     {
 502:easyflash/src/ef_env.c ****         return end;
 503:easyflash/src/ef_env.c ****     }
 504:easyflash/src/ef_env.c **** }
 505:easyflash/src/ef_env.c **** 
 506:easyflash/src/ef_env.c **** /*
 507:easyflash/src/ef_env.c ****  * find the next ENV address by magic word on the flash
 508:easyflash/src/ef_env.c ****  */
 509:easyflash/src/ef_env.c **** static uint32_t find_next_env_addr(uint32_t start, uint32_t end)
 510:easyflash/src/ef_env.c **** {
 511:easyflash/src/ef_env.c ****     uint8_t buf[32];
 512:easyflash/src/ef_env.c ****     uint32_t start_bak = start, i;
 513:easyflash/src/ef_env.c ****     uint32_t magic;
 514:easyflash/src/ef_env.c **** 
 515:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 516:easyflash/src/ef_env.c ****     uint32_t empty_env;
 517:easyflash/src/ef_env.c **** 
 518:easyflash/src/ef_env.c ****     if (get_sector_from_cache(EF_ALIGN_DOWN(start, SECTOR_SIZE), &empty_env) && start == empty_env)
 519:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 13


 520:easyflash/src/ef_env.c ****         return FAILED_ADDR;
 521:easyflash/src/ef_env.c ****     }
 522:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 523:easyflash/src/ef_env.c **** 
 524:easyflash/src/ef_env.c ****     for (; start < end; start += (sizeof(buf) - sizeof(uint32_t)))
 525:easyflash/src/ef_env.c ****     {
 526:easyflash/src/ef_env.c ****         ef_port_read(start, (uint32_t *) buf, sizeof(buf));
 527:easyflash/src/ef_env.c ****         for (i = 0; i < sizeof(buf) - sizeof(uint32_t) && start + i < end; i++)
 528:easyflash/src/ef_env.c ****         {
 529:easyflash/src/ef_env.c **** #ifndef EF_BIG_ENDIAN            /* Little Endian Order */
 530:easyflash/src/ef_env.c ****             magic = buf[i] + (buf[i + 1] << 8) + (buf[i + 2] << 16) + (buf[i + 3] << 24);
 531:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 532:easyflash/src/ef_env.c ****             magic = buf[i + 3] + (buf[i + 2] << 8) + (buf[i + 1] << 16) + (buf[i] << 24);
 533:easyflash/src/ef_env.c **** #endif
 534:easyflash/src/ef_env.c ****             if (magic == ENV_MAGIC_WORD && (start + i - ENV_MAGIC_OFFSET) >= start_bak)
 535:easyflash/src/ef_env.c ****             {
 536:easyflash/src/ef_env.c ****                 return start + i - ENV_MAGIC_OFFSET;
 537:easyflash/src/ef_env.c ****             }
 538:easyflash/src/ef_env.c ****         }
 539:easyflash/src/ef_env.c ****     }
 540:easyflash/src/ef_env.c **** 
 541:easyflash/src/ef_env.c ****     return FAILED_ADDR;
 542:easyflash/src/ef_env.c **** }
 543:easyflash/src/ef_env.c **** 
 544:easyflash/src/ef_env.c **** static uint32_t get_next_env_addr(sector_meta_data_t sector, env_node_obj_t pre_env)
 545:easyflash/src/ef_env.c **** {
 546:easyflash/src/ef_env.c ****     uint32_t addr = FAILED_ADDR;
 547:easyflash/src/ef_env.c **** 
 548:easyflash/src/ef_env.c ****     if (sector->status.store == SECTOR_STORE_EMPTY)
 549:easyflash/src/ef_env.c ****     {
 550:easyflash/src/ef_env.c ****         return FAILED_ADDR;
 551:easyflash/src/ef_env.c ****     }
 552:easyflash/src/ef_env.c **** 
 553:easyflash/src/ef_env.c ****     if (pre_env->addr.start == FAILED_ADDR)
 554:easyflash/src/ef_env.c ****     {
 555:easyflash/src/ef_env.c ****         /* the first ENV address */
 556:easyflash/src/ef_env.c ****         addr = sector->addr + SECTOR_HDR_DATA_SIZE;
 557:easyflash/src/ef_env.c ****     }
 558:easyflash/src/ef_env.c ****     else
 559:easyflash/src/ef_env.c ****     {
 560:easyflash/src/ef_env.c ****         if (pre_env->addr.start <= sector->addr + SECTOR_SIZE)
 561:easyflash/src/ef_env.c ****         {
 562:easyflash/src/ef_env.c ****             if (pre_env->crc_is_ok)
 563:easyflash/src/ef_env.c ****             {
 564:easyflash/src/ef_env.c ****                 addr = pre_env->addr.start + pre_env->len;
 565:easyflash/src/ef_env.c ****             }
 566:easyflash/src/ef_env.c ****             else
 567:easyflash/src/ef_env.c ****             {
 568:easyflash/src/ef_env.c ****                 /* when pre_env CRC check failed, maybe the flash has error data
 569:easyflash/src/ef_env.c ****                  * find_next_env_addr after pre_env address */
 570:easyflash/src/ef_env.c ****                 addr = pre_env->addr.start + EF_WG_ALIGN(1);
 571:easyflash/src/ef_env.c ****             }
 572:easyflash/src/ef_env.c ****             /* check and find next ENV address */
 573:easyflash/src/ef_env.c ****             addr = find_next_env_addr(addr, sector->addr + SECTOR_SIZE - SECTOR_HDR_DATA_SIZE);
 574:easyflash/src/ef_env.c **** 
 575:easyflash/src/ef_env.c ****             if (addr > sector->addr + SECTOR_SIZE || pre_env->len == 0)
 576:easyflash/src/ef_env.c ****             {
ARM GAS  /tmp/ccSGDQKw.s 			page 14


 577:easyflash/src/ef_env.c ****                 return FAILED_ADDR;
 578:easyflash/src/ef_env.c ****             }
 579:easyflash/src/ef_env.c ****         }
 580:easyflash/src/ef_env.c ****         else
 581:easyflash/src/ef_env.c ****         {
 582:easyflash/src/ef_env.c ****             /* no ENV */
 583:easyflash/src/ef_env.c ****             return FAILED_ADDR;
 584:easyflash/src/ef_env.c ****         }
 585:easyflash/src/ef_env.c ****     }
 586:easyflash/src/ef_env.c **** 
 587:easyflash/src/ef_env.c ****     return addr;
 588:easyflash/src/ef_env.c **** }
 589:easyflash/src/ef_env.c **** 
 590:easyflash/src/ef_env.c **** static EfErrCode read_env(env_node_obj_t env)
 591:easyflash/src/ef_env.c **** {
 592:easyflash/src/ef_env.c ****     struct env_hdr_data env_hdr;
 593:easyflash/src/ef_env.c ****     uint8_t buf[32];
 594:easyflash/src/ef_env.c ****     uint32_t calc_crc32 = 0, crc_data_len, env_name_addr;
 595:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 596:easyflash/src/ef_env.c ****     size_t len, size;
 597:easyflash/src/ef_env.c ****     /* read ENV header raw data */
 598:easyflash/src/ef_env.c ****     ef_port_read(env->addr.start, (uint32_t *)&env_hdr, sizeof(struct env_hdr_data));
 599:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 600:easyflash/src/ef_env.c ****     env->len = env_hdr.len;
 601:easyflash/src/ef_env.c **** 
 602:easyflash/src/ef_env.c ****     if (env->len == ~0UL || env->len > ENV_AREA_SIZE || env->len < ENV_NAME_LEN_OFFSET)
 603:easyflash/src/ef_env.c ****     {
 604:easyflash/src/ef_env.c ****         /* the ENV length was not write, so reserved the meta data for current ENV */
 605:easyflash/src/ef_env.c ****         env->len = ENV_HDR_DATA_SIZE;
 606:easyflash/src/ef_env.c ****         if (env->status != ENV_ERR_HDR)
 607:easyflash/src/ef_env.c ****         {
 608:easyflash/src/ef_env.c ****             env->status = ENV_ERR_HDR;
 609:easyflash/src/ef_env.c ****             EF_DEBUG("Error: The ENV @0x%08X length has an error.", env->addr.start);
 610:easyflash/src/ef_env.c ****             write_status(env->addr.start, env_hdr.status_table, ENV_STATUS_NUM, ENV_ERR_HDR);
 611:easyflash/src/ef_env.c ****         }
 612:easyflash/src/ef_env.c ****         env->crc_is_ok = false;
 613:easyflash/src/ef_env.c ****         return EF_READ_ERR;
 614:easyflash/src/ef_env.c ****     }
 615:easyflash/src/ef_env.c ****     else if (env->len > SECTOR_SIZE - SECTOR_HDR_DATA_SIZE && env->len < ENV_AREA_SIZE)
 616:easyflash/src/ef_env.c ****     {
 617:easyflash/src/ef_env.c ****         EF_ASSERT(0);
 618:easyflash/src/ef_env.c ****     }
 619:easyflash/src/ef_env.c **** 
 620:easyflash/src/ef_env.c ****     /* CRC32 data len(header.name_len + header.value_len + name + value) */
 621:easyflash/src/ef_env.c ****     crc_data_len = env->len - ENV_NAME_LEN_OFFSET;
 622:easyflash/src/ef_env.c ****     /* calculate the CRC32 value */
 623:easyflash/src/ef_env.c ****     for (len = 0, size = 0; len < crc_data_len; len += size)
 624:easyflash/src/ef_env.c ****     {
 625:easyflash/src/ef_env.c ****         if (len + sizeof(buf) < crc_data_len)
 626:easyflash/src/ef_env.c ****         {
 627:easyflash/src/ef_env.c ****             size = sizeof(buf);
 628:easyflash/src/ef_env.c ****         }
 629:easyflash/src/ef_env.c ****         else
 630:easyflash/src/ef_env.c ****         {
 631:easyflash/src/ef_env.c ****             size = crc_data_len - len;
 632:easyflash/src/ef_env.c ****         }
 633:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 15


 634:easyflash/src/ef_env.c ****         ef_port_read(env->addr.start + ENV_NAME_LEN_OFFSET + len, (uint32_t *) buf, EF_WG_ALIGN(siz
 635:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 636:easyflash/src/ef_env.c ****     }
 637:easyflash/src/ef_env.c ****     /* check CRC32 */
 638:easyflash/src/ef_env.c ****     if (calc_crc32 != env_hdr.crc32)
 639:easyflash/src/ef_env.c ****     {
 640:easyflash/src/ef_env.c ****         env->crc_is_ok = false;
 641:easyflash/src/ef_env.c ****         result = EF_READ_ERR;
 642:easyflash/src/ef_env.c ****     }
 643:easyflash/src/ef_env.c ****     else
 644:easyflash/src/ef_env.c ****     {
 645:easyflash/src/ef_env.c ****         env->crc_is_ok = true;
 646:easyflash/src/ef_env.c ****         /* the name is behind aligned ENV header */
 647:easyflash/src/ef_env.c ****         env_name_addr = env->addr.start + ENV_HDR_DATA_SIZE;
 648:easyflash/src/ef_env.c ****         ef_port_read(env_name_addr, (uint32_t *) env->name, EF_WG_ALIGN(env_hdr.name_len));
 649:easyflash/src/ef_env.c ****         /* the value is behind aligned name */
 650:easyflash/src/ef_env.c ****         env->addr.value = env_name_addr + EF_WG_ALIGN(env_hdr.name_len);
 651:easyflash/src/ef_env.c ****         env->value_len = env_hdr.value_len;
 652:easyflash/src/ef_env.c ****         env->name_len = env_hdr.name_len;
 653:easyflash/src/ef_env.c ****     }
 654:easyflash/src/ef_env.c **** 
 655:easyflash/src/ef_env.c ****     return result;
 656:easyflash/src/ef_env.c **** }
 657:easyflash/src/ef_env.c **** 
 658:easyflash/src/ef_env.c **** static EfErrCode read_sector_meta_data(uint32_t addr, sector_meta_data_t sector, bool traversal)
 659:easyflash/src/ef_env.c **** {
 660:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 661:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 662:easyflash/src/ef_env.c **** 
 663:easyflash/src/ef_env.c ****     EF_ASSERT(addr % SECTOR_SIZE == 0);
 664:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 665:easyflash/src/ef_env.c **** 
 666:easyflash/src/ef_env.c ****     /* read sector header raw data */
 667:easyflash/src/ef_env.c ****     ef_port_read(addr, (uint32_t *)&sec_hdr, sizeof(struct sector_hdr_data));
 668:easyflash/src/ef_env.c **** 
 669:easyflash/src/ef_env.c ****     sector->addr = addr;
 670:easyflash/src/ef_env.c ****     sector->magic = sec_hdr.magic;
 671:easyflash/src/ef_env.c ****     /* check magic word */
 672:easyflash/src/ef_env.c ****     if (sector->magic != SECTOR_MAGIC_WORD)
 673:easyflash/src/ef_env.c ****     {
 674:easyflash/src/ef_env.c ****         sector->check_ok = false;
 675:easyflash/src/ef_env.c ****         sector->combined = SECTOR_NOT_COMBINED;
 676:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 677:easyflash/src/ef_env.c ****     }
 678:easyflash/src/ef_env.c ****     sector->check_ok = true;
 679:easyflash/src/ef_env.c ****     /* get other sector meta data */
 680:easyflash/src/ef_env.c ****     sector->combined = sec_hdr.combined;
 681:easyflash/src/ef_env.c ****     sector->status.store = (sector_store_status_t) get_status(sec_hdr.status_table.store, SECTOR_ST
 682:easyflash/src/ef_env.c ****     sector->status.dirty = (sector_dirty_status_t) get_status(sec_hdr.status_table.dirty, SECTOR_DI
 683:easyflash/src/ef_env.c ****     /* traversal all ENV and calculate the remain space size */
 684:easyflash/src/ef_env.c ****     if (traversal)
 685:easyflash/src/ef_env.c ****     {
 686:easyflash/src/ef_env.c ****         sector->remain = 0;
 687:easyflash/src/ef_env.c ****         sector->empty_env = sector->addr + SECTOR_HDR_DATA_SIZE;
 688:easyflash/src/ef_env.c ****         if (sector->status.store == SECTOR_STORE_EMPTY)
 689:easyflash/src/ef_env.c ****         {
 690:easyflash/src/ef_env.c ****             sector->remain = SECTOR_SIZE - SECTOR_HDR_DATA_SIZE;
ARM GAS  /tmp/ccSGDQKw.s 			page 16


 691:easyflash/src/ef_env.c ****         }
 692:easyflash/src/ef_env.c ****         else if (sector->status.store == SECTOR_STORE_USING)
 693:easyflash/src/ef_env.c ****         {
 694:easyflash/src/ef_env.c ****             struct env_node_obj env_meta;
 695:easyflash/src/ef_env.c **** 
 696:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 697:easyflash/src/ef_env.c ****             if (get_sector_from_cache(addr, &sector->empty_env))
 698:easyflash/src/ef_env.c ****             {
 699:easyflash/src/ef_env.c ****                 sector->remain = SECTOR_SIZE - (sector->empty_env - sector->addr);
 700:easyflash/src/ef_env.c ****                 return result;
 701:easyflash/src/ef_env.c ****             }
 702:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 703:easyflash/src/ef_env.c **** 
 704:easyflash/src/ef_env.c ****             sector->remain = SECTOR_SIZE - SECTOR_HDR_DATA_SIZE;
 705:easyflash/src/ef_env.c ****             env_meta.addr.start = FAILED_ADDR;
 706:easyflash/src/ef_env.c ****             while ((env_meta.addr.start = get_next_env_addr(sector, &env_meta)) != FAILED_ADDR)
 707:easyflash/src/ef_env.c ****             {
 708:easyflash/src/ef_env.c ****                 read_env(&env_meta);
 709:easyflash/src/ef_env.c ****                 if (!env_meta.crc_is_ok)
 710:easyflash/src/ef_env.c ****                 {
 711:easyflash/src/ef_env.c ****                     if (env_meta.status != ENV_PRE_WRITE && env_meta.status != ENV_ERR_HDR)
 712:easyflash/src/ef_env.c ****                     {
 713:easyflash/src/ef_env.c ****                         EF_INFO("Error: The ENV (@0x%08X) CRC32 check failed!", env_meta.addr.start
 714:easyflash/src/ef_env.c ****                         sector->remain = 0;
 715:easyflash/src/ef_env.c ****                         result = EF_READ_ERR;
 716:easyflash/src/ef_env.c ****                         break;
 717:easyflash/src/ef_env.c ****                     }
 718:easyflash/src/ef_env.c ****                 }
 719:easyflash/src/ef_env.c ****                 sector->empty_env += env_meta.len;
 720:easyflash/src/ef_env.c ****                 sector->remain -= env_meta.len;
 721:easyflash/src/ef_env.c ****             }
 722:easyflash/src/ef_env.c ****             /* check the empty ENV address by read continue 0xFF on flash  */
 723:easyflash/src/ef_env.c ****             {
 724:easyflash/src/ef_env.c ****                 uint32_t ff_addr;
 725:easyflash/src/ef_env.c **** 
 726:easyflash/src/ef_env.c ****                 ff_addr = continue_ff_addr(sector->empty_env, sector->addr + SECTOR_SIZE);
 727:easyflash/src/ef_env.c ****                 /* check the flash data is clean */
 728:easyflash/src/ef_env.c ****                 if (sector->empty_env != ff_addr)
 729:easyflash/src/ef_env.c ****                 {
 730:easyflash/src/ef_env.c ****                     /* update the sector information */
 731:easyflash/src/ef_env.c ****                     sector->empty_env = ff_addr;
 732:easyflash/src/ef_env.c ****                     sector->remain = SECTOR_SIZE - (ff_addr - sector->addr);
 733:easyflash/src/ef_env.c ****                 }
 734:easyflash/src/ef_env.c ****             }
 735:easyflash/src/ef_env.c **** 
 736:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 737:easyflash/src/ef_env.c ****             update_sector_cache(sector->addr, sector->empty_env);
 738:easyflash/src/ef_env.c **** #endif
 739:easyflash/src/ef_env.c ****         }
 740:easyflash/src/ef_env.c ****     }
 741:easyflash/src/ef_env.c **** 
 742:easyflash/src/ef_env.c ****     return result;
 743:easyflash/src/ef_env.c **** }
 744:easyflash/src/ef_env.c **** 
 745:easyflash/src/ef_env.c **** static uint32_t get_next_sector_addr(sector_meta_data_t pre_sec)
 746:easyflash/src/ef_env.c **** {
 747:easyflash/src/ef_env.c ****     uint32_t next_addr;
ARM GAS  /tmp/ccSGDQKw.s 			page 17


 748:easyflash/src/ef_env.c **** 
 749:easyflash/src/ef_env.c ****     if (pre_sec->addr == FAILED_ADDR)
 750:easyflash/src/ef_env.c ****     {
 751:easyflash/src/ef_env.c ****         return env_start_addr;
 752:easyflash/src/ef_env.c ****     }
 753:easyflash/src/ef_env.c ****     else
 754:easyflash/src/ef_env.c ****     {
 755:easyflash/src/ef_env.c ****         /* check ENV sector combined */
 756:easyflash/src/ef_env.c ****         if (pre_sec->combined == SECTOR_NOT_COMBINED)
 757:easyflash/src/ef_env.c ****         {
 758:easyflash/src/ef_env.c ****             next_addr = pre_sec->addr + SECTOR_SIZE;
 759:easyflash/src/ef_env.c ****         }
 760:easyflash/src/ef_env.c ****         else
 761:easyflash/src/ef_env.c ****         {
 762:easyflash/src/ef_env.c ****             next_addr = pre_sec->addr + pre_sec->combined * SECTOR_SIZE;
 763:easyflash/src/ef_env.c ****         }
 764:easyflash/src/ef_env.c ****         /* check range */
 765:easyflash/src/ef_env.c ****         if (next_addr < env_start_addr + ENV_AREA_SIZE)
 766:easyflash/src/ef_env.c ****         {
 767:easyflash/src/ef_env.c ****             return next_addr;
 768:easyflash/src/ef_env.c ****         }
 769:easyflash/src/ef_env.c ****         else
 770:easyflash/src/ef_env.c ****         {
 771:easyflash/src/ef_env.c ****             /* no sector */
 772:easyflash/src/ef_env.c ****             return FAILED_ADDR;
 773:easyflash/src/ef_env.c ****         }
 774:easyflash/src/ef_env.c ****     }
 775:easyflash/src/ef_env.c **** }
 776:easyflash/src/ef_env.c **** 
 777:easyflash/src/ef_env.c **** static void env_iterator(env_node_obj_t env, void *arg1, void *arg2,
 778:easyflash/src/ef_env.c ****                          bool (*callback)(env_node_obj_t env, void *arg1, void *arg2))
 779:easyflash/src/ef_env.c **** {
 780:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 781:easyflash/src/ef_env.c ****     uint32_t sec_addr;
 782:easyflash/src/ef_env.c **** 
 783:easyflash/src/ef_env.c ****     sector.addr = FAILED_ADDR;
 784:easyflash/src/ef_env.c ****     /* search all sectors */
 785:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(&sector)) != FAILED_ADDR)
 786:easyflash/src/ef_env.c ****     {
 787:easyflash/src/ef_env.c ****         if (read_sector_meta_data(sec_addr, &sector, false) != EF_NO_ERR)
 788:easyflash/src/ef_env.c ****         {
 789:easyflash/src/ef_env.c ****             continue;
 790:easyflash/src/ef_env.c ****         }
 791:easyflash/src/ef_env.c ****         if (callback == NULL)
 792:easyflash/src/ef_env.c ****         {
 793:easyflash/src/ef_env.c ****             continue;
 794:easyflash/src/ef_env.c ****         }
 795:easyflash/src/ef_env.c ****         /* sector has ENV */
 796:easyflash/src/ef_env.c ****         if (sector.status.store == SECTOR_STORE_USING || sector.status.store == SECTOR_STORE_FULL)
 797:easyflash/src/ef_env.c ****         {
 798:easyflash/src/ef_env.c ****             env->addr.start = FAILED_ADDR;
 799:easyflash/src/ef_env.c ****             /* search all ENV */
 800:easyflash/src/ef_env.c ****             while ((env->addr.start = get_next_env_addr(&sector, env)) != FAILED_ADDR)
 801:easyflash/src/ef_env.c ****             {
 802:easyflash/src/ef_env.c ****                 read_env(env);
 803:easyflash/src/ef_env.c ****                 /* iterator is interrupted when callback return true */
 804:easyflash/src/ef_env.c ****                 if (callback(env, arg1, arg2))
ARM GAS  /tmp/ccSGDQKw.s 			page 18


 805:easyflash/src/ef_env.c ****                 {
 806:easyflash/src/ef_env.c ****                     return;
 807:easyflash/src/ef_env.c ****                 }
 808:easyflash/src/ef_env.c ****             }
 809:easyflash/src/ef_env.c ****         }
 810:easyflash/src/ef_env.c ****     }
 811:easyflash/src/ef_env.c **** }
 812:easyflash/src/ef_env.c **** 
 813:easyflash/src/ef_env.c **** static bool find_env_cb(env_node_obj_t env, void *arg1, void *arg2)
 814:easyflash/src/ef_env.c **** {
 815:easyflash/src/ef_env.c ****     const char *key = arg1;
 816:easyflash/src/ef_env.c ****     bool *find_ok = arg2;
 817:easyflash/src/ef_env.c ****     uint8_t max_len = strlen(key);
 818:easyflash/src/ef_env.c **** 
 819:easyflash/src/ef_env.c ****     if (max_len < env->name_len)
 820:easyflash/src/ef_env.c ****     {
 821:easyflash/src/ef_env.c ****         max_len = env->name_len;
 822:easyflash/src/ef_env.c ****     }
 823:easyflash/src/ef_env.c ****     /* check ENV */
 824:easyflash/src/ef_env.c ****     if (env->crc_is_ok && env->status == ENV_WRITE && !strncmp(env->name, key, max_len))
 825:easyflash/src/ef_env.c ****     {
 826:easyflash/src/ef_env.c ****         *find_ok = true;
 827:easyflash/src/ef_env.c ****         return true;
 828:easyflash/src/ef_env.c ****     }
 829:easyflash/src/ef_env.c ****     return false;
 830:easyflash/src/ef_env.c **** }
 831:easyflash/src/ef_env.c **** 
 832:easyflash/src/ef_env.c **** static bool find_env_no_cache(const char *key, env_node_obj_t env)
 833:easyflash/src/ef_env.c **** {
 834:easyflash/src/ef_env.c ****     bool find_ok = false;
 835:easyflash/src/ef_env.c **** 
 836:easyflash/src/ef_env.c ****     env_iterator(env, (void *)key, &find_ok, find_env_cb);
 837:easyflash/src/ef_env.c **** 
 838:easyflash/src/ef_env.c ****     return find_ok;
 839:easyflash/src/ef_env.c **** }
 840:easyflash/src/ef_env.c **** 
 841:easyflash/src/ef_env.c **** static bool find_env(const char *key, env_node_obj_t env)
 842:easyflash/src/ef_env.c **** {
 843:easyflash/src/ef_env.c ****     bool find_ok = false;
 844:easyflash/src/ef_env.c **** 
 845:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 846:easyflash/src/ef_env.c ****     size_t key_len = strlen(key);
 847:easyflash/src/ef_env.c **** 
 848:easyflash/src/ef_env.c ****     if (get_env_from_cache(key, key_len, &env->addr.start))
 849:easyflash/src/ef_env.c ****     {
 850:easyflash/src/ef_env.c ****         read_env(env);
 851:easyflash/src/ef_env.c ****         return true;
 852:easyflash/src/ef_env.c ****     }
 853:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 854:easyflash/src/ef_env.c **** 
 855:easyflash/src/ef_env.c ****     find_ok = find_env_no_cache(key, env);
 856:easyflash/src/ef_env.c **** 
 857:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
 858:easyflash/src/ef_env.c ****     if (find_ok)
 859:easyflash/src/ef_env.c ****     {
 860:easyflash/src/ef_env.c ****         update_env_cache(key, key_len, env->addr.start);
 861:easyflash/src/ef_env.c ****     }
ARM GAS  /tmp/ccSGDQKw.s 			page 19


 862:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 863:easyflash/src/ef_env.c **** 
 864:easyflash/src/ef_env.c ****     return find_ok;
 865:easyflash/src/ef_env.c **** }
 866:easyflash/src/ef_env.c **** 
 867:easyflash/src/ef_env.c **** static bool ef_is_str(uint8_t *value, size_t len)
 868:easyflash/src/ef_env.c **** {
 869:easyflash/src/ef_env.c **** #define __is_print(ch)       ((unsigned int)((ch) - ' ') < 127u - ' ')
 870:easyflash/src/ef_env.c ****     size_t i;
 871:easyflash/src/ef_env.c **** 
 872:easyflash/src/ef_env.c ****     for (i = 0; i < len; i++)
 873:easyflash/src/ef_env.c ****     {
 874:easyflash/src/ef_env.c ****         if (!__is_print(value[i]))
 875:easyflash/src/ef_env.c ****         {
 876:easyflash/src/ef_env.c ****             return false;
 877:easyflash/src/ef_env.c ****         }
 878:easyflash/src/ef_env.c ****     }
 879:easyflash/src/ef_env.c ****     return true;
 880:easyflash/src/ef_env.c **** }
 881:easyflash/src/ef_env.c **** 
 882:easyflash/src/ef_env.c **** static size_t get_env(const char *key, void *value_buf, size_t buf_len, size_t *value_len)
 883:easyflash/src/ef_env.c **** {
 884:easyflash/src/ef_env.c ****     struct env_node_obj env;
 885:easyflash/src/ef_env.c ****     size_t read_len = 0;
 886:easyflash/src/ef_env.c **** 
 887:easyflash/src/ef_env.c ****     if (find_env(key, &env))
 888:easyflash/src/ef_env.c ****     {
 889:easyflash/src/ef_env.c ****         if (value_len)
 890:easyflash/src/ef_env.c ****         {
 891:easyflash/src/ef_env.c ****             *value_len = env.value_len;
 892:easyflash/src/ef_env.c ****         }
 893:easyflash/src/ef_env.c ****         if (buf_len > env.value_len)
 894:easyflash/src/ef_env.c ****         {
 895:easyflash/src/ef_env.c ****             read_len = env.value_len;
 896:easyflash/src/ef_env.c ****         }
 897:easyflash/src/ef_env.c ****         else
 898:easyflash/src/ef_env.c ****         {
 899:easyflash/src/ef_env.c ****             read_len = buf_len;
 900:easyflash/src/ef_env.c ****         }
 901:easyflash/src/ef_env.c ****         if (value_buf)
 902:easyflash/src/ef_env.c ****         {
 903:easyflash/src/ef_env.c ****             ef_port_read(env.addr.value, (uint32_t *) value_buf, read_len);
 904:easyflash/src/ef_env.c ****         }
 905:easyflash/src/ef_env.c ****     }
 906:easyflash/src/ef_env.c **** 
 907:easyflash/src/ef_env.c ****     return read_len;
 908:easyflash/src/ef_env.c **** }
 909:easyflash/src/ef_env.c **** 
 910:easyflash/src/ef_env.c **** /**
 911:easyflash/src/ef_env.c ****  * Get a ENV object by key name
 912:easyflash/src/ef_env.c ****  *
 913:easyflash/src/ef_env.c ****  * @param key ENV name
 914:easyflash/src/ef_env.c ****  * @param env ENV object
 915:easyflash/src/ef_env.c ****  *
 916:easyflash/src/ef_env.c ****  * @return TRUE: find the ENV is OK, else return false
 917:easyflash/src/ef_env.c ****  */
 918:easyflash/src/ef_env.c **** bool ef_get_env_obj(const char *key, env_node_obj_t env)
ARM GAS  /tmp/ccSGDQKw.s 			page 20


 919:easyflash/src/ef_env.c **** {
 920:easyflash/src/ef_env.c ****     bool find_ok = false;
 921:easyflash/src/ef_env.c **** 
 922:easyflash/src/ef_env.c ****     if (!init_ok)
 923:easyflash/src/ef_env.c ****     {
 924:easyflash/src/ef_env.c ****         EF_INFO("ENV isn't initialize OK.");
 925:easyflash/src/ef_env.c ****         return 0;
 926:easyflash/src/ef_env.c ****     }
 927:easyflash/src/ef_env.c **** 
 928:easyflash/src/ef_env.c ****     /* lock the ENV cache */
 929:easyflash/src/ef_env.c ****     ef_port_env_lock();
 930:easyflash/src/ef_env.c **** 
 931:easyflash/src/ef_env.c ****     find_ok = find_env(key, env);
 932:easyflash/src/ef_env.c **** 
 933:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
 934:easyflash/src/ef_env.c ****     ef_port_env_unlock();
 935:easyflash/src/ef_env.c **** 
 936:easyflash/src/ef_env.c ****     return find_ok;
 937:easyflash/src/ef_env.c **** }
 938:easyflash/src/ef_env.c **** 
 939:easyflash/src/ef_env.c **** /**
 940:easyflash/src/ef_env.c ****  * Get a blob ENV value by key name.
 941:easyflash/src/ef_env.c ****  *
 942:easyflash/src/ef_env.c ****  * @param key ENV name
 943:easyflash/src/ef_env.c ****  * @param value_buf ENV blob buffer
 944:easyflash/src/ef_env.c ****  * @param buf_len ENV blob buffer length
 945:easyflash/src/ef_env.c ****  * @param saved_value_len return the length of the value saved on the flash, 0: NOT found
 946:easyflash/src/ef_env.c ****  *
 947:easyflash/src/ef_env.c ****  * @return the actually get size on successful
 948:easyflash/src/ef_env.c ****  */
 949:easyflash/src/ef_env.c **** size_t ef_get_env_blob(const char *key, void *value_buf, size_t buf_len, size_t *saved_value_len)
 950:easyflash/src/ef_env.c **** {
 951:easyflash/src/ef_env.c ****     size_t read_len = 0;
 952:easyflash/src/ef_env.c **** 
 953:easyflash/src/ef_env.c ****     if (!init_ok)
 954:easyflash/src/ef_env.c ****     {
 955:easyflash/src/ef_env.c ****         EF_INFO("ENV isn't initialize OK.");
 956:easyflash/src/ef_env.c ****         return 0;
 957:easyflash/src/ef_env.c ****     }
 958:easyflash/src/ef_env.c **** 
 959:easyflash/src/ef_env.c ****     /* lock the ENV cache */
 960:easyflash/src/ef_env.c ****     ef_port_env_lock();
 961:easyflash/src/ef_env.c **** 
 962:easyflash/src/ef_env.c ****     read_len = get_env(key, value_buf, buf_len, saved_value_len);
 963:easyflash/src/ef_env.c **** 
 964:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
 965:easyflash/src/ef_env.c ****     ef_port_env_unlock();
 966:easyflash/src/ef_env.c **** 
 967:easyflash/src/ef_env.c ****     return read_len;
 968:easyflash/src/ef_env.c **** }
 969:easyflash/src/ef_env.c **** 
 970:easyflash/src/ef_env.c **** /**
 971:easyflash/src/ef_env.c ****  * Get an ENV value by key name.
 972:easyflash/src/ef_env.c ****  *
 973:easyflash/src/ef_env.c ****  * @note this function is NOT supported reentrant
 974:easyflash/src/ef_env.c ****  * @note this function is DEPRECATED
 975:easyflash/src/ef_env.c ****  *
ARM GAS  /tmp/ccSGDQKw.s 			page 21


 976:easyflash/src/ef_env.c ****  * @param key ENV name
 977:easyflash/src/ef_env.c ****  *
 978:easyflash/src/ef_env.c ****  * @return value
 979:easyflash/src/ef_env.c ****  */
 980:easyflash/src/ef_env.c **** char *ef_get_env(const char *key)
 981:easyflash/src/ef_env.c **** {
 982:easyflash/src/ef_env.c ****     static char value[EF_STR_ENV_VALUE_MAX_SIZE + 1];
 983:easyflash/src/ef_env.c ****     size_t get_size;
 984:easyflash/src/ef_env.c **** 
 985:easyflash/src/ef_env.c ****     if ((get_size = ef_get_env_blob(key, value, EF_STR_ENV_VALUE_MAX_SIZE, NULL)) > 0)
 986:easyflash/src/ef_env.c ****     {
 987:easyflash/src/ef_env.c ****         /* the return value must be string */
 988:easyflash/src/ef_env.c ****         if (ef_is_str((uint8_t *)value, get_size))
 989:easyflash/src/ef_env.c ****         {
 990:easyflash/src/ef_env.c ****             value[get_size] = '\0';
 991:easyflash/src/ef_env.c ****             return value;
 992:easyflash/src/ef_env.c ****         }
 993:easyflash/src/ef_env.c ****         else
 994:easyflash/src/ef_env.c ****         {
 995:easyflash/src/ef_env.c ****             EF_INFO("Warning: The ENV value isn't string. Could not be returned");
 996:easyflash/src/ef_env.c ****             return NULL;
 997:easyflash/src/ef_env.c ****         }
 998:easyflash/src/ef_env.c ****     }
 999:easyflash/src/ef_env.c **** 
1000:easyflash/src/ef_env.c ****     return NULL;
1001:easyflash/src/ef_env.c **** }
1002:easyflash/src/ef_env.c **** 
1003:easyflash/src/ef_env.c **** /**
1004:easyflash/src/ef_env.c ****  * read the ENV value by ENV object
1005:easyflash/src/ef_env.c ****  *
1006:easyflash/src/ef_env.c ****  * @param env ENV object
1007:easyflash/src/ef_env.c ****  * @param value_buf the buffer for store ENV value
1008:easyflash/src/ef_env.c ****  * @param buf_len buffer length
1009:easyflash/src/ef_env.c ****  *
1010:easyflash/src/ef_env.c ****  * @return the actually read size on successful
1011:easyflash/src/ef_env.c ****  */
1012:easyflash/src/ef_env.c **** size_t ef_read_env_value(env_node_obj_t env, uint8_t *value_buf, size_t buf_len)
1013:easyflash/src/ef_env.c **** {
1014:easyflash/src/ef_env.c ****     size_t read_len = 0;
1015:easyflash/src/ef_env.c **** 
1016:easyflash/src/ef_env.c ****     EF_ASSERT(env);
1017:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
1018:easyflash/src/ef_env.c **** 
1019:easyflash/src/ef_env.c ****     if (!init_ok)
1020:easyflash/src/ef_env.c ****     {
1021:easyflash/src/ef_env.c ****         EF_INFO("ENV isn't initialize OK.");
1022:easyflash/src/ef_env.c ****         return 0;
1023:easyflash/src/ef_env.c ****     }
1024:easyflash/src/ef_env.c **** 
1025:easyflash/src/ef_env.c ****     if (env->crc_is_ok)
1026:easyflash/src/ef_env.c ****     {
1027:easyflash/src/ef_env.c ****         /* lock the ENV cache */
1028:easyflash/src/ef_env.c ****         ef_port_env_lock();
1029:easyflash/src/ef_env.c **** 
1030:easyflash/src/ef_env.c ****         if (buf_len > env->value_len)
1031:easyflash/src/ef_env.c ****         {
1032:easyflash/src/ef_env.c ****             read_len = env->value_len;
ARM GAS  /tmp/ccSGDQKw.s 			page 22


1033:easyflash/src/ef_env.c ****         }
1034:easyflash/src/ef_env.c ****         else
1035:easyflash/src/ef_env.c ****         {
1036:easyflash/src/ef_env.c ****             read_len = buf_len;
1037:easyflash/src/ef_env.c ****         }
1038:easyflash/src/ef_env.c **** 
1039:easyflash/src/ef_env.c ****         ef_port_read(env->addr.value, (uint32_t *) value_buf, read_len);
1040:easyflash/src/ef_env.c ****         /* unlock the ENV cache */
1041:easyflash/src/ef_env.c ****         ef_port_env_unlock();
1042:easyflash/src/ef_env.c ****     }
1043:easyflash/src/ef_env.c **** 
1044:easyflash/src/ef_env.c ****     return read_len;
1045:easyflash/src/ef_env.c **** }
1046:easyflash/src/ef_env.c **** 
1047:easyflash/src/ef_env.c **** static EfErrCode write_env_hdr(uint32_t addr, env_hdr_data_t env_hdr)
1048:easyflash/src/ef_env.c **** {
1049:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1050:easyflash/src/ef_env.c ****     /* write the status will by write granularity */
1051:easyflash/src/ef_env.c ****     result = write_status(addr, env_hdr->status_table, ENV_STATUS_NUM, ENV_PRE_WRITE);
1052:easyflash/src/ef_env.c ****     if (result != EF_NO_ERR)
1053:easyflash/src/ef_env.c ****     {
1054:easyflash/src/ef_env.c ****         return result;
1055:easyflash/src/ef_env.c ****     }
1056:easyflash/src/ef_env.c ****     /* write other header data */
1057:easyflash/src/ef_env.c ****     result = ef_port_write(addr + ENV_MAGIC_OFFSET, &env_hdr->magic, sizeof(struct env_hdr_data) - 
1058:easyflash/src/ef_env.c **** 
1059:easyflash/src/ef_env.c ****     return result;
1060:easyflash/src/ef_env.c **** }
1061:easyflash/src/ef_env.c **** 
1062:easyflash/src/ef_env.c **** static EfErrCode format_sector(uint32_t addr, uint32_t combined_value)
1063:easyflash/src/ef_env.c **** {
1064:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1065:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
1066:easyflash/src/ef_env.c **** 
1067:easyflash/src/ef_env.c ****     EF_ASSERT(addr % SECTOR_SIZE == 0);
1068:easyflash/src/ef_env.c **** 
1069:easyflash/src/ef_env.c ****     result = ef_port_erase(addr, SECTOR_SIZE);
1070:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR)
1071:easyflash/src/ef_env.c ****     {
1072:easyflash/src/ef_env.c ****         /* initialize the header data */
1073:easyflash/src/ef_env.c ****         memset(&sec_hdr, 0xFF, sizeof(struct sector_hdr_data));
1074:easyflash/src/ef_env.c ****         set_status(sec_hdr.status_table.store, SECTOR_STORE_STATUS_NUM, SECTOR_STORE_EMPTY);
1075:easyflash/src/ef_env.c ****         set_status(sec_hdr.status_table.dirty, SECTOR_DIRTY_STATUS_NUM, SECTOR_DIRTY_FALSE);
1076:easyflash/src/ef_env.c ****         sec_hdr.magic = SECTOR_MAGIC_WORD;
1077:easyflash/src/ef_env.c ****         sec_hdr.combined = combined_value;
1078:easyflash/src/ef_env.c ****         sec_hdr.reserved = 0xFFFFFFFF;
1079:easyflash/src/ef_env.c ****         /* save the header */
1080:easyflash/src/ef_env.c ****         result = ef_port_write(addr, (uint32_t *)&sec_hdr, sizeof(struct sector_hdr_data));
1081:easyflash/src/ef_env.c **** 
1082:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
1083:easyflash/src/ef_env.c ****         /* delete the sector cache */
1084:easyflash/src/ef_env.c ****         update_sector_cache(addr, addr + SECTOR_SIZE);
1085:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
1086:easyflash/src/ef_env.c ****     }
1087:easyflash/src/ef_env.c **** 
1088:easyflash/src/ef_env.c ****     return result;
1089:easyflash/src/ef_env.c **** }
ARM GAS  /tmp/ccSGDQKw.s 			page 23


1090:easyflash/src/ef_env.c **** 
1091:easyflash/src/ef_env.c **** static EfErrCode update_sec_status(sector_meta_data_t sector, size_t new_env_len, bool *is_full)
1092:easyflash/src/ef_env.c **** {
1093:easyflash/src/ef_env.c ****     uint8_t status_table[STORE_STATUS_TABLE_SIZE];
1094:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1095:easyflash/src/ef_env.c ****     /* change the current sector status */
1096:easyflash/src/ef_env.c ****     if (sector->status.store == SECTOR_STORE_EMPTY)
1097:easyflash/src/ef_env.c ****     {
1098:easyflash/src/ef_env.c ****         /* change the sector status to using */
1099:easyflash/src/ef_env.c ****         result = write_status(sector->addr, status_table, SECTOR_STORE_STATUS_NUM, SECTOR_STORE_USI
1100:easyflash/src/ef_env.c ****     }
1101:easyflash/src/ef_env.c ****     else if (sector->status.store == SECTOR_STORE_USING)
1102:easyflash/src/ef_env.c ****     {
1103:easyflash/src/ef_env.c ****         /* check remain size */
1104:easyflash/src/ef_env.c ****         if (sector->remain < EF_SEC_REMAIN_THRESHOLD || sector->remain - new_env_len < EF_SEC_REMAI
1105:easyflash/src/ef_env.c ****         {
1106:easyflash/src/ef_env.c ****             /* change the sector status to full */
1107:easyflash/src/ef_env.c ****             result = write_status(sector->addr, status_table, SECTOR_STORE_STATUS_NUM, SECTOR_STORE
1108:easyflash/src/ef_env.c **** 
1109:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
1110:easyflash/src/ef_env.c ****             /* delete the sector cache */
1111:easyflash/src/ef_env.c ****             update_sector_cache(sector->addr, sector->addr + SECTOR_SIZE);
1112:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
1113:easyflash/src/ef_env.c **** 
1114:easyflash/src/ef_env.c ****             if (is_full)
1115:easyflash/src/ef_env.c ****             {
1116:easyflash/src/ef_env.c ****                 *is_full = true;
1117:easyflash/src/ef_env.c ****             }
1118:easyflash/src/ef_env.c ****         }
1119:easyflash/src/ef_env.c ****         else if (is_full)
1120:easyflash/src/ef_env.c ****         {
1121:easyflash/src/ef_env.c ****             *is_full = false;
1122:easyflash/src/ef_env.c ****         }
1123:easyflash/src/ef_env.c ****     }
1124:easyflash/src/ef_env.c **** 
1125:easyflash/src/ef_env.c ****     return result;
1126:easyflash/src/ef_env.c **** }
1127:easyflash/src/ef_env.c **** 
1128:easyflash/src/ef_env.c **** static void sector_iterator(sector_meta_data_t sector, sector_store_status_t status, void *arg1, vo
1129:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
1130:easyflash/src/ef_env.c **** {
1131:easyflash/src/ef_env.c ****     uint32_t sec_addr;
1132:easyflash/src/ef_env.c **** 
1133:easyflash/src/ef_env.c ****     /* search all sectors */
1134:easyflash/src/ef_env.c ****     sector->addr = FAILED_ADDR;
1135:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
1136:easyflash/src/ef_env.c ****     {
1137:easyflash/src/ef_env.c ****         read_sector_meta_data(sec_addr, sector, false);
1138:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
1139:easyflash/src/ef_env.c ****         {
1140:easyflash/src/ef_env.c ****             if (traversal_env)
1141:easyflash/src/ef_env.c ****             {
1142:easyflash/src/ef_env.c ****                 read_sector_meta_data(sec_addr, sector, traversal_env);
1143:easyflash/src/ef_env.c ****             }
1144:easyflash/src/ef_env.c ****             /* iterator is interrupted when callback return true */
1145:easyflash/src/ef_env.c ****             if (callback && callback(sector, arg1, arg2))
1146:easyflash/src/ef_env.c ****             {
ARM GAS  /tmp/ccSGDQKw.s 			page 24


1147:easyflash/src/ef_env.c ****                 return;
1148:easyflash/src/ef_env.c ****             }
1149:easyflash/src/ef_env.c ****         }
1150:easyflash/src/ef_env.c ****     }
1151:easyflash/src/ef_env.c **** }
1152:easyflash/src/ef_env.c **** 
1153:easyflash/src/ef_env.c **** static bool sector_statistics_cb(sector_meta_data_t sector, void *arg1, void *arg2)
1154:easyflash/src/ef_env.c **** {
1155:easyflash/src/ef_env.c ****     size_t *empty_sector = arg1, *using_sector = arg2;
1156:easyflash/src/ef_env.c **** 
1157:easyflash/src/ef_env.c ****     if (sector->check_ok && sector->status.store == SECTOR_STORE_EMPTY)
1158:easyflash/src/ef_env.c ****     {
1159:easyflash/src/ef_env.c ****         (*empty_sector)++;
1160:easyflash/src/ef_env.c ****     }
1161:easyflash/src/ef_env.c ****     else if (sector->check_ok && sector->status.store == SECTOR_STORE_USING)
1162:easyflash/src/ef_env.c ****     {
1163:easyflash/src/ef_env.c ****         (*using_sector)++;
1164:easyflash/src/ef_env.c ****     }
1165:easyflash/src/ef_env.c **** 
1166:easyflash/src/ef_env.c ****     return false;
1167:easyflash/src/ef_env.c **** }
1168:easyflash/src/ef_env.c **** 
1169:easyflash/src/ef_env.c **** static bool alloc_env_cb(sector_meta_data_t sector, void *arg1, void *arg2)
1170:easyflash/src/ef_env.c **** {
1171:easyflash/src/ef_env.c ****     size_t *env_size = arg1;
1172:easyflash/src/ef_env.c ****     uint32_t *empty_env = arg2;
1173:easyflash/src/ef_env.c **** 
1174:easyflash/src/ef_env.c ****     /* 1. sector has space
1175:easyflash/src/ef_env.c ****      * 2. the NO dirty sector
1176:easyflash/src/ef_env.c ****      * 3. the dirty sector only when the gc_request is false */
1177:easyflash/src/ef_env.c ****     if (sector->check_ok && sector->remain > *env_size
1178:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
1179:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
1180:easyflash/src/ef_env.c ****     {
1181:easyflash/src/ef_env.c ****         *empty_env = sector->empty_env;
1182:easyflash/src/ef_env.c ****         return true;
1183:easyflash/src/ef_env.c ****     }
1184:easyflash/src/ef_env.c **** 
1185:easyflash/src/ef_env.c ****     return false;
1186:easyflash/src/ef_env.c **** }
1187:easyflash/src/ef_env.c **** 
1188:easyflash/src/ef_env.c **** static uint32_t alloc_env(sector_meta_data_t sector, size_t env_size)
1189:easyflash/src/ef_env.c **** {
1190:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
1191:easyflash/src/ef_env.c ****     size_t empty_sector = 0, using_sector = 0;
1192:easyflash/src/ef_env.c **** 
1193:easyflash/src/ef_env.c ****     /* sector status statistics */
1194:easyflash/src/ef_env.c ****     sector_iterator(sector, SECTOR_STORE_UNUSED, &empty_sector, &using_sector, sector_statistics_cb
1195:easyflash/src/ef_env.c ****     if (using_sector > 0)
1196:easyflash/src/ef_env.c ****     {
1197:easyflash/src/ef_env.c ****         /* alloc the ENV from the using status sector first */
1198:easyflash/src/ef_env.c ****         sector_iterator(sector, SECTOR_STORE_USING, &env_size, &empty_env, alloc_env_cb, true);
1199:easyflash/src/ef_env.c ****     }
1200:easyflash/src/ef_env.c ****     if (empty_sector > 0 && empty_env == FAILED_ADDR)
1201:easyflash/src/ef_env.c ****     {
1202:easyflash/src/ef_env.c ****         if (empty_sector > EF_GC_EMPTY_SEC_THRESHOLD || gc_request)
1203:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 25


1204:easyflash/src/ef_env.c ****             sector_iterator(sector, SECTOR_STORE_EMPTY, &env_size, &empty_env, alloc_env_cb, true);
1205:easyflash/src/ef_env.c ****         }
1206:easyflash/src/ef_env.c ****         else
1207:easyflash/src/ef_env.c ****         {
1208:easyflash/src/ef_env.c ****             /* no space for new ENV now will GC and retry */
1209:easyflash/src/ef_env.c ****             EF_DEBUG("Trigger a GC check after alloc ENV failed.");
1210:easyflash/src/ef_env.c ****             gc_request = true;
1211:easyflash/src/ef_env.c ****         }
1212:easyflash/src/ef_env.c ****     }
1213:easyflash/src/ef_env.c **** 
1214:easyflash/src/ef_env.c ****     return empty_env;
1215:easyflash/src/ef_env.c **** }
1216:easyflash/src/ef_env.c **** 
1217:easyflash/src/ef_env.c **** static EfErrCode del_env(const char *key, env_node_obj_t old_env, bool complete_del)
1218:easyflash/src/ef_env.c **** {
1219:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1220:easyflash/src/ef_env.c ****     uint32_t dirty_status_addr;
1221:easyflash/src/ef_env.c ****     static bool last_is_complete_del = false;
1222:easyflash/src/ef_env.c **** 
1223:easyflash/src/ef_env.c **** #if (ENV_STATUS_TABLE_SIZE >= DIRTY_STATUS_TABLE_SIZE)
1224:easyflash/src/ef_env.c ****     uint8_t status_table[ENV_STATUS_TABLE_SIZE];
1225:easyflash/src/ef_env.c **** #else
1226:easyflash/src/ef_env.c ****     uint8_t status_table[DIRTY_STATUS_TABLE_SIZE];
1227:easyflash/src/ef_env.c **** #endif
1228:easyflash/src/ef_env.c **** 
1229:easyflash/src/ef_env.c ****     /* need find ENV */
1230:easyflash/src/ef_env.c ****     if (!old_env)
1231:easyflash/src/ef_env.c ****     {
1232:easyflash/src/ef_env.c ****         struct env_node_obj env;
1233:easyflash/src/ef_env.c ****         /* find ENV */
1234:easyflash/src/ef_env.c ****         if (find_env(key, &env))
1235:easyflash/src/ef_env.c ****         {
1236:easyflash/src/ef_env.c ****             old_env = &env;
1237:easyflash/src/ef_env.c ****         }
1238:easyflash/src/ef_env.c ****         else
1239:easyflash/src/ef_env.c ****         {
1240:easyflash/src/ef_env.c ****             EF_DEBUG("Not found '%s' in ENV.", key);
1241:easyflash/src/ef_env.c ****             return EF_ENV_NAME_ERR;
1242:easyflash/src/ef_env.c ****         }
1243:easyflash/src/ef_env.c ****     }
1244:easyflash/src/ef_env.c ****     /* change and save the new status */
1245:easyflash/src/ef_env.c ****     if (!complete_del)
1246:easyflash/src/ef_env.c ****     {
1247:easyflash/src/ef_env.c ****         result = write_status(old_env->addr.start, status_table, ENV_STATUS_NUM, ENV_PRE_DELETE);
1248:easyflash/src/ef_env.c ****         last_is_complete_del = true;
1249:easyflash/src/ef_env.c ****     }
1250:easyflash/src/ef_env.c ****     else
1251:easyflash/src/ef_env.c ****     {
1252:easyflash/src/ef_env.c ****         result = write_status(old_env->addr.start, status_table, ENV_STATUS_NUM, ENV_DELETED);
1253:easyflash/src/ef_env.c **** 
1254:easyflash/src/ef_env.c ****         if (!last_is_complete_del && result == EF_NO_ERR)
1255:easyflash/src/ef_env.c ****         {
1256:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
1257:easyflash/src/ef_env.c ****             /* only delete the ENV in flash and cache when only using del_env(key, env, true) in ef
1258:easyflash/src/ef_env.c ****             update_env_cache(key, strlen(key), FAILED_ADDR);
1259:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
1260:easyflash/src/ef_env.c ****         }
ARM GAS  /tmp/ccSGDQKw.s 			page 26


1261:easyflash/src/ef_env.c **** 
1262:easyflash/src/ef_env.c ****         last_is_complete_del = false;
1263:easyflash/src/ef_env.c ****     }
1264:easyflash/src/ef_env.c **** 
1265:easyflash/src/ef_env.c ****     dirty_status_addr = EF_ALIGN_DOWN(old_env->addr.start, SECTOR_SIZE) + SECTOR_DIRTY_OFFSET;
1266:easyflash/src/ef_env.c ****     /* read and change the sector dirty status */
1267:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR
1268:easyflash/src/ef_env.c ****             && read_status(dirty_status_addr, status_table, SECTOR_DIRTY_STATUS_NUM) == SECTOR_DIRT
1269:easyflash/src/ef_env.c ****     {
1270:easyflash/src/ef_env.c ****         result = write_status(dirty_status_addr, status_table, SECTOR_DIRTY_STATUS_NUM, SECTOR_DIRT
1271:easyflash/src/ef_env.c ****     }
1272:easyflash/src/ef_env.c **** 
1273:easyflash/src/ef_env.c ****     return result;
1274:easyflash/src/ef_env.c **** }
1275:easyflash/src/ef_env.c **** 
1276:easyflash/src/ef_env.c **** /*
1277:easyflash/src/ef_env.c ****  * move the ENV to new space
1278:easyflash/src/ef_env.c ****  */
1279:easyflash/src/ef_env.c **** static EfErrCode move_env(env_node_obj_t env)
1280:easyflash/src/ef_env.c **** {
1281:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1282:easyflash/src/ef_env.c ****     uint8_t status_table[ENV_STATUS_TABLE_SIZE];
1283:easyflash/src/ef_env.c ****     uint32_t env_addr;
1284:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
1285:easyflash/src/ef_env.c **** 
1286:easyflash/src/ef_env.c ****     /* prepare to delete the current ENV */
1287:easyflash/src/ef_env.c ****     if (env->status == ENV_WRITE)
1288:easyflash/src/ef_env.c ****     {
1289:easyflash/src/ef_env.c ****         del_env(NULL, env, false);
1290:easyflash/src/ef_env.c ****     }
1291:easyflash/src/ef_env.c **** 
1292:easyflash/src/ef_env.c ****     if ((env_addr = alloc_env(&sector, env->len)) != FAILED_ADDR)
1293:easyflash/src/ef_env.c ****     {
1294:easyflash/src/ef_env.c ****         if (in_recovery_check)
1295:easyflash/src/ef_env.c ****         {
1296:easyflash/src/ef_env.c ****             struct env_node_obj env_bak;
1297:easyflash/src/ef_env.c ****             char name[EF_ENV_NAME_MAX + 1] = { 0 };
1298:easyflash/src/ef_env.c ****             strncpy(name, env->name, env->name_len);
1299:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
1300:easyflash/src/ef_env.c ****             if (find_env_no_cache(name, &env_bak))
1301:easyflash/src/ef_env.c ****             {
1302:easyflash/src/ef_env.c ****                 /* already create success, don't need to duplicate */
1303:easyflash/src/ef_env.c ****                 result = EF_NO_ERR;
1304:easyflash/src/ef_env.c ****                 goto __exit;
1305:easyflash/src/ef_env.c ****             }
1306:easyflash/src/ef_env.c ****         }
1307:easyflash/src/ef_env.c ****     }
1308:easyflash/src/ef_env.c ****     else
1309:easyflash/src/ef_env.c ****     {
1310:easyflash/src/ef_env.c ****         return EF_ENV_FULL;
1311:easyflash/src/ef_env.c ****     }
1312:easyflash/src/ef_env.c ****     /* start move the ENV */
1313:easyflash/src/ef_env.c ****     {
1314:easyflash/src/ef_env.c ****         uint8_t buf[32];
1315:easyflash/src/ef_env.c ****         size_t len, size, env_len = env->len;
1316:easyflash/src/ef_env.c **** 
1317:easyflash/src/ef_env.c ****         /* update the new ENV sector status first */
ARM GAS  /tmp/ccSGDQKw.s 			page 27


1318:easyflash/src/ef_env.c ****         update_sec_status(&sector, env->len, NULL);
1319:easyflash/src/ef_env.c **** 
1320:easyflash/src/ef_env.c ****         write_status(env_addr, status_table, ENV_STATUS_NUM, ENV_PRE_WRITE);
1321:easyflash/src/ef_env.c ****         env_len -= ENV_MAGIC_OFFSET;
1322:easyflash/src/ef_env.c ****         for (len = 0, size = 0; len < env_len; len += size)
1323:easyflash/src/ef_env.c ****         {
1324:easyflash/src/ef_env.c ****             if (len + sizeof(buf) < env_len)
1325:easyflash/src/ef_env.c ****             {
1326:easyflash/src/ef_env.c ****                 size = sizeof(buf);
1327:easyflash/src/ef_env.c ****             }
1328:easyflash/src/ef_env.c ****             else
1329:easyflash/src/ef_env.c ****             {
1330:easyflash/src/ef_env.c ****                 size = env_len - len;
1331:easyflash/src/ef_env.c ****             }
1332:easyflash/src/ef_env.c ****             ef_port_read(env->addr.start + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, EF_WG_ALIGN(si
1333:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
1334:easyflash/src/ef_env.c ****         }
1335:easyflash/src/ef_env.c ****         write_status(env_addr, status_table, ENV_STATUS_NUM, ENV_WRITE);
1336:easyflash/src/ef_env.c **** 
1337:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
1338:easyflash/src/ef_env.c ****         update_sector_cache(EF_ALIGN_DOWN(env_addr, SECTOR_SIZE),
1339:easyflash/src/ef_env.c ****                             env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env->name_len) + EF_WG_ALIGN
1340:easyflash/src/ef_env.c ****         update_env_cache(env->name, env->name_len, env_addr);
1341:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
1342:easyflash/src/ef_env.c ****     }
1343:easyflash/src/ef_env.c **** 
1344:easyflash/src/ef_env.c ****     EF_DEBUG("Moved the ENV (%.*s) from 0x%08X to 0x%08X.", env->name_len, env->name, env->addr.sta
1345:easyflash/src/ef_env.c **** 
1346:easyflash/src/ef_env.c **** __exit:
1347:easyflash/src/ef_env.c ****     del_env(NULL, env, true);
1348:easyflash/src/ef_env.c **** 
1349:easyflash/src/ef_env.c ****     return result;
1350:easyflash/src/ef_env.c **** }
1351:easyflash/src/ef_env.c **** 
1352:easyflash/src/ef_env.c **** static uint32_t new_env(sector_meta_data_t sector, size_t env_size)
1353:easyflash/src/ef_env.c **** {
1354:easyflash/src/ef_env.c ****     bool already_gc = false;
1355:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
1356:easyflash/src/ef_env.c **** 
1357:easyflash/src/ef_env.c **** __retry:
1358:easyflash/src/ef_env.c **** 
1359:easyflash/src/ef_env.c ****     if ((empty_env = alloc_env(sector, env_size)) == FAILED_ADDR && gc_request && !already_gc)
1360:easyflash/src/ef_env.c ****     {
1361:easyflash/src/ef_env.c ****         EF_DEBUG("Warning: Alloc an ENV (size %d) failed when new ENV. Now will GC then retry.", en
1362:easyflash/src/ef_env.c ****         gc_collect();
1363:easyflash/src/ef_env.c ****         already_gc = true;
1364:easyflash/src/ef_env.c ****         goto __retry;
1365:easyflash/src/ef_env.c ****     }
1366:easyflash/src/ef_env.c **** 
1367:easyflash/src/ef_env.c ****     return empty_env;
1368:easyflash/src/ef_env.c **** }
1369:easyflash/src/ef_env.c **** 
1370:easyflash/src/ef_env.c **** static uint32_t new_env_by_kv(sector_meta_data_t sector, size_t key_len, size_t buf_len)
1371:easyflash/src/ef_env.c **** {
1372:easyflash/src/ef_env.c ****     size_t env_len = ENV_HDR_DATA_SIZE + EF_WG_ALIGN(key_len) + EF_WG_ALIGN(buf_len);
1373:easyflash/src/ef_env.c **** 
1374:easyflash/src/ef_env.c ****     return new_env(sector, env_len);
ARM GAS  /tmp/ccSGDQKw.s 			page 28


1375:easyflash/src/ef_env.c **** }
1376:easyflash/src/ef_env.c **** 
1377:easyflash/src/ef_env.c **** static bool gc_check_cb(sector_meta_data_t sector, void *arg1, void *arg2)
1378:easyflash/src/ef_env.c **** {
 143              		.loc 1 1378 1 is_stmt 1 view -0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 0
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147              		@ link register save eliminated.
1379:easyflash/src/ef_env.c ****     size_t *empty_sec = arg1;
 148              		.loc 1 1379 5 view .LVU44
1380:easyflash/src/ef_env.c **** 
1381:easyflash/src/ef_env.c ****     if (sector->check_ok)
 149              		.loc 1 1381 8 is_stmt 0 view .LVU45
 150 0000 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 151              	.LVL10:
 152              		.loc 1 1381 5 is_stmt 1 view .LVU46
 153              		.loc 1 1381 8 is_stmt 0 view .LVU47
 154 0002 13B1     		cbz	r3, .L17
1382:easyflash/src/ef_env.c ****     {
1383:easyflash/src/ef_env.c ****         *empty_sec = *empty_sec + 1;
 155              		.loc 1 1383 9 is_stmt 1 view .LVU48
 156              		.loc 1 1383 33 is_stmt 0 view .LVU49
 157 0004 0B68     		ldr	r3, [r1]
 158 0006 0133     		adds	r3, r3, #1
 159              		.loc 1 1383 20 view .LVU50
 160 0008 0B60     		str	r3, [r1]
 161              	.L17:
1384:easyflash/src/ef_env.c ****     }
1385:easyflash/src/ef_env.c **** 
1386:easyflash/src/ef_env.c ****     return false;
 162              		.loc 1 1386 5 is_stmt 1 view .LVU51
1387:easyflash/src/ef_env.c **** 
1388:easyflash/src/ef_env.c **** }
 163              		.loc 1 1388 1 is_stmt 0 view .LVU52
 164 000a 0020     		movs	r0, #0
 165              	.LVL11:
 166              		.loc 1 1388 1 view .LVU53
 167 000c 7047     		bx	lr
 168              		.cfi_endproc
 169              	.LFE270:
 171 000e 00BF     		.section	.text.update_env_cache,"ax",%progbits
 172              		.align	1
 173              		.p2align 2,,3
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 178              	update_env_cache:
 179              	.LVL12:
 180              	.LFB241:
 378:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_ENV_CACHE_TABLE_SIZE, min_activity_index = EF_ENV_CACHE_TABLE_SIZE;
 181              		.loc 1 378 1 is_stmt 1 view -0
 182              		.cfi_startproc
 183              		@ args = 0, pretend = 0, frame = 0
 184              		@ frame_needed = 0, uses_anonymous_args = 0
 379:easyflash/src/ef_env.c ****     uint16_t name_crc = (uint16_t)(ef_calc_crc32(0, name, name_len) >> 16), min_activity = 0xFFFF;
 185              		.loc 1 379 5 view .LVU55
ARM GAS  /tmp/ccSGDQKw.s 			page 29


 380:easyflash/src/ef_env.c **** 
 186              		.loc 1 380 5 view .LVU56
 378:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_ENV_CACHE_TABLE_SIZE, min_activity_index = EF_ENV_CACHE_TABLE_SIZE;
 187              		.loc 1 378 1 is_stmt 0 view .LVU57
 188 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 189              		.cfi_def_cfa_offset 24
 190              		.cfi_offset 3, -24
 191              		.cfi_offset 4, -20
 192              		.cfi_offset 5, -16
 193              		.cfi_offset 6, -12
 194              		.cfi_offset 7, -8
 195              		.cfi_offset 14, -4
 378:easyflash/src/ef_env.c ****     size_t i, empty_index = EF_ENV_CACHE_TABLE_SIZE, min_activity_index = EF_ENV_CACHE_TABLE_SIZE;
 196              		.loc 1 378 1 view .LVU58
 197 0002 0B46     		mov	r3, r1
 198 0004 1546     		mov	r5, r2
 380:easyflash/src/ef_env.c **** 
 199              		.loc 1 380 36 view .LVU59
 200 0006 0146     		mov	r1, r0
 201              	.LVL13:
 380:easyflash/src/ef_env.c **** 
 202              		.loc 1 380 36 view .LVU60
 203 0008 1A46     		mov	r2, r3
 204              	.LVL14:
 380:easyflash/src/ef_env.c **** 
 205              		.loc 1 380 36 view .LVU61
 206 000a 0020     		movs	r0, #0
 207              	.LVL15:
 380:easyflash/src/ef_env.c **** 
 208              		.loc 1 380 36 view .LVU62
 209 000c FFF7FEFF 		bl	ef_calc_crc32
 210              	.LVL16:
 380:easyflash/src/ef_env.c **** 
 211              		.loc 1 380 36 view .LVU63
 212 0010 244F     		ldr	r7, .L43
 379:easyflash/src/ef_env.c ****     uint16_t name_crc = (uint16_t)(ef_calc_crc32(0, name, name_len) >> 16), min_activity = 0xFFFF;
 213              		.loc 1 379 54 view .LVU64
 214 0012 1026     		movs	r6, #16
 380:easyflash/src/ef_env.c **** 
 215              		.loc 1 380 14 view .LVU65
 216 0014 000C     		lsrs	r0, r0, #16
 217              	.LVL17:
 382:easyflash/src/ef_env.c ****     {
 218              		.loc 1 382 5 is_stmt 1 view .LVU66
 382:easyflash/src/ef_env.c ****     {
 219              		.loc 1 382 17 view .LVU67
 220 0016 3B46     		mov	r3, r7
 380:easyflash/src/ef_env.c **** 
 221              		.loc 1 380 77 is_stmt 0 view .LVU68
 222 0018 4FF6FF7E 		movw	lr, #65535
 379:easyflash/src/ef_env.c ****     uint16_t name_crc = (uint16_t)(ef_calc_crc32(0, name, name_len) >> 16), min_activity = 0xFFFF;
 223              		.loc 1 379 15 view .LVU69
 224 001c B446     		mov	ip, r6
 382:easyflash/src/ef_env.c ****     {
 225              		.loc 1 382 12 view .LVU70
 226 001e 0021     		movs	r1, #0
 227 0020 12E0     		b	.L29
ARM GAS  /tmp/ccSGDQKw.s 			page 30


 228              	.LVL18:
 229              	.L42:
 387:easyflash/src/ef_env.c ****             {
 230              		.loc 1 387 16 view .LVU71
 231 0022 8242     		cmp	r2, r0
 232 0024 39D0     		beq	.L39
 392:easyflash/src/ef_env.c ****             {
 233              		.loc 1 392 21 view .LVU72
 234 0026 5A68     		ldr	r2, [r3, #4]
 235 0028 0132     		adds	r2, r2, #1
 236 002a 18D0     		beq	.L40
 400:easyflash/src/ef_env.c ****                 }
 237              		.loc 1 400 21 is_stmt 1 view .LVU73
 398:easyflash/src/ef_env.c ****                 {
 238              		.loc 1 398 39 is_stmt 0 view .LVU74
 239 002c 5C88     		ldrh	r4, [r3, #2]
 398:easyflash/src/ef_env.c ****                 {
 240              		.loc 1 398 20 view .LVU75
 241 002e 14B1     		cbz	r4, .L28
 400:easyflash/src/ef_env.c ****                 }
 242              		.loc 1 400 46 view .LVU76
 243 0030 013C     		subs	r4, r4, #1
 244 0032 A4B2     		uxth	r4, r4
 245 0034 5C80     		strh	r4, [r3, #2]	@ movhi
 246              	.L28:
 402:easyflash/src/ef_env.c ****                 {
 247              		.loc 1 402 20 view .LVU77
 248 0036 7445     		cmp	r4, lr
 249 0038 01D2     		bcs	.L27
 250 003a A646     		mov	lr, r4
 251              	.LVL19:
 402:easyflash/src/ef_env.c ****                 {
 252              		.loc 1 402 20 view .LVU78
 253 003c 0E46     		mov	r6, r1
 254              	.L27:
 255              	.LVL20:
 382:easyflash/src/ef_env.c ****     {
 256              		.loc 1 382 46 is_stmt 1 discriminator 2 view .LVU79
 382:easyflash/src/ef_env.c ****     {
 257              		.loc 1 382 47 is_stmt 0 discriminator 2 view .LVU80
 258 003e 0131     		adds	r1, r1, #1
 259              	.LVL21:
 382:easyflash/src/ef_env.c ****     {
 260              		.loc 1 382 17 is_stmt 1 discriminator 2 view .LVU81
 382:easyflash/src/ef_env.c ****     {
 261              		.loc 1 382 5 is_stmt 0 discriminator 2 view .LVU82
 262 0040 1029     		cmp	r1, #16
 263 0042 03F10803 		add	r3, r3, #8
 264 0046 13D0     		beq	.L41
 265              	.LVL22:
 266              	.L29:
 384:easyflash/src/ef_env.c ****         {
 267              		.loc 1 384 9 is_stmt 1 view .LVU83
 387:easyflash/src/ef_env.c ****             {
 268              		.loc 1 387 13 view .LVU84
 392:easyflash/src/ef_env.c ****             {
 269              		.loc 1 392 18 view .LVU85
ARM GAS  /tmp/ccSGDQKw.s 			page 31


 396:easyflash/src/ef_env.c ****             {
 270              		.loc 1 396 18 view .LVU86
 398:easyflash/src/ef_env.c ****                 {
 271              		.loc 1 398 17 view .LVU87
 402:easyflash/src/ef_env.c ****                 {
 272              		.loc 1 402 17 view .LVU88
 384:easyflash/src/ef_env.c ****         {
 273              		.loc 1 384 12 is_stmt 0 view .LVU89
 274 0048 6C1C     		adds	r4, r5, #1
 387:easyflash/src/ef_env.c ****             {
 275              		.loc 1 387 16 view .LVU90
 276 004a 1A88     		ldrh	r2, [r3]
 384:easyflash/src/ef_env.c ****         {
 277              		.loc 1 384 12 view .LVU91
 278 004c E9D1     		bne	.L42
 409:easyflash/src/ef_env.c ****         {
 279              		.loc 1 409 14 is_stmt 1 view .LVU92
 409:easyflash/src/ef_env.c ****         {
 280              		.loc 1 409 17 is_stmt 0 view .LVU93
 281 004e 8242     		cmp	r2, r0
 282 0050 F5D1     		bne	.L27
 412:easyflash/src/ef_env.c ****             env_cache_table[i].active = 0;
 283              		.loc 1 412 13 is_stmt 1 view .LVU94
 412:easyflash/src/ef_env.c ****             env_cache_table[i].active = 0;
 284              		.loc 1 412 37 is_stmt 0 view .LVU95
 285 0052 07EBC101 		add	r1, r7, r1, lsl #3
 286              	.LVL23:
 413:easyflash/src/ef_env.c ****             return;
 287              		.loc 1 413 39 view .LVU96
 288 0056 0023     		movs	r3, #0
 412:easyflash/src/ef_env.c ****             env_cache_table[i].active = 0;
 289              		.loc 1 412 37 view .LVU97
 290 0058 4D60     		str	r5, [r1, #4]
 413:easyflash/src/ef_env.c ****             return;
 291              		.loc 1 413 13 is_stmt 1 view .LVU98
 413:easyflash/src/ef_env.c ****             return;
 292              		.loc 1 413 39 is_stmt 0 view .LVU99
 293 005a 4B80     		strh	r3, [r1, #2]	@ movhi
 414:easyflash/src/ef_env.c ****         }
 294              		.loc 1 414 13 is_stmt 1 view .LVU100
 295              	.L21:
 430:easyflash/src/ef_env.c **** 
 296              		.loc 1 430 1 is_stmt 0 view .LVU101
 297 005c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 298              	.LVL24:
 299              	.L40:
 392:easyflash/src/ef_env.c ****             {
 300              		.loc 1 392 63 discriminator 1 view .LVU102
 301 005e BCF1100F 		cmp	ip, #16
 302 0062 08BF     		it	eq
 303 0064 8C46     		moveq	ip, r1
 304              	.LVL25:
 382:easyflash/src/ef_env.c ****     {
 305              		.loc 1 382 46 is_stmt 1 discriminator 1 view .LVU103
 382:easyflash/src/ef_env.c ****     {
 306              		.loc 1 382 47 is_stmt 0 discriminator 1 view .LVU104
 307 0066 0131     		adds	r1, r1, #1
ARM GAS  /tmp/ccSGDQKw.s 			page 32


 308              	.LVL26:
 382:easyflash/src/ef_env.c ****     {
 309              		.loc 1 382 17 is_stmt 1 discriminator 1 view .LVU105
 382:easyflash/src/ef_env.c ****     {
 310              		.loc 1 382 5 is_stmt 0 discriminator 1 view .LVU106
 311 0068 1029     		cmp	r1, #16
 312 006a 03F10803 		add	r3, r3, #8
 313 006e EBD1     		bne	.L29
 314              	.L41:
 418:easyflash/src/ef_env.c ****     {
 315              		.loc 1 418 5 is_stmt 1 view .LVU107
 418:easyflash/src/ef_env.c ****     {
 316              		.loc 1 418 8 is_stmt 0 view .LVU108
 317 0070 BCF1100F 		cmp	ip, #16
 318 0074 07D0     		beq	.L30
 420:easyflash/src/ef_env.c ****         env_cache_table[empty_index].name_crc = name_crc;
 319              		.loc 1 420 9 is_stmt 1 view .LVU109
 420:easyflash/src/ef_env.c ****         env_cache_table[empty_index].name_crc = name_crc;
 320              		.loc 1 420 43 is_stmt 0 view .LVU110
 321 0076 07EBCC03 		add	r3, r7, ip, lsl #3
 422:easyflash/src/ef_env.c ****     }
 322              		.loc 1 422 45 view .LVU111
 323 007a 0022     		movs	r2, #0
 421:easyflash/src/ef_env.c ****         env_cache_table[empty_index].active = 0;
 324              		.loc 1 421 47 view .LVU112
 325 007c 27F83C00 		strh	r0, [r7, ip, lsl #3]	@ movhi
 420:easyflash/src/ef_env.c ****         env_cache_table[empty_index].name_crc = name_crc;
 326              		.loc 1 420 43 view .LVU113
 327 0080 5D60     		str	r5, [r3, #4]
 421:easyflash/src/ef_env.c ****         env_cache_table[empty_index].active = 0;
 328              		.loc 1 421 9 is_stmt 1 view .LVU114
 422:easyflash/src/ef_env.c ****     }
 329              		.loc 1 422 9 view .LVU115
 422:easyflash/src/ef_env.c ****     }
 330              		.loc 1 422 45 is_stmt 0 view .LVU116
 331 0082 5A80     		strh	r2, [r3, #2]	@ movhi
 430:easyflash/src/ef_env.c **** 
 332              		.loc 1 430 1 view .LVU117
 333 0084 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 334              	.LVL27:
 335              	.L30:
 424:easyflash/src/ef_env.c ****     {
 336              		.loc 1 424 10 is_stmt 1 view .LVU118
 424:easyflash/src/ef_env.c ****     {
 337              		.loc 1 424 13 is_stmt 0 view .LVU119
 338 0086 102E     		cmp	r6, #16
 339 0088 E8D0     		beq	.L21
 426:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].name_crc = name_crc;
 340              		.loc 1 426 9 is_stmt 1 view .LVU120
 426:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].name_crc = name_crc;
 341              		.loc 1 426 50 is_stmt 0 view .LVU121
 342 008a 07EBC603 		add	r3, r7, r6, lsl #3
 428:easyflash/src/ef_env.c ****     }
 343              		.loc 1 428 52 view .LVU122
 344 008e 0022     		movs	r2, #0
 427:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].active = 0;
 345              		.loc 1 427 54 view .LVU123
ARM GAS  /tmp/ccSGDQKw.s 			page 33


 346 0090 27F83600 		strh	r0, [r7, r6, lsl #3]	@ movhi
 426:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].name_crc = name_crc;
 347              		.loc 1 426 50 view .LVU124
 348 0094 5D60     		str	r5, [r3, #4]
 427:easyflash/src/ef_env.c ****         env_cache_table[min_activity_index].active = 0;
 349              		.loc 1 427 9 is_stmt 1 view .LVU125
 428:easyflash/src/ef_env.c ****     }
 350              		.loc 1 428 9 view .LVU126
 428:easyflash/src/ef_env.c ****     }
 351              		.loc 1 428 52 is_stmt 0 view .LVU127
 352 0096 5A80     		strh	r2, [r3, #2]	@ movhi
 430:easyflash/src/ef_env.c **** 
 353              		.loc 1 430 1 view .LVU128
 354 0098 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 355              	.LVL28:
 356              	.L39:
 389:easyflash/src/ef_env.c ****                 return;
 357              		.loc 1 389 17 is_stmt 1 view .LVU129
 389:easyflash/src/ef_env.c ****                 return;
 358              		.loc 1 389 41 is_stmt 0 view .LVU130
 359 009a 07EBC101 		add	r1, r7, r1, lsl #3
 360              	.LVL29:
 389:easyflash/src/ef_env.c ****                 return;
 361              		.loc 1 389 41 view .LVU131
 362 009e 4D60     		str	r5, [r1, #4]
 390:easyflash/src/ef_env.c ****             }
 363              		.loc 1 390 17 is_stmt 1 view .LVU132
 430:easyflash/src/ef_env.c **** 
 364              		.loc 1 430 1 is_stmt 0 view .LVU133
 365 00a0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 366              	.LVL30:
 367              	.L44:
 430:easyflash/src/ef_env.c **** 
 368              		.loc 1 430 1 view .LVU134
 369 00a2 00BF     		.align	2
 370              	.L43:
 371 00a4 00000000 		.word	.LANCHOR1
 372              		.cfi_endproc
 373              	.LFE241:
 375              		.section	.text.find_next_env_addr,"ax",%progbits
 376              		.align	1
 377              		.p2align 2,,3
 378              		.syntax unified
 379              		.thumb
 380              		.thumb_func
 382              	find_next_env_addr:
 383              	.LVL31:
 384              	.LFB244:
 510:easyflash/src/ef_env.c ****     uint8_t buf[32];
 385              		.loc 1 510 1 is_stmt 1 view -0
 386              		.cfi_startproc
 387              		@ args = 0, pretend = 0, frame = 32
 388              		@ frame_needed = 0, uses_anonymous_args = 0
 511:easyflash/src/ef_env.c ****     uint32_t start_bak = start, i;
 389              		.loc 1 511 5 view .LVU136
 512:easyflash/src/ef_env.c ****     uint32_t magic;
 390              		.loc 1 512 5 view .LVU137
ARM GAS  /tmp/ccSGDQKw.s 			page 34


 510:easyflash/src/ef_env.c ****     uint8_t buf[32];
 391              		.loc 1 510 1 is_stmt 0 view .LVU138
 392 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 393              		.cfi_def_cfa_offset 24
 394              		.cfi_offset 4, -24
 395              		.cfi_offset 5, -20
 396              		.cfi_offset 6, -16
 397              		.cfi_offset 7, -12
 398              		.cfi_offset 8, -8
 399              		.cfi_offset 14, -4
 400 0004 0746     		mov	r7, r0
 401              	.LVL32:
 513:easyflash/src/ef_env.c **** 
 402              		.loc 1 513 5 is_stmt 1 view .LVU139
 516:easyflash/src/ef_env.c **** 
 403              		.loc 1 516 5 view .LVU140
 518:easyflash/src/ef_env.c ****     {
 404              		.loc 1 518 5 view .LVU141
 405 0006 224D     		ldr	r5, .L62
 518:easyflash/src/ef_env.c ****     {
 406              		.loc 1 518 9 is_stmt 0 view .LVU142
 407 0008 400C     		lsrs	r0, r0, #17
 408              	.LVL33:
 510:easyflash/src/ef_env.c ****     uint8_t buf[32];
 409              		.loc 1 510 1 view .LVU143
 410 000a 88B0     		sub	sp, sp, #32
 411              		.cfi_def_cfa_offset 56
 510:easyflash/src/ef_env.c ****     uint8_t buf[32];
 412              		.loc 1 510 1 view .LVU144
 413 000c 0C46     		mov	r4, r1
 518:easyflash/src/ef_env.c ****     {
 414              		.loc 1 518 9 view .LVU145
 415 000e 4004     		lsls	r0, r0, #17
 416              	.LVL34:
 417              	.LBB35:
 418              	.LBI35:
 358:easyflash/src/ef_env.c **** {
 419              		.loc 1 358 13 is_stmt 1 view .LVU146
 420              	.LBB36:
 360:easyflash/src/ef_env.c **** 
 421              		.loc 1 360 5 view .LVU147
 362:easyflash/src/ef_env.c ****     {
 422              		.loc 1 362 5 view .LVU148
 362:easyflash/src/ef_env.c ****     {
 423              		.loc 1 362 17 view .LVU149
 362:easyflash/src/ef_env.c ****     {
 424              		.loc 1 362 12 is_stmt 0 view .LVU150
 425 0010 0023     		movs	r3, #0
 426              	.LVL35:
 427              	.L49:
 364:easyflash/src/ef_env.c ****         {
 428              		.loc 1 364 9 is_stmt 1 view .LVU151
 362:easyflash/src/ef_env.c ****     {
 429              		.loc 1 362 49 view .LVU152
 364:easyflash/src/ef_env.c ****         {
 430              		.loc 1 364 12 is_stmt 0 view .LVU153
 431 0012 55F83320 		ldr	r2, [r5, r3, lsl #3]
ARM GAS  /tmp/ccSGDQKw.s 			page 35


 432 0016 9042     		cmp	r0, r2
 433 0018 34D0     		beq	.L61
 362:easyflash/src/ef_env.c ****     {
 434              		.loc 1 362 50 view .LVU154
 435 001a 0133     		adds	r3, r3, #1
 436              	.LVL36:
 362:easyflash/src/ef_env.c ****     {
 437              		.loc 1 362 17 is_stmt 1 view .LVU155
 362:easyflash/src/ef_env.c ****     {
 438              		.loc 1 362 5 is_stmt 0 view .LVU156
 439 001c 042B     		cmp	r3, #4
 440 001e F8D1     		bne	.L49
 441              	.LVL37:
 442              	.L50:
 362:easyflash/src/ef_env.c ****     {
 443              		.loc 1 362 5 view .LVU157
 444              	.LBE36:
 445              	.LBE35:
 524:easyflash/src/ef_env.c ****     {
 446              		.loc 1 524 12 is_stmt 1 discriminator 1 view .LVU158
 524:easyflash/src/ef_env.c ****     {
 447              		.loc 1 524 5 is_stmt 0 discriminator 1 view .LVU159
 448 0020 A742     		cmp	r7, r4
 449 0022 2AD2     		bcs	.L47
 534:easyflash/src/ef_env.c ****             {
 450              		.loc 1 534 16 view .LVU160
 451 0024 1B4D     		ldr	r5, .L62+4
 524:easyflash/src/ef_env.c ****     {
 452              		.loc 1 524 5 view .LVU161
 453 0026 B846     		mov	r8, r7
 454 0028 07AE     		add	r6, sp, #28
 455              	.LVL38:
 456              	.L48:
 526:easyflash/src/ef_env.c ****         for (i = 0; i < sizeof(buf) - sizeof(uint32_t) && start + i < end; i++)
 457              		.loc 1 526 9 is_stmt 1 view .LVU162
 458 002a 2022     		movs	r2, #32
 459 002c 6946     		mov	r1, sp
 460 002e 4046     		mov	r0, r8
 461 0030 FFF7FEFF 		bl	ef_port_read
 462              	.LVL39:
 527:easyflash/src/ef_env.c ****         {
 463              		.loc 1 527 9 view .LVU163
 527:easyflash/src/ef_env.c ****         {
 464              		.loc 1 527 21 view .LVU164
 465 0034 A8F11400 		sub	r0, r8, #20
 466 0038 6A46     		mov	r2, sp
 467 003a 03E0     		b	.L51
 468              	.LVL40:
 469              	.L52:
 527:easyflash/src/ef_env.c ****         {
 470              		.loc 1 527 9 is_stmt 0 discriminator 1 view .LVU165
 471 003c 9642     		cmp	r6, r2
 472 003e 00F10100 		add	r0, r0, #1
 473 0042 16D0     		beq	.L54
 474              	.LVL41:
 475              	.L51:
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
ARM GAS  /tmp/ccSGDQKw.s 			page 36


 476              		.loc 1 530 13 is_stmt 1 discriminator 3 view .LVU166
 527:easyflash/src/ef_env.c ****         {
 477              		.loc 1 527 21 discriminator 3 view .LVU167
 527:easyflash/src/ef_env.c ****         {
 478              		.loc 1 527 56 is_stmt 0 discriminator 3 view .LVU168
 479 0044 00F11403 		add	r3, r0, #20
 480 0048 9C42     		cmp	r4, r3
 481 004a 12D9     		bls	.L54
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 482              		.loc 1 530 24 view .LVU169
 483 004c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 484              	.LVL42:
 534:easyflash/src/ef_env.c ****             {
 485              		.loc 1 534 13 is_stmt 1 view .LVU170
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 486              		.loc 1 530 34 is_stmt 0 view .LVU171
 487 004e 12F801EF 		ldrb	lr, [r2, #1]!	@ zero_extendqisi2
 488              	.LVL43:
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 489              		.loc 1 530 54 view .LVU172
 490 0052 92F801C0 		ldrb	ip, [r2, #1]	@ zero_extendqisi2
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 491              		.loc 1 530 75 view .LVU173
 492 0056 9178     		ldrb	r1, [r2, #2]	@ zero_extendqisi2
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 493              		.loc 1 530 28 view .LVU174
 494 0058 03EB0E23 		add	r3, r3, lr, lsl #8
 495              	.LVL44:
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 496              		.loc 1 530 48 view .LVU175
 497 005c 03EB0C43 		add	r3, r3, ip, lsl #16
 530:easyflash/src/ef_env.c **** #else                       /* Big Endian Order */
 498              		.loc 1 530 69 view .LVU176
 499 0060 03EB0163 		add	r3, r3, r1, lsl #24
 534:easyflash/src/ef_env.c ****             {
 500              		.loc 1 534 16 view .LVU177
 501 0064 AB42     		cmp	r3, r5
 502 0066 E9D1     		bne	.L52
 534:easyflash/src/ef_env.c ****             {
 503              		.loc 1 534 41 discriminator 1 view .LVU178
 504 0068 8742     		cmp	r7, r0
 505 006a E7D8     		bhi	.L52
 542:easyflash/src/ef_env.c **** 
 506              		.loc 1 542 1 view .LVU179
 507 006c 08B0     		add	sp, sp, #32
 508              		.cfi_remember_state
 509              		.cfi_def_cfa_offset 24
 510              		@ sp needed
 511 006e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 512              	.LVL45:
 513              	.L54:
 514              		.cfi_restore_state
 524:easyflash/src/ef_env.c ****     {
 515              		.loc 1 524 25 is_stmt 1 view .LVU180
 524:easyflash/src/ef_env.c ****     {
 516              		.loc 1 524 31 is_stmt 0 view .LVU181
 517 0072 08F11C08 		add	r8, r8, #28
ARM GAS  /tmp/ccSGDQKw.s 			page 37


 518              	.LVL46:
 524:easyflash/src/ef_env.c ****     {
 519              		.loc 1 524 12 is_stmt 1 view .LVU182
 524:easyflash/src/ef_env.c ****     {
 520              		.loc 1 524 5 is_stmt 0 view .LVU183
 521 0076 4445     		cmp	r4, r8
 522 0078 D7D8     		bhi	.L48
 523              	.LVL47:
 524              	.L47:
 520:easyflash/src/ef_env.c ****     }
 525              		.loc 1 520 16 view .LVU184
 526 007a 4FF0FF30 		mov	r0, #-1
 542:easyflash/src/ef_env.c **** 
 527              		.loc 1 542 1 view .LVU185
 528 007e 08B0     		add	sp, sp, #32
 529              		.cfi_remember_state
 530              		.cfi_def_cfa_offset 24
 531              		@ sp needed
 532 0080 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 533              	.LVL48:
 534              	.L61:
 535              		.cfi_restore_state
 536              	.LBB38:
 537              	.LBB37:
 366:easyflash/src/ef_env.c ****             {
 538              		.loc 1 366 13 is_stmt 1 view .LVU186
 368:easyflash/src/ef_env.c ****             }
 539              		.loc 1 368 17 view .LVU187
 368:easyflash/src/ef_env.c ****             }
 540              		.loc 1 368 52 is_stmt 0 view .LVU188
 541 0084 05EBC303 		add	r3, r5, r3, lsl #3
 542              	.LVL49:
 368:easyflash/src/ef_env.c ****             }
 543              		.loc 1 368 52 view .LVU189
 544              	.LBE37:
 545              	.LBE38:
 518:easyflash/src/ef_env.c ****     {
 546              		.loc 1 518 78 view .LVU190
 547 0088 5B68     		ldr	r3, [r3, #4]
 548 008a 9F42     		cmp	r7, r3
 549 008c C8D1     		bne	.L50
 550 008e F4E7     		b	.L47
 551              	.L63:
 552              		.align	2
 553              	.L62:
 554 0090 00000000 		.word	.LANCHOR0
 555 0094 4B563430 		.word	808736331
 556              		.cfi_endproc
 557              	.LFE244:
 559              		.section	.text.get_next_env_addr,"ax",%progbits
 560              		.align	1
 561              		.p2align 2,,3
 562              		.syntax unified
 563              		.thumb
 564              		.thumb_func
 566              	get_next_env_addr:
 567              	.LVL50:
ARM GAS  /tmp/ccSGDQKw.s 			page 38


 568              	.LFB245:
 545:easyflash/src/ef_env.c ****     uint32_t addr = FAILED_ADDR;
 569              		.loc 1 545 1 is_stmt 1 view -0
 570              		.cfi_startproc
 571              		@ args = 0, pretend = 0, frame = 0
 572              		@ frame_needed = 0, uses_anonymous_args = 0
 546:easyflash/src/ef_env.c **** 
 573              		.loc 1 546 5 view .LVU192
 548:easyflash/src/ef_env.c ****     {
 574              		.loc 1 548 5 view .LVU193
 545:easyflash/src/ef_env.c ****     uint32_t addr = FAILED_ADDR;
 575              		.loc 1 545 1 is_stmt 0 view .LVU194
 576 0000 38B5     		push	{r3, r4, r5, lr}
 577              		.cfi_def_cfa_offset 16
 578              		.cfi_offset 3, -16
 579              		.cfi_offset 4, -12
 580              		.cfi_offset 5, -8
 581              		.cfi_offset 14, -4
 548:easyflash/src/ef_env.c ****     {
 582              		.loc 1 548 8 view .LVU195
 583 0002 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 584 0004 012B     		cmp	r3, #1
 585 0006 1BD0     		beq	.L65
 586 0008 0446     		mov	r4, r0
 553:easyflash/src/ef_env.c ****     {
 587              		.loc 1 553 22 view .LVU196
 588 000a 086B     		ldr	r0, [r1, #48]
 589              	.LVL51:
 553:easyflash/src/ef_env.c ****     {
 590              		.loc 1 553 8 view .LVU197
 591 000c 431C     		adds	r3, r0, #1
 592 000e 0D46     		mov	r5, r1
 553:easyflash/src/ef_env.c ****     {
 593              		.loc 1 553 5 is_stmt 1 view .LVU198
 553:easyflash/src/ef_env.c ****     {
 594              		.loc 1 553 8 is_stmt 0 view .LVU199
 595 0010 19D0     		beq	.L74
 560:easyflash/src/ef_env.c ****         {
 596              		.loc 1 560 9 is_stmt 1 view .LVU200
 560:easyflash/src/ef_env.c ****         {
 597              		.loc 1 560 42 is_stmt 0 view .LVU201
 598 0012 6168     		ldr	r1, [r4, #4]
 599              	.LVL52:
 560:easyflash/src/ef_env.c ****         {
 600              		.loc 1 560 49 view .LVU202
 601 0014 01F50033 		add	r3, r1, #131072
 560:easyflash/src/ef_env.c ****         {
 602              		.loc 1 560 12 view .LVU203
 603 0018 9842     		cmp	r0, r3
 604 001a 11D8     		bhi	.L65
 562:easyflash/src/ef_env.c ****             {
 605              		.loc 1 562 13 is_stmt 1 view .LVU204
 562:easyflash/src/ef_env.c ****             {
 606              		.loc 1 562 16 is_stmt 0 view .LVU205
 607 001c 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 608 001e ABB1     		cbz	r3, .L68
 564:easyflash/src/ef_env.c ****             }
ARM GAS  /tmp/ccSGDQKw.s 			page 39


 609              		.loc 1 564 17 is_stmt 1 view .LVU206
 564:easyflash/src/ef_env.c ****             }
 610              		.loc 1 564 22 is_stmt 0 view .LVU207
 611 0020 AB68     		ldr	r3, [r5, #8]
 612 0022 1844     		add	r0, r0, r3
 613              	.LVL53:
 614              	.L69:
 573:easyflash/src/ef_env.c **** 
 615              		.loc 1 573 13 is_stmt 1 view .LVU208
 573:easyflash/src/ef_env.c **** 
 616              		.loc 1 573 20 is_stmt 0 view .LVU209
 617 0024 01F5FF31 		add	r1, r1, #130560
 618 0028 01F5EE71 		add	r1, r1, #476
 619 002c FFF7FEFF 		bl	find_next_env_addr
 620              	.LVL54:
 575:easyflash/src/ef_env.c ****             {
 621              		.loc 1 575 37 view .LVU210
 622 0030 6368     		ldr	r3, [r4, #4]
 623              	.LVL55:
 575:easyflash/src/ef_env.c ****             {
 624              		.loc 1 575 13 is_stmt 1 view .LVU211
 575:easyflash/src/ef_env.c ****             {
 625              		.loc 1 575 37 is_stmt 0 view .LVU212
 626 0032 03F50033 		add	r3, r3, #131072
 575:easyflash/src/ef_env.c ****             {
 627              		.loc 1 575 16 view .LVU213
 628 0036 8342     		cmp	r3, r0
 629 0038 02D3     		bcc	.L65
 575:easyflash/src/ef_env.c ****             {
 630              		.loc 1 575 51 discriminator 1 view .LVU214
 631 003a AB68     		ldr	r3, [r5, #8]
 632 003c 03B1     		cbz	r3, .L65
 588:easyflash/src/ef_env.c **** 
 633              		.loc 1 588 1 view .LVU215
 634 003e 38BD     		pop	{r3, r4, r5, pc}
 635              	.LVL56:
 636              	.L65:
 577:easyflash/src/ef_env.c ****             }
 637              		.loc 1 577 17 is_stmt 1 view .LVU216
 577:easyflash/src/ef_env.c ****             }
 638              		.loc 1 577 24 is_stmt 0 view .LVU217
 639 0040 4FF0FF30 		mov	r0, #-1
 588:easyflash/src/ef_env.c **** 
 640              		.loc 1 588 1 view .LVU218
 641 0044 38BD     		pop	{r3, r4, r5, pc}
 642              	.LVL57:
 643              	.L74:
 556:easyflash/src/ef_env.c ****     }
 644              		.loc 1 556 9 is_stmt 1 view .LVU219
 556:easyflash/src/ef_env.c ****     }
 645              		.loc 1 556 14 is_stmt 0 view .LVU220
 646 0046 6068     		ldr	r0, [r4, #4]
 647 0048 2430     		adds	r0, r0, #36
 648              	.LVL58:
 588:easyflash/src/ef_env.c **** 
 649              		.loc 1 588 1 view .LVU221
 650 004a 38BD     		pop	{r3, r4, r5, pc}
ARM GAS  /tmp/ccSGDQKw.s 			page 40


 651              	.LVL59:
 652              	.L68:
 570:easyflash/src/ef_env.c ****             }
 653              		.loc 1 570 17 is_stmt 1 view .LVU222
 570:easyflash/src/ef_env.c ****             }
 654              		.loc 1 570 22 is_stmt 0 view .LVU223
 655 004c 0430     		adds	r0, r0, #4
 656              	.LVL60:
 570:easyflash/src/ef_env.c ****             }
 657              		.loc 1 570 22 view .LVU224
 658 004e E9E7     		b	.L69
 659              		.cfi_endproc
 660              	.LFE245:
 662              		.section	.text.find_env_cb,"ax",%progbits
 663              		.align	1
 664              		.p2align 2,,3
 665              		.syntax unified
 666              		.thumb
 667              		.thumb_func
 669              	find_env_cb:
 670              	.LVL61:
 671              	.LFB250:
 814:easyflash/src/ef_env.c ****     const char *key = arg1;
 672              		.loc 1 814 1 is_stmt 1 view -0
 673              		.cfi_startproc
 674              		@ args = 0, pretend = 0, frame = 0
 675              		@ frame_needed = 0, uses_anonymous_args = 0
 815:easyflash/src/ef_env.c ****     bool *find_ok = arg2;
 676              		.loc 1 815 5 view .LVU226
 814:easyflash/src/ef_env.c ****     const char *key = arg1;
 677              		.loc 1 814 1 is_stmt 0 view .LVU227
 678 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 679              		.cfi_def_cfa_offset 24
 680              		.cfi_offset 3, -24
 681              		.cfi_offset 4, -20
 682              		.cfi_offset 5, -16
 683              		.cfi_offset 6, -12
 684              		.cfi_offset 7, -8
 685              		.cfi_offset 14, -4
 824:easyflash/src/ef_env.c ****     {
 686              		.loc 1 824 12 view .LVU228
 687 0002 4678     		ldrb	r6, [r0, #1]	@ zero_extendqisi2
 688              	.LVL62:
 816:easyflash/src/ef_env.c ****     uint8_t max_len = strlen(key);
 689              		.loc 1 816 5 is_stmt 1 view .LVU229
 817:easyflash/src/ef_env.c **** 
 690              		.loc 1 817 5 view .LVU230
 819:easyflash/src/ef_env.c ****     {
 691              		.loc 1 819 5 view .LVU231
 824:easyflash/src/ef_env.c ****     {
 692              		.loc 1 824 5 view .LVU232
 824:easyflash/src/ef_env.c ****     {
 693              		.loc 1 824 8 is_stmt 0 view .LVU233
 694 0004 26B1     		cbz	r6, .L76
 824:easyflash/src/ef_env.c ****     {
 695              		.loc 1 824 24 discriminator 1 view .LVU234
 696 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
ARM GAS  /tmp/ccSGDQKw.s 			page 41


 697 0008 022B     		cmp	r3, #2
 698 000a 0446     		mov	r4, r0
 699 000c 02D0     		beq	.L83
 700              	.LVL63:
 701              	.L78:
 829:easyflash/src/ef_env.c **** }
 702              		.loc 1 829 12 view .LVU235
 703 000e 0026     		movs	r6, #0
 704              	.LVL64:
 705              	.L76:
 830:easyflash/src/ef_env.c **** 
 706              		.loc 1 830 1 view .LVU236
 707 0010 3046     		mov	r0, r6
 708 0012 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 709              	.LVL65:
 710              	.L83:
 817:easyflash/src/ef_env.c **** 
 711              		.loc 1 817 23 discriminator 2 view .LVU237
 712 0014 0846     		mov	r0, r1
 713              	.LVL66:
 817:easyflash/src/ef_env.c **** 
 714              		.loc 1 817 23 discriminator 2 view .LVU238
 715 0016 0F46     		mov	r7, r1
 716 0018 1546     		mov	r5, r2
 717 001a FFF7FEFF 		bl	strlen
 718              	.LVL67:
 824:easyflash/src/ef_env.c ****     {
 719              		.loc 1 824 56 discriminator 2 view .LVU239
 720 001e A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 817:easyflash/src/ef_env.c **** 
 721              		.loc 1 817 13 discriminator 2 view .LVU240
 722 0020 C0B2     		uxtb	r0, r0
 824:easyflash/src/ef_env.c ****     {
 723              		.loc 1 824 56 discriminator 2 view .LVU241
 724 0022 8242     		cmp	r2, r0
 725 0024 38BF     		it	cc
 726 0026 0246     		movcc	r2, r0
 727 0028 3946     		mov	r1, r7
 728 002a 04F11000 		add	r0, r4, #16
 729 002e FFF7FEFF 		bl	strncmp
 730              	.LVL68:
 824:easyflash/src/ef_env.c ****     {
 731              		.loc 1 824 52 discriminator 2 view .LVU242
 732 0032 0028     		cmp	r0, #0
 733 0034 EBD1     		bne	.L78
 826:easyflash/src/ef_env.c ****         return true;
 734              		.loc 1 826 9 is_stmt 1 view .LVU243
 826:easyflash/src/ef_env.c ****         return true;
 735              		.loc 1 826 18 is_stmt 0 view .LVU244
 736 0036 0123     		movs	r3, #1
 737 0038 2B70     		strb	r3, [r5]
 827:easyflash/src/ef_env.c ****     }
 738              		.loc 1 827 9 is_stmt 1 view .LVU245
 827:easyflash/src/ef_env.c ****     }
 739              		.loc 1 827 16 is_stmt 0 view .LVU246
 740 003a E9E7     		b	.L76
 741              		.cfi_endproc
ARM GAS  /tmp/ccSGDQKw.s 			page 42


 742              	.LFE250:
 744              		.section	.text.align_write,"ax",%progbits
 745              		.align	1
 746              		.p2align 2,,3
 747              		.syntax unified
 748              		.thumb
 749              		.thumb_func
 751              	align_write:
 752              	.LVL69:
 753              	.LFB273:
1389:easyflash/src/ef_env.c **** 
1390:easyflash/src/ef_env.c **** static bool do_gc(sector_meta_data_t sector, void *arg1, void *arg2)
1391:easyflash/src/ef_env.c **** {
1392:easyflash/src/ef_env.c ****     struct env_node_obj env;
1393:easyflash/src/ef_env.c **** 
1394:easyflash/src/ef_env.c ****     if (sector->check_ok && (sector->status.dirty == SECTOR_DIRTY_TRUE || sector->status.dirty == S
1395:easyflash/src/ef_env.c ****     {
1396:easyflash/src/ef_env.c ****         uint8_t status_table[DIRTY_STATUS_TABLE_SIZE];
1397:easyflash/src/ef_env.c ****         /* change the sector status to GC */
1398:easyflash/src/ef_env.c ****         write_status(sector->addr + SECTOR_DIRTY_OFFSET, status_table, SECTOR_DIRTY_STATUS_NUM, SEC
1399:easyflash/src/ef_env.c ****         /* search all ENV */
1400:easyflash/src/ef_env.c ****         env.addr.start = FAILED_ADDR;
1401:easyflash/src/ef_env.c ****         while ((env.addr.start = get_next_env_addr(sector, &env)) != FAILED_ADDR)
1402:easyflash/src/ef_env.c ****         {
1403:easyflash/src/ef_env.c ****             read_env(&env);
1404:easyflash/src/ef_env.c ****             if (env.crc_is_ok && (env.status == ENV_WRITE || env.status == ENV_PRE_DELETE))
1405:easyflash/src/ef_env.c ****             {
1406:easyflash/src/ef_env.c ****                 /* move the ENV to new space */
1407:easyflash/src/ef_env.c ****                 if (move_env(&env) != EF_NO_ERR)
1408:easyflash/src/ef_env.c ****                 {
1409:easyflash/src/ef_env.c ****                     EF_DEBUG("Error: Moved the ENV (%.*s) for GC failed.", env.name_len, env.name);
1410:easyflash/src/ef_env.c ****                 }
1411:easyflash/src/ef_env.c ****             }
1412:easyflash/src/ef_env.c ****         }
1413:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
1414:easyflash/src/ef_env.c ****         EF_DEBUG("Collect a sector @0x%08X", sector->addr);
1415:easyflash/src/ef_env.c ****     }
1416:easyflash/src/ef_env.c **** 
1417:easyflash/src/ef_env.c ****     return false;
1418:easyflash/src/ef_env.c **** }
1419:easyflash/src/ef_env.c **** 
1420:easyflash/src/ef_env.c **** /*
1421:easyflash/src/ef_env.c ****  * The GC will be triggered on the following scene:
1422:easyflash/src/ef_env.c ****  * 1. alloc an ENV when the flash not has enough space
1423:easyflash/src/ef_env.c ****  * 2. write an ENV then the flash not has enough space
1424:easyflash/src/ef_env.c ****  */
1425:easyflash/src/ef_env.c **** static void gc_collect(void)
1426:easyflash/src/ef_env.c **** {
1427:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
1428:easyflash/src/ef_env.c ****     size_t empty_sec = 0;
1429:easyflash/src/ef_env.c **** 
1430:easyflash/src/ef_env.c ****     /* GC check the empty sector number */
1431:easyflash/src/ef_env.c ****     sector_iterator(&sector, SECTOR_STORE_EMPTY, &empty_sec, NULL, gc_check_cb, false);
1432:easyflash/src/ef_env.c **** 
1433:easyflash/src/ef_env.c ****     /* do GC collect */
1434:easyflash/src/ef_env.c ****     EF_DEBUG("The remain empty sector is %d, GC threshold is %d.", empty_sec, EF_GC_EMPTY_SEC_THRES
1435:easyflash/src/ef_env.c ****     if (empty_sec <= EF_GC_EMPTY_SEC_THRESHOLD)
ARM GAS  /tmp/ccSGDQKw.s 			page 43


1436:easyflash/src/ef_env.c ****     {
1437:easyflash/src/ef_env.c ****         sector_iterator(&sector, SECTOR_STORE_UNUSED, NULL, NULL, do_gc, false);
1438:easyflash/src/ef_env.c ****     }
1439:easyflash/src/ef_env.c **** 
1440:easyflash/src/ef_env.c ****     gc_request = false;
1441:easyflash/src/ef_env.c **** }
1442:easyflash/src/ef_env.c **** 
1443:easyflash/src/ef_env.c **** static EfErrCode align_write(uint32_t addr, const uint32_t *buf, size_t size)
1444:easyflash/src/ef_env.c **** {
 754              		.loc 1 1444 1 is_stmt 1 view -0
 755              		.cfi_startproc
 756              		@ args = 0, pretend = 0, frame = 8
 757              		@ frame_needed = 0, uses_anonymous_args = 0
1445:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 758              		.loc 1 1445 5 view .LVU248
1446:easyflash/src/ef_env.c ****     size_t align_remain;
 759              		.loc 1 1446 5 view .LVU249
1447:easyflash/src/ef_env.c **** 
1448:easyflash/src/ef_env.c **** #if (EF_WRITE_GRAN / 8 > 0)
1449:easyflash/src/ef_env.c ****     uint8_t align_data[EF_WRITE_GRAN / 8];
 760              		.loc 1 1449 5 view .LVU250
1450:easyflash/src/ef_env.c ****     size_t align_data_size = sizeof(align_data);
 761              		.loc 1 1450 5 view .LVU251
1451:easyflash/src/ef_env.c **** #else
1452:easyflash/src/ef_env.c ****     /* For compatibility with C89 */
1453:easyflash/src/ef_env.c ****     uint8_t align_data_u8, *align_data = &align_data_u8;
1454:easyflash/src/ef_env.c ****     size_t align_data_size = 1;
1455:easyflash/src/ef_env.c **** #endif
1456:easyflash/src/ef_env.c **** 
1457:easyflash/src/ef_env.c ****     memset(align_data, 0xFF, align_data_size);
 762              		.loc 1 1457 5 view .LVU252
1444:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 763              		.loc 1 1444 1 is_stmt 0 view .LVU253
 764 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 765              		.cfi_def_cfa_offset 20
 766              		.cfi_offset 4, -20
 767              		.cfi_offset 5, -16
 768              		.cfi_offset 6, -12
 769              		.cfi_offset 7, -8
 770              		.cfi_offset 14, -4
1458:easyflash/src/ef_env.c ****     result = ef_port_write(addr, buf, EF_WG_ALIGN_DOWN(size));
 771              		.loc 1 1458 14 view .LVU254
 772 0002 22F00307 		bic	r7, r2, #3
1444:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 773              		.loc 1 1444 1 view .LVU255
 774 0006 83B0     		sub	sp, sp, #12
 775              		.cfi_def_cfa_offset 32
1444:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 776              		.loc 1 1444 1 view .LVU256
 777 0008 1446     		mov	r4, r2
1457:easyflash/src/ef_env.c ****     result = ef_port_write(addr, buf, EF_WG_ALIGN_DOWN(size));
 778              		.loc 1 1457 5 view .LVU257
 779 000a 4FF0FF33 		mov	r3, #-1
 780              		.loc 1 1458 14 view .LVU258
 781 000e 3A46     		mov	r2, r7
 782              	.LVL70:
1444:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
ARM GAS  /tmp/ccSGDQKw.s 			page 44


 783              		.loc 1 1444 1 view .LVU259
 784 0010 0546     		mov	r5, r0
 785 0012 0E46     		mov	r6, r1
1457:easyflash/src/ef_env.c ****     result = ef_port_write(addr, buf, EF_WG_ALIGN_DOWN(size));
 786              		.loc 1 1457 5 view .LVU260
 787 0014 0193     		str	r3, [sp, #4]
 788              		.loc 1 1458 5 is_stmt 1 view .LVU261
 789              		.loc 1 1458 14 is_stmt 0 view .LVU262
 790 0016 FFF7FEFF 		bl	ef_port_write
 791              	.LVL71:
1459:easyflash/src/ef_env.c **** 
1460:easyflash/src/ef_env.c ****     align_remain = size - EF_WG_ALIGN_DOWN(size);
 792              		.loc 1 1460 5 is_stmt 1 view .LVU263
1461:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR && align_remain)
 793              		.loc 1 1461 5 view .LVU264
 794              		.loc 1 1461 8 is_stmt 0 view .LVU265
 795 001a 10B9     		cbnz	r0, .L85
 796              		.loc 1 1461 29 discriminator 1 view .LVU266
 797 001c 14F00302 		ands	r2, r4, #3
 798              	.LVL72:
 799              		.loc 1 1461 29 discriminator 1 view .LVU267
 800 0020 01D1     		bne	.L90
 801              	.LVL73:
 802              	.L85:
1462:easyflash/src/ef_env.c ****     {
1463:easyflash/src/ef_env.c ****         memcpy(align_data, (uint8_t *)buf + EF_WG_ALIGN_DOWN(size), align_remain);
1464:easyflash/src/ef_env.c ****         result = ef_port_write(addr + EF_WG_ALIGN_DOWN(size), (uint32_t *) align_data, align_data_s
1465:easyflash/src/ef_env.c ****     }
1466:easyflash/src/ef_env.c **** 
1467:easyflash/src/ef_env.c ****     return result;
 803              		.loc 1 1467 5 is_stmt 1 view .LVU268
1468:easyflash/src/ef_env.c **** }
 804              		.loc 1 1468 1 is_stmt 0 view .LVU269
 805 0022 03B0     		add	sp, sp, #12
 806              		.cfi_remember_state
 807              		.cfi_def_cfa_offset 20
 808              		@ sp needed
 809 0024 F0BD     		pop	{r4, r5, r6, r7, pc}
 810              	.LVL74:
 811              	.L90:
 812              		.cfi_restore_state
1463:easyflash/src/ef_env.c ****         result = ef_port_write(addr + EF_WG_ALIGN_DOWN(size), (uint32_t *) align_data, align_data_s
 813              		.loc 1 1463 9 is_stmt 1 view .LVU270
 814 0026 F119     		adds	r1, r6, r7
 815 0028 01A8     		add	r0, sp, #4
 816              	.LVL75:
1463:easyflash/src/ef_env.c ****         result = ef_port_write(addr + EF_WG_ALIGN_DOWN(size), (uint32_t *) align_data, align_data_s
 817              		.loc 1 1463 9 is_stmt 0 view .LVU271
 818 002a FFF7FEFF 		bl	memcpy
 819              	.LVL76:
1464:easyflash/src/ef_env.c ****     }
 820              		.loc 1 1464 9 is_stmt 1 view .LVU272
1464:easyflash/src/ef_env.c ****     }
 821              		.loc 1 1464 18 is_stmt 0 view .LVU273
 822 002e 0422     		movs	r2, #4
 823 0030 0DEB0201 		add	r1, sp, r2
 824 0034 7819     		adds	r0, r7, r5
ARM GAS  /tmp/ccSGDQKw.s 			page 45


 825 0036 FFF7FEFF 		bl	ef_port_write
 826              	.LVL77:
1467:easyflash/src/ef_env.c **** }
 827              		.loc 1 1467 5 is_stmt 1 view .LVU274
 828              		.loc 1 1468 1 is_stmt 0 view .LVU275
 829 003a 03B0     		add	sp, sp, #12
 830              		.cfi_def_cfa_offset 20
 831              		@ sp needed
 832 003c F0BD     		pop	{r4, r5, r6, r7, pc}
 833              		.loc 1 1468 1 view .LVU276
 834              		.cfi_endproc
 835              	.LFE273:
 837 003e 00BF     		.section	.text.alloc_env_cb,"ax",%progbits
 838              		.align	1
 839              		.p2align 2,,3
 840              		.syntax unified
 841              		.thumb
 842              		.thumb_func
 844              	alloc_env_cb:
 845              	.LVL78:
 846              	.LFB264:
1170:easyflash/src/ef_env.c ****     size_t *env_size = arg1;
 847              		.loc 1 1170 1 is_stmt 1 view -0
 848              		.cfi_startproc
 849              		@ args = 0, pretend = 0, frame = 0
 850              		@ frame_needed = 0, uses_anonymous_args = 0
 851              		@ link register save eliminated.
1171:easyflash/src/ef_env.c ****     uint32_t *empty_env = arg2;
 852              		.loc 1 1171 5 view .LVU278
1172:easyflash/src/ef_env.c **** 
 853              		.loc 1 1172 5 view .LVU279
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 854              		.loc 1 1177 15 is_stmt 0 view .LVU280
 855 0000 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 856              	.LVL79:
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 857              		.loc 1 1177 5 is_stmt 1 view .LVU281
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 858              		.loc 1 1177 8 is_stmt 0 view .LVU282
 859 0002 ABB1     		cbz	r3, .L104
1170:easyflash/src/ef_env.c ****     size_t *env_size = arg1;
 860              		.loc 1 1170 1 discriminator 1 view .LVU283
 861 0004 10B4     		push	{r4}
 862              		.cfi_def_cfa_offset 4
 863              		.cfi_offset 4, -4
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 864              		.loc 1 1177 26 discriminator 1 view .LVU284
 865 0006 0968     		ldr	r1, [r1]
 866              	.LVL80:
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 867              		.loc 1 1177 26 discriminator 1 view .LVU285
 868 0008 0469     		ldr	r4, [r0, #16]
 869 000a 8C42     		cmp	r4, r1
 870 000c 04D8     		bhi	.L107
 871              	.L96:
1185:easyflash/src/ef_env.c **** }
 872              		.loc 1 1185 12 view .LVU286
ARM GAS  /tmp/ccSGDQKw.s 			page 46


 873 000e 0023     		movs	r3, #0
 874              	.L92:
1186:easyflash/src/ef_env.c **** 
 875              		.loc 1 1186 1 view .LVU287
 876 0010 1846     		mov	r0, r3
 877              	.LVL81:
1186:easyflash/src/ef_env.c **** 
 878              		.loc 1 1186 1 view .LVU288
 879 0012 5DF8044B 		ldr	r4, [sp], #4
 880              		.cfi_remember_state
 881              		.cfi_restore 4
 882              		.cfi_def_cfa_offset 0
 883 0016 7047     		bx	lr
 884              	.LVL82:
 885              	.L107:
 886              		.cfi_restore_state
 887              	.LBB41:
 888              	.LBI41:
1169:easyflash/src/ef_env.c **** {
 889              		.loc 1 1169 13 is_stmt 1 view .LVU289
 890              	.LBB42:
1178:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
 891              		.loc 1 1178 32 is_stmt 0 view .LVU290
 892 0018 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
1178:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
 893              		.loc 1 1178 13 view .LVU291
 894 001a 0129     		cmp	r1, #1
 895 001c 05D0     		beq	.L93
1179:easyflash/src/ef_env.c ****     {
 896              		.loc 1 1179 17 view .LVU292
 897 001e 0229     		cmp	r1, #2
 898 0020 F5D1     		bne	.L96
1179:easyflash/src/ef_env.c ****     {
 899              		.loc 1 1179 66 view .LVU293
 900 0022 0449     		ldr	r1, .L108
1179:easyflash/src/ef_env.c ****     {
 901              		.loc 1 1179 63 view .LVU294
 902 0024 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 903 0026 0029     		cmp	r1, #0
 904 0028 F1D1     		bne	.L96
 905              	.L93:
1181:easyflash/src/ef_env.c ****         return true;
 906              		.loc 1 1181 9 is_stmt 1 view .LVU295
1181:easyflash/src/ef_env.c ****         return true;
 907              		.loc 1 1181 28 is_stmt 0 view .LVU296
 908 002a 4169     		ldr	r1, [r0, #20]
1181:easyflash/src/ef_env.c ****         return true;
 909              		.loc 1 1181 20 view .LVU297
 910 002c 1160     		str	r1, [r2]
1182:easyflash/src/ef_env.c ****     }
 911              		.loc 1 1182 9 is_stmt 1 view .LVU298
1182:easyflash/src/ef_env.c ****     }
 912              		.loc 1 1182 16 is_stmt 0 view .LVU299
 913 002e EFE7     		b	.L92
 914              	.LVL83:
 915              	.L104:
 916              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccSGDQKw.s 			page 47


 917              		.cfi_restore 4
1182:easyflash/src/ef_env.c ****     }
 918              		.loc 1 1182 16 view .LVU300
 919              	.LBE42:
 920              	.LBE41:
1186:easyflash/src/ef_env.c **** 
 921              		.loc 1 1186 1 view .LVU301
 922 0030 1846     		mov	r0, r3
 923              	.LVL84:
1186:easyflash/src/ef_env.c **** 
 924              		.loc 1 1186 1 view .LVU302
 925 0032 7047     		bx	lr
 926              	.L109:
 927              		.align	2
 928              	.L108:
 929 0034 00000000 		.word	.LANCHOR2
 930              		.cfi_endproc
 931              	.LFE264:
 933              		.section	.rodata.write_status.str1.4,"aMS",%progbits,1
 934              		.align	2
 935              	.LC0:
 936 0000 73746174 		.ascii	"status_index < status_num\000"
 936      75735F69 
 936      6E646578 
 936      203C2073 
 936      74617475 
 937 001a 0000     		.align	2
 938              	.LC1:
 939 001c 28257329 		.ascii	"(%s) has assert failed at %s.\000"
 939      20686173 
 939      20617373 
 939      65727420 
 939      6661696C 
 940 003a 0000     		.align	2
 941              	.LC2:
 942 003c 65617379 		.ascii	"easyflash/src/ef_env.c\000"
 942      666C6173 
 942      682F7372 
 942      632F6566 
 942      5F656E76 
 943 0053 00       		.align	2
 944              	.LC3:
 945 0054 73746174 		.ascii	"status_table\000"
 945      75735F74 
 945      61626C65 
 945      00
 946              		.section	.text.write_status,"ax",%progbits
 947              		.align	1
 948              		.p2align 2,,3
 949              		.syntax unified
 950              		.thumb
 951              		.thumb_func
 953              	write_status:
 954              	.LVL85:
 955              	.LFB237:
 281:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 956              		.loc 1 281 1 is_stmt 1 view -0
ARM GAS  /tmp/ccSGDQKw.s 			page 48


 957              		.cfi_startproc
 958              		@ args = 0, pretend = 0, frame = 0
 959              		@ frame_needed = 0, uses_anonymous_args = 0
 282:easyflash/src/ef_env.c ****     size_t byte_index;
 960              		.loc 1 282 5 view .LVU304
 283:easyflash/src/ef_env.c **** 
 961              		.loc 1 283 5 view .LVU305
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 962              		.loc 1 285 5 view .LVU306
 281:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 963              		.loc 1 281 1 is_stmt 0 view .LVU307
 964 0000 30B5     		push	{r4, r5, lr}
 965              		.cfi_def_cfa_offset 12
 966              		.cfi_offset 4, -12
 967              		.cfi_offset 5, -8
 968              		.cfi_offset 14, -4
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 969              		.loc 1 285 5 view .LVU308
 970 0002 9342     		cmp	r3, r2
 281:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 971              		.loc 1 281 1 view .LVU309
 972 0004 83B0     		sub	sp, sp, #12
 973              		.cfi_def_cfa_offset 24
 281:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 974              		.loc 1 281 1 view .LVU310
 975 0006 1C46     		mov	r4, r3
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 976              		.loc 1 285 5 view .LVU311
 977 0008 21D2     		bcs	.L116
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 978              		.loc 1 285 41 is_stmt 1 discriminator 2 view .LVU312
 286:easyflash/src/ef_env.c **** 
 979              		.loc 1 286 5 discriminator 2 view .LVU313
 980 000a 0B46     		mov	r3, r1
 981              	.LVL86:
 286:easyflash/src/ef_env.c **** 
 982              		.loc 1 286 5 is_stmt 0 discriminator 2 view .LVU314
 983 000c A9B1     		cbz	r1, .L117
 984              	.LBB47:
 985              	.LBB48:
 986              	.LBB49:
 987              	.LBB50:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 988              		.loc 1 241 32 view .LVU315
 989 000e 5201     		lsls	r2, r2, #5
 990              	.LVL87:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 991              		.loc 1 241 32 view .LVU316
 992 0010 193A     		subs	r2, r2, #25
 993 0012 0546     		mov	r5, r0
 994              	.LVL88:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 995              		.loc 1 241 32 view .LVU317
 996              	.LBE50:
 997              	.LBE49:
 998              	.LBE48:
 999              	.LBI47:
ARM GAS  /tmp/ccSGDQKw.s 			page 49


 280:easyflash/src/ef_env.c **** {
 1000              		.loc 1 280 18 is_stmt 1 view .LVU318
 1001              	.LBB53:
 286:easyflash/src/ef_env.c **** 
 1002              		.loc 1 286 28 view .LVU319
 289:easyflash/src/ef_env.c **** 
 1003              		.loc 1 289 5 view .LVU320
 1004              	.LBB52:
 1005              	.LBI49:
 231:easyflash/src/ef_env.c **** {
 1006              		.loc 1 231 15 view .LVU321
 1007              	.LBB51:
 233:easyflash/src/ef_env.c ****     /*
 1008              		.loc 1 233 5 view .LVU322
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 1009              		.loc 1 241 5 view .LVU323
 1010 0014 D208     		lsrs	r2, r2, #3
 1011 0016 FF21     		movs	r1, #255
 1012              	.LVL89:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 1013              		.loc 1 241 5 is_stmt 0 view .LVU324
 1014 0018 1846     		mov	r0, r3
 1015              	.LVL90:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 1016              		.loc 1 241 5 view .LVU325
 1017 001a FFF7FEFF 		bl	memset
 1018              	.LVL91:
 242:easyflash/src/ef_env.c ****     {
 1019              		.loc 1 242 5 is_stmt 1 view .LVU326
 248:easyflash/src/ef_env.c ****         status_table[byte_index] = 0x00;
 1020              		.loc 1 248 9 view .LVU327
 248:easyflash/src/ef_env.c ****         status_table[byte_index] = 0x00;
 1021              		.loc 1 248 36 is_stmt 0 view .LVU328
 1022 001e 013C     		subs	r4, r4, #1
 1023              	.LVL92:
 249:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1024              		.loc 1 249 9 is_stmt 1 view .LVU329
 249:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1025              		.loc 1 249 34 is_stmt 0 view .LVU330
 1026 0020 0022     		movs	r2, #0
 1027 0022 00F82420 		strb	r2, [r0, r4, lsl #2]
 253:easyflash/src/ef_env.c **** }
 1028              		.loc 1 253 5 is_stmt 1 view .LVU331
 1029              	.LVL93:
 253:easyflash/src/ef_env.c **** }
 1030              		.loc 1 253 5 is_stmt 0 view .LVU332
 1031              	.LBE51:
 1032              	.LBE52:
 292:easyflash/src/ef_env.c ****     {
 1033              		.loc 1 292 5 is_stmt 1 view .LVU333
 301:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1034              		.loc 1 301 5 view .LVU334
 301:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1035              		.loc 1 301 14 is_stmt 0 view .LVU335
 1036 0026 00EB8401 		add	r1, r0, r4, lsl #2
 1037 002a 0422     		movs	r2, #4
 1038 002c 05EB8400 		add	r0, r5, r4, lsl #2
ARM GAS  /tmp/ccSGDQKw.s 			page 50


 1039              	.LBE53:
 1040              	.LBE47:
 305:easyflash/src/ef_env.c **** 
 1041              		.loc 1 305 1 view .LVU336
 1042 0030 03B0     		add	sp, sp, #12
 1043              		.cfi_remember_state
 1044              		.cfi_def_cfa_offset 12
 1045              		@ sp needed
 1046 0032 BDE83040 		pop	{r4, r5, lr}
 1047              		.cfi_restore 14
 1048              		.cfi_restore 5
 1049              		.cfi_restore 4
 1050              		.cfi_def_cfa_offset 0
 1051              	.LVL94:
 1052              	.LBB55:
 1053              	.LBB54:
 301:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1054              		.loc 1 301 14 view .LVU337
 1055 0036 FFF7FEBF 		b	ef_port_write
 1056              	.LVL95:
 1057              	.L117:
 1058              		.cfi_restore_state
 301:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1059              		.loc 1 301 14 view .LVU338
 1060              	.LBE54:
 1061              	.LBE55:
 286:easyflash/src/ef_env.c **** 
 1062              		.loc 1 286 5 is_stmt 1 discriminator 1 view .LVU339
 1063 003a 0A49     		ldr	r1, .L118
 1064              	.LVL96:
 286:easyflash/src/ef_env.c **** 
 1065              		.loc 1 286 5 is_stmt 0 discriminator 1 view .LVU340
 1066 003c 0091     		str	r1, [sp]
 1067 003e 0A4B     		ldr	r3, .L118+4
 1068              	.LVL97:
 286:easyflash/src/ef_env.c **** 
 1069              		.loc 1 286 5 discriminator 1 view .LVU341
 1070 0040 0A4A     		ldr	r2, .L118+8
 1071              	.LVL98:
 286:easyflash/src/ef_env.c **** 
 1072              		.loc 1 286 5 discriminator 1 view .LVU342
 1073 0042 0B48     		ldr	r0, .L118+12
 1074              	.LVL99:
 286:easyflash/src/ef_env.c **** 
 1075              		.loc 1 286 5 discriminator 1 view .LVU343
 1076 0044 4FF48F71 		mov	r1, #286
 1077 0048 FFF7FEFF 		bl	ef_log_debug
 1078              	.LVL100:
 1079              	.L114:
 286:easyflash/src/ef_env.c **** 
 1080              		.loc 1 286 5 is_stmt 1 discriminator 2 view .LVU344
 286:easyflash/src/ef_env.c **** 
 1081              		.loc 1 286 5 discriminator 2 view .LVU345
 286:easyflash/src/ef_env.c **** 
 1082              		.loc 1 286 5 discriminator 2 view .LVU346
 286:easyflash/src/ef_env.c **** 
 1083              		.loc 1 286 5 discriminator 2 view .LVU347
ARM GAS  /tmp/ccSGDQKw.s 			page 51


 286:easyflash/src/ef_env.c **** 
 1084              		.loc 1 286 5 discriminator 2 view .LVU348
 286:easyflash/src/ef_env.c **** 
 1085              		.loc 1 286 5 discriminator 2 view .LVU349
 1086 004c FEE7     		b	.L114
 1087              	.LVL101:
 1088              	.L116:
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1089              		.loc 1 285 5 discriminator 1 view .LVU350
 1090 004e 0549     		ldr	r1, .L118
 1091              	.LVL102:
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1092              		.loc 1 285 5 is_stmt 0 discriminator 1 view .LVU351
 1093 0050 0091     		str	r1, [sp]
 1094 0052 084B     		ldr	r3, .L118+16
 1095              	.LVL103:
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1096              		.loc 1 285 5 discriminator 1 view .LVU352
 1097 0054 054A     		ldr	r2, .L118+8
 1098              	.LVL104:
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1099              		.loc 1 285 5 discriminator 1 view .LVU353
 1100 0056 0648     		ldr	r0, .L118+12
 1101              	.LVL105:
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1102              		.loc 1 285 5 discriminator 1 view .LVU354
 1103 0058 40F21D11 		movw	r1, #285
 1104 005c FFF7FEFF 		bl	ef_log_debug
 1105              	.LVL106:
 1106              	.L112:
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1107              		.loc 1 285 5 is_stmt 1 discriminator 1 view .LVU355
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1108              		.loc 1 285 5 discriminator 1 view .LVU356
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1109              		.loc 1 285 5 discriminator 1 view .LVU357
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1110              		.loc 1 285 5 discriminator 1 view .LVU358
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1111              		.loc 1 285 5 discriminator 1 view .LVU359
 285:easyflash/src/ef_env.c ****     EF_ASSERT(status_table);
 1112              		.loc 1 285 5 discriminator 1 view .LVU360
 1113 0060 FEE7     		b	.L112
 1114              	.L119:
 1115 0062 00BF     		.align	2
 1116              	.L118:
 1117 0064 00000000 		.word	.LANCHOR3
 1118 0068 54000000 		.word	.LC3
 1119 006c 1C000000 		.word	.LC1
 1120 0070 3C000000 		.word	.LC2
 1121 0074 00000000 		.word	.LC0
 1122              		.cfi_endproc
 1123              	.LFE237:
 1125              		.section	.text.update_sec_status,"ax",%progbits
 1126              		.align	1
 1127              		.p2align 2,,3
 1128              		.syntax unified
ARM GAS  /tmp/ccSGDQKw.s 			page 52


 1129              		.thumb
 1130              		.thumb_func
 1132              	update_sec_status:
 1133              	.LVL107:
 1134              	.LFB261:
1092:easyflash/src/ef_env.c ****     uint8_t status_table[STORE_STATUS_TABLE_SIZE];
 1135              		.loc 1 1092 1 view -0
 1136              		.cfi_startproc
 1137              		@ args = 0, pretend = 0, frame = 16
 1138              		@ frame_needed = 0, uses_anonymous_args = 0
1092:easyflash/src/ef_env.c ****     uint8_t status_table[STORE_STATUS_TABLE_SIZE];
 1139              		.loc 1 1092 1 is_stmt 0 view .LVU362
 1140 0000 30B5     		push	{r4, r5, lr}
 1141              		.cfi_def_cfa_offset 12
 1142              		.cfi_offset 4, -12
 1143              		.cfi_offset 5, -8
 1144              		.cfi_offset 14, -4
1096:easyflash/src/ef_env.c ****     {
 1145              		.loc 1 1096 23 view .LVU363
 1146 0002 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
1093:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 1147              		.loc 1 1093 5 is_stmt 1 view .LVU364
1094:easyflash/src/ef_env.c ****     /* change the current sector status */
 1148              		.loc 1 1094 5 view .LVU365
 1149              	.LVL108:
1096:easyflash/src/ef_env.c ****     {
 1150              		.loc 1 1096 5 view .LVU366
1096:easyflash/src/ef_env.c ****     {
 1151              		.loc 1 1096 8 is_stmt 0 view .LVU367
 1152 0004 012B     		cmp	r3, #1
1092:easyflash/src/ef_env.c ****     uint8_t status_table[STORE_STATUS_TABLE_SIZE];
 1153              		.loc 1 1092 1 view .LVU368
 1154 0006 85B0     		sub	sp, sp, #20
 1155              		.cfi_def_cfa_offset 32
1092:easyflash/src/ef_env.c ****     uint8_t status_table[STORE_STATUS_TABLE_SIZE];
 1156              		.loc 1 1092 1 view .LVU369
 1157 0008 0446     		mov	r4, r0
1096:easyflash/src/ef_env.c ****     {
 1158              		.loc 1 1096 8 view .LVU370
 1159 000a 11D0     		beq	.L132
1101:easyflash/src/ef_env.c ****     {
 1160              		.loc 1 1101 10 is_stmt 1 view .LVU371
1101:easyflash/src/ef_env.c ****     {
 1161              		.loc 1 1101 13 is_stmt 0 view .LVU372
 1162 000c 022B     		cmp	r3, #2
 1163 000e 03D0     		beq	.L133
 1164              	.LVL109:
 1165              	.L126:
1094:easyflash/src/ef_env.c ****     /* change the current sector status */
 1166              		.loc 1 1094 15 view .LVU373
 1167 0010 0024     		movs	r4, #0
 1168              	.LVL110:
 1169              	.L122:
1125:easyflash/src/ef_env.c **** }
 1170              		.loc 1 1125 5 is_stmt 1 view .LVU374
1126:easyflash/src/ef_env.c **** 
 1171              		.loc 1 1126 1 is_stmt 0 view .LVU375
ARM GAS  /tmp/ccSGDQKw.s 			page 53


 1172 0012 2046     		mov	r0, r4
 1173 0014 05B0     		add	sp, sp, #20
 1174              		.cfi_remember_state
 1175              		.cfi_def_cfa_offset 12
 1176              		@ sp needed
 1177 0016 30BD     		pop	{r4, r5, pc}
 1178              	.LVL111:
 1179              	.L133:
 1180              		.cfi_restore_state
 1181              	.LBB58:
 1182              	.LBB59:
1104:easyflash/src/ef_env.c ****         {
 1183              		.loc 1 1104 19 view .LVU376
 1184 0018 0369     		ldr	r3, [r0, #16]
1104:easyflash/src/ef_env.c ****         {
 1185              		.loc 1 1104 12 view .LVU377
 1186 001a 472B     		cmp	r3, #71
 1187 001c 1546     		mov	r5, r2
 1188              	.LVL112:
1104:easyflash/src/ef_env.c ****         {
 1189              		.loc 1 1104 12 view .LVU378
 1190              	.LBE59:
 1191              	.LBI58:
1091:easyflash/src/ef_env.c **** {
 1192              		.loc 1 1091 18 is_stmt 1 view .LVU379
 1193              	.LBB60:
1104:easyflash/src/ef_env.c ****         {
 1194              		.loc 1 1104 9 view .LVU380
1104:easyflash/src/ef_env.c ****         {
 1195              		.loc 1 1104 12 is_stmt 0 view .LVU381
 1196 001e 12D9     		bls	.L123
1104:easyflash/src/ef_env.c ****         {
 1197              		.loc 1 1104 72 view .LVU382
 1198 0020 591A     		subs	r1, r3, r1
 1199              	.LVL113:
1104:easyflash/src/ef_env.c ****         {
 1200              		.loc 1 1104 54 view .LVU383
 1201 0022 4729     		cmp	r1, #71
 1202 0024 0FD9     		bls	.L123
1119:easyflash/src/ef_env.c ****         {
 1203              		.loc 1 1119 14 is_stmt 1 view .LVU384
1119:easyflash/src/ef_env.c ****         {
 1204              		.loc 1 1119 17 is_stmt 0 view .LVU385
 1205 0026 002A     		cmp	r2, #0
 1206 0028 F2D0     		beq	.L126
1121:easyflash/src/ef_env.c ****         }
 1207              		.loc 1 1121 13 is_stmt 1 view .LVU386
1121:easyflash/src/ef_env.c ****         }
 1208              		.loc 1 1121 22 is_stmt 0 view .LVU387
 1209 002a 0024     		movs	r4, #0
 1210 002c 1470     		strb	r4, [r2]
 1211 002e F0E7     		b	.L122
 1212              	.LVL114:
 1213              	.L132:
1121:easyflash/src/ef_env.c ****         }
 1214              		.loc 1 1121 22 view .LVU388
 1215              	.LBE60:
ARM GAS  /tmp/ccSGDQKw.s 			page 54


 1216              	.LBE58:
1099:easyflash/src/ef_env.c ****     }
 1217              		.loc 1 1099 9 is_stmt 1 view .LVU389
1099:easyflash/src/ef_env.c ****     }
 1218              		.loc 1 1099 18 is_stmt 0 view .LVU390
 1219 0030 0422     		movs	r2, #4
 1220              	.LVL115:
1099:easyflash/src/ef_env.c ****     }
 1221              		.loc 1 1099 18 view .LVU391
 1222 0032 0223     		movs	r3, #2
 1223 0034 0DEB0201 		add	r1, sp, r2
 1224              	.LVL116:
1099:easyflash/src/ef_env.c ****     }
 1225              		.loc 1 1099 18 view .LVU392
 1226 0038 4068     		ldr	r0, [r0, #4]
 1227              	.LVL117:
1099:easyflash/src/ef_env.c ****     }
 1228              		.loc 1 1099 18 view .LVU393
 1229 003a FFF7FEFF 		bl	write_status
 1230              	.LVL118:
 1231 003e 0446     		mov	r4, r0
 1232              	.LVL119:
1125:easyflash/src/ef_env.c **** }
 1233              		.loc 1 1125 5 is_stmt 1 view .LVU394
1126:easyflash/src/ef_env.c **** 
 1234              		.loc 1 1126 1 is_stmt 0 view .LVU395
 1235 0040 2046     		mov	r0, r4
 1236 0042 05B0     		add	sp, sp, #20
 1237              		.cfi_remember_state
 1238              		.cfi_def_cfa_offset 12
 1239              		@ sp needed
 1240 0044 30BD     		pop	{r4, r5, pc}
 1241              	.LVL120:
 1242              	.L123:
 1243              		.cfi_restore_state
 1244              	.LBB63:
 1245              	.LBB61:
1107:easyflash/src/ef_env.c **** 
 1246              		.loc 1 1107 13 is_stmt 1 view .LVU396
1107:easyflash/src/ef_env.c **** 
 1247              		.loc 1 1107 22 is_stmt 0 view .LVU397
 1248 0046 6068     		ldr	r0, [r4, #4]
 1249              	.LVL121:
1107:easyflash/src/ef_env.c **** 
 1250              		.loc 1 1107 22 view .LVU398
 1251 0048 01A9     		add	r1, sp, #4
 1252 004a 0323     		movs	r3, #3
 1253 004c 0422     		movs	r2, #4
 1254              	.LVL122:
1107:easyflash/src/ef_env.c **** 
 1255              		.loc 1 1107 22 view .LVU399
 1256 004e FFF7FEFF 		bl	write_status
 1257              	.LVL123:
1111:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 1258              		.loc 1 1111 13 view .LVU400
 1259 0052 6368     		ldr	r3, [r4, #4]
1107:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 55


 1260              		.loc 1 1107 22 view .LVU401
 1261 0054 0446     		mov	r4, r0
 1262              	.LVL124:
1111:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 1263              		.loc 1 1111 13 is_stmt 1 view .LVU402
 1264 0056 03F50031 		add	r1, r3, #131072
 1265 005a 1846     		mov	r0, r3
 1266 005c FFF7FEFF 		bl	update_sector_cache
 1267              	.LVL125:
1114:easyflash/src/ef_env.c ****             {
 1268              		.loc 1 1114 13 view .LVU403
1114:easyflash/src/ef_env.c ****             {
 1269              		.loc 1 1114 16 is_stmt 0 view .LVU404
 1270 0060 002D     		cmp	r5, #0
 1271 0062 D6D0     		beq	.L122
1116:easyflash/src/ef_env.c ****             }
 1272              		.loc 1 1116 17 is_stmt 1 view .LVU405
1116:easyflash/src/ef_env.c ****             }
 1273              		.loc 1 1116 26 is_stmt 0 view .LVU406
 1274 0064 0123     		movs	r3, #1
 1275              	.LBE61:
 1276              	.LBE63:
1126:easyflash/src/ef_env.c **** 
 1277              		.loc 1 1126 1 view .LVU407
 1278 0066 2046     		mov	r0, r4
 1279              	.LBB64:
 1280              	.LBB62:
1116:easyflash/src/ef_env.c ****             }
 1281              		.loc 1 1116 26 view .LVU408
 1282 0068 2B70     		strb	r3, [r5]
 1283              	.LVL126:
1116:easyflash/src/ef_env.c ****             }
 1284              		.loc 1 1116 26 view .LVU409
 1285              	.LBE62:
 1286              	.LBE64:
1125:easyflash/src/ef_env.c **** }
 1287              		.loc 1 1125 5 is_stmt 1 view .LVU410
1126:easyflash/src/ef_env.c **** 
 1288              		.loc 1 1126 1 is_stmt 0 view .LVU411
 1289 006a 05B0     		add	sp, sp, #20
 1290              		.cfi_def_cfa_offset 12
 1291              		@ sp needed
 1292 006c 30BD     		pop	{r4, r5, pc}
1126:easyflash/src/ef_env.c **** 
 1293              		.loc 1 1126 1 view .LVU412
 1294              		.cfi_endproc
 1295              	.LFE261:
 1297 006e 00BF     		.section	.rodata.print_env_cb.str1.4,"aMS",%progbits,1
 1298              		.align	2
 1299              	.LC4:
 1300 0000 252E2A73 		.ascii	"%.*s=\000"
 1300      3D00
 1301 0006 0000     		.align	2
 1302              	.LC5:
 1303 0008 252E2A73 		.ascii	"%.*s\000"
 1303      00
 1304 000d 000000   		.align	2
ARM GAS  /tmp/ccSGDQKw.s 			page 56


 1305              	.LC6:
 1306 0010 626C6F62 		.ascii	"blob @0x%08X %dbytes\000"
 1306      20403078 
 1306      25303858 
 1306      20256462 
 1306      79746573 
 1307 0025 000000   		.align	2
 1308              	.LC7:
 1309 0028 0D0A00   		.ascii	"\015\012\000"
 1310              		.section	.text.print_env_cb,"ax",%progbits
 1311              		.align	1
 1312              		.p2align 2,,3
 1313              		.syntax unified
 1314              		.thumb
 1315              		.thumb_func
 1317              	print_env_cb:
 1318              	.LVL127:
 1319              	.LFB283:
1469:easyflash/src/ef_env.c **** 
1470:easyflash/src/ef_env.c **** static EfErrCode create_env_blob(sector_meta_data_t sector, const char *key, const void *value, siz
1471:easyflash/src/ef_env.c **** {
1472:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1473:easyflash/src/ef_env.c ****     struct env_hdr_data env_hdr;
1474:easyflash/src/ef_env.c ****     bool is_full = false;
1475:easyflash/src/ef_env.c ****     uint32_t env_addr = sector->empty_env;
1476:easyflash/src/ef_env.c **** 
1477:easyflash/src/ef_env.c ****     if (strlen(key) > EF_ENV_NAME_MAX)
1478:easyflash/src/ef_env.c ****     {
1479:easyflash/src/ef_env.c ****         EF_INFO("Error: The ENV name length is more than %d", EF_ENV_NAME_MAX);
1480:easyflash/src/ef_env.c ****         return EF_ENV_NAME_ERR;
1481:easyflash/src/ef_env.c ****     }
1482:easyflash/src/ef_env.c **** 
1483:easyflash/src/ef_env.c ****     memset(&env_hdr, 0xFF, sizeof(struct env_hdr_data));
1484:easyflash/src/ef_env.c ****     env_hdr.magic = ENV_MAGIC_WORD;
1485:easyflash/src/ef_env.c ****     env_hdr.name_len = strlen(key);
1486:easyflash/src/ef_env.c ****     env_hdr.value_len = len;
1487:easyflash/src/ef_env.c ****     env_hdr.len = ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + EF_WG_ALIGN(env_hdr.value_len
1488:easyflash/src/ef_env.c **** 
1489:easyflash/src/ef_env.c ****     if (env_hdr.len > SECTOR_SIZE - SECTOR_HDR_DATA_SIZE)
1490:easyflash/src/ef_env.c ****     {
1491:easyflash/src/ef_env.c ****         EF_INFO("Error: The ENV size is too big");
1492:easyflash/src/ef_env.c ****         return EF_ENV_FULL;
1493:easyflash/src/ef_env.c ****     }
1494:easyflash/src/ef_env.c **** 
1495:easyflash/src/ef_env.c ****     if (env_addr != FAILED_ADDR || (env_addr = new_env(sector, env_hdr.len)) != FAILED_ADDR)
1496:easyflash/src/ef_env.c ****     {
1497:easyflash/src/ef_env.c ****         size_t align_remain;
1498:easyflash/src/ef_env.c ****         /* update the sector status */
1499:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR)
1500:easyflash/src/ef_env.c ****         {
1501:easyflash/src/ef_env.c ****             result = update_sec_status(sector, env_hdr.len, &is_full);
1502:easyflash/src/ef_env.c ****         }
1503:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR)
1504:easyflash/src/ef_env.c ****         {
1505:easyflash/src/ef_env.c ****             uint8_t ff = 0xFF;
1506:easyflash/src/ef_env.c ****             /* start calculate CRC32 */
1507:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(0, &env_hdr.name_len, ENV_HDR_DATA_SIZE - ENV_NAME_LEN_OF
ARM GAS  /tmp/ccSGDQKw.s 			page 57


1508:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, key, env_hdr.name_len);
1509:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.name_len) - env_hdr.name_len;
1510:easyflash/src/ef_env.c ****             while (align_remain--)
1511:easyflash/src/ef_env.c ****             {
1512:easyflash/src/ef_env.c ****                 env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, &ff, 1);
1513:easyflash/src/ef_env.c ****             }
1514:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, value, env_hdr.value_len);
1515:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.value_len) - env_hdr.value_len;
1516:easyflash/src/ef_env.c ****             while (align_remain--)
1517:easyflash/src/ef_env.c ****             {
1518:easyflash/src/ef_env.c ****                 env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, &ff, 1);
1519:easyflash/src/ef_env.c ****             }
1520:easyflash/src/ef_env.c ****             /* write ENV header data */
1521:easyflash/src/ef_env.c ****             result = write_env_hdr(env_addr, &env_hdr);
1522:easyflash/src/ef_env.c **** 
1523:easyflash/src/ef_env.c ****         }
1524:easyflash/src/ef_env.c ****         /* write key name */
1525:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR)
1526:easyflash/src/ef_env.c ****         {
1527:easyflash/src/ef_env.c ****             result = align_write(env_addr + ENV_HDR_DATA_SIZE, (uint32_t *) key, env_hdr.name_len);
1528:easyflash/src/ef_env.c **** 
1529:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
1530:easyflash/src/ef_env.c ****             if (!is_full)
1531:easyflash/src/ef_env.c ****             {
1532:easyflash/src/ef_env.c ****                 update_sector_cache(sector->addr,
1533:easyflash/src/ef_env.c ****                                     env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + 
1534:easyflash/src/ef_env.c ****             }
1535:easyflash/src/ef_env.c ****             update_env_cache(key, env_hdr.name_len, env_addr);
1536:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
1537:easyflash/src/ef_env.c ****         }
1538:easyflash/src/ef_env.c ****         /* write value */
1539:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR)
1540:easyflash/src/ef_env.c ****         {
1541:easyflash/src/ef_env.c ****             result = align_write(env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len), valu
1542:easyflash/src/ef_env.c ****                                  env_hdr.value_len);
1543:easyflash/src/ef_env.c ****         }
1544:easyflash/src/ef_env.c ****         /* change the ENV status to ENV_WRITE */
1545:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR)
1546:easyflash/src/ef_env.c ****         {
1547:easyflash/src/ef_env.c ****             result = write_status(env_addr, env_hdr.status_table, ENV_STATUS_NUM, ENV_WRITE);
1548:easyflash/src/ef_env.c ****         }
1549:easyflash/src/ef_env.c ****         /* trigger GC collect when current sector is full */
1550:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR && is_full)
1551:easyflash/src/ef_env.c ****         {
1552:easyflash/src/ef_env.c ****             EF_DEBUG("Trigger a GC check after created ENV.");
1553:easyflash/src/ef_env.c ****             gc_request = true;
1554:easyflash/src/ef_env.c ****         }
1555:easyflash/src/ef_env.c ****     }
1556:easyflash/src/ef_env.c ****     else
1557:easyflash/src/ef_env.c ****     {
1558:easyflash/src/ef_env.c ****         result = EF_ENV_FULL;
1559:easyflash/src/ef_env.c ****     }
1560:easyflash/src/ef_env.c **** 
1561:easyflash/src/ef_env.c ****     return result;
1562:easyflash/src/ef_env.c **** }
1563:easyflash/src/ef_env.c **** 
1564:easyflash/src/ef_env.c **** /**
ARM GAS  /tmp/ccSGDQKw.s 			page 58


1565:easyflash/src/ef_env.c ****  * Delete an ENV.
1566:easyflash/src/ef_env.c ****  *
1567:easyflash/src/ef_env.c ****  * @param key ENV name
1568:easyflash/src/ef_env.c ****  *
1569:easyflash/src/ef_env.c ****  * @return result
1570:easyflash/src/ef_env.c ****  */
1571:easyflash/src/ef_env.c **** EfErrCode ef_del_env(const char *key)
1572:easyflash/src/ef_env.c **** {
1573:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1574:easyflash/src/ef_env.c **** 
1575:easyflash/src/ef_env.c ****     if (!init_ok)
1576:easyflash/src/ef_env.c ****     {
1577:easyflash/src/ef_env.c ****         EF_INFO("Error: ENV isn't initialize OK.");
1578:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
1579:easyflash/src/ef_env.c ****     }
1580:easyflash/src/ef_env.c **** 
1581:easyflash/src/ef_env.c ****     /* lock the ENV cache */
1582:easyflash/src/ef_env.c ****     ef_port_env_lock();
1583:easyflash/src/ef_env.c **** 
1584:easyflash/src/ef_env.c ****     result = del_env(key, NULL, true);
1585:easyflash/src/ef_env.c **** 
1586:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
1587:easyflash/src/ef_env.c ****     ef_port_env_unlock();
1588:easyflash/src/ef_env.c **** 
1589:easyflash/src/ef_env.c ****     return result;
1590:easyflash/src/ef_env.c **** }
1591:easyflash/src/ef_env.c **** 
1592:easyflash/src/ef_env.c **** /**
1593:easyflash/src/ef_env.c ****  * The same to ef_del_env on this mode
1594:easyflash/src/ef_env.c ****  * It's compatibility with older versions (less then V4.0).
1595:easyflash/src/ef_env.c ****  *
1596:easyflash/src/ef_env.c ****  * @note this function is DEPRECATED
1597:easyflash/src/ef_env.c ****  *
1598:easyflash/src/ef_env.c ****  * @param key ENV name
1599:easyflash/src/ef_env.c ****  *
1600:easyflash/src/ef_env.c ****  * @return result
1601:easyflash/src/ef_env.c ****  */
1602:easyflash/src/ef_env.c **** EfErrCode ef_del_and_save_env(const char *key)
1603:easyflash/src/ef_env.c **** {
1604:easyflash/src/ef_env.c ****     return ef_del_env(key);
1605:easyflash/src/ef_env.c **** }
1606:easyflash/src/ef_env.c **** 
1607:easyflash/src/ef_env.c **** static EfErrCode set_env(const char *key, const void *value_buf, size_t buf_len)
1608:easyflash/src/ef_env.c **** {
1609:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1610:easyflash/src/ef_env.c ****     static struct env_node_obj env;
1611:easyflash/src/ef_env.c ****     static struct sector_meta_data sector;
1612:easyflash/src/ef_env.c ****     bool env_is_found = false;
1613:easyflash/src/ef_env.c **** 
1614:easyflash/src/ef_env.c ****     if (value_buf == NULL)
1615:easyflash/src/ef_env.c ****     {
1616:easyflash/src/ef_env.c ****         result = del_env(key, NULL, true);
1617:easyflash/src/ef_env.c ****     }
1618:easyflash/src/ef_env.c ****     else
1619:easyflash/src/ef_env.c ****     {
1620:easyflash/src/ef_env.c ****         /* make sure the flash has enough space */
1621:easyflash/src/ef_env.c ****         if (new_env_by_kv(&sector, strlen(key), buf_len) == FAILED_ADDR)
ARM GAS  /tmp/ccSGDQKw.s 			page 59


1622:easyflash/src/ef_env.c ****         {
1623:easyflash/src/ef_env.c ****             return EF_ENV_FULL;
1624:easyflash/src/ef_env.c ****         }
1625:easyflash/src/ef_env.c ****         env_is_found = find_env(key, &env);
1626:easyflash/src/ef_env.c ****         /* prepare to delete the old ENV */
1627:easyflash/src/ef_env.c ****         if (env_is_found)
1628:easyflash/src/ef_env.c ****         {
1629:easyflash/src/ef_env.c ****             result = del_env(key, &env, false);
1630:easyflash/src/ef_env.c ****         }
1631:easyflash/src/ef_env.c ****         /* create the new ENV */
1632:easyflash/src/ef_env.c ****         if (result == EF_NO_ERR)
1633:easyflash/src/ef_env.c ****         {
1634:easyflash/src/ef_env.c ****             result = create_env_blob(&sector, key, value_buf, buf_len);
1635:easyflash/src/ef_env.c ****         }
1636:easyflash/src/ef_env.c ****         /* delete the old ENV */
1637:easyflash/src/ef_env.c ****         if (env_is_found && result == EF_NO_ERR)
1638:easyflash/src/ef_env.c ****         {
1639:easyflash/src/ef_env.c ****             result = del_env(key, &env, true);
1640:easyflash/src/ef_env.c ****         }
1641:easyflash/src/ef_env.c ****         /* process the GC after set ENV */
1642:easyflash/src/ef_env.c ****         if (gc_request)
1643:easyflash/src/ef_env.c ****         {
1644:easyflash/src/ef_env.c ****             gc_collect();
1645:easyflash/src/ef_env.c ****         }
1646:easyflash/src/ef_env.c ****     }
1647:easyflash/src/ef_env.c **** 
1648:easyflash/src/ef_env.c ****     return result;
1649:easyflash/src/ef_env.c **** }
1650:easyflash/src/ef_env.c **** 
1651:easyflash/src/ef_env.c **** /**
1652:easyflash/src/ef_env.c ****  * Set a blob ENV. If it value is NULL, delete it.
1653:easyflash/src/ef_env.c ****  * If not find it in flash, then create it.
1654:easyflash/src/ef_env.c ****  *
1655:easyflash/src/ef_env.c ****  * @param key ENV name
1656:easyflash/src/ef_env.c ****  * @param value ENV value
1657:easyflash/src/ef_env.c ****  * @param len ENV value length
1658:easyflash/src/ef_env.c ****  *
1659:easyflash/src/ef_env.c ****  * @return result
1660:easyflash/src/ef_env.c ****  */
1661:easyflash/src/ef_env.c **** EfErrCode ef_set_env_blob(const char *key, const void *value_buf, size_t buf_len)
1662:easyflash/src/ef_env.c **** {
1663:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1664:easyflash/src/ef_env.c **** 
1665:easyflash/src/ef_env.c **** 
1666:easyflash/src/ef_env.c ****     if (!init_ok)
1667:easyflash/src/ef_env.c ****     {
1668:easyflash/src/ef_env.c ****         EF_INFO("ENV isn't initialize OK.");
1669:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
1670:easyflash/src/ef_env.c ****     }
1671:easyflash/src/ef_env.c **** 
1672:easyflash/src/ef_env.c ****     /* lock the ENV cache */
1673:easyflash/src/ef_env.c ****     ef_port_env_lock();
1674:easyflash/src/ef_env.c **** 
1675:easyflash/src/ef_env.c ****     result = set_env(key, value_buf, buf_len);
1676:easyflash/src/ef_env.c **** 
1677:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
1678:easyflash/src/ef_env.c ****     ef_port_env_unlock();
ARM GAS  /tmp/ccSGDQKw.s 			page 60


1679:easyflash/src/ef_env.c **** 
1680:easyflash/src/ef_env.c ****     return result;
1681:easyflash/src/ef_env.c **** }
1682:easyflash/src/ef_env.c **** 
1683:easyflash/src/ef_env.c **** /**
1684:easyflash/src/ef_env.c ****  * Set a string ENV. If it value is NULL, delete it.
1685:easyflash/src/ef_env.c ****  * If not find it in flash, then create it.
1686:easyflash/src/ef_env.c ****  *
1687:easyflash/src/ef_env.c ****  * @param key ENV name
1688:easyflash/src/ef_env.c ****  * @param value ENV value
1689:easyflash/src/ef_env.c ****  *
1690:easyflash/src/ef_env.c ****  * @return result
1691:easyflash/src/ef_env.c ****  */
1692:easyflash/src/ef_env.c **** EfErrCode ef_set_env(const char *key, const char *value)
1693:easyflash/src/ef_env.c **** {
1694:easyflash/src/ef_env.c ****     return ef_set_env_blob(key, value, strlen(value));
1695:easyflash/src/ef_env.c **** }
1696:easyflash/src/ef_env.c **** 
1697:easyflash/src/ef_env.c **** /**
1698:easyflash/src/ef_env.c ****  * The same to ef_set_env on this mode.
1699:easyflash/src/ef_env.c ****  * It's compatibility with older versions (less then V4.0).
1700:easyflash/src/ef_env.c ****  *
1701:easyflash/src/ef_env.c ****  * @note this function is DEPRECATED
1702:easyflash/src/ef_env.c ****  *
1703:easyflash/src/ef_env.c ****  * @param key ENV name
1704:easyflash/src/ef_env.c ****  * @param value ENV value
1705:easyflash/src/ef_env.c ****  *
1706:easyflash/src/ef_env.c ****  * @return result
1707:easyflash/src/ef_env.c ****  */
1708:easyflash/src/ef_env.c **** EfErrCode ef_set_and_save_env(const char *key, const char *value)
1709:easyflash/src/ef_env.c **** {
1710:easyflash/src/ef_env.c ****     return ef_set_env_blob(key, value, strlen(value));
1711:easyflash/src/ef_env.c **** }
1712:easyflash/src/ef_env.c **** 
1713:easyflash/src/ef_env.c **** /**
1714:easyflash/src/ef_env.c ****  * Save ENV to flash.
1715:easyflash/src/ef_env.c ****  *
1716:easyflash/src/ef_env.c ****  * @note this function is DEPRECATED
1717:easyflash/src/ef_env.c ****  */
1718:easyflash/src/ef_env.c **** EfErrCode ef_save_env(void)
1719:easyflash/src/ef_env.c **** {
1720:easyflash/src/ef_env.c ****     /* do nothing not cur mode */
1721:easyflash/src/ef_env.c ****     return EF_NO_ERR;
1722:easyflash/src/ef_env.c **** }
1723:easyflash/src/ef_env.c **** 
1724:easyflash/src/ef_env.c **** /**
1725:easyflash/src/ef_env.c ****  * ENV set default.
1726:easyflash/src/ef_env.c ****  *
1727:easyflash/src/ef_env.c ****  * @return result
1728:easyflash/src/ef_env.c ****  */
1729:easyflash/src/ef_env.c **** EfErrCode ef_env_set_default(void)
1730:easyflash/src/ef_env.c **** {
1731:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
1732:easyflash/src/ef_env.c ****     uint32_t addr, i, value_len;
1733:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
1734:easyflash/src/ef_env.c **** 
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set);
ARM GAS  /tmp/ccSGDQKw.s 			page 61


1736:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
1737:easyflash/src/ef_env.c **** 
1738:easyflash/src/ef_env.c ****     /* lock the ENV cache */
1739:easyflash/src/ef_env.c ****     ef_port_env_lock();
1740:easyflash/src/ef_env.c ****     /* format all sectors */
1741:easyflash/src/ef_env.c ****     for (addr = env_start_addr; addr < env_start_addr + ENV_AREA_SIZE; addr += SECTOR_SIZE)
1742:easyflash/src/ef_env.c ****     {
1743:easyflash/src/ef_env.c ****         result = format_sector(addr, SECTOR_NOT_COMBINED);
1744:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
1745:easyflash/src/ef_env.c ****         {
1746:easyflash/src/ef_env.c ****             goto __exit;
1747:easyflash/src/ef_env.c ****         }
1748:easyflash/src/ef_env.c ****     }
1749:easyflash/src/ef_env.c ****     /* create default ENV */
1750:easyflash/src/ef_env.c ****     for (i = 0; i < default_env_set_size; i++)
1751:easyflash/src/ef_env.c ****     {
1752:easyflash/src/ef_env.c ****         /* It seems to be a string when value length is 0.
1753:easyflash/src/ef_env.c ****          * This mechanism is for compatibility with older versions (less then V4.0). */
1754:easyflash/src/ef_env.c ****         if (default_env_set[i].value_len == 0)
1755:easyflash/src/ef_env.c ****         {
1756:easyflash/src/ef_env.c ****             value_len = strlen(default_env_set[i].value);
1757:easyflash/src/ef_env.c ****         }
1758:easyflash/src/ef_env.c ****         else
1759:easyflash/src/ef_env.c ****         {
1760:easyflash/src/ef_env.c ****             value_len = default_env_set[i].value_len;
1761:easyflash/src/ef_env.c ****         }
1762:easyflash/src/ef_env.c ****         sector.empty_env = FAILED_ADDR;
1763:easyflash/src/ef_env.c ****         create_env_blob(&sector, default_env_set[i].key, default_env_set[i].value, value_len);
1764:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
1765:easyflash/src/ef_env.c ****         {
1766:easyflash/src/ef_env.c ****             goto __exit;
1767:easyflash/src/ef_env.c ****         }
1768:easyflash/src/ef_env.c ****     }
1769:easyflash/src/ef_env.c **** 
1770:easyflash/src/ef_env.c **** __exit:
1771:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
1772:easyflash/src/ef_env.c ****     ef_port_env_unlock();
1773:easyflash/src/ef_env.c **** 
1774:easyflash/src/ef_env.c ****     return result;
1775:easyflash/src/ef_env.c **** }
1776:easyflash/src/ef_env.c **** 
1777:easyflash/src/ef_env.c **** static bool print_env_cb(env_node_obj_t env, void *arg1, void *arg2)
1778:easyflash/src/ef_env.c **** {
 1320              		.loc 1 1778 1 is_stmt 1 view -0
 1321              		.cfi_startproc
 1322              		@ args = 0, pretend = 0, frame = 32
 1323              		@ frame_needed = 0, uses_anonymous_args = 0
1779:easyflash/src/ef_env.c ****     bool value_is_str = true, print_value = false;
 1324              		.loc 1 1779 5 view .LVU414
1780:easyflash/src/ef_env.c ****     size_t *using_size = arg1;
 1325              		.loc 1 1780 5 view .LVU415
1781:easyflash/src/ef_env.c **** 
1782:easyflash/src/ef_env.c ****     if (env->crc_is_ok)
 1326              		.loc 1 1782 5 view .LVU416
1778:easyflash/src/ef_env.c ****     bool value_is_str = true, print_value = false;
 1327              		.loc 1 1778 1 is_stmt 0 view .LVU417
 1328 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
ARM GAS  /tmp/ccSGDQKw.s 			page 62


 1329              		.cfi_def_cfa_offset 28
 1330              		.cfi_offset 4, -28
 1331              		.cfi_offset 5, -24
 1332              		.cfi_offset 6, -20
 1333              		.cfi_offset 7, -16
 1334              		.cfi_offset 8, -12
 1335              		.cfi_offset 9, -8
 1336              		.cfi_offset 14, -4
 1337              		.loc 1 1782 12 view .LVU418
 1338 0004 4578     		ldrb	r5, [r0, #1]	@ zero_extendqisi2
1778:easyflash/src/ef_env.c ****     bool value_is_str = true, print_value = false;
 1339              		.loc 1 1778 1 view .LVU419
 1340 0006 89B0     		sub	sp, sp, #36
 1341              		.cfi_def_cfa_offset 64
 1342              		.loc 1 1782 8 view .LVU420
 1343 0008 3DB1     		cbz	r5, .L155
1783:easyflash/src/ef_env.c ****     {
1784:easyflash/src/ef_env.c ****         /* calculate the total using flash size */
1785:easyflash/src/ef_env.c ****         *using_size += env->len;
 1344              		.loc 1 1785 21 view .LVU421
 1345 000a 0B68     		ldr	r3, [r1]
 1346 000c 8268     		ldr	r2, [r0, #8]
 1347              	.LVL128:
 1348              		.loc 1 1785 21 view .LVU422
 1349 000e 1344     		add	r3, r3, r2
 1350 0010 0B60     		str	r3, [r1]
1786:easyflash/src/ef_env.c ****         /* check ENV */
1787:easyflash/src/ef_env.c ****         if (env->status == ENV_WRITE)
 1351              		.loc 1 1787 12 view .LVU423
 1352 0012 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1353 0014 022B     		cmp	r3, #2
 1354 0016 0446     		mov	r4, r0
1785:easyflash/src/ef_env.c ****         /* check ENV */
 1355              		.loc 1 1785 9 is_stmt 1 view .LVU424
 1356              		.loc 1 1787 9 view .LVU425
 1357              		.loc 1 1787 12 is_stmt 0 view .LVU426
 1358 0018 03D0     		beq	.L161
 1359              	.L155:
1788:easyflash/src/ef_env.c ****         {
1789:easyflash/src/ef_env.c ****             ef_print("%.*s=", env->name_len, env->name);
1790:easyflash/src/ef_env.c **** 
1791:easyflash/src/ef_env.c ****             if (env->value_len < EF_STR_ENV_VALUE_MAX_SIZE)
1792:easyflash/src/ef_env.c ****             {
1793:easyflash/src/ef_env.c ****                 uint8_t buf[32];
1794:easyflash/src/ef_env.c ****                 size_t len, size;
1795:easyflash/src/ef_env.c **** __reload:
1796:easyflash/src/ef_env.c ****                 /* check the value is string */
1797:easyflash/src/ef_env.c ****                 for (len = 0, size = 0; len < env->value_len; len += size)
1798:easyflash/src/ef_env.c ****                 {
1799:easyflash/src/ef_env.c ****                     if (len + sizeof(buf) < env->value_len)
1800:easyflash/src/ef_env.c ****                     {
1801:easyflash/src/ef_env.c ****                         size = sizeof(buf);
1802:easyflash/src/ef_env.c ****                     }
1803:easyflash/src/ef_env.c ****                     else
1804:easyflash/src/ef_env.c ****                     {
1805:easyflash/src/ef_env.c ****                         size = env->value_len - len;
1806:easyflash/src/ef_env.c ****                     }
ARM GAS  /tmp/ccSGDQKw.s 			page 63


1807:easyflash/src/ef_env.c ****                     ef_port_read(env->addr.value + len, (uint32_t *) buf, EF_WG_ALIGN(size));
1808:easyflash/src/ef_env.c ****                     if (print_value)
1809:easyflash/src/ef_env.c ****                     {
1810:easyflash/src/ef_env.c ****                         ef_print("%.*s", size, buf);
1811:easyflash/src/ef_env.c ****                     }
1812:easyflash/src/ef_env.c ****                     else if (!ef_is_str(buf, size))
1813:easyflash/src/ef_env.c ****                     {
1814:easyflash/src/ef_env.c ****                         value_is_str = false;
1815:easyflash/src/ef_env.c ****                         break;
1816:easyflash/src/ef_env.c ****                     }
1817:easyflash/src/ef_env.c ****                 }
1818:easyflash/src/ef_env.c ****             }
1819:easyflash/src/ef_env.c ****             else
1820:easyflash/src/ef_env.c ****             {
1821:easyflash/src/ef_env.c ****                 value_is_str = false;
1822:easyflash/src/ef_env.c ****             }
1823:easyflash/src/ef_env.c ****             if (value_is_str && !print_value)
1824:easyflash/src/ef_env.c ****             {
1825:easyflash/src/ef_env.c ****                 print_value = true;
1826:easyflash/src/ef_env.c ****                 goto __reload;
1827:easyflash/src/ef_env.c ****             }
1828:easyflash/src/ef_env.c ****             else if (!value_is_str)
1829:easyflash/src/ef_env.c ****             {
1830:easyflash/src/ef_env.c ****                 ef_print("blob @0x%08X %dbytes", env->addr.value, env->value_len);
1831:easyflash/src/ef_env.c ****             }
1832:easyflash/src/ef_env.c ****             ef_print("\r\n");
1833:easyflash/src/ef_env.c ****         }
1834:easyflash/src/ef_env.c ****     }
1835:easyflash/src/ef_env.c **** 
1836:easyflash/src/ef_env.c ****     return false;
1837:easyflash/src/ef_env.c **** }
 1360              		.loc 1 1837 1 view .LVU427
 1361 001a 0020     		movs	r0, #0
 1362              	.LVL129:
 1363              		.loc 1 1837 1 view .LVU428
 1364 001c 09B0     		add	sp, sp, #36
 1365              		.cfi_remember_state
 1366              		.cfi_def_cfa_offset 28
 1367              		@ sp needed
 1368 001e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1369              	.LVL130:
 1370              	.L161:
 1371              		.cfi_restore_state
 1372              	.LBB70:
 1373              	.LBI70:
1777:easyflash/src/ef_env.c **** {
 1374              		.loc 1 1777 13 is_stmt 1 view .LVU429
 1375              	.LBB71:
1789:easyflash/src/ef_env.c **** 
 1376              		.loc 1 1789 13 view .LVU430
 1377 0022 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 1378              	.LVL131:
1789:easyflash/src/ef_env.c **** 
 1379              		.loc 1 1789 13 is_stmt 0 view .LVU431
 1380 0024 2748     		ldr	r0, .L167
 1381              	.LVL132:
1789:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 64


 1382              		.loc 1 1789 13 view .LVU432
 1383 0026 04F11002 		add	r2, r4, #16
 1384 002a FFF7FEFF 		bl	ef_print
 1385              	.LVL133:
1791:easyflash/src/ef_env.c ****             {
 1386              		.loc 1 1791 13 is_stmt 1 view .LVU433
1791:easyflash/src/ef_env.c ****             {
 1387              		.loc 1 1791 20 is_stmt 0 view .LVU434
 1388 002e E268     		ldr	r2, [r4, #12]
1791:easyflash/src/ef_env.c ****             {
 1389              		.loc 1 1791 16 view .LVU435
 1390 0030 7F2A     		cmp	r2, #127
 1391 0032 0AD9     		bls	.L162
 1392              	.L138:
1830:easyflash/src/ef_env.c ****             }
 1393              		.loc 1 1830 17 is_stmt 1 view .LVU436
 1394 0034 616B     		ldr	r1, [r4, #52]
 1395 0036 2448     		ldr	r0, .L167+4
 1396 0038 FFF7FEFF 		bl	ef_print
 1397              	.LVL134:
 1398              	.L148:
1832:easyflash/src/ef_env.c ****         }
 1399              		.loc 1 1832 13 view .LVU437
 1400 003c 2348     		ldr	r0, .L167+8
 1401 003e FFF7FEFF 		bl	ef_print
 1402              	.LVL135:
1832:easyflash/src/ef_env.c ****         }
 1403              		.loc 1 1832 13 is_stmt 0 view .LVU438
 1404              	.LBE71:
 1405              	.LBE70:
1836:easyflash/src/ef_env.c **** }
 1406              		.loc 1 1836 5 is_stmt 1 view .LVU439
 1407              		.loc 1 1837 1 is_stmt 0 view .LVU440
 1408 0042 0020     		movs	r0, #0
 1409 0044 09B0     		add	sp, sp, #36
 1410              		.cfi_remember_state
 1411              		.cfi_def_cfa_offset 28
 1412              		@ sp needed
 1413 0046 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1414              	.LVL136:
 1415              	.L162:
 1416              		.cfi_restore_state
 1417              	.L139:
 1418              	.LBB78:
 1419              	.LBB77:
 1420              	.LBB72:
1793:easyflash/src/ef_env.c ****                 size_t len, size;
 1421              		.loc 1 1793 17 is_stmt 1 view .LVU441
1794:easyflash/src/ef_env.c **** __reload:
 1422              		.loc 1 1794 17 view .LVU442
1797:easyflash/src/ef_env.c ****                 {
 1423              		.loc 1 1797 17 view .LVU443
1797:easyflash/src/ef_env.c ****                 {
 1424              		.loc 1 1797 41 view .LVU444
1797:easyflash/src/ef_env.c ****                 {
 1425              		.loc 1 1797 17 is_stmt 0 view .LVU445
 1426 004a 002A     		cmp	r2, #0
ARM GAS  /tmp/ccSGDQKw.s 			page 65


 1427 004c F6D0     		beq	.L148
1810:easyflash/src/ef_env.c ****                     }
 1428              		.loc 1 1810 25 view .LVU446
 1429 004e 204F     		ldr	r7, .L167+12
 1430              	.LBE72:
1779:easyflash/src/ef_env.c ****     size_t *using_size = arg1;
 1431              		.loc 1 1779 31 view .LVU447
 1432 0050 0026     		movs	r6, #0
 1433              	.LVL137:
 1434              	.L149:
 1435              	.LBB75:
1797:easyflash/src/ef_env.c ****                 {
 1436              		.loc 1 1797 26 view .LVU448
 1437 0052 4FF00008 		mov	r8, #0
 1438 0056 14E0     		b	.L146
 1439              	.LVL138:
 1440              	.L164:
1805:easyflash/src/ef_env.c ****                     }
 1441              		.loc 1 1805 25 is_stmt 1 view .LVU449
1807:easyflash/src/ef_env.c ****                     if (print_value)
 1442              		.loc 1 1807 21 is_stmt 0 view .LVU450
 1443 0058 606B     		ldr	r0, [r4, #52]
1805:easyflash/src/ef_env.c ****                     }
 1444              		.loc 1 1805 30 view .LVU451
 1445 005a A2EB0809 		sub	r9, r2, r8
 1446              	.LVL139:
1807:easyflash/src/ef_env.c ****                     if (print_value)
 1447              		.loc 1 1807 21 is_stmt 1 view .LVU452
1807:easyflash/src/ef_env.c ****                     if (print_value)
 1448              		.loc 1 1807 75 is_stmt 0 view .LVU453
 1449 005e 09F10302 		add	r2, r9, #3
1807:easyflash/src/ef_env.c ****                     if (print_value)
 1450              		.loc 1 1807 21 view .LVU454
 1451 0062 22F00302 		bic	r2, r2, #3
 1452 0066 4044     		add	r0, r0, r8
 1453 0068 6946     		mov	r1, sp
 1454 006a FFF7FEFF 		bl	ef_port_read
 1455              	.LVL140:
1808:easyflash/src/ef_env.c ****                     {
 1456              		.loc 1 1808 21 is_stmt 1 view .LVU455
1810:easyflash/src/ef_env.c ****                     }
 1457              		.loc 1 1810 25 is_stmt 0 view .LVU456
 1458 006e 6A46     		mov	r2, sp
1808:easyflash/src/ef_env.c ****                     {
 1459              		.loc 1 1808 24 view .LVU457
 1460 0070 AEB1     		cbz	r6, .L142
 1461              	.L165:
1810:easyflash/src/ef_env.c ****                     }
 1462              		.loc 1 1810 25 is_stmt 1 view .LVU458
 1463 0072 4946     		mov	r1, r9
 1464 0074 3846     		mov	r0, r7
 1465 0076 FFF7FEFF 		bl	ef_print
 1466              	.LVL141:
 1467              	.L143:
1797:easyflash/src/ef_env.c ****                 {
 1468              		.loc 1 1797 63 view .LVU459
1797:easyflash/src/ef_env.c ****                 {
ARM GAS  /tmp/ccSGDQKw.s 			page 66


 1469              		.loc 1 1797 50 is_stmt 0 view .LVU460
 1470 007a E268     		ldr	r2, [r4, #12]
1797:easyflash/src/ef_env.c ****                 {
 1471              		.loc 1 1797 67 view .LVU461
 1472 007c C844     		add	r8, r8, r9
 1473              	.LVL142:
1797:easyflash/src/ef_env.c ****                 {
 1474              		.loc 1 1797 41 is_stmt 1 view .LVU462
1797:easyflash/src/ef_env.c ****                 {
 1475              		.loc 1 1797 17 is_stmt 0 view .LVU463
 1476 007e 4245     		cmp	r2, r8
 1477 0080 19D9     		bls	.L163
 1478              	.LVL143:
 1479              	.L146:
1799:easyflash/src/ef_env.c ****                     {
 1480              		.loc 1 1799 21 is_stmt 1 view .LVU464
1799:easyflash/src/ef_env.c ****                     {
 1481              		.loc 1 1799 29 is_stmt 0 view .LVU465
 1482 0082 08F12003 		add	r3, r8, #32
1799:easyflash/src/ef_env.c ****                     {
 1483              		.loc 1 1799 24 view .LVU466
 1484 0086 9342     		cmp	r3, r2
 1485 0088 E6D2     		bcs	.L164
1807:easyflash/src/ef_env.c ****                     if (print_value)
 1486              		.loc 1 1807 21 view .LVU467
 1487 008a 606B     		ldr	r0, [r4, #52]
 1488 008c 2022     		movs	r2, #32
 1489 008e 4044     		add	r0, r0, r8
 1490 0090 6946     		mov	r1, sp
1801:easyflash/src/ef_env.c ****                     }
 1491              		.loc 1 1801 30 view .LVU468
 1492 0092 9146     		mov	r9, r2
 1493              	.LVL144:
1807:easyflash/src/ef_env.c ****                     if (print_value)
 1494              		.loc 1 1807 21 is_stmt 1 view .LVU469
 1495 0094 FFF7FEFF 		bl	ef_port_read
 1496              	.LVL145:
1808:easyflash/src/ef_env.c ****                     {
 1497              		.loc 1 1808 21 view .LVU470
1810:easyflash/src/ef_env.c ****                     }
 1498              		.loc 1 1810 25 is_stmt 0 view .LVU471
 1499 0098 6A46     		mov	r2, sp
1808:easyflash/src/ef_env.c ****                     {
 1500              		.loc 1 1808 24 view .LVU472
 1501 009a 002E     		cmp	r6, #0
 1502 009c E9D1     		bne	.L165
 1503              	.L142:
1808:easyflash/src/ef_env.c ****                     {
 1504              		.loc 1 1808 24 view .LVU473
 1505 009e 0DEB0901 		add	r1, sp, r9
 1506 00a2 01E0     		b	.L145
 1507              	.LVL146:
 1508              	.L166:
 1509              	.LBB73:
 1510              	.LBB74:
 872:easyflash/src/ef_env.c ****     {
 1511              		.loc 1 872 5 view .LVU474
ARM GAS  /tmp/ccSGDQKw.s 			page 67


 1512 00a4 9142     		cmp	r1, r2
 1513 00a6 E8D0     		beq	.L143
 1514              	.LVL147:
 1515              	.L145:
 874:easyflash/src/ef_env.c ****         {
 1516              		.loc 1 874 9 is_stmt 1 view .LVU475
 872:easyflash/src/ef_env.c ****     {
 1517              		.loc 1 872 26 view .LVU476
 874:easyflash/src/ef_env.c ****         {
 1518              		.loc 1 874 14 is_stmt 0 view .LVU477
 1519 00a8 12F8013B 		ldrb	r3, [r2], #1	@ zero_extendqisi2
 1520              	.LVL148:
 872:easyflash/src/ef_env.c ****     {
 1521              		.loc 1 872 17 is_stmt 1 view .LVU478
 874:easyflash/src/ef_env.c ****         {
 1522              		.loc 1 874 14 is_stmt 0 view .LVU479
 1523 00ac 203B     		subs	r3, r3, #32
 874:easyflash/src/ef_env.c ****         {
 1524              		.loc 1 874 12 view .LVU480
 1525 00ae 5E2B     		cmp	r3, #94
 1526 00b0 F8D9     		bls	.L166
 1527              	.LVL149:
 874:easyflash/src/ef_env.c ****         {
 1528              		.loc 1 874 12 view .LVU481
 1529              	.LBE74:
 1530              	.LBE73:
 1531              	.LBE75:
1823:easyflash/src/ef_env.c ****             {
 1532              		.loc 1 1823 13 is_stmt 1 view .LVU482
1828:easyflash/src/ef_env.c ****             {
 1533              		.loc 1 1828 18 view .LVU483
1830:easyflash/src/ef_env.c ****             }
 1534              		.loc 1 1830 17 is_stmt 0 view .LVU484
 1535 00b2 E268     		ldr	r2, [r4, #12]
 1536 00b4 BEE7     		b	.L138
 1537              	.LVL150:
 1538              	.L163:
1823:easyflash/src/ef_env.c ****             {
 1539              		.loc 1 1823 13 is_stmt 1 view .LVU485
1823:easyflash/src/ef_env.c ****             {
 1540              		.loc 1 1823 30 is_stmt 0 view .LVU486
 1541 00b6 002E     		cmp	r6, #0
 1542 00b8 C0D1     		bne	.L148
 1543              	.LVL151:
 1544              	.LBB76:
1793:easyflash/src/ef_env.c ****                 size_t len, size;
 1545              		.loc 1 1793 17 is_stmt 1 view .LVU487
1794:easyflash/src/ef_env.c **** __reload:
 1546              		.loc 1 1794 17 view .LVU488
1797:easyflash/src/ef_env.c ****                 {
 1547              		.loc 1 1797 17 view .LVU489
1797:easyflash/src/ef_env.c ****                 {
 1548              		.loc 1 1797 41 view .LVU490
1797:easyflash/src/ef_env.c ****                 {
 1549              		.loc 1 1797 17 is_stmt 0 view .LVU491
 1550 00ba 002A     		cmp	r2, #0
 1551 00bc BED0     		beq	.L148
ARM GAS  /tmp/ccSGDQKw.s 			page 68


 1552              	.LBE76:
1825:easyflash/src/ef_env.c ****                 goto __reload;
 1553              		.loc 1 1825 29 view .LVU492
 1554 00be 2E46     		mov	r6, r5
 1555 00c0 C7E7     		b	.L149
 1556              	.L168:
 1557 00c2 00BF     		.align	2
 1558              	.L167:
 1559 00c4 00000000 		.word	.LC4
 1560 00c8 10000000 		.word	.LC6
 1561 00cc 28000000 		.word	.LC7
 1562 00d0 08000000 		.word	.LC5
 1563              	.LBE77:
 1564              	.LBE78:
 1565              		.cfi_endproc
 1566              	.LFE283:
 1568              		.section	.rodata.format_sector.constprop.0.str1.4,"aMS",%progbits,1
 1569              		.align	2
 1570              	.LC8:
 1571 0000 61646472 		.ascii	"addr % SECTOR_SIZE == 0\000"
 1571      20252053 
 1571      4543544F 
 1571      525F5349 
 1571      5A45203D 
 1572              		.section	.text.format_sector.constprop.0,"ax",%progbits
 1573              		.align	1
 1574              		.p2align 2,,3
 1575              		.syntax unified
 1576              		.thumb
 1577              		.thumb_func
 1579              	format_sector.constprop.0:
 1580              	.LVL152:
 1581              	.LFB310:
1062:easyflash/src/ef_env.c **** {
 1582              		.loc 1 1062 18 is_stmt 1 view -0
 1583              		.cfi_startproc
 1584              		@ args = 0, pretend = 0, frame = 40
 1585              		@ frame_needed = 0, uses_anonymous_args = 0
1064:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 1586              		.loc 1 1064 5 view .LVU494
1065:easyflash/src/ef_env.c **** 
 1587              		.loc 1 1065 5 view .LVU495
1067:easyflash/src/ef_env.c **** 
 1588              		.loc 1 1067 5 view .LVU496
1062:easyflash/src/ef_env.c **** {
 1589              		.loc 1 1062 18 is_stmt 0 view .LVU497
 1590 0000 30B5     		push	{r4, r5, lr}
 1591              		.cfi_def_cfa_offset 12
 1592              		.cfi_offset 4, -12
 1593              		.cfi_offset 5, -8
 1594              		.cfi_offset 14, -4
1067:easyflash/src/ef_env.c **** 
 1595              		.loc 1 1067 5 view .LVU498
 1596 0002 C0F31003 		ubfx	r3, r0, #0, #17
1062:easyflash/src/ef_env.c **** {
 1597              		.loc 1 1062 18 view .LVU499
 1598 0006 8DB0     		sub	sp, sp, #52
ARM GAS  /tmp/ccSGDQKw.s 			page 69


 1599              		.cfi_def_cfa_offset 64
1067:easyflash/src/ef_env.c **** 
 1600              		.loc 1 1067 5 view .LVU500
 1601 0008 4BB1     		cbz	r3, .L170
1067:easyflash/src/ef_env.c **** 
 1602              		.loc 1 1067 5 is_stmt 1 view .LVU501
 1603 000a 1949     		ldr	r1, .L175
 1604 000c 0091     		str	r1, [sp]
 1605 000e 194B     		ldr	r3, .L175+4
 1606 0010 194A     		ldr	r2, .L175+8
 1607 0012 1A48     		ldr	r0, .L175+12
 1608              	.LVL153:
1067:easyflash/src/ef_env.c **** 
 1609              		.loc 1 1067 5 is_stmt 0 view .LVU502
 1610 0014 40F22B41 		movw	r1, #1067
 1611 0018 FFF7FEFF 		bl	ef_log_debug
 1612              	.LVL154:
 1613              	.L171:
1067:easyflash/src/ef_env.c **** 
 1614              		.loc 1 1067 5 is_stmt 1 view .LVU503
1067:easyflash/src/ef_env.c **** 
 1615              		.loc 1 1067 5 view .LVU504
1067:easyflash/src/ef_env.c **** 
 1616              		.loc 1 1067 5 view .LVU505
1067:easyflash/src/ef_env.c **** 
 1617              		.loc 1 1067 5 view .LVU506
1067:easyflash/src/ef_env.c **** 
 1618              		.loc 1 1067 5 view .LVU507
1067:easyflash/src/ef_env.c **** 
 1619              		.loc 1 1067 5 view .LVU508
 1620 001c FEE7     		b	.L171
 1621              	.LVL155:
 1622              	.L170:
1067:easyflash/src/ef_env.c **** 
 1623              		.loc 1 1067 39 view .LVU509
1069:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR)
 1624              		.loc 1 1069 5 view .LVU510
1069:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR)
 1625              		.loc 1 1069 14 is_stmt 0 view .LVU511
 1626 001e 4FF40031 		mov	r1, #131072
 1627 0022 0446     		mov	r4, r0
 1628 0024 FFF7FEFF 		bl	ef_port_erase
 1629              	.LVL156:
1070:easyflash/src/ef_env.c ****     {
 1630              		.loc 1 1070 5 is_stmt 1 view .LVU512
1070:easyflash/src/ef_env.c ****     {
 1631              		.loc 1 1070 8 is_stmt 0 view .LVU513
 1632 0028 0546     		mov	r5, r0
 1633 002a 10B1     		cbz	r0, .L174
 1634              	.LVL157:
1088:easyflash/src/ef_env.c **** }
 1635              		.loc 1 1088 5 is_stmt 1 view .LVU514
1089:easyflash/src/ef_env.c **** 
 1636              		.loc 1 1089 1 is_stmt 0 view .LVU515
 1637 002c 2846     		mov	r0, r5
 1638 002e 0DB0     		add	sp, sp, #52
 1639              		.cfi_remember_state
ARM GAS  /tmp/ccSGDQKw.s 			page 70


 1640              		.cfi_def_cfa_offset 12
 1641              		@ sp needed
 1642 0030 30BD     		pop	{r4, r5, pc}
 1643              	.LVL158:
 1644              	.L174:
 1645              		.cfi_restore_state
 1646              	.LBB85:
 1647              	.LBI85:
1062:easyflash/src/ef_env.c **** {
 1648              		.loc 1 1062 18 is_stmt 1 view .LVU516
 1649              	.LBB86:
1073:easyflash/src/ef_env.c ****         set_status(sec_hdr.status_table.store, SECTOR_STORE_STATUS_NUM, SECTOR_STORE_EMPTY);
 1650              		.loc 1 1073 9 view .LVU517
 1651 0032 4FF0FF33 		mov	r3, #-1
1076:easyflash/src/ef_env.c ****         sec_hdr.combined = combined_value;
 1652              		.loc 1 1076 23 is_stmt 0 view .LVU518
 1653 0036 124A     		ldr	r2, .L175+16
 1654              	.LBB87:
 1655              	.LBB88:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 1656              		.loc 1 241 5 view .LVU519
 1657 0038 0393     		str	r3, [sp, #12]
 1658              	.LBE88:
 1659              	.LBE87:
 1660              	.LBB92:
 1661              	.LBB93:
 1662 003a 0693     		str	r3, [sp, #24]
 1663              	.LBE93:
 1664              	.LBE92:
 1665              	.LBB97:
 1666              	.LBB89:
 249:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1667              		.loc 1 249 34 view .LVU520
 1668 003c 8DF80C00 		strb	r0, [sp, #12]
 1669              	.LBE89:
 1670              	.LBE97:
 1671              	.LBB98:
 1672              	.LBB94:
 1673 0040 8DF81800 		strb	r0, [sp, #24]
 1674              	.LBE94:
 1675              	.LBE98:
1080:easyflash/src/ef_env.c **** 
 1676              		.loc 1 1080 18 view .LVU521
 1677 0044 03A9     		add	r1, sp, #12
1076:easyflash/src/ef_env.c ****         sec_hdr.combined = combined_value;
 1678              		.loc 1 1076 23 view .LVU522
 1679 0046 0992     		str	r2, [sp, #36]
1080:easyflash/src/ef_env.c **** 
 1680              		.loc 1 1080 18 view .LVU523
 1681 0048 2046     		mov	r0, r4
 1682              	.LVL159:
1080:easyflash/src/ef_env.c **** 
 1683              		.loc 1 1080 18 view .LVU524
 1684 004a 2422     		movs	r2, #36
 1685              	.LBB99:
 1686              	.LBB90:
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
ARM GAS  /tmp/ccSGDQKw.s 			page 71


 1687              		.loc 1 241 5 view .LVU525
 1688 004c CDE90433 		strd	r3, r3, [sp, #16]
 1689              	.LBE90:
 1690              	.LBE99:
 1691              	.LBB100:
 1692              	.LBB95:
 1693 0050 CDE90733 		strd	r3, r3, [sp, #28]
 1694              	.LBE95:
 1695              	.LBE100:
1073:easyflash/src/ef_env.c ****         set_status(sec_hdr.status_table.store, SECTOR_STORE_STATUS_NUM, SECTOR_STORE_EMPTY);
 1696              		.loc 1 1073 9 view .LVU526
 1697 0054 0B93     		str	r3, [sp, #44]
1074:easyflash/src/ef_env.c ****         set_status(sec_hdr.status_table.dirty, SECTOR_DIRTY_STATUS_NUM, SECTOR_DIRTY_FALSE);
 1698              		.loc 1 1074 9 is_stmt 1 view .LVU527
 1699              	.LVL160:
 1700              	.LBB101:
 1701              	.LBI87:
 231:easyflash/src/ef_env.c **** {
 1702              		.loc 1 231 15 view .LVU528
 1703              	.LBB91:
 233:easyflash/src/ef_env.c ****     /*
 1704              		.loc 1 233 5 view .LVU529
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 1705              		.loc 1 241 5 view .LVU530
 242:easyflash/src/ef_env.c ****     {
 1706              		.loc 1 242 5 view .LVU531
 248:easyflash/src/ef_env.c ****         status_table[byte_index] = 0x00;
 1707              		.loc 1 248 9 view .LVU532
 249:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1708              		.loc 1 249 9 view .LVU533
 253:easyflash/src/ef_env.c **** }
 1709              		.loc 1 253 5 view .LVU534
 253:easyflash/src/ef_env.c **** }
 1710              		.loc 1 253 5 is_stmt 0 view .LVU535
 1711              	.LBE91:
 1712              	.LBE101:
1075:easyflash/src/ef_env.c ****         sec_hdr.magic = SECTOR_MAGIC_WORD;
 1713              		.loc 1 1075 9 is_stmt 1 view .LVU536
 1714              	.LBB102:
 1715              	.LBI92:
 231:easyflash/src/ef_env.c **** {
 1716              		.loc 1 231 15 view .LVU537
 1717              	.LBB96:
 233:easyflash/src/ef_env.c ****     /*
 1718              		.loc 1 233 5 view .LVU538
 241:easyflash/src/ef_env.c ****     if (status_index > 0)
 1719              		.loc 1 241 5 view .LVU539
 242:easyflash/src/ef_env.c ****     {
 1720              		.loc 1 242 5 view .LVU540
 248:easyflash/src/ef_env.c ****         status_table[byte_index] = 0x00;
 1721              		.loc 1 248 9 view .LVU541
 249:easyflash/src/ef_env.c **** #endif /* EF_WRITE_GRAN == 1 */
 1722              		.loc 1 249 9 view .LVU542
 253:easyflash/src/ef_env.c **** }
 1723              		.loc 1 253 5 view .LVU543
 253:easyflash/src/ef_env.c **** }
 1724              		.loc 1 253 5 is_stmt 0 view .LVU544
ARM GAS  /tmp/ccSGDQKw.s 			page 72


 1725              	.LBE96:
 1726              	.LBE102:
1076:easyflash/src/ef_env.c ****         sec_hdr.combined = combined_value;
 1727              		.loc 1 1076 9 is_stmt 1 view .LVU545
1077:easyflash/src/ef_env.c ****         sec_hdr.reserved = 0xFFFFFFFF;
 1728              		.loc 1 1077 9 view .LVU546
1077:easyflash/src/ef_env.c ****         sec_hdr.reserved = 0xFFFFFFFF;
 1729              		.loc 1 1077 26 is_stmt 0 view .LVU547
 1730 0056 0A93     		str	r3, [sp, #40]
1078:easyflash/src/ef_env.c ****         /* save the header */
 1731              		.loc 1 1078 9 is_stmt 1 view .LVU548
1080:easyflash/src/ef_env.c **** 
 1732              		.loc 1 1080 9 view .LVU549
1080:easyflash/src/ef_env.c **** 
 1733              		.loc 1 1080 18 is_stmt 0 view .LVU550
 1734 0058 FFF7FEFF 		bl	ef_port_write
 1735              	.LVL161:
1084:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 1736              		.loc 1 1084 9 view .LVU551
 1737 005c 04F50031 		add	r1, r4, #131072
1080:easyflash/src/ef_env.c **** 
 1738              		.loc 1 1080 18 view .LVU552
 1739 0060 0546     		mov	r5, r0
1084:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 1740              		.loc 1 1084 9 view .LVU553
 1741 0062 2046     		mov	r0, r4
 1742              	.LVL162:
1084:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 1743              		.loc 1 1084 9 is_stmt 1 view .LVU554
 1744 0064 FFF7FEFF 		bl	update_sector_cache
 1745              	.LVL163:
1088:easyflash/src/ef_env.c **** }
 1746              		.loc 1 1088 5 view .LVU555
1088:easyflash/src/ef_env.c **** }
 1747              		.loc 1 1088 5 is_stmt 0 view .LVU556
 1748              	.LBE86:
 1749              	.LBE85:
1088:easyflash/src/ef_env.c **** }
 1750              		.loc 1 1088 5 is_stmt 1 view .LVU557
1089:easyflash/src/ef_env.c **** 
 1751              		.loc 1 1089 1 is_stmt 0 view .LVU558
 1752 0068 2846     		mov	r0, r5
 1753 006a 0DB0     		add	sp, sp, #52
 1754              		.cfi_def_cfa_offset 12
 1755              		@ sp needed
 1756 006c 30BD     		pop	{r4, r5, pc}
 1757              	.LVL164:
 1758              	.L176:
1089:easyflash/src/ef_env.c **** 
 1759              		.loc 1 1089 1 view .LVU559
 1760 006e 00BF     		.align	2
 1761              	.L175:
 1762 0070 00000000 		.word	.LANCHOR4
 1763 0074 00000000 		.word	.LC8
 1764 0078 1C000000 		.word	.LC1
 1765 007c 3C000000 		.word	.LC2
 1766 0080 45463430 		.word	808732229
ARM GAS  /tmp/ccSGDQKw.s 			page 73


 1767              		.cfi_endproc
 1768              	.LFE310:
 1770              		.section	.rodata.check_sec_hdr_cb.str1.4,"aMS",%progbits,1
 1771              		.align	2
 1772              	.LC9:
 1773 0000 5761726E 		.ascii	"Warning: Sector header check failed. Format this se"
 1773      696E673A 
 1773      20536563 
 1773      746F7220 
 1773      68656164 
 1774 0033 63746F72 		.ascii	"ctor (0x%08x).\000"
 1774      20283078 
 1774      25303878 
 1774      292E00
 1775              		.section	.text.check_sec_hdr_cb,"ax",%progbits
 1776              		.align	1
 1777              		.p2align 2,,3
 1778              		.syntax unified
 1779              		.thumb
 1780              		.thumb_func
 1782              	check_sec_hdr_cb:
 1783              	.LVL165:
 1784              	.LFB285:
1838:easyflash/src/ef_env.c **** 
1839:easyflash/src/ef_env.c **** 
1840:easyflash/src/ef_env.c **** /**
1841:easyflash/src/ef_env.c ****  * Print ENV.
1842:easyflash/src/ef_env.c ****  */
1843:easyflash/src/ef_env.c **** void ef_print_env(void)
1844:easyflash/src/ef_env.c **** {
1845:easyflash/src/ef_env.c ****     struct env_node_obj env;
1846:easyflash/src/ef_env.c ****     size_t using_size = 0;
1847:easyflash/src/ef_env.c **** 
1848:easyflash/src/ef_env.c ****     if (!init_ok)
1849:easyflash/src/ef_env.c ****     {
1850:easyflash/src/ef_env.c ****         EF_INFO("ENV isn't initialize OK.");
1851:easyflash/src/ef_env.c ****         return;
1852:easyflash/src/ef_env.c ****     }
1853:easyflash/src/ef_env.c **** 
1854:easyflash/src/ef_env.c ****     /* lock the ENV cache */
1855:easyflash/src/ef_env.c ****     ef_port_env_lock();
1856:easyflash/src/ef_env.c **** 
1857:easyflash/src/ef_env.c ****     env_iterator(&env, &using_size, NULL, print_env_cb);
1858:easyflash/src/ef_env.c **** 
1859:easyflash/src/ef_env.c ****     ef_print("\r\nmode: next generation\r\n");
1860:easyflash/src/ef_env.c ****     ef_print("size: %lu/%lu bytes.\r\n", using_size + (SECTOR_NUM - EF_GC_EMPTY_SEC_THRESHOLD) * SE
1861:easyflash/src/ef_env.c ****              ENV_AREA_SIZE - SECTOR_SIZE * EF_GC_EMPTY_SEC_THRESHOLD);
1862:easyflash/src/ef_env.c **** 
1863:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
1864:easyflash/src/ef_env.c ****     ef_port_env_unlock();
1865:easyflash/src/ef_env.c **** }
1866:easyflash/src/ef_env.c **** 
1867:easyflash/src/ef_env.c **** #ifdef EF_ENV_AUTO_UPDATE
1868:easyflash/src/ef_env.c **** /*
1869:easyflash/src/ef_env.c ****  * Auto update ENV to latest default when current EF_ENV_VER_NUM is changed.
1870:easyflash/src/ef_env.c ****  */
1871:easyflash/src/ef_env.c **** static void env_auto_update(void)
ARM GAS  /tmp/ccSGDQKw.s 			page 74


1872:easyflash/src/ef_env.c **** {
1873:easyflash/src/ef_env.c ****     size_t saved_ver_num, setting_ver_num = EF_ENV_VER_NUM;
1874:easyflash/src/ef_env.c **** 
1875:easyflash/src/ef_env.c ****     if (get_env(VER_NUM_ENV_NAME, &saved_ver_num, sizeof(size_t), NULL) > 0)
1876:easyflash/src/ef_env.c ****     {
1877:easyflash/src/ef_env.c ****         /* check version number */
1878:easyflash/src/ef_env.c ****         if (saved_ver_num != setting_ver_num)
1879:easyflash/src/ef_env.c ****         {
1880:easyflash/src/ef_env.c ****             struct env_node_obj env;
1881:easyflash/src/ef_env.c ****             size_t i, value_len;
1882:easyflash/src/ef_env.c ****             struct sector_meta_data sector;
1883:easyflash/src/ef_env.c ****             EF_DEBUG("Update the ENV from version %d to %d.", saved_ver_num, setting_ver_num);
1884:easyflash/src/ef_env.c ****             for (i = 0; i < default_env_set_size; i++)
1885:easyflash/src/ef_env.c ****             {
1886:easyflash/src/ef_env.c ****                 /* add a new ENV when it's not found */
1887:easyflash/src/ef_env.c ****                 if (!find_env(default_env_set[i].key, &env))
1888:easyflash/src/ef_env.c ****                 {
1889:easyflash/src/ef_env.c ****                     /* It seems to be a string when value length is 0.
1890:easyflash/src/ef_env.c ****                      * This mechanism is for compatibility with older versions (less then V4.0). */
1891:easyflash/src/ef_env.c ****                     if (default_env_set[i].value_len == 0)
1892:easyflash/src/ef_env.c ****                     {
1893:easyflash/src/ef_env.c ****                         value_len = strlen(default_env_set[i].value);
1894:easyflash/src/ef_env.c ****                     }
1895:easyflash/src/ef_env.c ****                     else
1896:easyflash/src/ef_env.c ****                     {
1897:easyflash/src/ef_env.c ****                         value_len = default_env_set[i].value_len;
1898:easyflash/src/ef_env.c ****                     }
1899:easyflash/src/ef_env.c ****                     sector.empty_env = FAILED_ADDR;
1900:easyflash/src/ef_env.c ****                     create_env_blob(&sector, default_env_set[i].key, default_env_set[i].value, valu
1901:easyflash/src/ef_env.c ****                 }
1902:easyflash/src/ef_env.c ****             }
1903:easyflash/src/ef_env.c ****         }
1904:easyflash/src/ef_env.c ****         else
1905:easyflash/src/ef_env.c ****         {
1906:easyflash/src/ef_env.c ****             /* version number not changed now return */
1907:easyflash/src/ef_env.c ****             return;
1908:easyflash/src/ef_env.c ****         }
1909:easyflash/src/ef_env.c ****     }
1910:easyflash/src/ef_env.c **** 
1911:easyflash/src/ef_env.c ****     set_env(VER_NUM_ENV_NAME, &setting_ver_num, sizeof(size_t));
1912:easyflash/src/ef_env.c **** }
1913:easyflash/src/ef_env.c **** #endif /* EF_ENV_AUTO_UPDATE */
1914:easyflash/src/ef_env.c **** 
1915:easyflash/src/ef_env.c **** static bool check_sec_hdr_cb(sector_meta_data_t sector, void *arg1, void *arg2)
1916:easyflash/src/ef_env.c **** {
 1785              		.loc 1 1916 1 is_stmt 1 view -0
 1786              		.cfi_startproc
 1787              		@ args = 0, pretend = 0, frame = 0
 1788              		@ frame_needed = 0, uses_anonymous_args = 0
1917:easyflash/src/ef_env.c ****     if (!sector->check_ok)
 1789              		.loc 1 1917 5 view .LVU561
1916:easyflash/src/ef_env.c ****     if (!sector->check_ok)
 1790              		.loc 1 1916 1 is_stmt 0 view .LVU562
 1791 0000 38B5     		push	{r3, r4, r5, lr}
 1792              		.cfi_def_cfa_offset 16
 1793              		.cfi_offset 3, -16
 1794              		.cfi_offset 4, -12
ARM GAS  /tmp/ccSGDQKw.s 			page 75


 1795              		.cfi_offset 5, -8
 1796              		.cfi_offset 14, -4
 1797              		.loc 1 1917 8 view .LVU563
 1798 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1799 0004 0BB1     		cbz	r3, .L180
1918:easyflash/src/ef_env.c ****     {
1919:easyflash/src/ef_env.c ****         size_t *failed_count = arg1;
1920:easyflash/src/ef_env.c **** 
1921:easyflash/src/ef_env.c ****         EF_INFO("Warning: Sector header check failed. Format this sector (0x%08x).", sector->addr);
1922:easyflash/src/ef_env.c ****         (*failed_count) ++;
1923:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
1924:easyflash/src/ef_env.c ****     }
1925:easyflash/src/ef_env.c **** 
1926:easyflash/src/ef_env.c ****     return false;
 1800              		.loc 1 1926 5 is_stmt 1 view .LVU564
1927:easyflash/src/ef_env.c **** }
 1801              		.loc 1 1927 1 is_stmt 0 view .LVU565
 1802 0006 0020     		movs	r0, #0
 1803              	.LVL166:
 1804              		.loc 1 1927 1 view .LVU566
 1805 0008 38BD     		pop	{r3, r4, r5, pc}
 1806              	.LVL167:
 1807              	.L180:
 1808              		.loc 1 1927 1 view .LVU567
 1809 000a 0446     		mov	r4, r0
 1810              	.LVL168:
 1811              		.loc 1 1927 1 view .LVU568
 1812 000c 0D46     		mov	r5, r1
 1813              	.LVL169:
 1814              	.LBB106:
 1815              	.LBI106:
1915:easyflash/src/ef_env.c **** {
 1816              		.loc 1 1915 13 is_stmt 1 view .LVU569
 1817              	.LBB107:
1919:easyflash/src/ef_env.c **** 
 1818              		.loc 1 1919 9 view .LVU570
1921:easyflash/src/ef_env.c ****         (*failed_count) ++;
 1819              		.loc 1 1921 9 view .LVU571
 1820 000e 0648     		ldr	r0, .L181
 1821              	.LVL170:
1921:easyflash/src/ef_env.c ****         (*failed_count) ++;
 1822              		.loc 1 1921 9 is_stmt 0 view .LVU572
 1823 0010 6168     		ldr	r1, [r4, #4]
 1824              	.LVL171:
1921:easyflash/src/ef_env.c ****         (*failed_count) ++;
 1825              		.loc 1 1921 9 view .LVU573
 1826 0012 FFF7FEFF 		bl	ef_log_info
 1827              	.LVL172:
1922:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
 1828              		.loc 1 1922 9 is_stmt 1 view .LVU574
1922:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
 1829              		.loc 1 1922 25 is_stmt 0 view .LVU575
 1830 0016 2B68     		ldr	r3, [r5]
1923:easyflash/src/ef_env.c ****     }
 1831              		.loc 1 1923 9 view .LVU576
 1832 0018 6068     		ldr	r0, [r4, #4]
1922:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
ARM GAS  /tmp/ccSGDQKw.s 			page 76


 1833              		.loc 1 1922 25 view .LVU577
 1834 001a 0133     		adds	r3, r3, #1
 1835 001c 2B60     		str	r3, [r5]
1923:easyflash/src/ef_env.c ****     }
 1836              		.loc 1 1923 9 is_stmt 1 view .LVU578
 1837 001e FFF7FEFF 		bl	format_sector.constprop.0
 1838              	.LVL173:
1923:easyflash/src/ef_env.c ****     }
 1839              		.loc 1 1923 9 is_stmt 0 view .LVU579
 1840              	.LBE107:
 1841              	.LBE106:
1926:easyflash/src/ef_env.c **** }
 1842              		.loc 1 1926 5 is_stmt 1 view .LVU580
 1843              		.loc 1 1927 1 is_stmt 0 view .LVU581
 1844 0022 0020     		movs	r0, #0
 1845 0024 38BD     		pop	{r3, r4, r5, pc}
 1846              	.LVL174:
 1847              	.L182:
 1848              		.loc 1 1927 1 view .LVU582
 1849 0026 00BF     		.align	2
 1850              	.L181:
 1851 0028 00000000 		.word	.LC9
 1852              		.cfi_endproc
 1853              	.LFE285:
 1855              		.section	.text.sector_statistics_cb,"ax",%progbits
 1856              		.align	1
 1857              		.p2align 2,,3
 1858              		.syntax unified
 1859              		.thumb
 1860              		.thumb_func
 1862              	sector_statistics_cb:
 1863              	.LVL175:
 1864              	.LFB263:
1154:easyflash/src/ef_env.c ****     size_t *empty_sector = arg1, *using_sector = arg2;
 1865              		.loc 1 1154 1 is_stmt 1 view -0
 1866              		.cfi_startproc
 1867              		@ args = 0, pretend = 0, frame = 0
 1868              		@ frame_needed = 0, uses_anonymous_args = 0
 1869              		@ link register save eliminated.
1155:easyflash/src/ef_env.c **** 
 1870              		.loc 1 1155 5 view .LVU584
1157:easyflash/src/ef_env.c ****     {
 1871              		.loc 1 1157 8 is_stmt 0 view .LVU585
 1872 0000 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1873              	.LVL176:
1157:easyflash/src/ef_env.c ****     {
 1874              		.loc 1 1157 5 is_stmt 1 view .LVU586
1157:easyflash/src/ef_env.c ****     {
 1875              		.loc 1 1157 8 is_stmt 0 view .LVU587
 1876 0002 23B1     		cbz	r3, .L184
1157:easyflash/src/ef_env.c ****     {
 1877              		.loc 1 1157 43 discriminator 1 view .LVU588
 1878 0004 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
1157:easyflash/src/ef_env.c ****     {
 1879              		.loc 1 1157 26 discriminator 1 view .LVU589
 1880 0006 012B     		cmp	r3, #1
 1881 0008 03D0     		beq	.L189
ARM GAS  /tmp/ccSGDQKw.s 			page 77


1161:easyflash/src/ef_env.c ****     {
 1882              		.loc 1 1161 10 is_stmt 1 discriminator 1 view .LVU590
 1883              	.LVL177:
 1884              	.LBB110:
 1885              	.LBI110:
1153:easyflash/src/ef_env.c **** {
 1886              		.loc 1 1153 13 discriminator 1 view .LVU591
 1887              	.LBB111:
1161:easyflash/src/ef_env.c ****     {
 1888              		.loc 1 1161 31 is_stmt 0 discriminator 1 view .LVU592
 1889 000a 022B     		cmp	r3, #2
 1890 000c 06D0     		beq	.L190
 1891              	.LVL178:
 1892              	.L184:
1161:easyflash/src/ef_env.c ****     {
 1893              		.loc 1 1161 31 discriminator 1 view .LVU593
 1894              	.LBE111:
 1895              	.LBE110:
1166:easyflash/src/ef_env.c **** }
 1896              		.loc 1 1166 5 is_stmt 1 view .LVU594
1167:easyflash/src/ef_env.c **** 
 1897              		.loc 1 1167 1 is_stmt 0 view .LVU595
 1898 000e 0020     		movs	r0, #0
 1899              	.LVL179:
1167:easyflash/src/ef_env.c **** 
 1900              		.loc 1 1167 1 view .LVU596
 1901 0010 7047     		bx	lr
 1902              	.LVL180:
 1903              	.L189:
1159:easyflash/src/ef_env.c ****     }
 1904              		.loc 1 1159 9 is_stmt 1 view .LVU597
1159:easyflash/src/ef_env.c ****     }
 1905              		.loc 1 1159 24 is_stmt 0 view .LVU598
 1906 0012 0B68     		ldr	r3, [r1]
 1907 0014 0133     		adds	r3, r3, #1
 1908 0016 0B60     		str	r3, [r1]
1166:easyflash/src/ef_env.c **** }
 1909              		.loc 1 1166 5 is_stmt 1 view .LVU599
1167:easyflash/src/ef_env.c **** 
 1910              		.loc 1 1167 1 is_stmt 0 view .LVU600
 1911 0018 0020     		movs	r0, #0
 1912              	.LVL181:
1167:easyflash/src/ef_env.c **** 
 1913              		.loc 1 1167 1 view .LVU601
 1914 001a 7047     		bx	lr
 1915              	.LVL182:
 1916              	.L190:
 1917              	.LBB113:
 1918              	.LBB112:
1163:easyflash/src/ef_env.c ****     }
 1919              		.loc 1 1163 9 is_stmt 1 view .LVU602
1163:easyflash/src/ef_env.c ****     }
 1920              		.loc 1 1163 24 is_stmt 0 view .LVU603
 1921 001c 1368     		ldr	r3, [r2]
 1922 001e 0133     		adds	r3, r3, #1
 1923 0020 1360     		str	r3, [r2]
 1924              	.LVL183:
ARM GAS  /tmp/ccSGDQKw.s 			page 78


1163:easyflash/src/ef_env.c ****     }
 1925              		.loc 1 1163 24 view .LVU604
 1926              	.LBE112:
 1927              	.LBE113:
1166:easyflash/src/ef_env.c **** }
 1928              		.loc 1 1166 5 is_stmt 1 view .LVU605
1167:easyflash/src/ef_env.c **** 
 1929              		.loc 1 1167 1 is_stmt 0 view .LVU606
 1930 0022 0020     		movs	r0, #0
 1931              	.LVL184:
1167:easyflash/src/ef_env.c **** 
 1932              		.loc 1 1167 1 view .LVU607
 1933 0024 7047     		bx	lr
 1934              		.cfi_endproc
 1935              	.LFE263:
 1937 0026 00BF     		.section	.rodata.read_env.isra.0.str1.4,"aMS",%progbits,1
 1938              		.align	2
 1939              	.LC10:
 1940 0000 4572726F 		.ascii	"Error: The ENV @0x%08X length has an error.\000"
 1940      723A2054 
 1940      68652045 
 1940      4E562040 
 1940      30782530 
 1941              		.align	2
 1942              	.LC11:
 1943 002c 3000     		.ascii	"0\000"
 1944              		.section	.text.read_env.isra.0,"ax",%progbits
 1945              		.align	1
 1946              		.p2align 2,,3
 1947              		.syntax unified
 1948              		.thumb
 1949              		.thumb_func
 1951              	read_env.isra.0:
 1952              	.LVL185:
 1953              	.LFB305:
 590:easyflash/src/ef_env.c **** {
 1954              		.loc 1 590 18 is_stmt 1 view -0
 1955              		.cfi_startproc
 1956              		@ args = 0, pretend = 0, frame = 72
 1957              		@ frame_needed = 0, uses_anonymous_args = 0
 592:easyflash/src/ef_env.c ****     uint8_t buf[32];
 1958              		.loc 1 592 5 view .LVU609
 593:easyflash/src/ef_env.c ****     uint32_t calc_crc32 = 0, crc_data_len, env_name_addr;
 1959              		.loc 1 593 5 view .LVU610
 594:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 1960              		.loc 1 594 5 view .LVU611
 595:easyflash/src/ef_env.c ****     size_t len, size;
 1961              		.loc 1 595 5 view .LVU612
 596:easyflash/src/ef_env.c ****     /* read ENV header raw data */
 1962              		.loc 1 596 5 view .LVU613
 598:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 1963              		.loc 1 598 5 view .LVU614
 590:easyflash/src/ef_env.c **** {
 1964              		.loc 1 590 18 is_stmt 0 view .LVU615
 1965 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1966              		.cfi_def_cfa_offset 20
 1967              		.cfi_offset 4, -20
ARM GAS  /tmp/ccSGDQKw.s 			page 79


 1968              		.cfi_offset 5, -16
 1969              		.cfi_offset 6, -12
 1970              		.cfi_offset 7, -8
 1971              		.cfi_offset 14, -4
 598:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 1972              		.loc 1 598 5 view .LVU616
 1973 0002 2822     		movs	r2, #40
 590:easyflash/src/ef_env.c **** {
 1974              		.loc 1 590 18 view .LVU617
 1975 0004 95B0     		sub	sp, sp, #84
 1976              		.cfi_def_cfa_offset 104
 598:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 1977              		.loc 1 598 5 view .LVU618
 1978 0006 0DEB0201 		add	r1, sp, r2
 590:easyflash/src/ef_env.c **** {
 1979              		.loc 1 590 18 view .LVU619
 1980 000a 0546     		mov	r5, r0
 598:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 1981              		.loc 1 598 5 view .LVU620
 1982 000c 006B     		ldr	r0, [r0, #48]
 1983              	.LVL186:
 598:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 1984              		.loc 1 598 5 view .LVU621
 1985 000e FFF7FEFF 		bl	ef_port_read
 1986              	.LVL187:
 599:easyflash/src/ef_env.c ****     env->len = env_hdr.len;
 1987              		.loc 1 599 5 is_stmt 1 view .LVU622
 1988              	.LBB116:
 1989              	.LBI116:
 256:easyflash/src/ef_env.c **** {
 1990              		.loc 1 256 15 view .LVU623
 1991              	.LBB117:
 258:easyflash/src/ef_env.c **** 
 1992              		.loc 1 258 5 view .LVU624
 260:easyflash/src/ef_env.c ****     {
 1993              		.loc 1 260 5 view .LVU625
 260:easyflash/src/ef_env.c ****     {
 1994              		.loc 1 260 11 view .LVU626
 260:easyflash/src/ef_env.c ****     {
 1995              		.loc 1 260 11 is_stmt 0 view .LVU627
 1996              	.LBE117:
 1997              	.LBE116:
 598:easyflash/src/ef_env.c ****     env->status = (env_status_t) get_status(env_hdr.status_table, ENV_STATUS_NUM);
 1998              		.loc 1 598 5 view .LVU628
 1999 0012 8021     		movs	r1, #128
 2000              	.LBB121:
 2001              	.LBB118:
 258:easyflash/src/ef_env.c **** 
 2002              		.loc 1 258 12 view .LVU629
 2003 0014 0022     		movs	r2, #0
 2004 0016 02E0     		b	.L193
 2005              	.LVL188:
 2006              	.L214:
 274:easyflash/src/ef_env.c ****     }
 2007              		.loc 1 274 10 view .LVU630
 2008 0018 0132     		adds	r2, r2, #1
 2009              	.LVL189:
ARM GAS  /tmp/ccSGDQKw.s 			page 80


 260:easyflash/src/ef_env.c ****     {
 2010              		.loc 1 260 11 is_stmt 1 view .LVU631
 260:easyflash/src/ef_env.c ****     {
 2011              		.loc 1 260 11 is_stmt 0 view .LVU632
 2012 001a 052A     		cmp	r2, #5
 2013 001c 43D0     		beq	.L213
 2014              	.LVL190:
 2015              	.L193:
 269:easyflash/src/ef_env.c ****         {
 2016              		.loc 1 269 9 is_stmt 1 view .LVU633
 274:easyflash/src/ef_env.c ****     }
 2017              		.loc 1 274 9 view .LVU634
 269:easyflash/src/ef_env.c ****         {
 2018              		.loc 1 269 12 is_stmt 0 view .LVU635
 2019 001e 14AB     		add	r3, sp, #80
 2020 0020 03EBD103 		add	r3, r3, r1, lsr #3
 2021 0024 2039     		subs	r1, r1, #32
 2022 0026 13F8283C 		ldrb	r3, [r3, #-40]	@ zero_extendqisi2
 2023 002a 002B     		cmp	r3, #0
 2024 002c F4D1     		bne	.L214
 277:easyflash/src/ef_env.c **** }
 2025              		.loc 1 277 5 is_stmt 1 view .LVU636
 2026              	.LBE118:
 2027              	.LBE121:
 600:easyflash/src/ef_env.c **** 
 2028              		.loc 1 600 23 is_stmt 0 view .LVU637
 2029 002e 109B     		ldr	r3, [sp, #64]
 602:easyflash/src/ef_env.c ****     {
 2030              		.loc 1 602 8 view .LVU638
 2031 0030 3F49     		ldr	r1, .L217
 602:easyflash/src/ef_env.c ****     {
 2032              		.loc 1 602 54 view .LVU639
 2033 0032 A3F12004 		sub	r4, r3, #32
 2034              	.LBB122:
 2035              	.LBB119:
 277:easyflash/src/ef_env.c **** }
 2036              		.loc 1 277 27 view .LVU640
 2037 0036 C2F10502 		rsb	r2, r2, #5
 2038              	.LVL191:
 277:easyflash/src/ef_env.c **** }
 2039              		.loc 1 277 27 view .LVU641
 2040              	.LBE119:
 2041              	.LBE122:
 602:easyflash/src/ef_env.c ****     {
 2042              		.loc 1 602 8 view .LVU642
 2043 003a 8C42     		cmp	r4, r1
 599:easyflash/src/ef_env.c ****     env->len = env_hdr.len;
 2044              		.loc 1 599 19 view .LVU643
 2045 003c 2A70     		strb	r2, [r5]
 600:easyflash/src/ef_env.c **** 
 2046              		.loc 1 600 5 is_stmt 1 view .LVU644
 602:easyflash/src/ef_env.c ****     {
 2047              		.loc 1 602 5 view .LVU645
 602:easyflash/src/ef_env.c ****     {
 2048              		.loc 1 602 8 is_stmt 0 view .LVU646
 2049 003e 71D8     		bhi	.L215
 2050              	.L195:
ARM GAS  /tmp/ccSGDQKw.s 			page 81


 615:easyflash/src/ef_env.c ****     {
 2051              		.loc 1 615 10 is_stmt 1 view .LVU647
 615:easyflash/src/ef_env.c ****     {
 2052              		.loc 1 615 13 is_stmt 0 view .LVU648
 2053 0040 3C4A     		ldr	r2, .L217+4
 600:easyflash/src/ef_env.c **** 
 2054              		.loc 1 600 14 view .LVU649
 2055 0042 AB60     		str	r3, [r5, #8]
 615:easyflash/src/ef_env.c ****     {
 2056              		.loc 1 615 60 view .LVU650
 2057 0044 6FF4EE71 		mvn	r1, #476
 2058 0048 A3F5FF33 		sub	r3, r3, #130560
 2059 004c 0B44     		add	r3, r3, r1
 615:easyflash/src/ef_env.c ****     {
 2060              		.loc 1 615 13 view .LVU651
 2061 004e 9342     		cmp	r3, r2
 2062 0050 43D9     		bls	.L198
 2063              	.LVL192:
 623:easyflash/src/ef_env.c ****     {
 2064              		.loc 1 623 29 is_stmt 1 view .LVU652
 623:easyflash/src/ef_env.c ****     {
 2065              		.loc 1 623 5 is_stmt 0 view .LVU653
 2066 0052 ACB1     		cbz	r4, .L200
 594:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 2067              		.loc 1 594 14 view .LVU654
 2068 0054 0026     		movs	r6, #0
 623:easyflash/src/ef_env.c ****     {
 2069              		.loc 1 623 14 view .LVU655
 2070 0056 3346     		mov	r3, r6
 2071              	.LVL193:
 2072              	.L199:
 625:easyflash/src/ef_env.c ****         {
 2073              		.loc 1 625 9 is_stmt 1 view .LVU656
 634:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 2074              		.loc 1 634 9 view .LVU657
 2075 0058 2022     		movs	r2, #32
 625:easyflash/src/ef_env.c ****         {
 2076              		.loc 1 625 17 is_stmt 0 view .LVU658
 2077 005a 9F18     		adds	r7, r3, r2
 625:easyflash/src/ef_env.c ****         {
 2078              		.loc 1 625 12 view .LVU659
 2079 005c A742     		cmp	r7, r4
 634:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 2080              		.loc 1 634 9 view .LVU660
 2081 005e 286B     		ldr	r0, [r5, #48]
 2082 0060 02A9     		add	r1, sp, #8
 625:easyflash/src/ef_env.c ****         {
 2083              		.loc 1 625 12 view .LVU661
 2084 0062 14D3     		bcc	.L202
 631:easyflash/src/ef_env.c ****         }
 2085              		.loc 1 631 13 is_stmt 1 view .LVU662
 631:easyflash/src/ef_env.c ****         }
 2086              		.loc 1 631 18 is_stmt 0 view .LVU663
 2087 0064 E41A     		subs	r4, r4, r3
 2088              	.LVL194:
 634:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 2089              		.loc 1 634 9 is_stmt 1 view .LVU664
ARM GAS  /tmp/ccSGDQKw.s 			page 82


 2090 0066 1044     		add	r0, r0, r2
 634:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 2091              		.loc 1 634 85 is_stmt 0 view .LVU665
 2092 0068 E21C     		adds	r2, r4, #3
 634:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 2093              		.loc 1 634 9 view .LVU666
 2094 006a 22F00302 		bic	r2, r2, #3
 2095 006e 1844     		add	r0, r0, r3
 2096 0070 FFF7FEFF 		bl	ef_port_read
 2097              	.LVL195:
 635:easyflash/src/ef_env.c ****     }
 2098              		.loc 1 635 9 is_stmt 1 view .LVU667
 635:easyflash/src/ef_env.c ****     }
 2099              		.loc 1 635 22 is_stmt 0 view .LVU668
 2100 0074 2246     		mov	r2, r4
 2101 0076 02A9     		add	r1, sp, #8
 2102 0078 3046     		mov	r0, r6
 2103 007a FFF7FEFF 		bl	ef_calc_crc32
 2104              	.LVL196:
 2105 007e 0446     		mov	r4, r0
 2106              	.LVL197:
 623:easyflash/src/ef_env.c ****     {
 2107              		.loc 1 623 49 is_stmt 1 view .LVU669
 623:easyflash/src/ef_env.c ****     {
 2108              		.loc 1 623 29 view .LVU670
 2109              	.L200:
 638:easyflash/src/ef_env.c ****     {
 2110              		.loc 1 638 5 view .LVU671
 638:easyflash/src/ef_env.c ****     {
 2111              		.loc 1 638 8 is_stmt 0 view .LVU672
 2112 0080 119B     		ldr	r3, [sp, #68]
 2113 0082 A342     		cmp	r3, r4
 2114 0084 33D0     		beq	.L216
 2115              	.L196:
 612:easyflash/src/ef_env.c ****         return EF_READ_ERR;
 2116              		.loc 1 612 9 is_stmt 1 view .LVU673
 612:easyflash/src/ef_env.c ****         return EF_READ_ERR;
 2117              		.loc 1 612 24 is_stmt 0 view .LVU674
 2118 0086 0023     		movs	r3, #0
 2119 0088 6B70     		strb	r3, [r5, #1]
 613:easyflash/src/ef_env.c ****     }
 2120              		.loc 1 613 9 is_stmt 1 view .LVU675
 656:easyflash/src/ef_env.c **** 
 2121              		.loc 1 656 1 is_stmt 0 view .LVU676
 2122 008a 15B0     		add	sp, sp, #84
 2123              		.cfi_remember_state
 2124              		.cfi_def_cfa_offset 20
 2125              		@ sp needed
 2126 008c F0BD     		pop	{r4, r5, r6, r7, pc}
 2127              	.LVL198:
 2128              	.L202:
 2129              		.cfi_restore_state
 634:easyflash/src/ef_env.c ****         calc_crc32 = ef_calc_crc32(calc_crc32, buf, size);
 2130              		.loc 1 634 9 view .LVU677
 2131 008e 2030     		adds	r0, r0, #32
 2132 0090 1844     		add	r0, r0, r3
 2133 0092 FFF7FEFF 		bl	ef_port_read
ARM GAS  /tmp/ccSGDQKw.s 			page 83


 2134              	.LVL199:
 635:easyflash/src/ef_env.c ****     }
 2135              		.loc 1 635 9 is_stmt 1 view .LVU678
 635:easyflash/src/ef_env.c ****     }
 2136              		.loc 1 635 22 is_stmt 0 view .LVU679
 2137 0096 3046     		mov	r0, r6
 2138 0098 2022     		movs	r2, #32
 2139 009a 02A9     		add	r1, sp, #8
 2140 009c FFF7FEFF 		bl	ef_calc_crc32
 2141              	.LVL200:
 2142 00a0 3B46     		mov	r3, r7
 2143 00a2 0646     		mov	r6, r0
 2144              	.LVL201:
 623:easyflash/src/ef_env.c ****     {
 2145              		.loc 1 623 49 is_stmt 1 view .LVU680
 623:easyflash/src/ef_env.c ****     {
 2146              		.loc 1 623 29 view .LVU681
 623:easyflash/src/ef_env.c ****     {
 2147              		.loc 1 623 29 is_stmt 0 view .LVU682
 2148 00a4 D8E7     		b	.L199
 2149              	.LVL202:
 2150              	.L213:
 2151              	.LBB123:
 2152              	.LBB120:
 277:easyflash/src/ef_env.c **** }
 2153              		.loc 1 277 5 is_stmt 1 view .LVU683
 277:easyflash/src/ef_env.c **** }
 2154              		.loc 1 277 5 is_stmt 0 view .LVU684
 2155              	.LBE120:
 2156              	.LBE123:
 600:easyflash/src/ef_env.c **** 
 2157              		.loc 1 600 23 view .LVU685
 2158 00a6 109B     		ldr	r3, [sp, #64]
 602:easyflash/src/ef_env.c ****     {
 2159              		.loc 1 602 8 view .LVU686
 2160 00a8 214A     		ldr	r2, .L217
 602:easyflash/src/ef_env.c ****     {
 2161              		.loc 1 602 54 view .LVU687
 2162 00aa A3F12004 		sub	r4, r3, #32
 599:easyflash/src/ef_env.c ****     env->len = env_hdr.len;
 2163              		.loc 1 599 17 view .LVU688
 2164 00ae 0021     		movs	r1, #0
 602:easyflash/src/ef_env.c ****     {
 2165              		.loc 1 602 8 view .LVU689
 2166 00b0 9442     		cmp	r4, r2
 599:easyflash/src/ef_env.c ****     env->len = env_hdr.len;
 2167              		.loc 1 599 17 view .LVU690
 2168 00b2 2970     		strb	r1, [r5]
 600:easyflash/src/ef_env.c **** 
 2169              		.loc 1 600 5 is_stmt 1 view .LVU691
 602:easyflash/src/ef_env.c ****     {
 2170              		.loc 1 602 5 view .LVU692
 602:easyflash/src/ef_env.c ****     {
 2171              		.loc 1 602 8 is_stmt 0 view .LVU693
 2172 00b4 C4D9     		bls	.L195
 605:easyflash/src/ef_env.c ****         if (env->status != ENV_ERR_HDR)
 2173              		.loc 1 605 9 is_stmt 1 view .LVU694
ARM GAS  /tmp/ccSGDQKw.s 			page 84


 605:easyflash/src/ef_env.c ****         if (env->status != ENV_ERR_HDR)
 2174              		.loc 1 605 18 is_stmt 0 view .LVU695
 2175 00b6 2823     		movs	r3, #40
 2176 00b8 AB60     		str	r3, [r5, #8]
 606:easyflash/src/ef_env.c ****         {
 2177              		.loc 1 606 9 is_stmt 1 view .LVU696
 2178              	.L203:
 608:easyflash/src/ef_env.c ****             EF_DEBUG("Error: The ENV @0x%08X length has an error.", env->addr.start);
 2179              		.loc 1 608 13 view .LVU697
 608:easyflash/src/ef_env.c ****             EF_DEBUG("Error: The ENV @0x%08X length has an error.", env->addr.start);
 2180              		.loc 1 608 25 is_stmt 0 view .LVU698
 2181 00ba 0524     		movs	r4, #5
 609:easyflash/src/ef_env.c ****             write_status(env->addr.start, env_hdr.status_table, ENV_STATUS_NUM, ENV_ERR_HDR);
 2182              		.loc 1 609 13 view .LVU699
 2183 00bc 2B6B     		ldr	r3, [r5, #48]
 2184 00be 1E4A     		ldr	r2, .L217+8
 2185 00c0 1E48     		ldr	r0, .L217+12
 608:easyflash/src/ef_env.c ****             EF_DEBUG("Error: The ENV @0x%08X length has an error.", env->addr.start);
 2186              		.loc 1 608 25 view .LVU700
 2187 00c2 2C70     		strb	r4, [r5]
 609:easyflash/src/ef_env.c ****             write_status(env->addr.start, env_hdr.status_table, ENV_STATUS_NUM, ENV_ERR_HDR);
 2188              		.loc 1 609 13 is_stmt 1 view .LVU701
 2189 00c4 40F26121 		movw	r1, #609
 2190 00c8 FFF7FEFF 		bl	ef_log_debug
 2191              	.LVL203:
 610:easyflash/src/ef_env.c ****         }
 2192              		.loc 1 610 13 view .LVU702
 2193 00cc 286B     		ldr	r0, [r5, #48]
 2194 00ce 2346     		mov	r3, r4
 2195 00d0 0622     		movs	r2, #6
 2196 00d2 0AA9     		add	r1, sp, #40
 2197 00d4 FFF7FEFF 		bl	write_status
 2198              	.LVL204:
 2199 00d8 D5E7     		b	.L196
 2200              	.L198:
 617:easyflash/src/ef_env.c ****     }
 2201              		.loc 1 617 9 view .LVU703
 617:easyflash/src/ef_env.c ****     }
 2202              		.loc 1 617 9 view .LVU704
 2203 00da 1949     		ldr	r1, .L217+16
 2204 00dc 0091     		str	r1, [sp]
 2205 00de 194B     		ldr	r3, .L217+20
 2206 00e0 194A     		ldr	r2, .L217+24
 2207 00e2 1648     		ldr	r0, .L217+12
 2208 00e4 40F26921 		movw	r1, #617
 2209 00e8 FFF7FEFF 		bl	ef_log_debug
 2210              	.LVL205:
 2211              	.L201:
 617:easyflash/src/ef_env.c ****     }
 2212              		.loc 1 617 9 view .LVU705
 617:easyflash/src/ef_env.c ****     }
 2213              		.loc 1 617 9 view .LVU706
 617:easyflash/src/ef_env.c ****     }
 2214              		.loc 1 617 9 view .LVU707
 617:easyflash/src/ef_env.c ****     }
 2215              		.loc 1 617 9 view .LVU708
 617:easyflash/src/ef_env.c ****     }
ARM GAS  /tmp/ccSGDQKw.s 			page 85


 2216              		.loc 1 617 9 view .LVU709
 617:easyflash/src/ef_env.c ****     }
 2217              		.loc 1 617 9 view .LVU710
 2218 00ec FEE7     		b	.L201
 2219              	.LVL206:
 2220              	.L216:
 645:easyflash/src/ef_env.c ****         /* the name is behind aligned ENV header */
 2221              		.loc 1 645 9 view .LVU711
 647:easyflash/src/ef_env.c ****         ef_port_read(env_name_addr, (uint32_t *) env->name, EF_WG_ALIGN(env_hdr.name_len));
 2222              		.loc 1 647 23 is_stmt 0 view .LVU712
 2223 00ee 2B6B     		ldr	r3, [r5, #48]
 648:easyflash/src/ef_env.c ****         /* the value is behind aligned name */
 2224              		.loc 1 648 61 view .LVU713
 2225 00f0 9DF84820 		ldrb	r2, [sp, #72]	@ zero_extendqisi2
 647:easyflash/src/ef_env.c ****         ef_port_read(env_name_addr, (uint32_t *) env->name, EF_WG_ALIGN(env_hdr.name_len));
 2226              		.loc 1 647 23 view .LVU714
 2227 00f4 03F12804 		add	r4, r3, #40
 648:easyflash/src/ef_env.c ****         /* the value is behind aligned name */
 2228              		.loc 1 648 61 view .LVU715
 2229 00f8 0332     		adds	r2, r2, #3
 645:easyflash/src/ef_env.c ****         /* the name is behind aligned ENV header */
 2230              		.loc 1 645 24 view .LVU716
 2231 00fa 0123     		movs	r3, #1
 2232 00fc 6B70     		strb	r3, [r5, #1]
 647:easyflash/src/ef_env.c ****         ef_port_read(env_name_addr, (uint32_t *) env->name, EF_WG_ALIGN(env_hdr.name_len));
 2233              		.loc 1 647 9 is_stmt 1 view .LVU717
 2234              	.LVL207:
 648:easyflash/src/ef_env.c ****         /* the value is behind aligned name */
 2235              		.loc 1 648 9 view .LVU718
 2236 00fe 05F11001 		add	r1, r5, #16
 2237 0102 02F4FE72 		and	r2, r2, #508
 2238 0106 2046     		mov	r0, r4
 2239 0108 FFF7FEFF 		bl	ef_port_read
 2240              	.LVL208:
 650:easyflash/src/ef_env.c ****         env->value_len = env_hdr.value_len;
 2241              		.loc 1 650 9 view .LVU719
 650:easyflash/src/ef_env.c ****         env->value_len = env_hdr.value_len;
 2242              		.loc 1 650 43 is_stmt 0 view .LVU720
 2243 010c 9DF84820 		ldrb	r2, [sp, #72]	@ zero_extendqisi2
 651:easyflash/src/ef_env.c ****         env->name_len = env_hdr.name_len;
 2244              		.loc 1 651 24 view .LVU721
 2245 0110 1399     		ldr	r1, [sp, #76]
 2246 0112 E960     		str	r1, [r5, #12]
 650:easyflash/src/ef_env.c ****         env->value_len = env_hdr.value_len;
 2247              		.loc 1 650 43 view .LVU722
 2248 0114 D31C     		adds	r3, r2, #3
 2249 0116 23F00303 		bic	r3, r3, #3
 650:easyflash/src/ef_env.c ****         env->value_len = env_hdr.value_len;
 2250              		.loc 1 650 41 view .LVU723
 2251 011a 2344     		add	r3, r3, r4
 650:easyflash/src/ef_env.c ****         env->value_len = env_hdr.value_len;
 2252              		.loc 1 650 25 view .LVU724
 2253 011c 6B63     		str	r3, [r5, #52]
 651:easyflash/src/ef_env.c ****         env->name_len = env_hdr.name_len;
 2254              		.loc 1 651 9 is_stmt 1 view .LVU725
 652:easyflash/src/ef_env.c ****     }
 2255              		.loc 1 652 9 view .LVU726
ARM GAS  /tmp/ccSGDQKw.s 			page 86


 652:easyflash/src/ef_env.c ****     }
 2256              		.loc 1 652 23 is_stmt 0 view .LVU727
 2257 011e AA70     		strb	r2, [r5, #2]
 2258              	.LVL209:
 656:easyflash/src/ef_env.c **** 
 2259              		.loc 1 656 1 view .LVU728
 2260 0120 15B0     		add	sp, sp, #84
 2261              		.cfi_remember_state
 2262              		.cfi_def_cfa_offset 20
 2263              		@ sp needed
 2264 0122 F0BD     		pop	{r4, r5, r6, r7, pc}
 2265              	.LVL210:
 2266              	.L215:
 2267              		.cfi_restore_state
 605:easyflash/src/ef_env.c ****         if (env->status != ENV_ERR_HDR)
 2268              		.loc 1 605 9 is_stmt 1 view .LVU729
 605:easyflash/src/ef_env.c ****         if (env->status != ENV_ERR_HDR)
 2269              		.loc 1 605 18 is_stmt 0 view .LVU730
 2270 0124 2823     		movs	r3, #40
 606:easyflash/src/ef_env.c ****         {
 2271              		.loc 1 606 12 view .LVU731
 2272 0126 052A     		cmp	r2, #5
 605:easyflash/src/ef_env.c ****         if (env->status != ENV_ERR_HDR)
 2273              		.loc 1 605 18 view .LVU732
 2274 0128 AB60     		str	r3, [r5, #8]
 606:easyflash/src/ef_env.c ****         {
 2275              		.loc 1 606 9 is_stmt 1 view .LVU733
 606:easyflash/src/ef_env.c ****         {
 2276              		.loc 1 606 12 is_stmt 0 view .LVU734
 2277 012a ACD0     		beq	.L196
 2278 012c C5E7     		b	.L203
 2279              	.L218:
 2280 012e 00BF     		.align	2
 2281              	.L217:
 2282 0130 E0FF0300 		.word	262112
 2283 0134 22000200 		.word	131106
 2284 0138 00000000 		.word	.LC10
 2285 013c 3C000000 		.word	.LC2
 2286 0140 00000000 		.word	.LANCHOR5
 2287 0144 2C000000 		.word	.LC11
 2288 0148 1C000000 		.word	.LC1
 2289              		.cfi_endproc
 2290              	.LFE305:
 2292              		.section	.rodata.read_sector_meta_data.part.0.str1.4,"aMS",%progbits,1
 2293              		.align	2
 2294              	.LC12:
 2295 0000 4572726F 		.ascii	"Error: The ENV (@0x%08X) CRC32 check failed!\000"
 2295      723A2054 
 2295      68652045 
 2295      4E562028 
 2295      40307825 
 2296              		.section	.text.read_sector_meta_data.part.0,"ax",%progbits
 2297              		.align	1
 2298              		.p2align 2,,3
 2299              		.syntax unified
 2300              		.thumb
 2301              		.thumb_func
ARM GAS  /tmp/ccSGDQKw.s 			page 87


 2303              	read_sector_meta_data.part.0:
 2304              	.LVL211:
 2305              	.LFB293:
 658:easyflash/src/ef_env.c **** {
 2306              		.loc 1 658 18 is_stmt 1 view -0
 2307              		.cfi_startproc
 2308              		@ args = 0, pretend = 0, frame = 136
 2309              		@ frame_needed = 0, uses_anonymous_args = 0
 664:easyflash/src/ef_env.c **** 
 2310              		.loc 1 664 22 view .LVU736
 667:easyflash/src/ef_env.c **** 
 2311              		.loc 1 667 5 view .LVU737
 658:easyflash/src/ef_env.c **** {
 2312              		.loc 1 658 18 is_stmt 0 view .LVU738
 2313 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2314              		.cfi_def_cfa_offset 36
 2315              		.cfi_offset 4, -36
 2316              		.cfi_offset 5, -32
 2317              		.cfi_offset 6, -28
 2318              		.cfi_offset 7, -24
 2319              		.cfi_offset 8, -20
 2320              		.cfi_offset 9, -16
 2321              		.cfi_offset 10, -12
 2322              		.cfi_offset 11, -8
 2323              		.cfi_offset 14, -4
 2324 0004 A3B0     		sub	sp, sp, #140
 2325              		.cfi_def_cfa_offset 176
 658:easyflash/src/ef_env.c **** {
 2326              		.loc 1 658 18 view .LVU739
 2327 0006 0C46     		mov	r4, r1
 2328 0008 1646     		mov	r6, r2
 667:easyflash/src/ef_env.c **** 
 2329              		.loc 1 667 5 view .LVU740
 2330 000a 0BA9     		add	r1, sp, #44
 2331              	.LVL212:
 667:easyflash/src/ef_env.c **** 
 2332              		.loc 1 667 5 view .LVU741
 2333 000c 2422     		movs	r2, #36
 2334              	.LVL213:
 658:easyflash/src/ef_env.c **** {
 2335              		.loc 1 658 18 view .LVU742
 2336 000e 0546     		mov	r5, r0
 667:easyflash/src/ef_env.c **** 
 2337              		.loc 1 667 5 view .LVU743
 2338 0010 FFF7FEFF 		bl	ef_port_read
 2339              	.LVL214:
 669:easyflash/src/ef_env.c ****     sector->magic = sec_hdr.magic;
 2340              		.loc 1 669 5 is_stmt 1 view .LVU744
 670:easyflash/src/ef_env.c ****     /* check magic word */
 2341              		.loc 1 670 28 is_stmt 0 view .LVU745
 2342 0014 119B     		ldr	r3, [sp, #68]
 672:easyflash/src/ef_env.c ****     {
 2343              		.loc 1 672 8 view .LVU746
 2344 0016 6A4A     		ldr	r2, .L260
 2345 0018 9342     		cmp	r3, r2
 670:easyflash/src/ef_env.c ****     /* check magic word */
 2346              		.loc 1 670 19 view .LVU747
ARM GAS  /tmp/ccSGDQKw.s 			page 88


 2347 001a C4E90153 		strd	r5, r3, [r4, #4]
 672:easyflash/src/ef_env.c ****     {
 2348              		.loc 1 672 5 is_stmt 1 view .LVU748
 672:easyflash/src/ef_env.c ****     {
 2349              		.loc 1 672 8 is_stmt 0 view .LVU749
 2350 001e 34D1     		bne	.L255
 678:easyflash/src/ef_env.c ****     /* get other sector meta data */
 2351              		.loc 1 678 5 is_stmt 1 view .LVU750
 2352              	.LBB134:
 2353              	.LBB135:
 269:easyflash/src/ef_env.c ****         {
 2354              		.loc 1 269 12 is_stmt 0 view .LVU751
 2355 0020 9DF83430 		ldrb	r3, [sp, #52]	@ zero_extendqisi2
 2356              	.LBE135:
 2357              	.LBE134:
 680:easyflash/src/ef_env.c ****     sector->status.store = (sector_store_status_t) get_status(sec_hdr.status_table.store, SECTOR_ST
 2358              		.loc 1 680 22 view .LVU752
 2359 0024 1299     		ldr	r1, [sp, #72]
 2360 0026 E160     		str	r1, [r4, #12]
 678:easyflash/src/ef_env.c ****     /* get other sector meta data */
 2361              		.loc 1 678 22 view .LVU753
 2362 0028 0122     		movs	r2, #1
 2363 002a 2270     		strb	r2, [r4]
 680:easyflash/src/ef_env.c ****     sector->status.store = (sector_store_status_t) get_status(sec_hdr.status_table.store, SECTOR_ST
 2364              		.loc 1 680 5 is_stmt 1 view .LVU754
 681:easyflash/src/ef_env.c ****     sector->status.dirty = (sector_dirty_status_t) get_status(sec_hdr.status_table.dirty, SECTOR_DI
 2365              		.loc 1 681 5 view .LVU755
 2366              	.LVL215:
 2367              	.LBB139:
 2368              	.LBI134:
 256:easyflash/src/ef_env.c **** {
 2369              		.loc 1 256 15 view .LVU756
 2370              	.LBB136:
 258:easyflash/src/ef_env.c **** 
 2371              		.loc 1 258 5 view .LVU757
 260:easyflash/src/ef_env.c ****     {
 2372              		.loc 1 260 5 view .LVU758
 260:easyflash/src/ef_env.c ****     {
 2373              		.loc 1 260 11 view .LVU759
 269:easyflash/src/ef_env.c ****         {
 2374              		.loc 1 269 9 view .LVU760
 269:easyflash/src/ef_env.c ****         {
 2375              		.loc 1 269 12 is_stmt 0 view .LVU761
 2376 002c 002B     		cmp	r3, #0
 2377 002e 00F0A880 		beq	.L241
 274:easyflash/src/ef_env.c ****     }
 2378              		.loc 1 274 9 is_stmt 1 view .LVU762
 2379              	.LVL216:
 260:easyflash/src/ef_env.c ****     {
 2380              		.loc 1 260 11 view .LVU763
 269:easyflash/src/ef_env.c ****         {
 2381              		.loc 1 269 9 view .LVU764
 269:easyflash/src/ef_env.c ****         {
 2382              		.loc 1 269 12 is_stmt 0 view .LVU765
 2383 0032 9DF83030 		ldrb	r3, [sp, #48]	@ zero_extendqisi2
 2384 0036 002B     		cmp	r3, #0
 2385 0038 00F0AA80 		beq	.L242
ARM GAS  /tmp/ccSGDQKw.s 			page 89


 274:easyflash/src/ef_env.c ****     }
 2386              		.loc 1 274 9 is_stmt 1 view .LVU766
 2387              	.LVL217:
 260:easyflash/src/ef_env.c ****     {
 2388              		.loc 1 260 11 view .LVU767
 269:easyflash/src/ef_env.c ****         {
 2389              		.loc 1 269 9 view .LVU768
 269:easyflash/src/ef_env.c ****         {
 2390              		.loc 1 269 12 is_stmt 0 view .LVU769
 2391 003c 9DF82C30 		ldrb	r3, [sp, #44]	@ zero_extendqisi2
 2392 0040 002B     		cmp	r3, #0
 2393 0042 00F0A880 		beq	.L243
 2394 0046 0022     		movs	r2, #0
 2395 0048 1746     		mov	r7, r2
 2396              	.LVL218:
 2397              	.L222:
 277:easyflash/src/ef_env.c **** }
 2398              		.loc 1 277 5 is_stmt 1 view .LVU770
 277:easyflash/src/ef_env.c **** }
 2399              		.loc 1 277 5 is_stmt 0 view .LVU771
 2400              	.LBE136:
 2401              	.LBE139:
 2402              	.LBB140:
 2403              	.LBB141:
 269:easyflash/src/ef_env.c ****         {
 2404              		.loc 1 269 12 view .LVU772
 2405 004a 9DF84030 		ldrb	r3, [sp, #64]	@ zero_extendqisi2
 2406              	.LBE141:
 2407              	.LBE140:
 681:easyflash/src/ef_env.c ****     sector->status.dirty = (sector_dirty_status_t) get_status(sec_hdr.status_table.dirty, SECTOR_DI
 2408              		.loc 1 681 26 view .LVU773
 2409 004e 6770     		strb	r7, [r4, #1]
 682:easyflash/src/ef_env.c ****     /* traversal all ENV and calculate the remain space size */
 2410              		.loc 1 682 5 is_stmt 1 view .LVU774
 2411              	.LVL219:
 2412              	.LBB144:
 2413              	.LBI140:
 256:easyflash/src/ef_env.c **** {
 2414              		.loc 1 256 15 view .LVU775
 2415              	.LBB142:
 258:easyflash/src/ef_env.c **** 
 2416              		.loc 1 258 5 view .LVU776
 260:easyflash/src/ef_env.c ****     {
 2417              		.loc 1 260 5 view .LVU777
 260:easyflash/src/ef_env.c ****     {
 2418              		.loc 1 260 11 view .LVU778
 269:easyflash/src/ef_env.c ****         {
 2419              		.loc 1 269 9 view .LVU779
 269:easyflash/src/ef_env.c ****         {
 2420              		.loc 1 269 12 is_stmt 0 view .LVU780
 2421 0050 002B     		cmp	r3, #0
 2422 0052 00F09980 		beq	.L244
 274:easyflash/src/ef_env.c ****     }
 2423              		.loc 1 274 9 is_stmt 1 view .LVU781
 2424              	.LVL220:
 260:easyflash/src/ef_env.c ****     {
 2425              		.loc 1 260 11 view .LVU782
ARM GAS  /tmp/ccSGDQKw.s 			page 90


 269:easyflash/src/ef_env.c ****         {
 2426              		.loc 1 269 9 view .LVU783
 269:easyflash/src/ef_env.c ****         {
 2427              		.loc 1 269 12 is_stmt 0 view .LVU784
 2428 0056 9DF83C30 		ldrb	r3, [sp, #60]	@ zero_extendqisi2
 2429 005a 002B     		cmp	r3, #0
 2430 005c 00F09680 		beq	.L245
 274:easyflash/src/ef_env.c ****     }
 2431              		.loc 1 274 9 is_stmt 1 view .LVU785
 2432              	.LVL221:
 260:easyflash/src/ef_env.c ****     {
 2433              		.loc 1 260 11 view .LVU786
 269:easyflash/src/ef_env.c ****         {
 2434              		.loc 1 269 9 view .LVU787
 269:easyflash/src/ef_env.c ****         {
 2435              		.loc 1 269 12 is_stmt 0 view .LVU788
 2436 0060 9DF83830 		ldrb	r3, [sp, #56]	@ zero_extendqisi2
 2437 0064 B3FA83F3 		clz	r3, r3
 2438 0068 5B09     		lsrs	r3, r3, #5
 2439              	.LVL222:
 2440              	.L223:
 277:easyflash/src/ef_env.c **** }
 2441              		.loc 1 277 5 is_stmt 1 view .LVU789
 277:easyflash/src/ef_env.c **** }
 2442              		.loc 1 277 5 is_stmt 0 view .LVU790
 2443              	.LBE142:
 2444              	.LBE144:
 682:easyflash/src/ef_env.c ****     /* traversal all ENV and calculate the remain space size */
 2445              		.loc 1 682 26 view .LVU791
 2446 006a A370     		strb	r3, [r4, #2]
 684:easyflash/src/ef_env.c ****     {
 2447              		.loc 1 684 5 is_stmt 1 view .LVU792
 684:easyflash/src/ef_env.c ****     {
 2448              		.loc 1 684 8 is_stmt 0 view .LVU793
 2449 006c 46B1     		cbz	r6, .L254
 686:easyflash/src/ef_env.c ****         sector->empty_env = sector->addr + SECTOR_HDR_DATA_SIZE;
 2450              		.loc 1 686 9 is_stmt 1 view .LVU794
 686:easyflash/src/ef_env.c ****         sector->empty_env = sector->addr + SECTOR_HDR_DATA_SIZE;
 2451              		.loc 1 686 24 is_stmt 0 view .LVU795
 2452 006e 0023     		movs	r3, #0
 687:easyflash/src/ef_env.c ****         if (sector->status.store == SECTOR_STORE_EMPTY)
 2453              		.loc 1 687 42 view .LVU796
 2454 0070 05F12401 		add	r1, r5, #36
 688:easyflash/src/ef_env.c ****         {
 2455              		.loc 1 688 12 view .LVU797
 2456 0074 012A     		cmp	r2, #1
 686:easyflash/src/ef_env.c ****         sector->empty_env = sector->addr + SECTOR_HDR_DATA_SIZE;
 2457              		.loc 1 686 24 view .LVU798
 2458 0076 2361     		str	r3, [r4, #16]
 687:easyflash/src/ef_env.c ****         if (sector->status.store == SECTOR_STORE_EMPTY)
 2459              		.loc 1 687 9 is_stmt 1 view .LVU799
 687:easyflash/src/ef_env.c ****         if (sector->status.store == SECTOR_STORE_EMPTY)
 2460              		.loc 1 687 27 is_stmt 0 view .LVU800
 2461 0078 6161     		str	r1, [r4, #20]
 688:easyflash/src/ef_env.c ****         {
 2462              		.loc 1 688 9 is_stmt 1 view .LVU801
 688:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 91


 2463              		.loc 1 688 12 is_stmt 0 view .LVU802
 2464 007a 10D0     		beq	.L256
 692:easyflash/src/ef_env.c ****         {
 2465              		.loc 1 692 14 is_stmt 1 view .LVU803
 692:easyflash/src/ef_env.c ****         {
 2466              		.loc 1 692 17 is_stmt 0 view .LVU804
 2467 007c 022F     		cmp	r7, #2
 2468 007e 15D0     		beq	.L257
 2469              	.L254:
 2470              	.LBB145:
 700:easyflash/src/ef_env.c ****             }
 2471              		.loc 1 700 17 is_stmt 1 view .LVU805
 700:easyflash/src/ef_env.c ****             }
 2472              		.loc 1 700 24 is_stmt 0 view .LVU806
 2473 0080 0027     		movs	r7, #0
 2474              	.LVL223:
 2475              	.L221:
 700:easyflash/src/ef_env.c ****             }
 2476              		.loc 1 700 24 view .LVU807
 2477              	.LBE145:
 743:easyflash/src/ef_env.c **** 
 2478              		.loc 1 743 1 view .LVU808
 2479 0082 3846     		mov	r0, r7
 2480 0084 23B0     		add	sp, sp, #140
 2481              		.cfi_remember_state
 2482              		.cfi_def_cfa_offset 36
 2483              		@ sp needed
 2484 0086 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2485              	.LVL224:
 2486              	.L255:
 2487              		.cfi_restore_state
 674:easyflash/src/ef_env.c ****         sector->combined = SECTOR_NOT_COMBINED;
 2488              		.loc 1 674 9 is_stmt 1 view .LVU809
 676:easyflash/src/ef_env.c ****     }
 2489              		.loc 1 676 16 is_stmt 0 view .LVU810
 2490 008a 0727     		movs	r7, #7
 674:easyflash/src/ef_env.c ****         sector->combined = SECTOR_NOT_COMBINED;
 2491              		.loc 1 674 26 view .LVU811
 2492 008c 0022     		movs	r2, #0
 675:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 2493              		.loc 1 675 26 view .LVU812
 2494 008e 4FF0FF33 		mov	r3, #-1
 743:easyflash/src/ef_env.c **** 
 2495              		.loc 1 743 1 view .LVU813
 2496 0092 3846     		mov	r0, r7
 674:easyflash/src/ef_env.c ****         sector->combined = SECTOR_NOT_COMBINED;
 2497              		.loc 1 674 26 view .LVU814
 2498 0094 2270     		strb	r2, [r4]
 675:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 2499              		.loc 1 675 9 is_stmt 1 view .LVU815
 675:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 2500              		.loc 1 675 26 is_stmt 0 view .LVU816
 2501 0096 E360     		str	r3, [r4, #12]
 676:easyflash/src/ef_env.c ****     }
 2502              		.loc 1 676 9 is_stmt 1 view .LVU817
 743:easyflash/src/ef_env.c **** 
 2503              		.loc 1 743 1 is_stmt 0 view .LVU818
ARM GAS  /tmp/ccSGDQKw.s 			page 92


 2504 0098 23B0     		add	sp, sp, #140
 2505              		.cfi_remember_state
 2506              		.cfi_def_cfa_offset 36
 2507              		@ sp needed
 2508 009a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2509              	.LVL225:
 2510              	.L256:
 2511              		.cfi_restore_state
 690:easyflash/src/ef_env.c ****         }
 2512              		.loc 1 690 13 is_stmt 1 view .LVU819
 690:easyflash/src/ef_env.c ****         }
 2513              		.loc 1 690 28 is_stmt 0 view .LVU820
 2514 009e 494A     		ldr	r2, .L260+4
 2515 00a0 2261     		str	r2, [r4, #16]
 660:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 2516              		.loc 1 660 15 view .LVU821
 2517 00a2 1F46     		mov	r7, r3
 743:easyflash/src/ef_env.c **** 
 2518              		.loc 1 743 1 view .LVU822
 2519 00a4 3846     		mov	r0, r7
 2520 00a6 23B0     		add	sp, sp, #140
 2521              		.cfi_remember_state
 2522              		.cfi_def_cfa_offset 36
 2523              		@ sp needed
 2524 00a8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2525              	.LVL226:
 2526              	.L257:
 2527              		.cfi_restore_state
 743:easyflash/src/ef_env.c **** 
 2528              		.loc 1 743 1 view .LVU823
 2529 00ac 4649     		ldr	r1, .L260+8
 2530              	.L228:
 2531              	.LVL227:
 2532              	.LBB162:
 2533              	.LBB146:
 2534              	.LBB147:
 364:easyflash/src/ef_env.c ****         {
 2535              		.loc 1 364 9 is_stmt 1 view .LVU824
 362:easyflash/src/ef_env.c ****     {
 2536              		.loc 1 362 49 view .LVU825
 364:easyflash/src/ef_env.c ****         {
 2537              		.loc 1 364 12 is_stmt 0 view .LVU826
 2538 00ae 51F83320 		ldr	r2, [r1, r3, lsl #3]
 2539 00b2 9542     		cmp	r5, r2
 2540 00b4 73D0     		beq	.L258
 362:easyflash/src/ef_env.c ****     {
 2541              		.loc 1 362 50 view .LVU827
 2542 00b6 0133     		adds	r3, r3, #1
 2543              	.LVL228:
 362:easyflash/src/ef_env.c ****     {
 2544              		.loc 1 362 17 is_stmt 1 view .LVU828
 362:easyflash/src/ef_env.c ****     {
 2545              		.loc 1 362 5 is_stmt 0 view .LVU829
 2546 00b8 042B     		cmp	r3, #4
 2547 00ba F8D1     		bne	.L228
 2548              	.LVL229:
 362:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 93


 2549              		.loc 1 362 5 view .LVU830
 2550              	.LBE147:
 2551              	.LBE146:
 704:easyflash/src/ef_env.c ****             env_meta.addr.start = FAILED_ADDR;
 2552              		.loc 1 704 13 is_stmt 1 view .LVU831
 704:easyflash/src/ef_env.c ****             env_meta.addr.start = FAILED_ADDR;
 2553              		.loc 1 704 28 is_stmt 0 view .LVU832
 2554 00bc 414A     		ldr	r2, .L260+4
 2555 00be 2261     		str	r2, [r4, #16]
 705:easyflash/src/ef_env.c ****             while ((env_meta.addr.start = get_next_env_addr(sector, &env_meta)) != FAILED_ADDR)
 2556              		.loc 1 705 13 is_stmt 1 view .LVU833
 705:easyflash/src/ef_env.c ****             while ((env_meta.addr.start = get_next_env_addr(sector, &env_meta)) != FAILED_ADDR)
 2557              		.loc 1 705 33 is_stmt 0 view .LVU834
 2558 00c0 4FF0FF33 		mov	r3, #-1
 2559 00c4 2093     		str	r3, [sp, #128]
 706:easyflash/src/ef_env.c ****             {
 2560              		.loc 1 706 13 is_stmt 1 view .LVU835
 2561              	.LVL230:
 2562              	.L229:
 706:easyflash/src/ef_env.c ****             {
 2563              		.loc 1 706 19 view .LVU836
 706:easyflash/src/ef_env.c ****             {
 2564              		.loc 1 706 43 is_stmt 0 view .LVU837
 2565 00c6 14A9     		add	r1, sp, #80
 2566 00c8 2046     		mov	r0, r4
 2567 00ca FFF7FEFF 		bl	get_next_env_addr
 2568              	.LVL231:
 708:easyflash/src/ef_env.c ****                 if (!env_meta.crc_is_ok)
 2569              		.loc 1 708 17 is_stmt 1 view .LVU838
 706:easyflash/src/ef_env.c ****             {
 2570              		.loc 1 706 43 is_stmt 0 view .LVU839
 2571 00ce 0346     		mov	r3, r0
 706:easyflash/src/ef_env.c ****             {
 2572              		.loc 1 706 41 view .LVU840
 2573 00d0 2093     		str	r3, [sp, #128]
 706:easyflash/src/ef_env.c ****             {
 2574              		.loc 1 706 19 view .LVU841
 2575 00d2 0133     		adds	r3, r3, #1
 708:easyflash/src/ef_env.c ****                 if (!env_meta.crc_is_ok)
 2576              		.loc 1 708 17 view .LVU842
 2577 00d4 14A8     		add	r0, sp, #80
 706:easyflash/src/ef_env.c ****             {
 2578              		.loc 1 706 19 view .LVU843
 2579 00d6 60D0     		beq	.L259
 708:easyflash/src/ef_env.c ****                 if (!env_meta.crc_is_ok)
 2580              		.loc 1 708 17 view .LVU844
 2581 00d8 FFF7FEFF 		bl	read_env.isra.0
 2582              	.LVL232:
 709:easyflash/src/ef_env.c ****                 {
 2583              		.loc 1 709 17 is_stmt 1 view .LVU845
 711:easyflash/src/ef_env.c ****                     {
 2584              		.loc 1 711 21 view .LVU846
 719:easyflash/src/ef_env.c ****                 sector->remain -= env_meta.len;
 2585              		.loc 1 719 17 view .LVU847
 709:easyflash/src/ef_env.c ****                 {
 2586              		.loc 1 709 20 is_stmt 0 view .LVU848
 2587 00dc 9DF85150 		ldrb	r5, [sp, #81]	@ zero_extendqisi2
ARM GAS  /tmp/ccSGDQKw.s 			page 94


 2588 00e0 002D     		cmp	r5, #0
 2589 00e2 46D1     		bne	.L230
 711:easyflash/src/ef_env.c ****                     {
 2590              		.loc 1 711 24 view .LVU849
 2591 00e4 9DF85030 		ldrb	r3, [sp, #80]	@ zero_extendqisi2
 2592 00e8 03F0FB03 		and	r3, r3, #251
 2593 00ec 012B     		cmp	r3, #1
 2594 00ee 40D0     		beq	.L230
 713:easyflash/src/ef_env.c ****                         sector->remain = 0;
 2595              		.loc 1 713 25 is_stmt 1 view .LVU850
 2596 00f0 2099     		ldr	r1, [sp, #128]
 2597 00f2 3648     		ldr	r0, .L260+12
 2598 00f4 FFF7FEFF 		bl	ef_log_info
 2599              	.LVL233:
 714:easyflash/src/ef_env.c ****                         result = EF_READ_ERR;
 2600              		.loc 1 714 25 view .LVU851
 714:easyflash/src/ef_env.c ****                         result = EF_READ_ERR;
 2601              		.loc 1 714 40 is_stmt 0 view .LVU852
 2602 00f8 2561     		str	r5, [r4, #16]
 715:easyflash/src/ef_env.c ****                         break;
 2603              		.loc 1 715 25 is_stmt 1 view .LVU853
 2604              	.LVL234:
 716:easyflash/src/ef_env.c ****                     }
 2605              		.loc 1 716 25 view .LVU854
 2606              	.L231:
 2607              	.LBB150:
 724:easyflash/src/ef_env.c **** 
 2608              		.loc 1 724 17 view .LVU855
 726:easyflash/src/ef_env.c ****                 /* check the flash data is clean */
 2609              		.loc 1 726 17 view .LVU856
 726:easyflash/src/ef_env.c ****                 /* check the flash data is clean */
 2610              		.loc 1 726 69 is_stmt 0 view .LVU857
 2611 00fa 6068     		ldr	r0, [r4, #4]
 726:easyflash/src/ef_env.c ****                 /* check the flash data is clean */
 2612              		.loc 1 726 27 view .LVU858
 2613 00fc 6669     		ldr	r6, [r4, #20]
 2614 00fe 00F5003B 		add	fp, r0, #131072
 2615              	.LBB151:
 2616              	.LBB152:
 475:easyflash/src/ef_env.c ****     {
 2617              		.loc 1 475 5 view .LVU859
 2618 0102 5E45     		cmp	r6, fp
 2619              	.LBE152:
 2620              	.LBE151:
 726:easyflash/src/ef_env.c ****                 /* check the flash data is clean */
 2621              		.loc 1 726 27 view .LVU860
 2622 0104 CDF804B0 		str	fp, [sp, #4]
 2623              	.LVL235:
 2624              	.LBB156:
 2625              	.LBI151:
 470:easyflash/src/ef_env.c **** {
 2626              		.loc 1 470 17 is_stmt 1 view .LVU861
 2627              	.LBB153:
 472:easyflash/src/ef_env.c ****     size_t i, addr = start, read_size;
 2628              		.loc 1 472 5 view .LVU862
 473:easyflash/src/ef_env.c **** 
 2629              		.loc 1 473 5 view .LVU863
ARM GAS  /tmp/ccSGDQKw.s 			page 95


 475:easyflash/src/ef_env.c ****     {
 2630              		.loc 1 475 5 view .LVU864
 475:easyflash/src/ef_env.c ****     {
 2631              		.loc 1 475 12 view .LVU865
 475:easyflash/src/ef_env.c ****     {
 2632              		.loc 1 475 5 is_stmt 0 view .LVU866
 2633 0108 27D2     		bcs	.L233
 2634 010a 22AB     		add	r3, sp, #136
 2635 010c B046     		mov	r8, r6
 472:easyflash/src/ef_env.c ****     size_t i, addr = start, read_size;
 2636              		.loc 1 472 22 view .LVU867
 2637 010e 0025     		movs	r5, #0
 2638 0110 C3F15C09 		rsb	r9, r3, #92
 2639              	.LVL236:
 2640              	.L238:
 477:easyflash/src/ef_env.c ****         {
 2641              		.loc 1 477 9 is_stmt 1 view .LVU868
 2642 0114 3046     		mov	r0, r6
 477:easyflash/src/ef_env.c ****         {
 2643              		.loc 1 477 19 is_stmt 0 view .LVU869
 2644 0116 2036     		adds	r6, r6, #32
 2645              	.LVL237:
 477:easyflash/src/ef_env.c ****         {
 2646              		.loc 1 477 12 view .LVU870
 2647 0118 B345     		cmp	fp, r6
 483:easyflash/src/ef_env.c ****         }
 2648              		.loc 1 483 13 is_stmt 1 view .LVU871
 2649 011a 9ABF     		itte	ls
 2650 011c 0BF12002 		addls	r2, fp, #32
 2651 0120 A2EB060A 		subls	r10, r2, r6
 2652              	.LVL238:
 479:easyflash/src/ef_env.c ****         }
 2653              		.loc 1 479 23 is_stmt 0 view .LVU872
 2654 0124 4FF0200A 		movhi	r10, #32
 2655              	.LVL239:
 485:easyflash/src/ef_env.c ****         for (i = 0; i < read_size; i++)
 2656              		.loc 1 485 9 is_stmt 1 view .LVU873
 2657 0128 5246     		mov	r2, r10
 2658 012a 03A9     		add	r1, sp, #12
 2659 012c FFF7FEFF 		bl	ef_port_read
 2660              	.LVL240:
 486:easyflash/src/ef_env.c ****         {
 2661              		.loc 1 486 9 view .LVU874
 486:easyflash/src/ef_env.c ****         {
 2662              		.loc 1 486 21 view .LVU875
 2663 0130 03AB     		add	r3, sp, #12
 2664 0132 03EB0A02 		add	r2, r3, r10
 2665 0136 09EB0601 		add	r1, r9, r6
 2666              	.LVL241:
 2667              	.L237:
 488:easyflash/src/ef_env.c ****             {
 2668              		.loc 1 488 13 view .LVU876
 488:easyflash/src/ef_env.c ****             {
 2669              		.loc 1 488 16 is_stmt 0 view .LVU877
 2670 013a FF2D     		cmp	r5, #255
 488:easyflash/src/ef_env.c ****             {
 2671              		.loc 1 488 41 view .LVU878
ARM GAS  /tmp/ccSGDQKw.s 			page 96


 2672 013c 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 2673              	.LVL242:
 488:easyflash/src/ef_env.c ****             {
 2674              		.loc 1 488 16 view .LVU879
 2675 013e 03D0     		beq	.L236
 488:easyflash/src/ef_env.c ****             {
 2676              		.loc 1 488 35 view .LVU880
 2677 0140 FF2D     		cmp	r5, #255
 490:easyflash/src/ef_env.c ****             }
 2678              		.loc 1 490 17 is_stmt 1 view .LVU881
 2679 0142 08BF     		it	eq
 2680 0144 01EB0308 		addeq	r8, r1, r3
 2681              	.LVL243:
 2682              	.L236:
 492:easyflash/src/ef_env.c ****         }
 2683              		.loc 1 492 13 view .LVU882
 486:easyflash/src/ef_env.c ****         {
 2684              		.loc 1 486 36 view .LVU883
 486:easyflash/src/ef_env.c ****         {
 2685              		.loc 1 486 21 view .LVU884
 486:easyflash/src/ef_env.c ****         {
 2686              		.loc 1 486 9 is_stmt 0 view .LVU885
 2687 0148 0133     		adds	r3, r3, #1
 2688              	.LVL244:
 486:easyflash/src/ef_env.c ****         {
 2689              		.loc 1 486 9 view .LVU886
 2690 014a 9A42     		cmp	r2, r3
 2691 014c F5D1     		bne	.L237
 2692              	.LVL245:
 475:easyflash/src/ef_env.c ****     {
 2693              		.loc 1 475 12 is_stmt 1 view .LVU887
 475:easyflash/src/ef_env.c ****     {
 2694              		.loc 1 475 5 is_stmt 0 view .LVU888
 2695 014e B345     		cmp	fp, r6
 2696 0150 E0D8     		bhi	.L238
 496:easyflash/src/ef_env.c ****     {
 2697              		.loc 1 496 5 is_stmt 1 view .LVU889
 496:easyflash/src/ef_env.c ****     {
 2698              		.loc 1 496 8 is_stmt 0 view .LVU890
 2699 0152 FF2D     		cmp	r5, #255
 2700 0154 2CD0     		beq	.L239
 2701              	.LBE153:
 2702              	.LBE156:
 728:easyflash/src/ef_env.c ****                 {
 2703              		.loc 1 728 27 view .LVU891
 2704 0156 6669     		ldr	r6, [r4, #20]
 2705              	.LVL246:
 732:easyflash/src/ef_env.c ****                 }
 2706              		.loc 1 732 69 view .LVU892
 2707 0158 6068     		ldr	r0, [r4, #4]
 2708              	.LVL247:
 2709              	.L233:
 728:easyflash/src/ef_env.c ****                 {
 2710              		.loc 1 728 17 is_stmt 1 view .LVU893
 728:easyflash/src/ef_env.c ****                 {
 2711              		.loc 1 728 20 is_stmt 0 view .LVU894
 2712 015a 019A     		ldr	r2, [sp, #4]
ARM GAS  /tmp/ccSGDQKw.s 			page 97


 2713 015c B242     		cmp	r2, r6
 2714 015e 04D0     		beq	.L240
 731:easyflash/src/ef_env.c ****                     sector->remain = SECTOR_SIZE - (ff_addr - sector->addr);
 2715              		.loc 1 731 21 is_stmt 1 view .LVU895
 732:easyflash/src/ef_env.c ****                 }
 2716              		.loc 1 732 50 is_stmt 0 view .LVU896
 2717 0160 00F50033 		add	r3, r0, #131072
 2718 0164 9B1A     		subs	r3, r3, r2
 732:easyflash/src/ef_env.c ****                 }
 2719              		.loc 1 732 36 view .LVU897
 2720 0166 C4E90432 		strd	r3, r2, [r4, #16]
 2721              	.LVL248:
 2722              	.L240:
 732:easyflash/src/ef_env.c ****                 }
 2723              		.loc 1 732 36 view .LVU898
 2724              	.LBE150:
 737:easyflash/src/ef_env.c **** #endif
 2725              		.loc 1 737 13 is_stmt 1 view .LVU899
 2726 016a 0199     		ldr	r1, [sp, #4]
 2727 016c FFF7FEFF 		bl	update_sector_cache
 2728              	.LVL249:
 737:easyflash/src/ef_env.c **** #endif
 2729              		.loc 1 737 13 is_stmt 0 view .LVU900
 2730 0170 87E7     		b	.L221
 2731              	.LVL250:
 2732              	.L230:
 720:easyflash/src/ef_env.c ****             }
 2733              		.loc 1 720 32 view .LVU901
 2734 0172 D4E90432 		ldrd	r3, r2, [r4, #16]
 719:easyflash/src/ef_env.c ****                 sector->remain -= env_meta.len;
 2735              		.loc 1 719 46 view .LVU902
 2736 0176 1699     		ldr	r1, [sp, #88]
 719:easyflash/src/ef_env.c ****                 sector->remain -= env_meta.len;
 2737              		.loc 1 719 35 view .LVU903
 2738 0178 0A44     		add	r2, r2, r1
 720:easyflash/src/ef_env.c ****             }
 2739              		.loc 1 720 32 view .LVU904
 2740 017a 5B1A     		subs	r3, r3, r1
 2741 017c C4E90432 		strd	r3, r2, [r4, #16]
 2742 0180 A1E7     		b	.L229
 2743              	.LVL251:
 2744              	.L241:
 720:easyflash/src/ef_env.c ****             }
 2745              		.loc 1 720 32 view .LVU905
 2746              	.LBE162:
 2747              	.LBB163:
 2748              	.LBB137:
 269:easyflash/src/ef_env.c ****         {
 2749              		.loc 1 269 12 view .LVU906
 2750 0182 0322     		movs	r2, #3
 2751 0184 1746     		mov	r7, r2
 2752 0186 60E7     		b	.L222
 2753              	.LVL252:
 2754              	.L244:
 269:easyflash/src/ef_env.c ****         {
 2755              		.loc 1 269 12 view .LVU907
 2756              	.LBE137:
ARM GAS  /tmp/ccSGDQKw.s 			page 98


 2757              	.LBE163:
 2758              	.LBB164:
 2759              	.LBB143:
 2760 0188 0323     		movs	r3, #3
 2761 018a 6EE7     		b	.L223
 2762              	.LVL253:
 2763              	.L245:
 269:easyflash/src/ef_env.c ****         {
 2764              		.loc 1 269 12 view .LVU908
 2765 018c 0223     		movs	r3, #2
 2766 018e 6CE7     		b	.L223
 2767              	.LVL254:
 2768              	.L242:
 269:easyflash/src/ef_env.c ****         {
 2769              		.loc 1 269 12 view .LVU909
 2770              	.LBE143:
 2771              	.LBE164:
 2772              	.LBB165:
 2773              	.LBB138:
 2774 0190 0222     		movs	r2, #2
 2775 0192 1746     		mov	r7, r2
 2776 0194 59E7     		b	.L222
 2777              	.LVL255:
 2778              	.L243:
 269:easyflash/src/ef_env.c ****         {
 2779              		.loc 1 269 12 view .LVU910
 2780 0196 1746     		mov	r7, r2
 2781 0198 57E7     		b	.L222
 2782              	.LVL256:
 2783              	.L259:
 269:easyflash/src/ef_env.c ****         {
 2784              		.loc 1 269 12 view .LVU911
 2785              	.LBE138:
 2786              	.LBE165:
 660:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 2787              		.loc 1 660 15 view .LVU912
 2788 019a 0027     		movs	r7, #0
 2789 019c ADE7     		b	.L231
 2790              	.LVL257:
 2791              	.L258:
 2792              	.LBB166:
 2793              	.LBB159:
 2794              	.LBB148:
 366:easyflash/src/ef_env.c ****             {
 2795              		.loc 1 366 13 is_stmt 1 view .LVU913
 368:easyflash/src/ef_env.c ****             }
 2796              		.loc 1 368 17 view .LVU914
 368:easyflash/src/ef_env.c ****             }
 2797              		.loc 1 368 52 is_stmt 0 view .LVU915
 2798 019e 01EBC301 		add	r1, r1, r3, lsl #3
 2799              	.LBE148:
 2800              	.LBE159:
 699:easyflash/src/ef_env.c ****                 return result;
 2801              		.loc 1 699 46 view .LVU916
 2802 01a2 05F50033 		add	r3, r5, #131072
 2803              	.LVL258:
 2804              	.LBB160:
ARM GAS  /tmp/ccSGDQKw.s 			page 99


 2805              	.LBB149:
 368:easyflash/src/ef_env.c ****             }
 2806              		.loc 1 368 52 view .LVU917
 2807 01a6 4A68     		ldr	r2, [r1, #4]
 368:easyflash/src/ef_env.c ****             }
 2808              		.loc 1 368 29 view .LVU918
 2809 01a8 6261     		str	r2, [r4, #20]
 368:easyflash/src/ef_env.c ****             }
 2810              		.loc 1 368 29 view .LVU919
 2811              	.LBE149:
 2812              	.LBE160:
 699:easyflash/src/ef_env.c ****                 return result;
 2813              		.loc 1 699 17 is_stmt 1 view .LVU920
 699:easyflash/src/ef_env.c ****                 return result;
 2814              		.loc 1 699 46 is_stmt 0 view .LVU921
 2815 01aa 9B1A     		subs	r3, r3, r2
 699:easyflash/src/ef_env.c ****                 return result;
 2816              		.loc 1 699 32 view .LVU922
 2817 01ac 2361     		str	r3, [r4, #16]
 2818 01ae 67E7     		b	.L254
 2819              	.LVL259:
 2820              	.L239:
 2821              	.LBB161:
 2822              	.LBB157:
 2823              	.LBB154:
 498:easyflash/src/ef_env.c ****     }
 2824              		.loc 1 498 9 is_stmt 1 view .LVU923
 498:easyflash/src/ef_env.c ****     }
 2825              		.loc 1 498 16 is_stmt 0 view .LVU924
 2826 01b0 08F10308 		add	r8, r8, #3
 2827 01b4 28F00303 		bic	r3, r8, #3
 2828              	.LVL260:
 498:easyflash/src/ef_env.c ****     }
 2829              		.loc 1 498 16 view .LVU925
 2830              	.LBE154:
 2831              	.LBE157:
 728:easyflash/src/ef_env.c ****                 {
 2832              		.loc 1 728 27 view .LVU926
 2833 01b8 6669     		ldr	r6, [r4, #20]
 2834              	.LVL261:
 732:easyflash/src/ef_env.c ****                 }
 2835              		.loc 1 732 69 view .LVU927
 2836 01ba 6068     		ldr	r0, [r4, #4]
 2837              	.LBB158:
 2838              	.LBB155:
 498:easyflash/src/ef_env.c ****     }
 2839              		.loc 1 498 16 view .LVU928
 2840 01bc 0193     		str	r3, [sp, #4]
 2841 01be CCE7     		b	.L233
 2842              	.L261:
 2843              		.align	2
 2844              	.L260:
 2845 01c0 45463430 		.word	808732229
 2846 01c4 DCFF0100 		.word	131036
 2847 01c8 00000000 		.word	.LANCHOR0
 2848 01cc 00000000 		.word	.LC12
 2849              	.LBE155:
ARM GAS  /tmp/ccSGDQKw.s 			page 100


 2850              	.LBE158:
 2851              	.LBE161:
 2852              	.LBE166:
 2853              		.cfi_endproc
 2854              	.LFE293:
 2856              		.section	.text.read_sector_meta_data,"ax",%progbits
 2857              		.align	1
 2858              		.p2align 2,,3
 2859              		.syntax unified
 2860              		.thumb
 2861              		.thumb_func
 2863              	read_sector_meta_data:
 2864              	.LVL262:
 2865              	.LFB247:
 659:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 2866              		.loc 1 659 1 is_stmt 1 view -0
 2867              		.cfi_startproc
 2868              		@ args = 0, pretend = 0, frame = 0
 2869              		@ frame_needed = 0, uses_anonymous_args = 0
 660:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 2870              		.loc 1 660 5 view .LVU930
 661:easyflash/src/ef_env.c **** 
 2871              		.loc 1 661 5 view .LVU931
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2872              		.loc 1 663 5 view .LVU932
 2873 0000 C0F31003 		ubfx	r3, r0, #0, #17
 2874 0004 0BB9     		cbnz	r3, .L268
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2875              		.loc 1 663 39 discriminator 2 view .LVU933
 664:easyflash/src/ef_env.c **** 
 2876              		.loc 1 664 5 discriminator 2 view .LVU934
 2877 0006 FFF7FEBF 		b	read_sector_meta_data.part.0
 2878              	.LVL263:
 2879              	.L268:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2880              		.loc 1 663 5 discriminator 1 view .LVU935
 659:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 2881              		.loc 1 659 1 is_stmt 0 discriminator 1 view .LVU936
 2882 000a 00B5     		push	{lr}
 2883              		.cfi_def_cfa_offset 4
 2884              		.cfi_offset 14, -4
 2885 000c 83B0     		sub	sp, sp, #12
 2886              		.cfi_def_cfa_offset 16
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2887              		.loc 1 663 5 discriminator 1 view .LVU937
 2888 000e 0549     		ldr	r1, .L269
 2889              	.LVL264:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2890              		.loc 1 663 5 discriminator 1 view .LVU938
 2891 0010 0091     		str	r1, [sp]
 2892 0012 054B     		ldr	r3, .L269+4
 2893 0014 054A     		ldr	r2, .L269+8
 2894              	.LVL265:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2895              		.loc 1 663 5 discriminator 1 view .LVU939
 2896 0016 0648     		ldr	r0, .L269+12
 2897              	.LVL266:
ARM GAS  /tmp/ccSGDQKw.s 			page 101


 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2898              		.loc 1 663 5 discriminator 1 view .LVU940
 2899 0018 40F29721 		movw	r1, #663
 2900 001c FFF7FEFF 		bl	ef_log_debug
 2901              	.LVL267:
 2902              	.L264:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2903              		.loc 1 663 5 is_stmt 1 discriminator 1 view .LVU941
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2904              		.loc 1 663 5 discriminator 1 view .LVU942
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2905              		.loc 1 663 5 discriminator 1 view .LVU943
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2906              		.loc 1 663 5 discriminator 1 view .LVU944
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2907              		.loc 1 663 5 discriminator 1 view .LVU945
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 2908              		.loc 1 663 5 discriminator 1 view .LVU946
 2909 0020 FEE7     		b	.L264
 2910              	.L270:
 2911 0022 00BF     		.align	2
 2912              	.L269:
 2913 0024 00000000 		.word	.LANCHOR6
 2914 0028 00000000 		.word	.LC8
 2915 002c 1C000000 		.word	.LC1
 2916 0030 3C000000 		.word	.LC2
 2917              		.cfi_endproc
 2918              	.LFE247:
 2920              		.section	.text.env_iterator,"ax",%progbits
 2921              		.align	1
 2922              		.p2align 2,,3
 2923              		.syntax unified
 2924              		.thumb
 2925              		.thumb_func
 2927              	env_iterator:
 2928              	.LVL268:
 2929              	.LFB249:
 779:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 2930              		.loc 1 779 1 view -0
 2931              		.cfi_startproc
 2932              		@ args = 0, pretend = 0, frame = 24
 2933              		@ frame_needed = 0, uses_anonymous_args = 0
 780:easyflash/src/ef_env.c ****     uint32_t sec_addr;
 2934              		.loc 1 780 5 view .LVU948
 781:easyflash/src/ef_env.c **** 
 2935              		.loc 1 781 5 view .LVU949
 783:easyflash/src/ef_env.c ****     /* search all sectors */
 2936              		.loc 1 783 5 view .LVU950
 779:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 2937              		.loc 1 779 1 is_stmt 0 view .LVU951
 2938 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2939              		.cfi_def_cfa_offset 32
 2940              		.cfi_offset 4, -32
 2941              		.cfi_offset 5, -28
 2942              		.cfi_offset 6, -24
 2943              		.cfi_offset 7, -20
 2944              		.cfi_offset 8, -16
ARM GAS  /tmp/ccSGDQKw.s 			page 102


 2945              		.cfi_offset 9, -12
 2946              		.cfi_offset 10, -8
 2947              		.cfi_offset 14, -4
 783:easyflash/src/ef_env.c ****     /* search all sectors */
 2948              		.loc 1 783 17 view .LVU952
 2949 0004 4FF0FF34 		mov	r4, #-1
 779:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 2950              		.loc 1 779 1 view .LVU953
 2951 0008 86B0     		sub	sp, sp, #24
 2952              		.cfi_def_cfa_offset 56
 779:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 2953              		.loc 1 779 1 view .LVU954
 2954 000a 8846     		mov	r8, r1
 2955              	.LBB169:
 2956              	.LBB170:
 749:easyflash/src/ef_env.c ****     {
 2957              		.loc 1 749 8 view .LVU955
 2958 000c 611C     		adds	r1, r4, #1
 2959              	.LVL269:
 749:easyflash/src/ef_env.c ****     {
 2960              		.loc 1 749 8 view .LVU956
 2961 000e DFF87890 		ldr	r9, .L288
 2962              	.LBE170:
 2963              	.LBE169:
 783:easyflash/src/ef_env.c ****     /* search all sectors */
 2964              		.loc 1 783 17 view .LVU957
 2965 0012 0194     		str	r4, [sp, #4]
 785:easyflash/src/ef_env.c ****     {
 2966              		.loc 1 785 5 is_stmt 1 view .LVU958
 779:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 2967              		.loc 1 779 1 is_stmt 0 view .LVU959
 2968 0014 0546     		mov	r5, r0
 2969 0016 1746     		mov	r7, r2
 2970 0018 1E46     		mov	r6, r3
 798:easyflash/src/ef_env.c ****             /* search all ENV */
 2971              		.loc 1 798 29 view .LVU960
 2972 001a A246     		mov	r10, r4
 785:easyflash/src/ef_env.c ****     {
 2973              		.loc 1 785 11 is_stmt 1 view .LVU961
 2974              	.LVL270:
 2975              	.LBB174:
 2976              	.LBI169:
 745:easyflash/src/ef_env.c **** {
 2977              		.loc 1 745 17 view .LVU962
 2978              	.LBB171:
 747:easyflash/src/ef_env.c **** 
 2979              		.loc 1 747 5 view .LVU963
 749:easyflash/src/ef_env.c ****     {
 2980              		.loc 1 749 5 view .LVU964
 749:easyflash/src/ef_env.c ****     {
 2981              		.loc 1 749 8 is_stmt 0 view .LVU965
 2982 001c 1BD0     		beq	.L286
 2983              	.LVL271:
 2984              	.L277:
 756:easyflash/src/ef_env.c ****         {
 2985              		.loc 1 756 9 is_stmt 1 view .LVU966
 756:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 103


 2986              		.loc 1 756 20 is_stmt 0 view .LVU967
 2987 001e 0398     		ldr	r0, [sp, #12]
 765:easyflash/src/ef_env.c ****         {
 2988              		.loc 1 765 40 view .LVU968
 2989 0020 D9F80030 		ldr	r3, [r9]
 756:easyflash/src/ef_env.c ****         {
 2990              		.loc 1 756 12 view .LVU969
 2991 0024 421C     		adds	r2, r0, #1
 758:easyflash/src/ef_env.c ****         }
 2992              		.loc 1 758 13 is_stmt 1 view .LVU970
 758:easyflash/src/ef_env.c ****         }
 2993              		.loc 1 758 23 is_stmt 0 view .LVU971
 2994 0026 0CBF     		ite	eq
 2995 0028 04F50030 		addeq	r0, r4, #131072
 2996              	.LVL272:
 762:easyflash/src/ef_env.c ****         }
 2997              		.loc 1 762 13 is_stmt 1 view .LVU972
 762:easyflash/src/ef_env.c ****         }
 2998              		.loc 1 762 23 is_stmt 0 view .LVU973
 2999 002c 04EB4040 		addne	r0, r4, r0, lsl #17
 3000              	.LVL273:
 765:easyflash/src/ef_env.c ****         {
 3001              		.loc 1 765 9 is_stmt 1 view .LVU974
 765:easyflash/src/ef_env.c ****         {
 3002              		.loc 1 765 40 is_stmt 0 view .LVU975
 3003 0030 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
 3004              		.loc 1 765 12 view .LVU976
 3005 0034 8342     		cmp	r3, r0
 3006 0036 24D9     		bls	.L271
 3007              	.LVL274:
 3008              	.L278:
 765:easyflash/src/ef_env.c ****         {
 3009              		.loc 1 765 12 view .LVU977
 3010              	.LBE171:
 3011              	.LBE174:
 785:easyflash/src/ef_env.c ****     {
 3012              		.loc 1 785 11 view .LVU978
 3013 0038 431C     		adds	r3, r0, #1
 3014 003a 22D0     		beq	.L271
 787:easyflash/src/ef_env.c ****         {
 3015              		.loc 1 787 9 is_stmt 1 view .LVU979
 787:easyflash/src/ef_env.c ****         {
 3016              		.loc 1 787 13 is_stmt 0 view .LVU980
 3017 003c 0022     		movs	r2, #0
 3018 003e 6946     		mov	r1, sp
 3019 0040 FFF7FEFF 		bl	read_sector_meta_data
 3020              	.LVL275:
 787:easyflash/src/ef_env.c ****         {
 3021              		.loc 1 787 12 view .LVU981
 3022 0044 20B9     		cbnz	r0, .L274
 791:easyflash/src/ef_env.c ****         {
 3023              		.loc 1 791 9 is_stmt 1 view .LVU982
 796:easyflash/src/ef_env.c ****         {
 3024              		.loc 1 796 9 view .LVU983
 796:easyflash/src/ef_env.c ****         {
 3025              		.loc 1 796 55 is_stmt 0 view .LVU984
ARM GAS  /tmp/ccSGDQKw.s 			page 104


 3026 0046 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 796:easyflash/src/ef_env.c ****         {
 3027              		.loc 1 796 12 view .LVU985
 3028 004a 023B     		subs	r3, r3, #2
 3029 004c 012B     		cmp	r3, #1
 3030 004e 05D9     		bls	.L287
 3031              	.L274:
 3032              	.LBB175:
 3033              	.LBB172:
 749:easyflash/src/ef_env.c ****     {
 3034              		.loc 1 749 16 view .LVU986
 3035 0050 019C     		ldr	r4, [sp, #4]
 3036              	.LBE172:
 3037              	.LBE175:
 785:easyflash/src/ef_env.c ****     {
 3038              		.loc 1 785 11 is_stmt 1 view .LVU987
 3039              	.LVL276:
 3040              	.LBB176:
 745:easyflash/src/ef_env.c **** {
 3041              		.loc 1 745 17 view .LVU988
 3042              	.LBB173:
 747:easyflash/src/ef_env.c **** 
 3043              		.loc 1 747 5 view .LVU989
 749:easyflash/src/ef_env.c ****     {
 3044              		.loc 1 749 5 view .LVU990
 749:easyflash/src/ef_env.c ****     {
 3045              		.loc 1 749 8 is_stmt 0 view .LVU991
 3046 0052 611C     		adds	r1, r4, #1
 3047 0054 E3D1     		bne	.L277
 3048              	.L286:
 751:easyflash/src/ef_env.c ****     }
 3049              		.loc 1 751 9 is_stmt 1 view .LVU992
 751:easyflash/src/ef_env.c ****     }
 3050              		.loc 1 751 16 is_stmt 0 view .LVU993
 3051 0056 D9F80000 		ldr	r0, [r9]
 3052 005a EDE7     		b	.L278
 3053              	.LVL277:
 3054              	.L287:
 751:easyflash/src/ef_env.c ****     }
 3055              		.loc 1 751 16 view .LVU994
 3056              	.LBE173:
 3057              	.LBE176:
 798:easyflash/src/ef_env.c ****             /* search all ENV */
 3058              		.loc 1 798 13 is_stmt 1 view .LVU995
 798:easyflash/src/ef_env.c ****             /* search all ENV */
 3059              		.loc 1 798 29 is_stmt 0 view .LVU996
 3060 005c C5F830A0 		str	r10, [r5, #48]
 800:easyflash/src/ef_env.c ****             {
 3061              		.loc 1 800 13 is_stmt 1 view .LVU997
 3062              	.L275:
 800:easyflash/src/ef_env.c ****             {
 3063              		.loc 1 800 19 view .LVU998
 800:easyflash/src/ef_env.c ****             {
 3064              		.loc 1 800 39 is_stmt 0 view .LVU999
 3065 0060 2946     		mov	r1, r5
 3066 0062 6846     		mov	r0, sp
 3067 0064 FFF7FEFF 		bl	get_next_env_addr
ARM GAS  /tmp/ccSGDQKw.s 			page 105


 3068              	.LVL278:
 802:easyflash/src/ef_env.c ****                 /* iterator is interrupted when callback return true */
 3069              		.loc 1 802 17 is_stmt 1 view .LVU1000
 800:easyflash/src/ef_env.c ****             {
 3070              		.loc 1 800 39 is_stmt 0 view .LVU1001
 3071 0068 0346     		mov	r3, r0
 800:easyflash/src/ef_env.c ****             {
 3072              		.loc 1 800 37 view .LVU1002
 3073 006a 2B63     		str	r3, [r5, #48]
 800:easyflash/src/ef_env.c ****             {
 3074              		.loc 1 800 19 view .LVU1003
 3075 006c 0133     		adds	r3, r3, #1
 802:easyflash/src/ef_env.c ****                 /* iterator is interrupted when callback return true */
 3076              		.loc 1 802 17 view .LVU1004
 3077 006e 2846     		mov	r0, r5
 800:easyflash/src/ef_env.c ****             {
 3078              		.loc 1 800 19 view .LVU1005
 3079 0070 EED0     		beq	.L274
 3080              	.LVL279:
 802:easyflash/src/ef_env.c ****                 /* iterator is interrupted when callback return true */
 3081              		.loc 1 802 17 view .LVU1006
 3082 0072 FFF7FEFF 		bl	read_env.isra.0
 3083              	.LVL280:
 804:easyflash/src/ef_env.c ****                 {
 3084              		.loc 1 804 17 is_stmt 1 view .LVU1007
 804:easyflash/src/ef_env.c ****                 {
 3085              		.loc 1 804 21 is_stmt 0 view .LVU1008
 3086 0076 3A46     		mov	r2, r7
 3087 0078 4146     		mov	r1, r8
 3088 007a 2846     		mov	r0, r5
 3089 007c B047     		blx	r6
 3090              	.LVL281:
 804:easyflash/src/ef_env.c ****                 {
 3091              		.loc 1 804 20 view .LVU1009
 3092 007e 0028     		cmp	r0, #0
 3093 0080 EED0     		beq	.L275
 3094              	.L271:
 811:easyflash/src/ef_env.c **** 
 3095              		.loc 1 811 1 view .LVU1010
 3096 0082 06B0     		add	sp, sp, #24
 3097              		.cfi_def_cfa_offset 32
 3098              		@ sp needed
 3099 0084 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3100              	.LVL282:
 3101              	.L289:
 811:easyflash/src/ef_env.c **** 
 3102              		.loc 1 811 1 view .LVU1011
 3103              		.align	2
 3104              	.L288:
 3105 0088 00000000 		.word	.LANCHOR7
 3106              		.cfi_endproc
 3107              	.LFE249:
 3109              		.section	.text.find_env,"ax",%progbits
 3110              		.align	1
 3111              		.p2align 2,,3
 3112              		.syntax unified
 3113              		.thumb
ARM GAS  /tmp/ccSGDQKw.s 			page 106


 3114              		.thumb_func
 3116              	find_env:
 3117              	.LVL283:
 3118              	.LFB252:
 842:easyflash/src/ef_env.c ****     bool find_ok = false;
 3119              		.loc 1 842 1 is_stmt 1 view -0
 3120              		.cfi_startproc
 3121              		@ args = 0, pretend = 0, frame = 32
 3122              		@ frame_needed = 0, uses_anonymous_args = 0
 843:easyflash/src/ef_env.c **** 
 3123              		.loc 1 843 5 view .LVU1013
 846:easyflash/src/ef_env.c **** 
 3124              		.loc 1 846 5 view .LVU1014
 842:easyflash/src/ef_env.c ****     bool find_ok = false;
 3125              		.loc 1 842 1 is_stmt 0 view .LVU1015
 3126 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3127              		.cfi_def_cfa_offset 36
 3128              		.cfi_offset 4, -36
 3129              		.cfi_offset 5, -32
 3130              		.cfi_offset 6, -28
 3131              		.cfi_offset 7, -24
 3132              		.cfi_offset 8, -20
 3133              		.cfi_offset 9, -16
 3134              		.cfi_offset 10, -12
 3135              		.cfi_offset 11, -8
 3136              		.cfi_offset 14, -4
 3137 0004 89B0     		sub	sp, sp, #36
 3138              		.cfi_def_cfa_offset 72
 842:easyflash/src/ef_env.c ****     bool find_ok = false;
 3139              		.loc 1 842 1 view .LVU1016
 3140 0006 8046     		mov	r8, r0
 3141 0008 8946     		mov	r9, r1
 846:easyflash/src/ef_env.c **** 
 3142              		.loc 1 846 22 view .LVU1017
 3143 000a FFF7FEFF 		bl	strlen
 3144              	.LVL284:
 3145              	.LBB182:
 3146              	.LBB183:
 438:easyflash/src/ef_env.c **** 
 3147              		.loc 1 438 36 view .LVU1018
 3148 000e 4146     		mov	r1, r8
 3149 0010 0246     		mov	r2, r0
 3150              	.LBE183:
 3151              	.LBE182:
 846:easyflash/src/ef_env.c **** 
 3152              		.loc 1 846 22 view .LVU1019
 3153 0012 8246     		mov	r10, r0
 3154              	.LVL285:
 848:easyflash/src/ef_env.c ****     {
 3155              		.loc 1 848 5 is_stmt 1 view .LVU1020
 3156              	.LBB188:
 3157              	.LBI182:
 435:easyflash/src/ef_env.c **** {
 3158              		.loc 1 435 13 view .LVU1021
 3159              	.LBB186:
 437:easyflash/src/ef_env.c ****     uint16_t name_crc = (uint16_t)(ef_calc_crc32(0, name, name_len) >> 16);
 3160              		.loc 1 437 5 view .LVU1022
ARM GAS  /tmp/ccSGDQKw.s 			page 107


 438:easyflash/src/ef_env.c **** 
 3161              		.loc 1 438 5 view .LVU1023
 438:easyflash/src/ef_env.c **** 
 3162              		.loc 1 438 36 is_stmt 0 view .LVU1024
 3163 0014 0020     		movs	r0, #0
 3164              	.LVL286:
 438:easyflash/src/ef_env.c **** 
 3165              		.loc 1 438 36 view .LVU1025
 3166 0016 FFF7FEFF 		bl	ef_calc_crc32
 3167              	.LVL287:
 438:easyflash/src/ef_env.c **** 
 3168              		.loc 1 438 36 view .LVU1026
 3169 001a 274E     		ldr	r6, .L307
 438:easyflash/src/ef_env.c **** 
 3170              		.loc 1 438 14 view .LVU1027
 3171 001c 4FEA104B 		lsr	fp, r0, #16
 3172              	.LVL288:
 440:easyflash/src/ef_env.c ****     {
 3173              		.loc 1 440 5 is_stmt 1 view .LVU1028
 440:easyflash/src/ef_env.c ****     {
 3174              		.loc 1 440 17 view .LVU1029
 440:easyflash/src/ef_env.c ****     {
 3175              		.loc 1 440 12 is_stmt 0 view .LVU1030
 3176 0020 0024     		movs	r4, #0
 3177 0022 02E0     		b	.L295
 3178              	.LVL289:
 3179              	.L291:
 440:easyflash/src/ef_env.c ****     {
 3180              		.loc 1 440 46 is_stmt 1 view .LVU1031
 440:easyflash/src/ef_env.c ****     {
 3181              		.loc 1 440 47 is_stmt 0 view .LVU1032
 3182 0024 0134     		adds	r4, r4, #1
 3183              	.LVL290:
 440:easyflash/src/ef_env.c ****     {
 3184              		.loc 1 440 17 is_stmt 1 view .LVU1033
 440:easyflash/src/ef_env.c ****     {
 3185              		.loc 1 440 5 is_stmt 0 view .LVU1034
 3186 0026 102C     		cmp	r4, #16
 3187 0028 2CD0     		beq	.L305
 3188              	.LVL291:
 3189              	.L295:
 442:easyflash/src/ef_env.c ****         {
 3190              		.loc 1 442 9 is_stmt 1 view .LVU1035
 442:easyflash/src/ef_env.c ****         {
 3191              		.loc 1 442 32 is_stmt 0 view .LVU1036
 3192 002a 06EBC405 		add	r5, r6, r4, lsl #3
 3193 002e E700     		lsls	r7, r4, #3
 3194 0030 6868     		ldr	r0, [r5, #4]
 442:easyflash/src/ef_env.c ****         {
 3195              		.loc 1 442 12 view .LVU1037
 3196 0032 431C     		adds	r3, r0, #1
 3197 0034 F6D0     		beq	.L291
 442:easyflash/src/ef_env.c ****         {
 3198              		.loc 1 442 54 view .LVU1038
 3199 0036 36F83420 		ldrh	r2, [r6, r4, lsl #3]
 3200 003a 5A45     		cmp	r2, fp
 3201 003c F2D1     		bne	.L291
ARM GAS  /tmp/ccSGDQKw.s 			page 108


 3202              	.LBB184:
 444:easyflash/src/ef_env.c ****             /* read the ENV name in flash */
 3203              		.loc 1 444 13 is_stmt 1 view .LVU1039
 446:easyflash/src/ef_env.c ****             if (!strncmp(name, saved_name, name_len))
 3204              		.loc 1 446 13 view .LVU1040
 3205 003e 2022     		movs	r2, #32
 3206 0040 6946     		mov	r1, sp
 3207 0042 2830     		adds	r0, r0, #40
 3208 0044 FFF7FEFF 		bl	ef_port_read
 3209              	.LVL292:
 447:easyflash/src/ef_env.c ****             {
 3210              		.loc 1 447 13 view .LVU1041
 447:easyflash/src/ef_env.c ****             {
 3211              		.loc 1 447 18 is_stmt 0 view .LVU1042
 3212 0048 5246     		mov	r2, r10
 3213 004a 6946     		mov	r1, sp
 3214 004c 4046     		mov	r0, r8
 3215 004e FFF7FEFF 		bl	strncmp
 3216              	.LVL293:
 447:easyflash/src/ef_env.c ****             {
 3217              		.loc 1 447 16 view .LVU1043
 3218 0052 0028     		cmp	r0, #0
 3219 0054 E6D1     		bne	.L291
 449:easyflash/src/ef_env.c ****                 if (env_cache_table[i].active >= 0xFFFF - EF_ENV_CACHE_TABLE_SIZE)
 3220              		.loc 1 449 17 is_stmt 1 view .LVU1044
 450:easyflash/src/ef_env.c ****                 {
 3221              		.loc 1 450 39 is_stmt 0 view .LVU1045
 3222 0056 6B88     		ldrh	r3, [r5, #2]
 449:easyflash/src/ef_env.c ****                 if (env_cache_table[i].active >= 0xFFFF - EF_ENV_CACHE_TABLE_SIZE)
 3223              		.loc 1 449 43 view .LVU1046
 3224 0058 6A68     		ldr	r2, [r5, #4]
 449:easyflash/src/ef_env.c ****                 if (env_cache_table[i].active >= 0xFFFF - EF_ENV_CACHE_TABLE_SIZE)
 3225              		.loc 1 449 23 view .LVU1047
 3226 005a C9F83020 		str	r2, [r9, #48]
 450:easyflash/src/ef_env.c ****                 {
 3227              		.loc 1 450 17 is_stmt 1 view .LVU1048
 450:easyflash/src/ef_env.c ****                 {
 3228              		.loc 1 450 20 is_stmt 0 view .LVU1049
 3229 005e 4FF6EE72 		movw	r2, #65518
 3230 0062 9342     		cmp	r3, r2
 456:easyflash/src/ef_env.c ****                 }
 3231              		.loc 1 456 21 is_stmt 1 view .LVU1050
 456:easyflash/src/ef_env.c ****                 }
 3232              		.loc 1 456 47 is_stmt 0 view .LVU1051
 3233 0064 98BF     		it	ls
 3234 0066 1033     		addls	r3, r3, #16
 3235 0068 3E44     		add	r6, r6, r7
 3236 006a 94BF     		ite	ls
 3237 006c 9BB2     		uxthls	r3, r3
 452:easyflash/src/ef_env.c ****                 }
 3238              		.loc 1 452 47 view .LVU1052
 3239 006e 4FF6FF73 		movwhi	r3, #65535
 3240              	.LBE184:
 3241              	.LBE186:
 3242              	.LBE188:
 850:easyflash/src/ef_env.c ****         return true;
 3243              		.loc 1 850 9 view .LVU1053
ARM GAS  /tmp/ccSGDQKw.s 			page 109


 3244 0072 4846     		mov	r0, r9
 3245 0074 7380     		strh	r3, [r6, #2]	@ movhi
 3246              	.LBB189:
 3247              	.LBB187:
 3248              	.LBB185:
 458:easyflash/src/ef_env.c ****             }
 3249              		.loc 1 458 17 is_stmt 1 view .LVU1054
 3250              	.LVL294:
 458:easyflash/src/ef_env.c ****             }
 3251              		.loc 1 458 17 is_stmt 0 view .LVU1055
 3252              	.LBE185:
 3253              	.LBE187:
 3254              	.LBE189:
 850:easyflash/src/ef_env.c ****         return true;
 3255              		.loc 1 850 9 is_stmt 1 view .LVU1056
 3256 0076 FFF7FEFF 		bl	read_env.isra.0
 3257              	.LVL295:
 851:easyflash/src/ef_env.c ****     }
 3258              		.loc 1 851 9 view .LVU1057
 851:easyflash/src/ef_env.c ****     }
 3259              		.loc 1 851 16 is_stmt 0 view .LVU1058
 3260 007a 0124     		movs	r4, #1
 865:easyflash/src/ef_env.c **** 
 3261              		.loc 1 865 1 view .LVU1059
 3262 007c 2046     		mov	r0, r4
 3263 007e 09B0     		add	sp, sp, #36
 3264              		.cfi_remember_state
 3265              		.cfi_def_cfa_offset 36
 3266              		@ sp needed
 3267 0080 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3268              	.LVL296:
 3269              	.L305:
 3270              		.cfi_restore_state
 855:easyflash/src/ef_env.c **** 
 3271              		.loc 1 855 5 is_stmt 1 view .LVU1060
 3272              	.LBB190:
 3273              	.LBI190:
 832:easyflash/src/ef_env.c **** {
 3274              		.loc 1 832 13 view .LVU1061
 3275              	.LBB191:
 834:easyflash/src/ef_env.c **** 
 3276              		.loc 1 834 5 view .LVU1062
 834:easyflash/src/ef_env.c **** 
 3277              		.loc 1 834 10 is_stmt 0 view .LVU1063
 3278 0084 0023     		movs	r3, #0
 3279 0086 8DF80030 		strb	r3, [sp]
 836:easyflash/src/ef_env.c **** 
 3280              		.loc 1 836 5 is_stmt 1 view .LVU1064
 3281 008a 6A46     		mov	r2, sp
 3282 008c 0B4B     		ldr	r3, .L307+4
 3283 008e 4146     		mov	r1, r8
 3284 0090 4846     		mov	r0, r9
 3285 0092 FFF7FEFF 		bl	env_iterator
 3286              	.LVL297:
 838:easyflash/src/ef_env.c **** }
 3287              		.loc 1 838 5 view .LVU1065
 838:easyflash/src/ef_env.c **** }
ARM GAS  /tmp/ccSGDQKw.s 			page 110


 3288              		.loc 1 838 12 is_stmt 0 view .LVU1066
 3289 0096 9DF80040 		ldrb	r4, [sp]	@ zero_extendqisi2
 3290              	.LVL298:
 838:easyflash/src/ef_env.c **** }
 3291              		.loc 1 838 12 view .LVU1067
 3292              	.LBE191:
 3293              	.LBE190:
 858:easyflash/src/ef_env.c ****     {
 3294              		.loc 1 858 5 is_stmt 1 view .LVU1068
 858:easyflash/src/ef_env.c ****     {
 3295              		.loc 1 858 8 is_stmt 0 view .LVU1069
 3296 009a 1CB9     		cbnz	r4, .L306
 865:easyflash/src/ef_env.c **** 
 3297              		.loc 1 865 1 view .LVU1070
 3298 009c 2046     		mov	r0, r4
 3299 009e 09B0     		add	sp, sp, #36
 3300              		.cfi_remember_state
 3301              		.cfi_def_cfa_offset 36
 3302              		@ sp needed
 3303 00a0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3304              	.LVL299:
 3305              	.L306:
 3306              		.cfi_restore_state
 860:easyflash/src/ef_env.c ****     }
 3307              		.loc 1 860 9 is_stmt 1 view .LVU1071
 3308 00a4 4046     		mov	r0, r8
 3309 00a6 D9F83020 		ldr	r2, [r9, #48]
 3310 00aa 5146     		mov	r1, r10
 3311 00ac FFF7FEFF 		bl	update_env_cache
 3312              	.LVL300:
 865:easyflash/src/ef_env.c **** 
 3313              		.loc 1 865 1 is_stmt 0 view .LVU1072
 3314 00b0 2046     		mov	r0, r4
 3315 00b2 09B0     		add	sp, sp, #36
 3316              		.cfi_def_cfa_offset 36
 3317              		@ sp needed
 3318 00b4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3319              	.LVL301:
 3320              	.L308:
 865:easyflash/src/ef_env.c **** 
 3321              		.loc 1 865 1 view .LVU1073
 3322              		.align	2
 3323              	.L307:
 3324 00b8 00000000 		.word	.LANCHOR1
 3325 00bc 00000000 		.word	find_env_cb
 3326              		.cfi_endproc
 3327              	.LFE252:
 3329              		.section	.rodata.del_env.str1.4,"aMS",%progbits,1
 3330              		.align	2
 3331              	.LC13:
 3332 0000 4E6F7420 		.ascii	"Not found '%s' in ENV.\000"
 3332      666F756E 
 3332      64202725 
 3332      73272069 
 3332      6E20454E 
 3333              		.section	.text.del_env,"ax",%progbits
 3334              		.align	1
ARM GAS  /tmp/ccSGDQKw.s 			page 111


 3335              		.p2align 2,,3
 3336              		.syntax unified
 3337              		.thumb
 3338              		.thumb_func
 3340              	del_env:
 3341              	.LVL302:
 3342              	.LFB266:
1218:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 3343              		.loc 1 1218 1 is_stmt 1 view -0
 3344              		.cfi_startproc
 3345              		@ args = 0, pretend = 0, frame = 80
 3346              		@ frame_needed = 0, uses_anonymous_args = 0
1219:easyflash/src/ef_env.c ****     uint32_t dirty_status_addr;
 3347              		.loc 1 1219 5 view .LVU1075
1220:easyflash/src/ef_env.c ****     static bool last_is_complete_del = false;
 3348              		.loc 1 1220 5 view .LVU1076
1221:easyflash/src/ef_env.c **** 
 3349              		.loc 1 1221 5 view .LVU1077
1224:easyflash/src/ef_env.c **** #else
 3350              		.loc 1 1224 5 view .LVU1078
1230:easyflash/src/ef_env.c ****     {
 3351              		.loc 1 1230 5 view .LVU1079
1218:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 3352              		.loc 1 1218 1 is_stmt 0 view .LVU1080
 3353 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3354              		.cfi_def_cfa_offset 24
 3355              		.cfi_offset 4, -24
 3356              		.cfi_offset 5, -20
 3357              		.cfi_offset 6, -16
 3358              		.cfi_offset 7, -12
 3359              		.cfi_offset 8, -8
 3360              		.cfi_offset 14, -4
 3361 0004 0646     		mov	r6, r0
 3362 0006 94B0     		sub	sp, sp, #80
 3363              		.cfi_def_cfa_offset 104
1218:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 3364              		.loc 1 1218 1 view .LVU1081
 3365 0008 1546     		mov	r5, r2
1230:easyflash/src/ef_env.c ****     {
 3366              		.loc 1 1230 8 view .LVU1082
 3367 000a 0029     		cmp	r1, #0
 3368 000c 4AD0     		beq	.L328
 3369 000e 0C46     		mov	r4, r1
 3370              	.LVL303:
 3371              	.L310:
1245:easyflash/src/ef_env.c ****     {
 3372              		.loc 1 1245 5 is_stmt 1 view .LVU1083
1247:easyflash/src/ef_env.c ****         last_is_complete_del = true;
 3373              		.loc 1 1247 18 is_stmt 0 view .LVU1084
 3374 0010 01AF     		add	r7, sp, #4
1245:easyflash/src/ef_env.c ****     {
 3375              		.loc 1 1245 8 view .LVU1085
 3376 0012 A5B1     		cbz	r5, .L329
1252:easyflash/src/ef_env.c **** 
 3377              		.loc 1 1252 9 is_stmt 1 view .LVU1086
1252:easyflash/src/ef_env.c **** 
 3378              		.loc 1 1252 18 is_stmt 0 view .LVU1087
ARM GAS  /tmp/ccSGDQKw.s 			page 112


 3379 0014 0423     		movs	r3, #4
1254:easyflash/src/ef_env.c ****         {
 3380              		.loc 1 1254 13 view .LVU1088
 3381 0016 DFF8AC80 		ldr	r8, .L332
1252:easyflash/src/ef_env.c **** 
 3382              		.loc 1 1252 18 view .LVU1089
 3383 001a 206B     		ldr	r0, [r4, #48]
 3384 001c 0622     		movs	r2, #6
 3385 001e 3946     		mov	r1, r7
 3386 0020 FFF7FEFF 		bl	write_status
 3387              	.LVL304:
1254:easyflash/src/ef_env.c ****         {
 3388              		.loc 1 1254 12 view .LVU1090
 3389 0024 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
1252:easyflash/src/ef_env.c **** 
 3390              		.loc 1 1252 18 view .LVU1091
 3391 0028 0546     		mov	r5, r0
 3392              	.LVL305:
1254:easyflash/src/ef_env.c ****         {
 3393              		.loc 1 1254 9 is_stmt 1 view .LVU1092
1254:easyflash/src/ef_env.c ****         {
 3394              		.loc 1 1254 12 is_stmt 0 view .LVU1093
 3395 002a 03B9     		cbnz	r3, .L315
1254:easyflash/src/ef_env.c ****         {
 3396              		.loc 1 1254 35 discriminator 1 view .LVU1094
 3397 002c 80B3     		cbz	r0, .L330
 3398              	.LVL306:
 3399              	.L315:
1262:easyflash/src/ef_env.c ****     }
 3400              		.loc 1 1262 9 is_stmt 1 view .LVU1095
1265:easyflash/src/ef_env.c ****     /* read and change the sector dirty status */
 3401              		.loc 1 1265 5 view .LVU1096
1267:easyflash/src/ef_env.c ****             && read_status(dirty_status_addr, status_table, SECTOR_DIRTY_STATUS_NUM) == SECTOR_DIRT
 3402              		.loc 1 1267 5 view .LVU1097
1262:easyflash/src/ef_env.c ****     }
 3403              		.loc 1 1262 30 is_stmt 0 view .LVU1098
 3404 002e 0023     		movs	r3, #0
 3405 0030 88F80030 		strb	r3, [r8]
1267:easyflash/src/ef_env.c ****             && read_status(dirty_status_addr, status_table, SECTOR_DIRTY_STATUS_NUM) == SECTOR_DIRT
 3406              		.loc 1 1267 8 view .LVU1099
 3407 0034 7DB1     		cbz	r5, .L331
 3408              	.LVL307:
 3409              	.L319:
1274:easyflash/src/ef_env.c **** 
 3410              		.loc 1 1274 1 view .LVU1100
 3411 0036 2846     		mov	r0, r5
 3412 0038 14B0     		add	sp, sp, #80
 3413              		.cfi_remember_state
 3414              		.cfi_def_cfa_offset 24
 3415              		@ sp needed
 3416 003a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3417              	.LVL308:
 3418              	.L329:
 3419              		.cfi_restore_state
1247:easyflash/src/ef_env.c ****         last_is_complete_del = true;
 3420              		.loc 1 1247 9 is_stmt 1 view .LVU1101
1247:easyflash/src/ef_env.c ****         last_is_complete_del = true;
ARM GAS  /tmp/ccSGDQKw.s 			page 113


 3421              		.loc 1 1247 18 is_stmt 0 view .LVU1102
 3422 003e 0323     		movs	r3, #3
 3423 0040 0622     		movs	r2, #6
 3424 0042 206B     		ldr	r0, [r4, #48]
 3425 0044 3946     		mov	r1, r7
 3426 0046 FFF7FEFF 		bl	write_status
 3427              	.LVL309:
1248:easyflash/src/ef_env.c ****     }
 3428              		.loc 1 1248 30 view .LVU1103
 3429 004a 1E4B     		ldr	r3, .L332
 3430 004c 0122     		movs	r2, #1
1247:easyflash/src/ef_env.c ****         last_is_complete_del = true;
 3431              		.loc 1 1247 18 view .LVU1104
 3432 004e 0546     		mov	r5, r0
 3433              	.LVL310:
1248:easyflash/src/ef_env.c ****     }
 3434              		.loc 1 1248 9 is_stmt 1 view .LVU1105
1248:easyflash/src/ef_env.c ****     }
 3435              		.loc 1 1248 30 is_stmt 0 view .LVU1106
 3436 0050 1A70     		strb	r2, [r3]
1265:easyflash/src/ef_env.c ****     /* read and change the sector dirty status */
 3437              		.loc 1 1265 5 is_stmt 1 view .LVU1107
 3438              	.LVL311:
1267:easyflash/src/ef_env.c ****             && read_status(dirty_status_addr, status_table, SECTOR_DIRTY_STATUS_NUM) == SECTOR_DIRT
 3439              		.loc 1 1267 5 view .LVU1108
1267:easyflash/src/ef_env.c ****             && read_status(dirty_status_addr, status_table, SECTOR_DIRTY_STATUS_NUM) == SECTOR_DIRT
 3440              		.loc 1 1267 8 is_stmt 0 view .LVU1109
 3441 0052 002D     		cmp	r5, #0
 3442 0054 EFD1     		bne	.L319
 3443              	.LVL312:
 3444              	.L331:
1265:easyflash/src/ef_env.c ****     /* read and change the sector dirty status */
 3445              		.loc 1 1265 25 view .LVU1110
 3446 0056 236B     		ldr	r3, [r4, #48]
 3447 0058 5B0C     		lsrs	r3, r3, #17
 3448 005a 5B04     		lsls	r3, r3, #17
 3449              	.LBB197:
 3450              	.LBB198:
 311:easyflash/src/ef_env.c **** 
 3451              		.loc 1 311 5 view .LVU1111
 3452 005c 0C22     		movs	r2, #12
 3453              	.LBE198:
 3454              	.LBE197:
1265:easyflash/src/ef_env.c ****     /* read and change the sector dirty status */
 3455              		.loc 1 1265 23 view .LVU1112
 3456 005e 9C18     		adds	r4, r3, r2
 3457              	.LVL313:
 3458              	.LBB202:
 3459              	.LBI197:
 307:easyflash/src/ef_env.c **** {
 3460              		.loc 1 307 15 is_stmt 1 view .LVU1113
 3461              	.LBB201:
 309:easyflash/src/ef_env.c **** 
 3462              		.loc 1 309 5 view .LVU1114
 309:easyflash/src/ef_env.c **** 
 3463              		.loc 1 309 28 view .LVU1115
 311:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 114


 3464              		.loc 1 311 5 view .LVU1116
 3465 0060 3946     		mov	r1, r7
 3466 0062 2046     		mov	r0, r4
 3467 0064 FFF7FEFF 		bl	ef_port_read
 3468              	.LVL314:
 313:easyflash/src/ef_env.c **** }
 3469              		.loc 1 313 5 view .LVU1117
 3470              	.LBB199:
 3471              	.LBI199:
 256:easyflash/src/ef_env.c **** {
 3472              		.loc 1 256 15 view .LVU1118
 3473              	.LBB200:
 258:easyflash/src/ef_env.c **** 
 3474              		.loc 1 258 5 view .LVU1119
 260:easyflash/src/ef_env.c ****     {
 3475              		.loc 1 260 5 view .LVU1120
 260:easyflash/src/ef_env.c ****     {
 3476              		.loc 1 260 11 view .LVU1121
 269:easyflash/src/ef_env.c ****         {
 3477              		.loc 1 269 9 view .LVU1122
 269:easyflash/src/ef_env.c ****         {
 3478              		.loc 1 269 25 is_stmt 0 view .LVU1123
 3479 0068 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 269:easyflash/src/ef_env.c ****         {
 3480              		.loc 1 269 12 view .LVU1124
 3481 006c 002B     		cmp	r3, #0
 3482 006e E2D0     		beq	.L319
 274:easyflash/src/ef_env.c ****     }
 3483              		.loc 1 274 9 is_stmt 1 view .LVU1125
 3484              	.LVL315:
 260:easyflash/src/ef_env.c ****     {
 3485              		.loc 1 260 11 view .LVU1126
 269:easyflash/src/ef_env.c ****         {
 3486              		.loc 1 269 9 view .LVU1127
 269:easyflash/src/ef_env.c ****         {
 3487              		.loc 1 269 25 is_stmt 0 view .LVU1128
 3488 0070 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 269:easyflash/src/ef_env.c ****         {
 3489              		.loc 1 269 12 view .LVU1129
 3490 0074 002B     		cmp	r3, #0
 3491 0076 DED0     		beq	.L319
 274:easyflash/src/ef_env.c ****     }
 3492              		.loc 1 274 9 is_stmt 1 view .LVU1130
 3493              	.LVL316:
 260:easyflash/src/ef_env.c ****     {
 3494              		.loc 1 260 11 view .LVU1131
 269:easyflash/src/ef_env.c ****         {
 3495              		.loc 1 269 9 view .LVU1132
 269:easyflash/src/ef_env.c ****         {
 3496              		.loc 1 269 12 is_stmt 0 view .LVU1133
 3497 0078 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 3498 007c 002B     		cmp	r3, #0
 3499 007e DAD1     		bne	.L319
 277:easyflash/src/ef_env.c **** }
 3500              		.loc 1 277 5 is_stmt 1 view .LVU1134
 3501              	.LVL317:
 277:easyflash/src/ef_env.c **** }
ARM GAS  /tmp/ccSGDQKw.s 			page 115


 3502              		.loc 1 277 5 is_stmt 0 view .LVU1135
 3503              	.LBE200:
 3504              	.LBE199:
 3505              	.LBE201:
 3506              	.LBE202:
1270:easyflash/src/ef_env.c ****     }
 3507              		.loc 1 1270 9 is_stmt 1 view .LVU1136
1270:easyflash/src/ef_env.c ****     }
 3508              		.loc 1 1270 18 is_stmt 0 view .LVU1137
 3509 0080 0223     		movs	r3, #2
 3510 0082 0422     		movs	r2, #4
 3511 0084 3946     		mov	r1, r7
 3512 0086 2046     		mov	r0, r4
 3513 0088 FFF7FEFF 		bl	write_status
 3514              	.LVL318:
 3515 008c 0546     		mov	r5, r0
 3516              	.LVL319:
1270:easyflash/src/ef_env.c ****     }
 3517              		.loc 1 1270 18 view .LVU1138
 3518 008e D2E7     		b	.L319
 3519              	.LVL320:
 3520              	.L330:
1258:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 3521              		.loc 1 1258 13 is_stmt 1 view .LVU1139
 3522 0090 3046     		mov	r0, r6
 3523              	.LVL321:
1258:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 3524              		.loc 1 1258 13 is_stmt 0 view .LVU1140
 3525 0092 FFF7FEFF 		bl	strlen
 3526              	.LVL322:
 3527 0096 4FF0FF32 		mov	r2, #-1
 3528 009a 0146     		mov	r1, r0
 3529 009c 3046     		mov	r0, r6
 3530 009e FFF7FEFF 		bl	update_env_cache
 3531              	.LVL323:
 3532 00a2 C4E7     		b	.L315
 3533              	.LVL324:
 3534              	.L328:
 3535              	.LBB203:
1232:easyflash/src/ef_env.c ****         /* find ENV */
 3536              		.loc 1 1232 9 is_stmt 1 view .LVU1141
1234:easyflash/src/ef_env.c ****         {
 3537              		.loc 1 1234 9 view .LVU1142
1234:easyflash/src/ef_env.c ****         {
 3538              		.loc 1 1234 13 is_stmt 0 view .LVU1143
 3539 00a4 06A9     		add	r1, sp, #24
 3540              	.LVL325:
1234:easyflash/src/ef_env.c ****         {
 3541              		.loc 1 1234 13 view .LVU1144
 3542 00a6 FFF7FEFF 		bl	find_env
 3543              	.LVL326:
1234:easyflash/src/ef_env.c ****         {
 3544              		.loc 1 1234 12 view .LVU1145
 3545 00aa 08B1     		cbz	r0, .L311
1236:easyflash/src/ef_env.c ****         }
 3546              		.loc 1 1236 13 is_stmt 1 view .LVU1146
 3547              	.LVL327:
ARM GAS  /tmp/ccSGDQKw.s 			page 116


1236:easyflash/src/ef_env.c ****         }
 3548              		.loc 1 1236 21 is_stmt 0 view .LVU1147
 3549 00ac 06AC     		add	r4, sp, #24
 3550              	.LVL328:
1236:easyflash/src/ef_env.c ****         }
 3551              		.loc 1 1236 21 view .LVU1148
 3552 00ae AFE7     		b	.L310
 3553              	.LVL329:
 3554              	.L311:
1240:easyflash/src/ef_env.c ****             return EF_ENV_NAME_ERR;
 3555              		.loc 1 1240 13 is_stmt 1 view .LVU1149
 3556 00b0 054A     		ldr	r2, .L332+4
 3557 00b2 0648     		ldr	r0, .L332+8
 3558 00b4 3346     		mov	r3, r6
 3559 00b6 4FF49B61 		mov	r1, #1240
 3560 00ba FFF7FEFF 		bl	ef_log_debug
 3561              	.LVL330:
1241:easyflash/src/ef_env.c ****         }
 3562              		.loc 1 1241 13 view .LVU1150
1241:easyflash/src/ef_env.c ****         }
 3563              		.loc 1 1241 20 is_stmt 0 view .LVU1151
 3564 00be 0425     		movs	r5, #4
 3565 00c0 B9E7     		b	.L319
 3566              	.L333:
 3567 00c2 00BF     		.align	2
 3568              	.L332:
 3569 00c4 00000000 		.word	.LANCHOR8
 3570 00c8 00000000 		.word	.LC13
 3571 00cc 3C000000 		.word	.LC2
 3572              	.LBE203:
 3573              		.cfi_endproc
 3574              	.LFE266:
 3576              		.section	.rodata.alloc_env.str1.4,"aMS",%progbits,1
 3577              		.align	2
 3578              	.LC14:
 3579 0000 54726967 		.ascii	"Trigger a GC check after alloc ENV failed.\000"
 3579      67657220 
 3579      61204743 
 3579      20636865 
 3579      636B2061 
 3580              		.section	.text.alloc_env,"ax",%progbits
 3581              		.align	1
 3582              		.p2align 2,,3
 3583              		.syntax unified
 3584              		.thumb
 3585              		.thumb_func
 3587              	alloc_env:
 3588              	.LVL331:
 3589              	.LFB265:
1189:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
 3590              		.loc 1 1189 1 is_stmt 1 view -0
 3591              		.cfi_startproc
 3592              		@ args = 0, pretend = 0, frame = 0
 3593              		@ frame_needed = 0, uses_anonymous_args = 0
1190:easyflash/src/ef_env.c ****     size_t empty_sector = 0, using_sector = 0;
 3594              		.loc 1 1190 5 view .LVU1153
1191:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 117


 3595              		.loc 1 1191 5 view .LVU1154
1194:easyflash/src/ef_env.c ****     if (using_sector > 0)
 3596              		.loc 1 1194 5 view .LVU1155
1189:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
 3597              		.loc 1 1189 1 is_stmt 0 view .LVU1156
 3598 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3599              		.cfi_def_cfa_offset 28
 3600              		.cfi_offset 4, -28
 3601              		.cfi_offset 5, -24
 3602              		.cfi_offset 6, -20
 3603              		.cfi_offset 7, -16
 3604              		.cfi_offset 8, -12
 3605              		.cfi_offset 9, -8
 3606              		.cfi_offset 14, -4
 3607              	.LBB230:
 3608              	.LBB231:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 3609              		.loc 1 1134 18 view .LVU1157
 3610 0004 4FF0FF33 		mov	r3, #-1
 3611              	.LBE231:
 3612              	.LBE230:
1191:easyflash/src/ef_env.c **** 
 3613              		.loc 1 1191 30 view .LVU1158
 3614 0008 0026     		movs	r6, #0
1189:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
 3615              		.loc 1 1189 1 view .LVU1159
 3616 000a 0D46     		mov	r5, r1
 3617              	.LBB258:
 3618              	.LBB254:
 3619              	.LBB232:
 3620              	.LBB233:
 749:easyflash/src/ef_env.c ****     {
 3621              		.loc 1 749 8 view .LVU1160
 3622 000c 591C     		adds	r1, r3, #1
 3623              	.LVL332:
 749:easyflash/src/ef_env.c ****     {
 3624              		.loc 1 749 8 view .LVU1161
 3625 000e DFF89881 		ldr	r8, .L403+24
 3626              	.LBE233:
 3627              	.LBE232:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 3628              		.loc 1 1134 18 view .LVU1162
 3629 0012 4360     		str	r3, [r0, #4]
 3630              	.LBE254:
 3631              	.LBE258:
1189:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
 3632              		.loc 1 1189 1 view .LVU1163
 3633 0014 83B0     		sub	sp, sp, #12
 3634              		.cfi_def_cfa_offset 40
1189:easyflash/src/ef_env.c ****     uint32_t empty_env = FAILED_ADDR;
 3635              		.loc 1 1189 1 view .LVU1164
 3636 0016 0446     		mov	r4, r0
 3637              	.LVL333:
 3638              	.LBB259:
 3639              	.LBI230:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 3640              		.loc 1 1128 13 is_stmt 1 view .LVU1165
ARM GAS  /tmp/ccSGDQKw.s 			page 118


 3641              	.LBB255:
1131:easyflash/src/ef_env.c **** 
 3642              		.loc 1 1131 5 view .LVU1166
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 3643              		.loc 1 1134 5 view .LVU1167
1135:easyflash/src/ef_env.c ****     {
 3644              		.loc 1 1135 5 view .LVU1168
1135:easyflash/src/ef_env.c ****     {
 3645              		.loc 1 1135 5 is_stmt 0 view .LVU1169
 3646              	.LBE255:
 3647              	.LBE259:
1191:easyflash/src/ef_env.c **** 
 3648              		.loc 1 1191 12 view .LVU1170
 3649 0018 3746     		mov	r7, r6
 3650              	.LVL334:
 3651              	.LBB260:
 3652              	.LBB256:
1135:easyflash/src/ef_env.c ****     {
 3653              		.loc 1 1135 11 is_stmt 1 view .LVU1171
 3654              	.LBB238:
 3655              	.LBI232:
 745:easyflash/src/ef_env.c **** {
 3656              		.loc 1 745 17 view .LVU1172
 3657              	.LBB234:
 747:easyflash/src/ef_env.c **** 
 3658              		.loc 1 747 5 view .LVU1173
 749:easyflash/src/ef_env.c ****     {
 3659              		.loc 1 749 5 view .LVU1174
 749:easyflash/src/ef_env.c ****     {
 3660              		.loc 1 749 8 is_stmt 0 view .LVU1175
 3661 001a 1FD0     		beq	.L397
 3662              	.LVL335:
 3663              	.L340:
 756:easyflash/src/ef_env.c ****         {
 3664              		.loc 1 756 9 is_stmt 1 view .LVU1176
 756:easyflash/src/ef_env.c ****         {
 3665              		.loc 1 756 20 is_stmt 0 view .LVU1177
 3666 001c E068     		ldr	r0, [r4, #12]
 756:easyflash/src/ef_env.c ****         {
 3667              		.loc 1 756 12 view .LVU1178
 3668 001e 421C     		adds	r2, r0, #1
 758:easyflash/src/ef_env.c ****         }
 3669              		.loc 1 758 13 is_stmt 1 view .LVU1179
 765:easyflash/src/ef_env.c ****         {
 3670              		.loc 1 765 40 is_stmt 0 view .LVU1180
 3671 0020 D8F80020 		ldr	r2, [r8]
 758:easyflash/src/ef_env.c ****         }
 3672              		.loc 1 758 23 view .LVU1181
 3673 0024 0CBF     		ite	eq
 3674 0026 03F50030 		addeq	r0, r3, #131072
 3675              	.LVL336:
 762:easyflash/src/ef_env.c ****         }
 3676              		.loc 1 762 13 is_stmt 1 view .LVU1182
 762:easyflash/src/ef_env.c ****         }
 3677              		.loc 1 762 23 is_stmt 0 view .LVU1183
 3678 002a 03EB4040 		addne	r0, r3, r0, lsl #17
 3679              	.LVL337:
ARM GAS  /tmp/ccSGDQKw.s 			page 119


 765:easyflash/src/ef_env.c ****         {
 3680              		.loc 1 765 9 is_stmt 1 view .LVU1184
 765:easyflash/src/ef_env.c ****         {
 3681              		.loc 1 765 40 is_stmt 0 view .LVU1185
 3682 002e 02F58022 		add	r2, r2, #262144
 765:easyflash/src/ef_env.c ****         {
 3683              		.loc 1 765 12 view .LVU1186
 3684 0032 8242     		cmp	r2, r0
 3685 0034 1FD9     		bls	.L344
 3686              	.LVL338:
 3687              	.L341:
 765:easyflash/src/ef_env.c ****         {
 3688              		.loc 1 765 12 view .LVU1187
 3689              	.LBE234:
 3690              	.LBE238:
1135:easyflash/src/ef_env.c ****     {
 3691              		.loc 1 1135 11 view .LVU1188
 3692 0036 431C     		adds	r3, r0, #1
 3693 0038 1DD0     		beq	.L344
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 3694              		.loc 1 1137 9 is_stmt 1 view .LVU1189
 3695              	.LVL339:
 3696              	.LBB239:
 3697              	.LBI239:
 658:easyflash/src/ef_env.c **** {
 3698              		.loc 1 658 18 view .LVU1190
 3699              	.LBB240:
 660:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 3700              		.loc 1 660 5 view .LVU1191
 661:easyflash/src/ef_env.c **** 
 3701              		.loc 1 661 5 view .LVU1192
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3702              		.loc 1 663 5 view .LVU1193
 3703 003a C0F31002 		ubfx	r2, r0, #0, #17
 3704 003e 82B9     		cbnz	r2, .L398
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3705              		.loc 1 663 39 view .LVU1194
 664:easyflash/src/ef_env.c **** 
 3706              		.loc 1 664 5 view .LVU1195
 3707 0040 2146     		mov	r1, r4
 3708 0042 FFF7FEFF 		bl	read_sector_meta_data.part.0
 3709              	.LVL340:
 664:easyflash/src/ef_env.c **** 
 3710              		.loc 1 664 5 is_stmt 0 view .LVU1196
 3711              	.LBE240:
 3712              	.LBE239:
1138:easyflash/src/ef_env.c ****         {
 3713              		.loc 1 1138 9 is_stmt 1 view .LVU1197
1140:easyflash/src/ef_env.c ****             {
 3714              		.loc 1 1140 13 view .LVU1198
1145:easyflash/src/ef_env.c ****             {
 3715              		.loc 1 1145 13 view .LVU1199
 3716              	.LBB242:
 3717              	.LBI242:
1153:easyflash/src/ef_env.c **** {
 3718              		.loc 1 1153 13 view .LVU1200
 3719              	.LBB243:
ARM GAS  /tmp/ccSGDQKw.s 			page 120


1155:easyflash/src/ef_env.c **** 
 3720              		.loc 1 1155 5 view .LVU1201
1157:easyflash/src/ef_env.c ****     {
 3721              		.loc 1 1157 5 view .LVU1202
1157:easyflash/src/ef_env.c ****     {
 3722              		.loc 1 1157 8 is_stmt 0 view .LVU1203
 3723 0046 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 3724 0048 2BB1     		cbz	r3, .L338
1157:easyflash/src/ef_env.c ****     {
 3725              		.loc 1 1157 43 view .LVU1204
 3726 004a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
1157:easyflash/src/ef_env.c ****     {
 3727              		.loc 1 1157 26 view .LVU1205
 3728 004c 012B     		cmp	r3, #1
 3729 004e 1AD0     		beq	.L399
1161:easyflash/src/ef_env.c ****     {
 3730              		.loc 1 1161 10 is_stmt 1 view .LVU1206
 3731              	.LVL341:
 3732              	.LBB244:
 3733              	.LBI244:
1153:easyflash/src/ef_env.c **** {
 3734              		.loc 1 1153 13 view .LVU1207
 3735              	.LBB245:
1161:easyflash/src/ef_env.c ****     {
 3736              		.loc 1 1161 31 is_stmt 0 view .LVU1208
 3737 0050 022B     		cmp	r3, #2
1163:easyflash/src/ef_env.c ****     }
 3738              		.loc 1 1163 9 is_stmt 1 view .LVU1209
1163:easyflash/src/ef_env.c ****     }
 3739              		.loc 1 1163 24 is_stmt 0 view .LVU1210
 3740 0052 08BF     		it	eq
 3741 0054 0136     		addeq	r6, r6, #1
 3742              	.LVL342:
 3743              	.L338:
1163:easyflash/src/ef_env.c ****     }
 3744              		.loc 1 1163 24 view .LVU1211
 3745              	.LBE245:
 3746              	.LBE244:
 3747              	.LBE243:
 3748              	.LBE242:
 3749              	.LBB248:
 3750              	.LBB235:
 749:easyflash/src/ef_env.c ****     {
 3751              		.loc 1 749 16 view .LVU1212
 3752 0056 6368     		ldr	r3, [r4, #4]
 3753              	.L400:
 3754              	.LVL343:
 749:easyflash/src/ef_env.c ****     {
 3755              		.loc 1 749 16 view .LVU1213
 3756              	.LBE235:
 3757              	.LBE248:
1135:easyflash/src/ef_env.c ****     {
 3758              		.loc 1 1135 11 is_stmt 1 view .LVU1214
 3759              	.LBB249:
 745:easyflash/src/ef_env.c **** {
 3760              		.loc 1 745 17 view .LVU1215
 3761              	.LBB236:
ARM GAS  /tmp/ccSGDQKw.s 			page 121


 747:easyflash/src/ef_env.c **** 
 3762              		.loc 1 747 5 view .LVU1216
 749:easyflash/src/ef_env.c ****     {
 3763              		.loc 1 749 5 view .LVU1217
 749:easyflash/src/ef_env.c ****     {
 3764              		.loc 1 749 8 is_stmt 0 view .LVU1218
 3765 0058 591C     		adds	r1, r3, #1
 3766 005a DFD1     		bne	.L340
 3767              	.LVL344:
 3768              	.L397:
 751:easyflash/src/ef_env.c ****     }
 3769              		.loc 1 751 9 is_stmt 1 view .LVU1219
 751:easyflash/src/ef_env.c ****     }
 3770              		.loc 1 751 16 is_stmt 0 view .LVU1220
 3771 005c D8F80000 		ldr	r0, [r8]
 3772 0060 E9E7     		b	.L341
 3773              	.LVL345:
 3774              	.L398:
 751:easyflash/src/ef_env.c ****     }
 3775              		.loc 1 751 16 view .LVU1221
 3776              	.LBE236:
 3777              	.LBE249:
 3778              	.LBB250:
 3779              	.LBB241:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3780              		.loc 1 663 5 is_stmt 1 view .LVU1222
 3781 0062 4B49     		ldr	r1, .L403
 3782 0064 0091     		str	r1, [sp]
 3783 0066 4B4B     		ldr	r3, .L403+4
 3784 0068 4B4A     		ldr	r2, .L403+8
 3785 006a 4C48     		ldr	r0, .L403+12
 3786              	.LVL346:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3787              		.loc 1 663 5 is_stmt 0 view .LVU1223
 3788 006c 40F29721 		movw	r1, #663
 3789 0070 FFF7FEFF 		bl	ef_log_debug
 3790              	.LVL347:
 3791              	.L337:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3792              		.loc 1 663 5 is_stmt 1 view .LVU1224
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3793              		.loc 1 663 5 view .LVU1225
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3794              		.loc 1 663 5 view .LVU1226
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3795              		.loc 1 663 5 view .LVU1227
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3796              		.loc 1 663 5 view .LVU1228
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3797              		.loc 1 663 5 view .LVU1229
 3798 0074 FEE7     		b	.L337
 3799              	.LVL348:
 3800              	.L344:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 3801              		.loc 1 663 5 is_stmt 0 view .LVU1230
 3802              	.LBE241:
 3803              	.LBE250:
ARM GAS  /tmp/ccSGDQKw.s 			page 122


 3804              	.LBE256:
 3805              	.LBE260:
1195:easyflash/src/ef_env.c ****     {
 3806              		.loc 1 1195 5 is_stmt 1 view .LVU1231
1195:easyflash/src/ef_env.c ****     {
 3807              		.loc 1 1195 8 is_stmt 0 view .LVU1232
 3808 0076 4EB9     		cbnz	r6, .L346
 3809              	.LVL349:
 3810              	.L395:
1200:easyflash/src/ef_env.c ****     {
 3811              		.loc 1 1200 5 is_stmt 1 view .LVU1233
1200:easyflash/src/ef_env.c ****     {
 3812              		.loc 1 1200 8 is_stmt 0 view .LVU1234
 3813 0078 002F     		cmp	r7, #0
 3814 007a 41D1     		bne	.L347
 3815              	.LVL350:
 3816              	.L396:
1210:easyflash/src/ef_env.c ****         }
 3817              		.loc 1 1210 24 view .LVU1235
 3818 007c 4FF0FF30 		mov	r0, #-1
 3819              	.LVL351:
1214:easyflash/src/ef_env.c **** }
 3820              		.loc 1 1214 5 is_stmt 1 view .LVU1236
 3821              	.L334:
1215:easyflash/src/ef_env.c **** 
 3822              		.loc 1 1215 1 is_stmt 0 view .LVU1237
 3823 0080 03B0     		add	sp, sp, #12
 3824              		.cfi_remember_state
 3825              		.cfi_def_cfa_offset 28
 3826              		@ sp needed
 3827 0082 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3828              	.LVL352:
 3829              	.L399:
 3830              		.cfi_restore_state
 3831              	.LBB261:
 3832              	.LBB257:
 3833              	.LBB251:
 3834              	.LBB246:
1159:easyflash/src/ef_env.c ****     }
 3835              		.loc 1 1159 9 is_stmt 1 view .LVU1238
 3836              	.LBE246:
 3837              	.LBE251:
 3838              	.LBB252:
 3839              	.LBB237:
 749:easyflash/src/ef_env.c ****     {
 3840              		.loc 1 749 16 is_stmt 0 view .LVU1239
 3841 0086 6368     		ldr	r3, [r4, #4]
 3842              	.LBE237:
 3843              	.LBE252:
 3844              	.LBB253:
 3845              	.LBB247:
1159:easyflash/src/ef_env.c ****     }
 3846              		.loc 1 1159 24 view .LVU1240
 3847 0088 0137     		adds	r7, r7, #1
 3848              	.LVL353:
1159:easyflash/src/ef_env.c ****     }
 3849              		.loc 1 1159 24 view .LVU1241
ARM GAS  /tmp/ccSGDQKw.s 			page 123


 3850 008a E5E7     		b	.L400
 3851              	.LVL354:
 3852              	.L346:
1159:easyflash/src/ef_env.c ****     }
 3853              		.loc 1 1159 24 view .LVU1242
 3854              	.LBE247:
 3855              	.LBE253:
 3856              	.LBE257:
 3857              	.LBE261:
1198:easyflash/src/ef_env.c ****     }
 3858              		.loc 1 1198 9 is_stmt 1 view .LVU1243
 3859              	.LBB262:
 3860              	.LBI262:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 3861              		.loc 1 1128 13 view .LVU1244
 3862              	.LBB263:
1131:easyflash/src/ef_env.c **** 
 3863              		.loc 1 1131 5 view .LVU1245
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 3864              		.loc 1 1134 5 view .LVU1246
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 3865              		.loc 1 1134 18 is_stmt 0 view .LVU1247
 3866 008c 4FF0FF36 		mov	r6, #-1
 3867              	.LVL355:
 3868              	.LBB264:
 3869              	.LBB265:
 3870              	.LBB266:
 3871              	.LBB267:
1179:easyflash/src/ef_env.c ****     {
 3872              		.loc 1 1179 66 view .LVU1248
 3873 0090 DFF80C91 		ldr	r9, .L403+16
 3874              	.LBE267:
 3875              	.LBE266:
 3876              	.LBE265:
 3877              	.LBE264:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 3878              		.loc 1 1134 18 view .LVU1249
 3879 0094 6660     		str	r6, [r4, #4]
1135:easyflash/src/ef_env.c ****     {
 3880              		.loc 1 1135 5 is_stmt 1 view .LVU1250
1135:easyflash/src/ef_env.c ****     {
 3881              		.loc 1 1135 11 is_stmt 0 view .LVU1251
 3882 0096 00E0     		b	.L353
 3883              	.LVL356:
 3884              	.L354:
 3885              	.LBB271:
 3886              	.LBB272:
 749:easyflash/src/ef_env.c ****     {
 3887              		.loc 1 749 16 view .LVU1252
 3888 0098 6668     		ldr	r6, [r4, #4]
 3889              	.LVL357:
 3890              	.L353:
 749:easyflash/src/ef_env.c ****     {
 3891              		.loc 1 749 16 view .LVU1253
 3892              	.LBE272:
 3893              	.LBE271:
1135:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 124


 3894              		.loc 1 1135 11 is_stmt 1 view .LVU1254
 3895              	.LBB275:
 3896              	.LBI271:
 745:easyflash/src/ef_env.c **** {
 3897              		.loc 1 745 17 view .LVU1255
 3898              	.LBB273:
 747:easyflash/src/ef_env.c **** 
 3899              		.loc 1 747 5 view .LVU1256
 749:easyflash/src/ef_env.c ****     {
 3900              		.loc 1 749 5 view .LVU1257
 749:easyflash/src/ef_env.c ****     {
 3901              		.loc 1 749 8 is_stmt 0 view .LVU1258
 3902 009a 711C     		adds	r1, r6, #1
 3903 009c 6AD0     		beq	.L401
 756:easyflash/src/ef_env.c ****         {
 3904              		.loc 1 756 9 is_stmt 1 view .LVU1259
 756:easyflash/src/ef_env.c ****         {
 3905              		.loc 1 756 20 is_stmt 0 view .LVU1260
 3906 009e E368     		ldr	r3, [r4, #12]
 756:easyflash/src/ef_env.c ****         {
 3907              		.loc 1 756 12 view .LVU1261
 3908 00a0 5A1C     		adds	r2, r3, #1
 758:easyflash/src/ef_env.c ****         }
 3909              		.loc 1 758 13 is_stmt 1 view .LVU1262
 762:easyflash/src/ef_env.c ****         }
 3910              		.loc 1 762 23 is_stmt 0 view .LVU1263
 3911 00a2 18BF     		it	ne
 3912 00a4 06EB4346 		addne	r6, r6, r3, lsl #17
 765:easyflash/src/ef_env.c ****         {
 3913              		.loc 1 765 40 view .LVU1264
 3914 00a8 D8F80030 		ldr	r3, [r8]
 758:easyflash/src/ef_env.c ****         }
 3915              		.loc 1 758 23 view .LVU1265
 3916 00ac 08BF     		it	eq
 3917 00ae 06F50036 		addeq	r6, r6, #131072
 762:easyflash/src/ef_env.c ****         }
 3918              		.loc 1 762 13 is_stmt 1 view .LVU1266
 3919              	.LVL358:
 765:easyflash/src/ef_env.c ****         {
 3920              		.loc 1 765 9 view .LVU1267
 765:easyflash/src/ef_env.c ****         {
 3921              		.loc 1 765 40 is_stmt 0 view .LVU1268
 3922 00b2 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
 3923              		.loc 1 765 12 view .LVU1269
 3924 00b6 B342     		cmp	r3, r6
 3925 00b8 DED9     		bls	.L395
 3926              	.LVL359:
 3927              	.L358:
 765:easyflash/src/ef_env.c ****         {
 3928              		.loc 1 765 12 view .LVU1270
 3929              	.LBE273:
 3930              	.LBE275:
1135:easyflash/src/ef_env.c ****     {
 3931              		.loc 1 1135 11 view .LVU1271
 3932 00ba 731C     		adds	r3, r6, #1
 3933 00bc DCD0     		beq	.L395
ARM GAS  /tmp/ccSGDQKw.s 			page 125


1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 3934              		.loc 1 1137 9 is_stmt 1 view .LVU1272
 3935 00be 0022     		movs	r2, #0
 3936 00c0 2146     		mov	r1, r4
 3937 00c2 3046     		mov	r0, r6
 3938 00c4 FFF7FEFF 		bl	read_sector_meta_data
 3939              	.LVL360:
1138:easyflash/src/ef_env.c ****         {
 3940              		.loc 1 1138 9 view .LVU1273
1138:easyflash/src/ef_env.c ****         {
 3941              		.loc 1 1138 43 is_stmt 0 view .LVU1274
 3942 00c8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 3943 00ca 022B     		cmp	r3, #2
 3944 00cc E4D1     		bne	.L354
1140:easyflash/src/ef_env.c ****             {
 3945              		.loc 1 1140 13 is_stmt 1 view .LVU1275
1142:easyflash/src/ef_env.c ****             }
 3946              		.loc 1 1142 17 view .LVU1276
 3947 00ce 3046     		mov	r0, r6
 3948 00d0 0122     		movs	r2, #1
 3949 00d2 2146     		mov	r1, r4
 3950 00d4 FFF7FEFF 		bl	read_sector_meta_data
 3951              	.LVL361:
1145:easyflash/src/ef_env.c ****             {
 3952              		.loc 1 1145 13 view .LVU1277
 3953              	.LBB276:
 3954              	.LBI264:
1169:easyflash/src/ef_env.c **** {
 3955              		.loc 1 1169 13 view .LVU1278
 3956              	.LBB270:
1171:easyflash/src/ef_env.c ****     uint32_t *empty_env = arg2;
 3957              		.loc 1 1171 5 view .LVU1279
1172:easyflash/src/ef_env.c **** 
 3958              		.loc 1 1172 5 view .LVU1280
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 3959              		.loc 1 1177 5 view .LVU1281
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 3960              		.loc 1 1177 8 is_stmt 0 view .LVU1282
 3961 00d8 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 3962 00da 002B     		cmp	r3, #0
 3963 00dc DCD0     		beq	.L354
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 3964              		.loc 1 1177 26 view .LVU1283
 3965 00de 2369     		ldr	r3, [r4, #16]
 3966 00e0 AB42     		cmp	r3, r5
 3967 00e2 D9D9     		bls	.L354
 3968              	.LVL362:
 3969              	.LBB269:
 3970              	.LBI266:
1169:easyflash/src/ef_env.c **** {
 3971              		.loc 1 1169 13 is_stmt 1 view .LVU1284
 3972              	.LBB268:
1178:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
 3973              		.loc 1 1178 32 is_stmt 0 view .LVU1285
 3974 00e4 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
1178:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
 3975              		.loc 1 1178 13 view .LVU1286
ARM GAS  /tmp/ccSGDQKw.s 			page 126


 3976 00e6 012B     		cmp	r3, #1
 3977 00e8 05D0     		beq	.L355
1179:easyflash/src/ef_env.c ****     {
 3978              		.loc 1 1179 17 view .LVU1287
 3979 00ea 022B     		cmp	r3, #2
 3980 00ec D4D1     		bne	.L354
1179:easyflash/src/ef_env.c ****     {
 3981              		.loc 1 1179 63 view .LVU1288
 3982 00ee 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 3983 00f2 002B     		cmp	r3, #0
 3984 00f4 D0D1     		bne	.L354
 3985              	.L355:
1181:easyflash/src/ef_env.c ****         return true;
 3986              		.loc 1 1181 9 is_stmt 1 view .LVU1289
1181:easyflash/src/ef_env.c ****         return true;
 3987              		.loc 1 1181 28 is_stmt 0 view .LVU1290
 3988 00f6 6069     		ldr	r0, [r4, #20]
 3989              	.LVL363:
1182:easyflash/src/ef_env.c ****     }
 3990              		.loc 1 1182 9 is_stmt 1 view .LVU1291
1182:easyflash/src/ef_env.c ****     }
 3991              		.loc 1 1182 9 is_stmt 0 view .LVU1292
 3992              	.LBE268:
 3993              	.LBE269:
 3994              	.LBE270:
 3995              	.LBE276:
 3996              	.LBE263:
 3997              	.LBE262:
1200:easyflash/src/ef_env.c ****     {
 3998              		.loc 1 1200 5 is_stmt 1 view .LVU1293
1200:easyflash/src/ef_env.c ****     {
 3999              		.loc 1 1200 8 is_stmt 0 view .LVU1294
 4000 00f8 002F     		cmp	r7, #0
 4001 00fa C1D0     		beq	.L334
1200:easyflash/src/ef_env.c ****     {
 4002              		.loc 1 1200 26 discriminator 1 view .LVU1295
 4003 00fc 461C     		adds	r6, r0, #1
 4004 00fe BFD1     		bne	.L334
 4005              	.LVL364:
 4006              	.L347:
1202:easyflash/src/ef_env.c ****         {
 4007              		.loc 1 1202 9 is_stmt 1 view .LVU1296
1202:easyflash/src/ef_env.c ****         {
 4008              		.loc 1 1202 12 is_stmt 0 view .LVU1297
 4009 0100 012F     		cmp	r7, #1
 4010 0102 03D1     		bne	.L349
1202:easyflash/src/ef_env.c ****         {
 4011              		.loc 1 1202 54 discriminator 1 view .LVU1298
 4012 0104 264E     		ldr	r6, .L403+16
 4013 0106 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 4014 0108 002B     		cmp	r3, #0
 4015 010a 39D0     		beq	.L363
 4016              	.L349:
1204:easyflash/src/ef_env.c ****         }
 4017              		.loc 1 1204 13 is_stmt 1 view .LVU1299
 4018              	.LVL365:
 4019              	.LBB279:
ARM GAS  /tmp/ccSGDQKw.s 			page 127


 4020              	.LBI279:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 4021              		.loc 1 1128 13 view .LVU1300
 4022              	.LBB280:
1131:easyflash/src/ef_env.c **** 
 4023              		.loc 1 1131 5 view .LVU1301
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 4024              		.loc 1 1134 5 view .LVU1302
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 4025              		.loc 1 1134 18 is_stmt 0 view .LVU1303
 4026 010c 4FF0FF36 		mov	r6, #-1
 4027              	.LBB281:
 4028              	.LBB282:
 4029              	.LBB283:
 4030              	.LBB284:
1179:easyflash/src/ef_env.c ****     {
 4031              		.loc 1 1179 66 view .LVU1304
 4032 0110 234F     		ldr	r7, .L403+16
 4033              	.LVL366:
1179:easyflash/src/ef_env.c ****     {
 4034              		.loc 1 1179 66 view .LVU1305
 4035              	.LBE284:
 4036              	.LBE283:
 4037              	.LBE282:
 4038              	.LBE281:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 4039              		.loc 1 1134 18 view .LVU1306
 4040 0112 6660     		str	r6, [r4, #4]
1135:easyflash/src/ef_env.c ****     {
 4041              		.loc 1 1135 5 is_stmt 1 view .LVU1307
1135:easyflash/src/ef_env.c ****     {
 4042              		.loc 1 1135 11 is_stmt 0 view .LVU1308
 4043 0114 00E0     		b	.L366
 4044              	.LVL367:
 4045              	.L367:
 4046              	.LBB288:
 4047              	.LBB289:
 749:easyflash/src/ef_env.c ****     {
 4048              		.loc 1 749 16 view .LVU1309
 4049 0116 6668     		ldr	r6, [r4, #4]
 4050              	.LVL368:
 4051              	.L366:
 749:easyflash/src/ef_env.c ****     {
 4052              		.loc 1 749 16 view .LVU1310
 4053              	.LBE289:
 4054              	.LBE288:
1135:easyflash/src/ef_env.c ****     {
 4055              		.loc 1 1135 11 is_stmt 1 view .LVU1311
 4056              	.LBB292:
 4057              	.LBI288:
 745:easyflash/src/ef_env.c **** {
 4058              		.loc 1 745 17 view .LVU1312
 4059              	.LBB290:
 747:easyflash/src/ef_env.c **** 
 4060              		.loc 1 747 5 view .LVU1313
 749:easyflash/src/ef_env.c ****     {
 4061              		.loc 1 749 5 view .LVU1314
ARM GAS  /tmp/ccSGDQKw.s 			page 128


 749:easyflash/src/ef_env.c ****     {
 4062              		.loc 1 749 8 is_stmt 0 view .LVU1315
 4063 0118 711C     		adds	r1, r6, #1
 4064 011a 2ED0     		beq	.L402
 756:easyflash/src/ef_env.c ****         {
 4065              		.loc 1 756 9 is_stmt 1 view .LVU1316
 756:easyflash/src/ef_env.c ****         {
 4066              		.loc 1 756 20 is_stmt 0 view .LVU1317
 4067 011c E368     		ldr	r3, [r4, #12]
 756:easyflash/src/ef_env.c ****         {
 4068              		.loc 1 756 12 view .LVU1318
 4069 011e 5A1C     		adds	r2, r3, #1
 758:easyflash/src/ef_env.c ****         }
 4070              		.loc 1 758 13 is_stmt 1 view .LVU1319
 762:easyflash/src/ef_env.c ****         }
 4071              		.loc 1 762 23 is_stmt 0 view .LVU1320
 4072 0120 18BF     		it	ne
 4073 0122 06EB4346 		addne	r6, r6, r3, lsl #17
 765:easyflash/src/ef_env.c ****         {
 4074              		.loc 1 765 40 view .LVU1321
 4075 0126 D8F80030 		ldr	r3, [r8]
 758:easyflash/src/ef_env.c ****         }
 4076              		.loc 1 758 23 view .LVU1322
 4077 012a 08BF     		it	eq
 4078 012c 06F50036 		addeq	r6, r6, #131072
 762:easyflash/src/ef_env.c ****         }
 4079              		.loc 1 762 13 is_stmt 1 view .LVU1323
 4080              	.LVL369:
 765:easyflash/src/ef_env.c ****         {
 4081              		.loc 1 765 9 view .LVU1324
 765:easyflash/src/ef_env.c ****         {
 4082              		.loc 1 765 40 is_stmt 0 view .LVU1325
 4083 0130 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
 4084              		.loc 1 765 12 view .LVU1326
 4085 0134 B342     		cmp	r3, r6
 4086 0136 A1D9     		bls	.L396
 4087              	.LVL370:
 4088              	.L370:
 765:easyflash/src/ef_env.c ****         {
 4089              		.loc 1 765 12 view .LVU1327
 4090              	.LBE290:
 4091              	.LBE292:
1135:easyflash/src/ef_env.c ****     {
 4092              		.loc 1 1135 11 view .LVU1328
 4093 0138 731C     		adds	r3, r6, #1
 4094 013a 9FD0     		beq	.L396
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 4095              		.loc 1 1137 9 is_stmt 1 view .LVU1329
 4096 013c 0022     		movs	r2, #0
 4097 013e 2146     		mov	r1, r4
 4098 0140 3046     		mov	r0, r6
 4099 0142 FFF7FEFF 		bl	read_sector_meta_data
 4100              	.LVL371:
1138:easyflash/src/ef_env.c ****         {
 4101              		.loc 1 1138 9 view .LVU1330
1138:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 129


 4102              		.loc 1 1138 43 is_stmt 0 view .LVU1331
 4103 0146 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 4104 0148 012A     		cmp	r2, #1
 4105 014a E4D1     		bne	.L367
1140:easyflash/src/ef_env.c ****             {
 4106              		.loc 1 1140 13 is_stmt 1 view .LVU1332
1142:easyflash/src/ef_env.c ****             }
 4107              		.loc 1 1142 17 view .LVU1333
 4108 014c 3046     		mov	r0, r6
 4109 014e 2146     		mov	r1, r4
 4110 0150 FFF7FEFF 		bl	read_sector_meta_data
 4111              	.LVL372:
1145:easyflash/src/ef_env.c ****             {
 4112              		.loc 1 1145 13 view .LVU1334
 4113              	.LBB293:
 4114              	.LBI281:
1169:easyflash/src/ef_env.c **** {
 4115              		.loc 1 1169 13 view .LVU1335
 4116              	.LBB287:
1171:easyflash/src/ef_env.c ****     uint32_t *empty_env = arg2;
 4117              		.loc 1 1171 5 view .LVU1336
1172:easyflash/src/ef_env.c **** 
 4118              		.loc 1 1172 5 view .LVU1337
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 4119              		.loc 1 1177 5 view .LVU1338
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 4120              		.loc 1 1177 8 is_stmt 0 view .LVU1339
 4121 0154 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 4122 0156 002B     		cmp	r3, #0
 4123 0158 DDD0     		beq	.L367
1177:easyflash/src/ef_env.c ****             && ((sector->status.dirty == SECTOR_DIRTY_FALSE)
 4124              		.loc 1 1177 26 view .LVU1340
 4125 015a 2369     		ldr	r3, [r4, #16]
 4126 015c AB42     		cmp	r3, r5
 4127 015e DAD9     		bls	.L367
 4128              	.LVL373:
 4129              	.LBB286:
 4130              	.LBI283:
1169:easyflash/src/ef_env.c **** {
 4131              		.loc 1 1169 13 is_stmt 1 view .LVU1341
 4132              	.LBB285:
1178:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
 4133              		.loc 1 1178 32 is_stmt 0 view .LVU1342
 4134 0160 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
1178:easyflash/src/ef_env.c ****                 || (sector->status.dirty == SECTOR_DIRTY_TRUE && !gc_request)))
 4135              		.loc 1 1178 13 view .LVU1343
 4136 0162 012B     		cmp	r3, #1
 4137 0164 04D0     		beq	.L368
1179:easyflash/src/ef_env.c ****     {
 4138              		.loc 1 1179 17 view .LVU1344
 4139 0166 022B     		cmp	r3, #2
 4140 0168 D5D1     		bne	.L367
1179:easyflash/src/ef_env.c ****     {
 4141              		.loc 1 1179 63 view .LVU1345
 4142 016a 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 4143 016c 002B     		cmp	r3, #0
 4144 016e D2D1     		bne	.L367
ARM GAS  /tmp/ccSGDQKw.s 			page 130


 4145              	.L368:
1181:easyflash/src/ef_env.c ****         return true;
 4146              		.loc 1 1181 9 is_stmt 1 view .LVU1346
1181:easyflash/src/ef_env.c ****         return true;
 4147              		.loc 1 1181 28 is_stmt 0 view .LVU1347
 4148 0170 6069     		ldr	r0, [r4, #20]
 4149              	.LVL374:
1182:easyflash/src/ef_env.c ****     }
 4150              		.loc 1 1182 9 is_stmt 1 view .LVU1348
1182:easyflash/src/ef_env.c ****     }
 4151              		.loc 1 1182 9 is_stmt 0 view .LVU1349
 4152 0172 85E7     		b	.L334
 4153              	.LVL375:
 4154              	.L401:
1182:easyflash/src/ef_env.c ****     }
 4155              		.loc 1 1182 9 view .LVU1350
 4156              	.LBE285:
 4157              	.LBE286:
 4158              	.LBE287:
 4159              	.LBE293:
 4160              	.LBE280:
 4161              	.LBE279:
 4162              	.LBB296:
 4163              	.LBB278:
 4164              	.LBB277:
 4165              	.LBB274:
 751:easyflash/src/ef_env.c ****     }
 4166              		.loc 1 751 9 is_stmt 1 view .LVU1351
 751:easyflash/src/ef_env.c ****     }
 4167              		.loc 1 751 16 is_stmt 0 view .LVU1352
 4168 0174 D8F80060 		ldr	r6, [r8]
 4169 0178 9FE7     		b	.L358
 4170              	.LVL376:
 4171              	.L402:
 751:easyflash/src/ef_env.c ****     }
 4172              		.loc 1 751 16 view .LVU1353
 4173              	.LBE274:
 4174              	.LBE277:
 4175              	.LBE278:
 4176              	.LBE296:
 4177              	.LBB297:
 4178              	.LBB295:
 4179              	.LBB294:
 4180              	.LBB291:
 751:easyflash/src/ef_env.c ****     }
 4181              		.loc 1 751 9 is_stmt 1 view .LVU1354
 751:easyflash/src/ef_env.c ****     }
 4182              		.loc 1 751 16 is_stmt 0 view .LVU1355
 4183 017a D8F80060 		ldr	r6, [r8]
 4184 017e DBE7     		b	.L370
 4185              	.LVL377:
 4186              	.L363:
 751:easyflash/src/ef_env.c ****     }
 4187              		.loc 1 751 16 view .LVU1356
 4188              	.LBE291:
 4189              	.LBE294:
 4190              	.LBE295:
ARM GAS  /tmp/ccSGDQKw.s 			page 131


 4191              	.LBE297:
1209:easyflash/src/ef_env.c ****             gc_request = true;
 4192              		.loc 1 1209 13 is_stmt 1 view .LVU1357
 4193 0180 084A     		ldr	r2, .L403+20
 4194 0182 0648     		ldr	r0, .L403+12
 4195 0184 40F2B941 		movw	r1, #1209
 4196 0188 FFF7FEFF 		bl	ef_log_debug
 4197              	.LVL378:
1210:easyflash/src/ef_env.c ****         }
 4198              		.loc 1 1210 13 view .LVU1358
1210:easyflash/src/ef_env.c ****         }
 4199              		.loc 1 1210 24 is_stmt 0 view .LVU1359
 4200 018c 3770     		strb	r7, [r6]
 4201 018e 75E7     		b	.L396
 4202              	.L404:
 4203              		.align	2
 4204              	.L403:
 4205 0190 00000000 		.word	.LANCHOR6
 4206 0194 00000000 		.word	.LC8
 4207 0198 1C000000 		.word	.LC1
 4208 019c 3C000000 		.word	.LC2
 4209 01a0 00000000 		.word	.LANCHOR2
 4210 01a4 00000000 		.word	.LC14
 4211 01a8 00000000 		.word	.LANCHOR7
 4212              		.cfi_endproc
 4213              	.LFE265:
 4215              		.section	.rodata.move_env.str1.4,"aMS",%progbits,1
 4216              		.align	2
 4217              	.LC15:
 4218 0000 4D6F7665 		.ascii	"Moved the ENV (%.*s) from 0x%08X to 0x%08X.\000"
 4218      64207468 
 4218      6520454E 
 4218      56202825 
 4218      2E2A7329 
 4219              		.section	.text.move_env,"ax",%progbits
 4220              		.align	1
 4221              		.p2align 2,,3
 4222              		.syntax unified
 4223              		.thumb
 4224              		.thumb_func
 4226              	move_env:
 4227              	.LVL379:
 4228              	.LFB267:
1280:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 4229              		.loc 1 1280 1 is_stmt 1 view -0
 4230              		.cfi_startproc
 4231              		@ args = 0, pretend = 0, frame = 128
 4232              		@ frame_needed = 0, uses_anonymous_args = 0
1281:easyflash/src/ef_env.c ****     uint8_t status_table[ENV_STATUS_TABLE_SIZE];
 4233              		.loc 1 1281 5 view .LVU1361
1282:easyflash/src/ef_env.c ****     uint32_t env_addr;
 4234              		.loc 1 1282 5 view .LVU1362
1283:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 4235              		.loc 1 1283 5 view .LVU1363
1284:easyflash/src/ef_env.c **** 
 4236              		.loc 1 1284 5 view .LVU1364
1287:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 132


 4237              		.loc 1 1287 5 view .LVU1365
1280:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 4238              		.loc 1 1280 1 is_stmt 0 view .LVU1366
 4239 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4240              		.cfi_def_cfa_offset 36
 4241              		.cfi_offset 4, -36
 4242              		.cfi_offset 5, -32
 4243              		.cfi_offset 6, -28
 4244              		.cfi_offset 7, -24
 4245              		.cfi_offset 8, -20
 4246              		.cfi_offset 9, -16
 4247              		.cfi_offset 10, -12
 4248              		.cfi_offset 11, -8
 4249              		.cfi_offset 14, -4
1287:easyflash/src/ef_env.c ****     {
 4250              		.loc 1 1287 8 view .LVU1367
 4251 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 4252 0006 022B     		cmp	r3, #2
1280:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 4253              		.loc 1 1280 1 view .LVU1368
 4254 0008 A5B0     		sub	sp, sp, #148
 4255              		.cfi_def_cfa_offset 184
1280:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 4256              		.loc 1 1280 1 view .LVU1369
 4257 000a 0646     		mov	r6, r0
1287:easyflash/src/ef_env.c ****     {
 4258              		.loc 1 1287 8 view .LVU1370
 4259 000c 00F09580 		beq	.L422
 4260              	.LVL380:
 4261              	.L406:
1292:easyflash/src/ef_env.c ****     {
 4262              		.loc 1 1292 5 is_stmt 1 view .LVU1371
1292:easyflash/src/ef_env.c ****     {
 4263              		.loc 1 1292 21 is_stmt 0 view .LVU1372
 4264 0010 B168     		ldr	r1, [r6, #8]
 4265 0012 07A8     		add	r0, sp, #28
 4266 0014 FFF7FEFF 		bl	alloc_env
 4267              	.LVL381:
1292:easyflash/src/ef_env.c ****     {
 4268              		.loc 1 1292 8 view .LVU1373
 4269 0018 431C     		adds	r3, r0, #1
1292:easyflash/src/ef_env.c ****     {
 4270              		.loc 1 1292 21 view .LVU1374
 4271 001a 0746     		mov	r7, r0
 4272              	.LVL382:
1292:easyflash/src/ef_env.c ****     {
 4273              		.loc 1 1292 8 view .LVU1375
 4274 001c 00F09380 		beq	.L415
1294:easyflash/src/ef_env.c ****         {
 4275              		.loc 1 1294 9 is_stmt 1 view .LVU1376
1294:easyflash/src/ef_env.c ****         {
 4276              		.loc 1 1294 13 is_stmt 0 view .LVU1377
 4277 0020 4B4B     		ldr	r3, .L423
1294:easyflash/src/ef_env.c ****         {
 4278              		.loc 1 1294 12 view .LVU1378
 4279 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4280 0024 002B     		cmp	r3, #0
ARM GAS  /tmp/ccSGDQKw.s 			page 133


 4281 0026 5DD1     		bne	.L408
 4282              	.LBB298:
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4283              		.loc 1 1298 30 view .LVU1379
 4284 0028 06F11003 		add	r3, r6, #16
 4285 002c 0593     		str	r3, [sp, #20]
 4286 002e 0DF1340A 		add	r10, sp, #52
 4287              	.LVL383:
 4288              	.L409:
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4289              		.loc 1 1298 30 view .LVU1380
 4290              	.LBE298:
 4291              	.LBB301:
1314:easyflash/src/ef_env.c ****         size_t len, size, env_len = env->len;
 4292              		.loc 1 1314 9 is_stmt 1 view .LVU1381
1315:easyflash/src/ef_env.c **** 
 4293              		.loc 1 1315 9 view .LVU1382
1315:easyflash/src/ef_env.c **** 
 4294              		.loc 1 1315 27 is_stmt 0 view .LVU1383
 4295 0032 B468     		ldr	r4, [r6, #8]
 4296              	.LVL384:
1318:easyflash/src/ef_env.c **** 
 4297              		.loc 1 1318 9 is_stmt 1 view .LVU1384
 4298 0034 0022     		movs	r2, #0
 4299 0036 2146     		mov	r1, r4
 4300 0038 07A8     		add	r0, sp, #28
 4301 003a FFF7FEFF 		bl	update_sec_status
 4302              	.LVL385:
1320:easyflash/src/ef_env.c ****         env_len -= ENV_MAGIC_OFFSET;
 4303              		.loc 1 1320 9 view .LVU1385
 4304 003e 0123     		movs	r3, #1
 4305 0040 0622     		movs	r2, #6
 4306 0042 5146     		mov	r1, r10
 4307 0044 3846     		mov	r0, r7
 4308 0046 FFF7FEFF 		bl	write_status
 4309              	.LVL386:
1321:easyflash/src/ef_env.c ****         for (len = 0, size = 0; len < env_len; len += size)
 4310              		.loc 1 1321 9 view .LVU1386
1322:easyflash/src/ef_env.c ****         {
 4311              		.loc 1 1322 9 view .LVU1387
1322:easyflash/src/ef_env.c ****         {
 4312              		.loc 1 1322 33 view .LVU1388
1322:easyflash/src/ef_env.c ****         {
 4313              		.loc 1 1322 9 is_stmt 0 view .LVU1389
 4314 004a 143C     		subs	r4, r4, #20
 4315              	.LVL387:
1322:easyflash/src/ef_env.c ****         {
 4316              		.loc 1 1322 9 view .LVU1390
 4317 004c 1BD0     		beq	.L412
 4318 004e 07F11409 		add	r9, r7, #20
1322:easyflash/src/ef_env.c ****         {
 4319              		.loc 1 1322 18 view .LVU1391
 4320 0052 0025     		movs	r5, #0
1333:easyflash/src/ef_env.c ****         }
 4321              		.loc 1 1333 22 view .LVU1392
 4322 0054 A7F10C08 		sub	r8, r7, #12
 4323              	.LVL388:
ARM GAS  /tmp/ccSGDQKw.s 			page 134


 4324              	.L414:
1324:easyflash/src/ef_env.c ****             {
 4325              		.loc 1 1324 13 is_stmt 1 view .LVU1393
1332:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
 4326              		.loc 1 1332 13 view .LVU1394
1324:easyflash/src/ef_env.c ****             {
 4327              		.loc 1 1324 21 is_stmt 0 view .LVU1395
 4328 0058 05F1200B 		add	fp, r5, #32
1324:easyflash/src/ef_env.c ****             {
 4329              		.loc 1 1324 16 view .LVU1396
 4330 005c A345     		cmp	fp, r4
1332:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
 4331              		.loc 1 1332 13 view .LVU1397
 4332 005e 306B     		ldr	r0, [r6, #48]
 4333 0060 4FF02002 		mov	r2, #32
 4334 0064 16A9     		add	r1, sp, #88
1324:easyflash/src/ef_env.c ****             {
 4335              		.loc 1 1324 16 view .LVU1398
 4336 0066 5CD3     		bcc	.L413
1330:easyflash/src/ef_env.c ****             }
 4337              		.loc 1 1330 17 is_stmt 1 view .LVU1399
1330:easyflash/src/ef_env.c ****             }
 4338              		.loc 1 1330 22 is_stmt 0 view .LVU1400
 4339 0068 641B     		subs	r4, r4, r5
 4340              	.LVL389:
1332:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
 4341              		.loc 1 1332 13 is_stmt 1 view .LVU1401
1332:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
 4342              		.loc 1 1332 86 is_stmt 0 view .LVU1402
 4343 006a E21C     		adds	r2, r4, #3
1332:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
 4344              		.loc 1 1332 13 view .LVU1403
 4345 006c 1430     		adds	r0, r0, #20
 4346 006e 22F00302 		bic	r2, r2, #3
 4347 0072 2844     		add	r0, r0, r5
 4348 0074 FFF7FEFF 		bl	ef_port_read
 4349              	.LVL390:
1333:easyflash/src/ef_env.c ****         }
 4350              		.loc 1 1333 13 is_stmt 1 view .LVU1404
1333:easyflash/src/ef_env.c ****         }
 4351              		.loc 1 1333 22 is_stmt 0 view .LVU1405
 4352 0078 2246     		mov	r2, r4
 4353 007a 16A9     		add	r1, sp, #88
 4354 007c 05EB0900 		add	r0, r5, r9
 4355 0080 FFF7FEFF 		bl	ef_port_write
 4356              	.LVL391:
 4357 0084 0446     		mov	r4, r0
 4358              	.LVL392:
1322:easyflash/src/ef_env.c ****         {
 4359              		.loc 1 1322 48 is_stmt 1 view .LVU1406
1322:easyflash/src/ef_env.c ****         {
 4360              		.loc 1 1322 33 view .LVU1407
 4361              	.L412:
1335:easyflash/src/ef_env.c **** 
 4362              		.loc 1 1335 9 view .LVU1408
 4363 0086 0622     		movs	r2, #6
 4364 0088 5146     		mov	r1, r10
ARM GAS  /tmp/ccSGDQKw.s 			page 135


 4365 008a 0223     		movs	r3, #2
 4366 008c 3846     		mov	r0, r7
 4367 008e FFF7FEFF 		bl	write_status
 4368              	.LVL393:
1338:easyflash/src/ef_env.c ****                             env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env->name_len) + EF_WG_ALIGN
 4369              		.loc 1 1338 9 view .LVU1409
1339:easyflash/src/ef_env.c ****         update_env_cache(env->name, env->name_len, env_addr);
 4370              		.loc 1 1339 89 is_stmt 0 view .LVU1410
 4371 0092 F368     		ldr	r3, [r6, #12]
 4372 0094 D91C     		adds	r1, r3, #3
1339:easyflash/src/ef_env.c ****         update_env_cache(env->name, env->name_len, env_addr);
 4373              		.loc 1 1339 60 view .LVU1411
 4374 0096 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
1339:easyflash/src/ef_env.c ****         update_env_cache(env->name, env->name_len, env_addr);
 4375              		.loc 1 1339 89 view .LVU1412
 4376 0098 21F00301 		bic	r1, r1, #3
1339:easyflash/src/ef_env.c ****         update_env_cache(env->name, env->name_len, env_addr);
 4377              		.loc 1 1339 60 view .LVU1413
 4378 009c 0333     		adds	r3, r3, #3
 4379 009e 23F00303 		bic	r3, r3, #3
1338:easyflash/src/ef_env.c ****                             env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env->name_len) + EF_WG_ALIGN
 4380              		.loc 1 1338 9 view .LVU1414
 4381 00a2 2831     		adds	r1, r1, #40
 4382 00a4 1944     		add	r1, r1, r3
 4383 00a6 780C     		lsrs	r0, r7, #17
 4384 00a8 3944     		add	r1, r1, r7
 4385 00aa 4004     		lsls	r0, r0, #17
 4386 00ac FFF7FEFF 		bl	update_sector_cache
 4387              	.LVL394:
1340:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 4388              		.loc 1 1340 9 is_stmt 1 view .LVU1415
 4389 00b0 059D     		ldr	r5, [sp, #20]
 4390 00b2 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 4391 00b4 3A46     		mov	r2, r7
 4392 00b6 2846     		mov	r0, r5
 4393 00b8 FFF7FEFF 		bl	update_env_cache
 4394              	.LVL395:
 4395              	.LBE301:
1344:easyflash/src/ef_env.c **** 
 4396              		.loc 1 1344 5 view .LVU1416
 4397 00bc 336B     		ldr	r3, [r6, #48]
 4398 00be 254A     		ldr	r2, .L423+4
 4399 00c0 2548     		ldr	r0, .L423+8
 4400 00c2 CDE90137 		strd	r3, r7, [sp, #4]
 4401 00c6 4FF4A861 		mov	r1, #1344
 4402 00ca B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 4403 00cc 0095     		str	r5, [sp]
 4404 00ce FFF7FEFF 		bl	ef_log_debug
 4405              	.LVL396:
 4406              	.L411:
1347:easyflash/src/ef_env.c **** 
 4407              		.loc 1 1347 5 view .LVU1417
 4408 00d2 0122     		movs	r2, #1
 4409 00d4 3146     		mov	r1, r6
 4410 00d6 0020     		movs	r0, #0
 4411 00d8 FFF7FEFF 		bl	del_env
 4412              	.LVL397:
ARM GAS  /tmp/ccSGDQKw.s 			page 136


1349:easyflash/src/ef_env.c **** }
 4413              		.loc 1 1349 5 view .LVU1418
1350:easyflash/src/ef_env.c **** 
 4414              		.loc 1 1350 1 is_stmt 0 view .LVU1419
 4415 00dc 2046     		mov	r0, r4
 4416 00de 25B0     		add	sp, sp, #148
 4417              		.cfi_remember_state
 4418              		.cfi_def_cfa_offset 36
 4419              		@ sp needed
 4420 00e0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4421              	.LVL398:
 4422              	.L408:
 4423              		.cfi_restore_state
 4424              	.LBB302:
1296:easyflash/src/ef_env.c ****             char name[EF_ENV_NAME_MAX + 1] = { 0 };
 4425              		.loc 1 1296 13 is_stmt 1 view .LVU1420
1297:easyflash/src/ef_env.c ****             strncpy(name, env->name, env->name_len);
 4426              		.loc 1 1297 13 view .LVU1421
1297:easyflash/src/ef_env.c ****             strncpy(name, env->name, env->name_len);
 4427              		.loc 1 1297 18 is_stmt 0 view .LVU1422
 4428 00e4 0024     		movs	r4, #0
 4429 00e6 1D22     		movs	r2, #29
 4430 00e8 2146     		mov	r1, r4
 4431 00ea 0EA8     		add	r0, sp, #56
 4432              	.LVL399:
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4433              		.loc 1 1298 13 view .LVU1423
 4434 00ec 0DF1340A 		add	r10, sp, #52
1297:easyflash/src/ef_env.c ****             strncpy(name, env->name, env->name_len);
 4435              		.loc 1 1297 18 view .LVU1424
 4436 00f0 0D94     		str	r4, [sp, #52]
 4437 00f2 FFF7FEFF 		bl	memset
 4438              	.LVL400:
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4439              		.loc 1 1298 13 is_stmt 1 view .LVU1425
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4440              		.loc 1 1298 30 is_stmt 0 view .LVU1426
 4441 00f6 06F11003 		add	r3, r6, #16
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4442              		.loc 1 1298 13 view .LVU1427
 4443 00fa 1946     		mov	r1, r3
 4444 00fc B278     		ldrb	r2, [r6, #2]	@ zero_extendqisi2
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4445              		.loc 1 1298 30 view .LVU1428
 4446 00fe 0593     		str	r3, [sp, #20]
1298:easyflash/src/ef_env.c ****             /* check the ENV in flash is already create success */
 4447              		.loc 1 1298 13 view .LVU1429
 4448 0100 5046     		mov	r0, r10
 4449 0102 FFF7FEFF 		bl	strncpy
 4450              	.LVL401:
1300:easyflash/src/ef_env.c ****             {
 4451              		.loc 1 1300 13 is_stmt 1 view .LVU1430
 4452              	.LBB299:
 4453              	.LBI299:
 832:easyflash/src/ef_env.c **** {
 4454              		.loc 1 832 13 view .LVU1431
 4455              	.LBB300:
ARM GAS  /tmp/ccSGDQKw.s 			page 137


 834:easyflash/src/ef_env.c **** 
 4456              		.loc 1 834 5 view .LVU1432
 836:easyflash/src/ef_env.c **** 
 4457              		.loc 1 836 5 is_stmt 0 view .LVU1433
 4458 0106 154B     		ldr	r3, .L423+12
 834:easyflash/src/ef_env.c **** 
 4459              		.loc 1 834 10 view .LVU1434
 4460 0108 8DF81B40 		strb	r4, [sp, #27]
 836:easyflash/src/ef_env.c **** 
 4461              		.loc 1 836 5 is_stmt 1 view .LVU1435
 4462 010c 0DF11B02 		add	r2, sp, #27
 4463 0110 5146     		mov	r1, r10
 4464 0112 16A8     		add	r0, sp, #88
 4465              	.LVL402:
 836:easyflash/src/ef_env.c **** 
 4466              		.loc 1 836 5 is_stmt 0 view .LVU1436
 4467 0114 FFF7FEFF 		bl	env_iterator
 4468              	.LVL403:
 838:easyflash/src/ef_env.c **** }
 4469              		.loc 1 838 5 is_stmt 1 view .LVU1437
 838:easyflash/src/ef_env.c **** }
 4470              		.loc 1 838 12 is_stmt 0 view .LVU1438
 4471 0118 9DF81B30 		ldrb	r3, [sp, #27]	@ zero_extendqisi2
 4472              	.LVL404:
 838:easyflash/src/ef_env.c **** }
 4473              		.loc 1 838 12 view .LVU1439
 4474              	.LBE300:
 4475              	.LBE299:
1300:easyflash/src/ef_env.c ****             {
 4476              		.loc 1 1300 16 view .LVU1440
 4477 011c 002B     		cmp	r3, #0
 4478 011e 88D0     		beq	.L409
 4479 0120 D7E7     		b	.L411
 4480              	.LVL405:
 4481              	.L413:
1300:easyflash/src/ef_env.c ****             {
 4482              		.loc 1 1300 16 view .LVU1441
 4483              	.LBE302:
 4484              	.LBB303:
1332:easyflash/src/ef_env.c ****             result = ef_port_write(env_addr + ENV_MAGIC_OFFSET + len, (uint32_t *) buf, size);
 4485              		.loc 1 1332 13 view .LVU1442
 4486 0122 1430     		adds	r0, r0, #20
 4487 0124 2844     		add	r0, r0, r5
 4488 0126 FFF7FEFF 		bl	ef_port_read
 4489              	.LVL406:
1333:easyflash/src/ef_env.c ****         }
 4490              		.loc 1 1333 13 is_stmt 1 view .LVU1443
1333:easyflash/src/ef_env.c ****         }
 4491              		.loc 1 1333 22 is_stmt 0 view .LVU1444
 4492 012a 2022     		movs	r2, #32
 4493 012c 16A9     		add	r1, sp, #88
 4494 012e 08EB0B00 		add	r0, r8, fp
 4495 0132 FFF7FEFF 		bl	ef_port_write
 4496              	.LVL407:
1322:easyflash/src/ef_env.c ****         {
 4497              		.loc 1 1322 48 is_stmt 1 view .LVU1445
1322:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 138


 4498              		.loc 1 1322 33 view .LVU1446
1333:easyflash/src/ef_env.c ****         }
 4499              		.loc 1 1333 22 is_stmt 0 view .LVU1447
 4500 0136 5D46     		mov	r5, fp
 4501 0138 8EE7     		b	.L414
 4502              	.LVL408:
 4503              	.L422:
1333:easyflash/src/ef_env.c ****         }
 4504              		.loc 1 1333 22 view .LVU1448
 4505              	.LBE303:
1289:easyflash/src/ef_env.c ****     }
 4506              		.loc 1 1289 9 is_stmt 1 view .LVU1449
 4507 013a 0022     		movs	r2, #0
 4508 013c 0146     		mov	r1, r0
 4509 013e 1046     		mov	r0, r2
 4510              	.LVL409:
1289:easyflash/src/ef_env.c ****     }
 4511              		.loc 1 1289 9 is_stmt 0 view .LVU1450
 4512 0140 FFF7FEFF 		bl	del_env
 4513              	.LVL410:
 4514 0144 64E7     		b	.L406
 4515              	.LVL411:
 4516              	.L415:
1310:easyflash/src/ef_env.c ****     }
 4517              		.loc 1 1310 16 view .LVU1451
 4518 0146 0624     		movs	r4, #6
1350:easyflash/src/ef_env.c **** 
 4519              		.loc 1 1350 1 view .LVU1452
 4520 0148 2046     		mov	r0, r4
 4521              	.LVL412:
1350:easyflash/src/ef_env.c **** 
 4522              		.loc 1 1350 1 view .LVU1453
 4523 014a 25B0     		add	sp, sp, #148
 4524              		.cfi_def_cfa_offset 36
 4525              		@ sp needed
 4526 014c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4527              	.LVL413:
 4528              	.L424:
1350:easyflash/src/ef_env.c **** 
 4529              		.loc 1 1350 1 view .LVU1454
 4530              		.align	2
 4531              	.L423:
 4532 0150 00000000 		.word	.LANCHOR9
 4533 0154 00000000 		.word	.LC15
 4534 0158 3C000000 		.word	.LC2
 4535 015c 00000000 		.word	find_env_cb
 4536              		.cfi_endproc
 4537              	.LFE267:
 4539              		.section	.rodata.check_and_recovery_env_cb.str1.4,"aMS",%progbits,1
 4540              		.align	2
 4541              	.LC16:
 4542 0000 466F756E 		.ascii	"Found an ENV (%.*s) which has changed value failed."
 4542      6420616E 
 4542      20454E56 
 4542      2028252E 
 4542      2A732920 
 4543 0033 204E6F77 		.ascii	" Now will recovery it.\000"
ARM GAS  /tmp/ccSGDQKw.s 			page 139


 4543      2077696C 
 4543      6C207265 
 4543      636F7665 
 4543      72792069 
 4544 004a 0000     		.align	2
 4545              	.LC17:
 4546 004c 5265636F 		.ascii	"Recovery the ENV successful.\000"
 4546      76657279 
 4546      20746865 
 4546      20454E56 
 4546      20737563 
 4547 0069 000000   		.align	2
 4548              	.LC18:
 4549 006c 5761726E 		.ascii	"Warning: Moved an ENV (size %d) failed when recover"
 4549      696E673A 
 4549      204D6F76 
 4549      65642061 
 4549      6E20454E 
 4550 009f 792E204E 		.ascii	"y. Now will GC then retry.\000"
 4550      6F772077 
 4550      696C6C20 
 4550      47432074 
 4550      68656E20 
 4551              		.section	.text.check_and_recovery_env_cb,"ax",%progbits
 4552              		.align	1
 4553              		.p2align 2,,3
 4554              		.syntax unified
 4555              		.thumb
 4556              		.thumb_func
 4558              	check_and_recovery_env_cb:
 4559              	.LVL414:
 4560              	.LFB287:
1928:easyflash/src/ef_env.c **** 
1929:easyflash/src/ef_env.c **** static bool check_and_recovery_gc_cb(sector_meta_data_t sector, void *arg1, void *arg2)
1930:easyflash/src/ef_env.c **** {
1931:easyflash/src/ef_env.c ****     if (sector->check_ok && sector->status.dirty == SECTOR_DIRTY_GC)
1932:easyflash/src/ef_env.c ****     {
1933:easyflash/src/ef_env.c ****         /* make sure the GC request flag to true */
1934:easyflash/src/ef_env.c ****         gc_request = true;
1935:easyflash/src/ef_env.c ****         /* resume the GC operate */
1936:easyflash/src/ef_env.c ****         gc_collect();
1937:easyflash/src/ef_env.c ****     }
1938:easyflash/src/ef_env.c **** 
1939:easyflash/src/ef_env.c ****     return false;
1940:easyflash/src/ef_env.c **** }
1941:easyflash/src/ef_env.c **** 
1942:easyflash/src/ef_env.c **** static bool check_and_recovery_env_cb(env_node_obj_t env, void *arg1, void *arg2)
1943:easyflash/src/ef_env.c **** {
 4561              		.loc 1 1943 1 is_stmt 1 view -0
 4562              		.cfi_startproc
 4563              		@ args = 0, pretend = 0, frame = 24
 4564              		@ frame_needed = 0, uses_anonymous_args = 0
1944:easyflash/src/ef_env.c ****     /* recovery the prepare deleted ENV */
1945:easyflash/src/ef_env.c ****     if (env->crc_is_ok && env->status == ENV_PRE_DELETE)
 4565              		.loc 1 1945 5 view .LVU1456
1943:easyflash/src/ef_env.c ****     /* recovery the prepare deleted ENV */
 4566              		.loc 1 1943 1 is_stmt 0 view .LVU1457
ARM GAS  /tmp/ccSGDQKw.s 			page 140


 4567 0000 70B5     		push	{r4, r5, r6, lr}
 4568              		.cfi_def_cfa_offset 16
 4569              		.cfi_offset 4, -16
 4570              		.cfi_offset 5, -12
 4571              		.cfi_offset 6, -8
 4572              		.cfi_offset 14, -4
 4573              		.loc 1 1945 12 view .LVU1458
 4574 0002 4578     		ldrb	r5, [r0, #1]	@ zero_extendqisi2
 4575              		.loc 1 1945 30 view .LVU1459
 4576 0004 0678     		ldrb	r6, [r0]	@ zero_extendqisi2
1943:easyflash/src/ef_env.c ****     /* recovery the prepare deleted ENV */
 4577              		.loc 1 1943 1 view .LVU1460
 4578 0006 86B0     		sub	sp, sp, #24
 4579              		.cfi_def_cfa_offset 40
1943:easyflash/src/ef_env.c ****     /* recovery the prepare deleted ENV */
 4580              		.loc 1 1943 1 view .LVU1461
 4581 0008 0446     		mov	r4, r0
 4582              		.loc 1 1945 8 view .LVU1462
 4583 000a 0DB1     		cbz	r5, .L427
 4584              		.loc 1 1945 24 discriminator 1 view .LVU1463
 4585 000c 032E     		cmp	r6, #3
 4586 000e 06D0     		beq	.L432
 4587              	.L427:
1946:easyflash/src/ef_env.c ****     {
1947:easyflash/src/ef_env.c ****         EF_INFO("Found an ENV (%.*s) which has changed value failed. Now will recovery it.", env->n
1948:easyflash/src/ef_env.c ****         /* recovery the old ENV */
1949:easyflash/src/ef_env.c ****         if (move_env(env) == EF_NO_ERR)
1950:easyflash/src/ef_env.c ****         {
1951:easyflash/src/ef_env.c ****             EF_DEBUG("Recovery the ENV successful.");
1952:easyflash/src/ef_env.c ****         }
1953:easyflash/src/ef_env.c ****         else
1954:easyflash/src/ef_env.c ****         {
1955:easyflash/src/ef_env.c ****             EF_DEBUG("Warning: Moved an ENV (size %d) failed when recovery. Now will GC then retry.
1956:easyflash/src/ef_env.c ****             return true;
1957:easyflash/src/ef_env.c ****         }
1958:easyflash/src/ef_env.c ****     }
1959:easyflash/src/ef_env.c ****     else if (env->status == ENV_PRE_WRITE)
 4588              		.loc 1 1959 10 is_stmt 1 view .LVU1464
 4589              		.loc 1 1959 13 is_stmt 0 view .LVU1465
 4590 0010 012E     		cmp	r6, #1
1960:easyflash/src/ef_env.c ****     {
1961:easyflash/src/ef_env.c ****         uint8_t status_table[ENV_STATUS_TABLE_SIZE];
1962:easyflash/src/ef_env.c ****         /* the ENV has not write finish, change the status to error */
1963:easyflash/src/ef_env.c ****         write_status(env->addr.start, status_table, ENV_STATUS_NUM, ENV_ERR_HDR);
1964:easyflash/src/ef_env.c ****         return true;
1965:easyflash/src/ef_env.c ****     }
1966:easyflash/src/ef_env.c **** 
1967:easyflash/src/ef_env.c ****     return false;
 4591              		.loc 1 1967 12 view .LVU1466
 4592 0012 18BF     		it	ne
 4593 0014 0025     		movne	r5, #0
1959:easyflash/src/ef_env.c ****     {
 4594              		.loc 1 1959 13 view .LVU1467
 4595 0016 15D0     		beq	.L433
 4596              	.LVL415:
 4597              	.L429:
1968:easyflash/src/ef_env.c **** }
ARM GAS  /tmp/ccSGDQKw.s 			page 141


 4598              		.loc 1 1968 1 discriminator 1 view .LVU1468
 4599 0018 2846     		mov	r0, r5
 4600 001a 06B0     		add	sp, sp, #24
 4601              		.cfi_remember_state
 4602              		.cfi_def_cfa_offset 16
 4603              		@ sp needed
 4604 001c 70BD     		pop	{r4, r5, r6, pc}
 4605              	.LVL416:
 4606              	.L432:
 4607              		.cfi_restore_state
 4608              	.LBB308:
 4609              	.LBI308:
1942:easyflash/src/ef_env.c **** {
 4610              		.loc 1 1942 13 is_stmt 1 view .LVU1469
 4611              	.LBB309:
1947:easyflash/src/ef_env.c ****         /* recovery the old ENV */
 4612              		.loc 1 1947 9 view .LVU1470
 4613 001e 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 4614              	.LVL417:
1947:easyflash/src/ef_env.c ****         /* recovery the old ENV */
 4615              		.loc 1 1947 9 is_stmt 0 view .LVU1471
 4616 0020 00F11002 		add	r2, r0, #16
 4617              	.LVL418:
1947:easyflash/src/ef_env.c ****         /* recovery the old ENV */
 4618              		.loc 1 1947 9 view .LVU1472
 4619 0024 1048     		ldr	r0, .L434
 4620              	.LVL419:
1947:easyflash/src/ef_env.c ****         /* recovery the old ENV */
 4621              		.loc 1 1947 9 view .LVU1473
 4622 0026 FFF7FEFF 		bl	ef_log_info
 4623              	.LVL420:
1949:easyflash/src/ef_env.c ****         {
 4624              		.loc 1 1949 9 is_stmt 1 view .LVU1474
1949:easyflash/src/ef_env.c ****         {
 4625              		.loc 1 1949 13 is_stmt 0 view .LVU1475
 4626 002a 2046     		mov	r0, r4
 4627 002c FFF7FEFF 		bl	move_env
 4628              	.LVL421:
1949:easyflash/src/ef_env.c ****         {
 4629              		.loc 1 1949 12 view .LVU1476
 4630 0030 0646     		mov	r6, r0
 4631 0032 88B9     		cbnz	r0, .L428
1951:easyflash/src/ef_env.c ****         }
 4632              		.loc 1 1951 13 is_stmt 1 view .LVU1477
 4633 0034 0D4A     		ldr	r2, .L434+4
 4634 0036 0E48     		ldr	r0, .L434+8
 4635 0038 40F29F71 		movw	r1, #1951
 4636 003c FFF7FEFF 		bl	ef_log_debug
 4637              	.LVL422:
1967:easyflash/src/ef_env.c **** }
 4638              		.loc 1 1967 12 is_stmt 0 view .LVU1478
 4639 0040 3546     		mov	r5, r6
1949:easyflash/src/ef_env.c ****         {
 4640              		.loc 1 1949 12 view .LVU1479
 4641 0042 E9E7     		b	.L429
 4642              	.LVL423:
 4643              	.L433:
ARM GAS  /tmp/ccSGDQKw.s 			page 142


1949:easyflash/src/ef_env.c ****         {
 4644              		.loc 1 1949 12 view .LVU1480
 4645              	.LBE309:
 4646              	.LBE308:
 4647              	.LBB311:
1961:easyflash/src/ef_env.c ****         /* the ENV has not write finish, change the status to error */
 4648              		.loc 1 1961 9 is_stmt 1 view .LVU1481
1963:easyflash/src/ef_env.c ****         return true;
 4649              		.loc 1 1963 9 view .LVU1482
 4650 0044 206B     		ldr	r0, [r4, #48]
 4651              	.LVL424:
1963:easyflash/src/ef_env.c ****         return true;
 4652              		.loc 1 1963 9 is_stmt 0 view .LVU1483
 4653 0046 0523     		movs	r3, #5
 4654 0048 0622     		movs	r2, #6
 4655              	.LVL425:
1963:easyflash/src/ef_env.c ****         return true;
 4656              		.loc 1 1963 9 view .LVU1484
 4657 004a 01A9     		add	r1, sp, #4
 4658              	.LVL426:
1963:easyflash/src/ef_env.c ****         return true;
 4659              		.loc 1 1963 9 view .LVU1485
 4660 004c FFF7FEFF 		bl	write_status
 4661              	.LVL427:
1964:easyflash/src/ef_env.c ****     }
 4662              		.loc 1 1964 9 is_stmt 1 view .LVU1486
1964:easyflash/src/ef_env.c ****     }
 4663              		.loc 1 1964 16 is_stmt 0 view .LVU1487
 4664 0050 3546     		mov	r5, r6
 4665              	.LBE311:
 4666              		.loc 1 1968 1 view .LVU1488
 4667 0052 2846     		mov	r0, r5
 4668 0054 06B0     		add	sp, sp, #24
 4669              		.cfi_remember_state
 4670              		.cfi_def_cfa_offset 16
 4671              		@ sp needed
 4672 0056 70BD     		pop	{r4, r5, r6, pc}
 4673              	.LVL428:
 4674              	.L428:
 4675              		.cfi_restore_state
 4676              	.LBB312:
 4677              	.LBB310:
1955:easyflash/src/ef_env.c ****             return true;
 4678              		.loc 1 1955 13 is_stmt 1 view .LVU1489
 4679 0058 A368     		ldr	r3, [r4, #8]
 4680 005a 064A     		ldr	r2, .L434+12
 4681 005c 0448     		ldr	r0, .L434+8
 4682 005e 40F2A371 		movw	r1, #1955
 4683 0062 FFF7FEFF 		bl	ef_log_debug
 4684              	.LVL429:
1956:easyflash/src/ef_env.c ****         }
 4685              		.loc 1 1956 13 view .LVU1490
1956:easyflash/src/ef_env.c ****         }
 4686              		.loc 1 1956 20 is_stmt 0 view .LVU1491
 4687 0066 D7E7     		b	.L429
 4688              	.L435:
 4689              		.align	2
ARM GAS  /tmp/ccSGDQKw.s 			page 143


 4690              	.L434:
 4691 0068 00000000 		.word	.LC16
 4692 006c 4C000000 		.word	.LC17
 4693 0070 3C000000 		.word	.LC2
 4694 0074 6C000000 		.word	.LC18
 4695              	.LBE310:
 4696              	.LBE312:
 4697              		.cfi_endproc
 4698              	.LFE287:
 4700              		.section	.rodata.do_gc.part.0.str1.4,"aMS",%progbits,1
 4701              		.align	2
 4702              	.LC19:
 4703 0000 4572726F 		.ascii	"Error: Moved the ENV (%.*s) for GC failed.\000"
 4703      723A204D 
 4703      6F766564 
 4703      20746865 
 4703      20454E56 
 4704 002b 00       		.align	2
 4705              	.LC20:
 4706 002c 436F6C6C 		.ascii	"Collect a sector @0x%08X\000"
 4706      65637420 
 4706      61207365 
 4706      63746F72 
 4706      20403078 
 4707              		.section	.text.do_gc.part.0,"ax",%progbits
 4708              		.align	1
 4709              		.p2align 2,,3
 4710              		.syntax unified
 4711              		.thumb
 4712              		.thumb_func
 4714              	do_gc.part.0:
 4715              	.LVL430:
 4716              	.LFB298:
1390:easyflash/src/ef_env.c **** {
 4717              		.loc 1 1390 13 is_stmt 1 view -0
 4718              		.cfi_startproc
 4719              		@ args = 0, pretend = 0, frame = 72
 4720              		@ frame_needed = 0, uses_anonymous_args = 0
 4721              	.LBB316:
1396:easyflash/src/ef_env.c ****         /* change the sector status to GC */
 4722              		.loc 1 1396 9 view .LVU1493
1398:easyflash/src/ef_env.c ****         /* search all ENV */
 4723              		.loc 1 1398 9 view .LVU1494
 4724              	.LBE316:
1390:easyflash/src/ef_env.c **** {
 4725              		.loc 1 1390 13 is_stmt 0 view .LVU1495
 4726 0000 70B5     		push	{r4, r5, r6, lr}
 4727              		.cfi_def_cfa_offset 16
 4728              		.cfi_offset 4, -16
 4729              		.cfi_offset 5, -12
 4730              		.cfi_offset 6, -8
 4731              		.cfi_offset 14, -4
 4732 0002 0446     		mov	r4, r0
 4733              	.LBB329:
1398:easyflash/src/ef_env.c ****         /* search all ENV */
 4734              		.loc 1 1398 9 view .LVU1496
 4735 0004 4068     		ldr	r0, [r0, #4]
ARM GAS  /tmp/ccSGDQKw.s 			page 144


 4736              	.LVL431:
1398:easyflash/src/ef_env.c ****         /* search all ENV */
 4737              		.loc 1 1398 9 view .LVU1497
 4738              	.LBE329:
1390:easyflash/src/ef_env.c **** {
 4739              		.loc 1 1390 13 view .LVU1498
 4740 0006 94B0     		sub	sp, sp, #80
 4741              		.cfi_def_cfa_offset 96
 4742              	.LBB330:
1398:easyflash/src/ef_env.c ****         /* search all ENV */
 4743              		.loc 1 1398 9 view .LVU1499
 4744 0008 0323     		movs	r3, #3
 4745 000a 0422     		movs	r2, #4
 4746 000c 03A9     		add	r1, sp, #12
 4747 000e 0C30     		adds	r0, r0, #12
 4748 0010 FFF7FEFF 		bl	write_status
 4749              	.LVL432:
1400:easyflash/src/ef_env.c ****         while ((env.addr.start = get_next_env_addr(sector, &env)) != FAILED_ADDR)
 4750              		.loc 1 1400 9 is_stmt 1 view .LVU1500
 4751              	.LBB317:
 4752              	.LBB318:
 548:easyflash/src/ef_env.c ****     {
 4753              		.loc 1 548 8 is_stmt 0 view .LVU1501
 4754 0014 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 4755              	.LBE318:
 4756              	.LBE317:
1400:easyflash/src/ef_env.c ****         while ((env.addr.start = get_next_env_addr(sector, &env)) != FAILED_ADDR)
 4757              		.loc 1 1400 24 view .LVU1502
 4758 0016 4FF0FF33 		mov	r3, #-1
 4759              	.LBB324:
 4760              	.LBB319:
 548:easyflash/src/ef_env.c ****     {
 4761              		.loc 1 548 8 view .LVU1503
 4762 001a 012A     		cmp	r2, #1
 4763              	.LBE319:
 4764              	.LBE324:
1400:easyflash/src/ef_env.c ****         while ((env.addr.start = get_next_env_addr(sector, &env)) != FAILED_ADDR)
 4765              		.loc 1 1400 24 view .LVU1504
 4766 001c 1293     		str	r3, [sp, #72]
1401:easyflash/src/ef_env.c ****         {
 4767              		.loc 1 1401 9 is_stmt 1 view .LVU1505
1401:easyflash/src/ef_env.c ****         {
 4768              		.loc 1 1401 15 view .LVU1506
 4769              	.LVL433:
 4770              	.LBB325:
 4771              	.LBI317:
 544:easyflash/src/ef_env.c **** {
 4772              		.loc 1 544 17 view .LVU1507
 4773              	.LBB320:
 546:easyflash/src/ef_env.c **** 
 4774              		.loc 1 546 5 view .LVU1508
 548:easyflash/src/ef_env.c ****     {
 4775              		.loc 1 548 5 view .LVU1509
 548:easyflash/src/ef_env.c ****     {
 4776              		.loc 1 548 8 is_stmt 0 view .LVU1510
 4777 001e 44D0     		beq	.L437
 4778              	.LBE320:
ARM GAS  /tmp/ccSGDQKw.s 			page 145


 4779              	.LBE325:
1409:easyflash/src/ef_env.c ****                 }
 4780              		.loc 1 1409 21 view .LVU1511
 4781 0020 2D4E     		ldr	r6, .L462
 4782 0022 2E4D     		ldr	r5, .L462+4
 4783 0024 2AE0     		b	.L438
 4784              	.LVL434:
 4785              	.L443:
 4786              	.LBB326:
 4787              	.LBB321:
 560:easyflash/src/ef_env.c ****         {
 4788              		.loc 1 560 9 is_stmt 1 view .LVU1512
 560:easyflash/src/ef_env.c ****         {
 4789              		.loc 1 560 42 is_stmt 0 view .LVU1513
 4790 0026 6168     		ldr	r1, [r4, #4]
 560:easyflash/src/ef_env.c ****         {
 4791              		.loc 1 560 49 view .LVU1514
 4792 0028 01F50032 		add	r2, r1, #131072
 560:easyflash/src/ef_env.c ****         {
 4793              		.loc 1 560 12 view .LVU1515
 4794 002c 9A42     		cmp	r2, r3
 4795 002e 2BD3     		bcc	.L445
 562:easyflash/src/ef_env.c ****             {
 4796              		.loc 1 562 13 is_stmt 1 view .LVU1516
 562:easyflash/src/ef_env.c ****             {
 4797              		.loc 1 562 16 is_stmt 0 view .LVU1517
 4798 0030 9DF81920 		ldrb	r2, [sp, #25]	@ zero_extendqisi2
 4799 0034 002A     		cmp	r2, #0
 4800 0036 36D0     		beq	.L446
 564:easyflash/src/ef_env.c ****             }
 4801              		.loc 1 564 17 is_stmt 1 view .LVU1518
 564:easyflash/src/ef_env.c ****             }
 4802              		.loc 1 564 22 is_stmt 0 view .LVU1519
 4803 0038 0898     		ldr	r0, [sp, #32]
 4804 003a 1844     		add	r0, r0, r3
 4805              	.LVL435:
 4806              	.L447:
 573:easyflash/src/ef_env.c **** 
 4807              		.loc 1 573 13 is_stmt 1 view .LVU1520
 573:easyflash/src/ef_env.c **** 
 4808              		.loc 1 573 20 is_stmt 0 view .LVU1521
 4809 003c 01F5FF31 		add	r1, r1, #130560
 4810 0040 01F5EE71 		add	r1, r1, #476
 4811 0044 FFF7FEFF 		bl	find_next_env_addr
 4812              	.LVL436:
 575:easyflash/src/ef_env.c ****             {
 4813              		.loc 1 575 30 view .LVU1522
 4814 0048 6168     		ldr	r1, [r4, #4]
 4815              	.LVL437:
 575:easyflash/src/ef_env.c ****             {
 4816              		.loc 1 575 13 is_stmt 1 view .LVU1523
 575:easyflash/src/ef_env.c ****             {
 4817              		.loc 1 575 37 is_stmt 0 view .LVU1524
 4818 004a 01F50032 		add	r2, r1, #131072
 575:easyflash/src/ef_env.c ****             {
 4819              		.loc 1 575 16 view .LVU1525
 4820 004e 9042     		cmp	r0, r2
ARM GAS  /tmp/ccSGDQKw.s 			page 146


 575:easyflash/src/ef_env.c ****             {
 4821              		.loc 1 575 30 view .LVU1526
 4822 0050 0B46     		mov	r3, r1
 575:easyflash/src/ef_env.c ****             {
 4823              		.loc 1 575 16 view .LVU1527
 4824 0052 19D8     		bhi	.L445
 575:easyflash/src/ef_env.c ****             {
 4825              		.loc 1 575 51 view .LVU1528
 4826 0054 089A     		ldr	r2, [sp, #32]
 4827 0056 BAB1     		cbz	r2, .L445
 4828              	.L444:
 4829              	.LVL438:
 575:easyflash/src/ef_env.c ****             {
 4830              		.loc 1 575 51 view .LVU1529
 4831              	.LBE321:
 4832              	.LBE326:
1401:easyflash/src/ef_env.c ****         {
 4833              		.loc 1 1401 32 view .LVU1530
 4834 0058 1290     		str	r0, [sp, #72]
1401:easyflash/src/ef_env.c ****         {
 4835              		.loc 1 1401 15 view .LVU1531
 4836 005a 0130     		adds	r0, r0, #1
 4837 005c 3AD0     		beq	.L460
1403:easyflash/src/ef_env.c ****             if (env.crc_is_ok && (env.status == ENV_WRITE || env.status == ENV_PRE_DELETE))
 4838              		.loc 1 1403 13 is_stmt 1 view .LVU1532
 4839 005e 06A8     		add	r0, sp, #24
 4840 0060 FFF7FEFF 		bl	read_env.isra.0
 4841              	.LVL439:
1404:easyflash/src/ef_env.c ****             {
 4842              		.loc 1 1404 13 view .LVU1533
1404:easyflash/src/ef_env.c ****             {
 4843              		.loc 1 1404 16 is_stmt 0 view .LVU1534
 4844 0064 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 4845 0068 23B1     		cbz	r3, .L440
1404:easyflash/src/ef_env.c ****             {
 4846              		.loc 1 1404 59 view .LVU1535
 4847 006a 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
1404:easyflash/src/ef_env.c ****             {
 4848              		.loc 1 1404 31 view .LVU1536
 4849 006e 023B     		subs	r3, r3, #2
 4850 0070 012B     		cmp	r3, #1
 4851 0072 1FD9     		bls	.L461
 4852              	.L440:
1401:easyflash/src/ef_env.c ****         {
 4853              		.loc 1 1401 15 is_stmt 1 view .LVU1537
 4854              	.LVL440:
 4855              	.LBB327:
 544:easyflash/src/ef_env.c **** {
 4856              		.loc 1 544 17 view .LVU1538
 4857              	.LBB322:
 546:easyflash/src/ef_env.c **** 
 4858              		.loc 1 546 5 view .LVU1539
 548:easyflash/src/ef_env.c ****     {
 4859              		.loc 1 548 5 view .LVU1540
 548:easyflash/src/ef_env.c ****     {
 4860              		.loc 1 548 8 is_stmt 0 view .LVU1541
 4861 0074 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
ARM GAS  /tmp/ccSGDQKw.s 			page 147


 4862 0076 012B     		cmp	r3, #1
 4863 0078 17D0     		beq	.L437
 553:easyflash/src/ef_env.c ****     {
 4864              		.loc 1 553 22 view .LVU1542
 4865 007a 129B     		ldr	r3, [sp, #72]
 4866              	.L438:
 4867              	.LVL441:
 553:easyflash/src/ef_env.c ****     {
 4868              		.loc 1 553 5 is_stmt 1 view .LVU1543
 553:easyflash/src/ef_env.c ****     {
 4869              		.loc 1 553 8 is_stmt 0 view .LVU1544
 4870 007c 5A1C     		adds	r2, r3, #1
 4871 007e D2D1     		bne	.L443
 4872              	.LVL442:
 556:easyflash/src/ef_env.c ****     }
 4873              		.loc 1 556 9 is_stmt 1 view .LVU1545
 556:easyflash/src/ef_env.c ****     }
 4874              		.loc 1 556 14 is_stmt 0 view .LVU1546
 4875 0080 6368     		ldr	r3, [r4, #4]
 4876 0082 03F12400 		add	r0, r3, #36
 4877              	.LVL443:
 556:easyflash/src/ef_env.c ****     }
 4878              		.loc 1 556 14 view .LVU1547
 4879 0086 E7E7     		b	.L444
 4880              	.LVL444:
 4881              	.L445:
 556:easyflash/src/ef_env.c ****     }
 4882              		.loc 1 556 14 view .LVU1548
 4883              	.LBE322:
 4884              	.LBE327:
1401:easyflash/src/ef_env.c ****         {
 4885              		.loc 1 1401 32 view .LVU1549
 4886 0088 4FF0FF33 		mov	r3, #-1
 4887 008c 1293     		str	r3, [sp, #72]
 4888              	.L442:
1413:easyflash/src/ef_env.c ****         EF_DEBUG("Collect a sector @0x%08X", sector->addr);
 4889              		.loc 1 1413 9 is_stmt 1 view .LVU1550
 4890 008e 0846     		mov	r0, r1
 4891 0090 FFF7FEFF 		bl	format_sector.constprop.0
 4892              	.LVL445:
1414:easyflash/src/ef_env.c ****     }
 4893              		.loc 1 1414 9 view .LVU1551
 4894 0094 6368     		ldr	r3, [r4, #4]
 4895 0096 124A     		ldr	r2, .L462+8
 4896 0098 1048     		ldr	r0, .L462+4
 4897 009a 40F28651 		movw	r1, #1414
 4898 009e FFF7FEFF 		bl	ef_log_debug
 4899              	.LVL446:
 4900              	.LBE330:
1418:easyflash/src/ef_env.c **** 
 4901              		.loc 1 1418 1 is_stmt 0 view .LVU1552
 4902 00a2 14B0     		add	sp, sp, #80
 4903              		.cfi_remember_state
 4904              		.cfi_def_cfa_offset 16
 4905              		@ sp needed
 4906 00a4 70BD     		pop	{r4, r5, r6, pc}
 4907              	.LVL447:
ARM GAS  /tmp/ccSGDQKw.s 			page 148


 4908              	.L446:
 4909              		.cfi_restore_state
 4910              	.LBB331:
 4911              	.LBB328:
 4912              	.LBB323:
 570:easyflash/src/ef_env.c ****             }
 4913              		.loc 1 570 17 is_stmt 1 view .LVU1553
 570:easyflash/src/ef_env.c ****             }
 4914              		.loc 1 570 22 is_stmt 0 view .LVU1554
 4915 00a6 181D     		adds	r0, r3, #4
 4916              	.LVL448:
 570:easyflash/src/ef_env.c ****             }
 4917              		.loc 1 570 22 view .LVU1555
 4918 00a8 C8E7     		b	.L447
 4919              	.LVL449:
 4920              	.L437:
 570:easyflash/src/ef_env.c ****             }
 4921              		.loc 1 570 22 view .LVU1556
 4922              	.LBE323:
 4923              	.LBE328:
1401:easyflash/src/ef_env.c ****         {
 4924              		.loc 1 1401 32 view .LVU1557
 4925 00aa 4FF0FF33 		mov	r3, #-1
1413:easyflash/src/ef_env.c ****         EF_DEBUG("Collect a sector @0x%08X", sector->addr);
 4926              		.loc 1 1413 9 view .LVU1558
 4927 00ae 6168     		ldr	r1, [r4, #4]
1401:easyflash/src/ef_env.c ****         {
 4928              		.loc 1 1401 32 view .LVU1559
 4929 00b0 1293     		str	r3, [sp, #72]
 4930 00b2 ECE7     		b	.L442
 4931              	.L461:
1407:easyflash/src/ef_env.c ****                 {
 4932              		.loc 1 1407 17 is_stmt 1 view .LVU1560
1407:easyflash/src/ef_env.c ****                 {
 4933              		.loc 1 1407 21 is_stmt 0 view .LVU1561
 4934 00b4 06A8     		add	r0, sp, #24
 4935 00b6 FFF7FEFF 		bl	move_env
 4936              	.LVL450:
1407:easyflash/src/ef_env.c ****                 {
 4937              		.loc 1 1407 20 view .LVU1562
 4938 00ba 0028     		cmp	r0, #0
 4939 00bc DAD0     		beq	.L440
1409:easyflash/src/ef_env.c ****                 }
 4940              		.loc 1 1409 21 is_stmt 1 view .LVU1563
 4941 00be 0AAB     		add	r3, sp, #40
 4942 00c0 0093     		str	r3, [sp]
 4943 00c2 3246     		mov	r2, r6
 4944 00c4 9DF81A30 		ldrb	r3, [sp, #26]	@ zero_extendqisi2
 4945 00c8 40F28151 		movw	r1, #1409
 4946 00cc 2846     		mov	r0, r5
 4947 00ce FFF7FEFF 		bl	ef_log_debug
 4948              	.LVL451:
 4949 00d2 CFE7     		b	.L440
 4950              	.L460:
1413:easyflash/src/ef_env.c ****         EF_DEBUG("Collect a sector @0x%08X", sector->addr);
 4951              		.loc 1 1413 9 is_stmt 0 view .LVU1564
 4952 00d4 1946     		mov	r1, r3
ARM GAS  /tmp/ccSGDQKw.s 			page 149


 4953 00d6 DAE7     		b	.L442
 4954              	.L463:
 4955              		.align	2
 4956              	.L462:
 4957 00d8 00000000 		.word	.LC19
 4958 00dc 3C000000 		.word	.LC2
 4959 00e0 2C000000 		.word	.LC20
 4960              	.LBE331:
 4961              		.cfi_endproc
 4962              	.LFE298:
 4964              		.section	.text.do_gc,"ax",%progbits
 4965              		.align	1
 4966              		.p2align 2,,3
 4967              		.syntax unified
 4968              		.thumb
 4969              		.thumb_func
 4971              	do_gc:
 4972              	.LVL452:
 4973              	.LFB271:
1391:easyflash/src/ef_env.c ****     struct env_node_obj env;
 4974              		.loc 1 1391 1 is_stmt 1 view -0
 4975              		.cfi_startproc
 4976              		@ args = 0, pretend = 0, frame = 0
 4977              		@ frame_needed = 0, uses_anonymous_args = 0
1392:easyflash/src/ef_env.c **** 
 4978              		.loc 1 1392 5 view .LVU1566
1394:easyflash/src/ef_env.c ****     {
 4979              		.loc 1 1394 5 view .LVU1567
1394:easyflash/src/ef_env.c ****     {
 4980              		.loc 1 1394 8 is_stmt 0 view .LVU1568
 4981 0000 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 4982              	.LVL453:
1394:easyflash/src/ef_env.c ****     {
 4983              		.loc 1 1394 8 view .LVU1569
 4984 0002 32B1     		cbz	r2, .L470
1391:easyflash/src/ef_env.c ****     struct env_node_obj env;
 4985              		.loc 1 1391 1 discriminator 1 view .LVU1570
 4986 0004 08B5     		push	{r3, lr}
 4987              		.cfi_def_cfa_offset 8
 4988              		.cfi_offset 3, -8
 4989              		.cfi_offset 14, -4
1394:easyflash/src/ef_env.c ****     {
 4990              		.loc 1 1394 72 discriminator 1 view .LVU1571
 4991 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
1394:easyflash/src/ef_env.c ****     {
 4992              		.loc 1 1394 26 discriminator 1 view .LVU1572
 4993 0008 023B     		subs	r3, r3, #2
 4994 000a 012B     		cmp	r3, #1
 4995 000c 03D9     		bls	.L473
1417:easyflash/src/ef_env.c **** }
 4996              		.loc 1 1417 5 is_stmt 1 view .LVU1573
1418:easyflash/src/ef_env.c **** 
 4997              		.loc 1 1418 1 is_stmt 0 view .LVU1574
 4998 000e 0020     		movs	r0, #0
 4999              	.LVL454:
1418:easyflash/src/ef_env.c **** 
 5000              		.loc 1 1418 1 view .LVU1575
ARM GAS  /tmp/ccSGDQKw.s 			page 150


 5001 0010 08BD     		pop	{r3, pc}
 5002              	.LVL455:
 5003              	.L470:
 5004              		.cfi_def_cfa_offset 0
 5005              		.cfi_restore 3
 5006              		.cfi_restore 14
1417:easyflash/src/ef_env.c **** }
 5007              		.loc 1 1417 5 is_stmt 1 view .LVU1576
1418:easyflash/src/ef_env.c **** 
 5008              		.loc 1 1418 1 is_stmt 0 view .LVU1577
 5009 0012 0020     		movs	r0, #0
 5010              	.LVL456:
1418:easyflash/src/ef_env.c **** 
 5011              		.loc 1 1418 1 view .LVU1578
 5012 0014 7047     		bx	lr
 5013              	.LVL457:
 5014              	.L473:
 5015              		.cfi_def_cfa_offset 8
 5016              		.cfi_offset 3, -8
 5017              		.cfi_offset 14, -4
1418:easyflash/src/ef_env.c **** 
 5018              		.loc 1 1418 1 view .LVU1579
 5019 0016 FFF7FEFF 		bl	do_gc.part.0
 5020              	.LVL458:
1417:easyflash/src/ef_env.c **** }
 5021              		.loc 1 1417 5 is_stmt 1 view .LVU1580
1418:easyflash/src/ef_env.c **** 
 5022              		.loc 1 1418 1 is_stmt 0 view .LVU1581
 5023 001a 0020     		movs	r0, #0
 5024 001c 08BD     		pop	{r3, pc}
 5025              		.cfi_endproc
 5026              	.LFE271:
 5028 001e 00BF     		.section	.rodata.gc_collect.str1.4,"aMS",%progbits,1
 5029              		.align	2
 5030              	.LC21:
 5031 0000 54686520 		.ascii	"The remain empty sector is %d, GC threshold is %d.\000"
 5031      72656D61 
 5031      696E2065 
 5031      6D707479 
 5031      20736563 
 5032              		.section	.text.gc_collect,"ax",%progbits
 5033              		.align	1
 5034              		.p2align 2,,3
 5035              		.syntax unified
 5036              		.thumb
 5037              		.thumb_func
 5039              	gc_collect:
 5040              	.LFB272:
1426:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 5041              		.loc 1 1426 1 is_stmt 1 view -0
 5042              		.cfi_startproc
 5043              		@ args = 0, pretend = 0, frame = 24
 5044              		@ frame_needed = 0, uses_anonymous_args = 0
1427:easyflash/src/ef_env.c ****     size_t empty_sec = 0;
 5045              		.loc 1 1427 5 view .LVU1583
1428:easyflash/src/ef_env.c **** 
 5046              		.loc 1 1428 5 view .LVU1584
ARM GAS  /tmp/ccSGDQKw.s 			page 151


 5047              	.LVL459:
1431:easyflash/src/ef_env.c **** 
 5048              		.loc 1 1431 5 view .LVU1585
1426:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 5049              		.loc 1 1426 1 is_stmt 0 view .LVU1586
 5050 0000 30B5     		push	{r4, r5, lr}
 5051              		.cfi_def_cfa_offset 12
 5052              		.cfi_offset 4, -12
 5053              		.cfi_offset 5, -8
 5054              		.cfi_offset 14, -4
 5055              	.LBB346:
 5056              	.LBB347:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 5057              		.loc 1 1134 18 view .LVU1587
 5058 0002 4FF0FF30 		mov	r0, #-1
 5059              	.LBE347:
 5060              	.LBE346:
1426:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 5061              		.loc 1 1426 1 view .LVU1588
 5062 0006 89B0     		sub	sp, sp, #36
 5063              		.cfi_def_cfa_offset 48
 5064              	.LVL460:
 5065              	.LBB364:
 5066              	.LBI346:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 5067              		.loc 1 1128 13 is_stmt 1 view .LVU1589
 5068              	.LBB362:
1131:easyflash/src/ef_env.c **** 
 5069              		.loc 1 1131 5 view .LVU1590
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 5070              		.loc 1 1134 5 view .LVU1591
 5071              	.LBB348:
 5072              	.LBB349:
 749:easyflash/src/ef_env.c ****     {
 5073              		.loc 1 749 8 is_stmt 0 view .LVU1592
 5074 0008 411C     		adds	r1, r0, #1
 5075 000a 354C     		ldr	r4, .L506
 5076              	.LBE349:
 5077              	.LBE348:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 5078              		.loc 1 1134 18 view .LVU1593
 5079 000c 0390     		str	r0, [sp, #12]
1135:easyflash/src/ef_env.c ****     {
 5080              		.loc 1 1135 5 is_stmt 1 view .LVU1594
 5081              	.LBE362:
 5082              	.LBE364:
1428:easyflash/src/ef_env.c **** 
 5083              		.loc 1 1428 12 is_stmt 0 view .LVU1595
 5084 000e 4FF00005 		mov	r5, #0
 5085              	.LVL461:
 5086              	.LBB365:
 5087              	.LBB363:
1135:easyflash/src/ef_env.c ****     {
 5088              		.loc 1 1135 11 is_stmt 1 view .LVU1596
 5089              	.LBB353:
 5090              	.LBI348:
 745:easyflash/src/ef_env.c **** {
ARM GAS  /tmp/ccSGDQKw.s 			page 152


 5091              		.loc 1 745 17 view .LVU1597
 5092              	.LBB350:
 747:easyflash/src/ef_env.c **** 
 5093              		.loc 1 747 5 view .LVU1598
 749:easyflash/src/ef_env.c ****     {
 5094              		.loc 1 749 5 view .LVU1599
 749:easyflash/src/ef_env.c ****     {
 5095              		.loc 1 749 8 is_stmt 0 view .LVU1600
 5096 0012 1BD0     		beq	.L502
 5097              	.L479:
 756:easyflash/src/ef_env.c ****         {
 5098              		.loc 1 756 9 is_stmt 1 view .LVU1601
 756:easyflash/src/ef_env.c ****         {
 5099              		.loc 1 756 20 is_stmt 0 view .LVU1602
 5100 0014 059B     		ldr	r3, [sp, #20]
 756:easyflash/src/ef_env.c ****         {
 5101              		.loc 1 756 12 view .LVU1603
 5102 0016 5A1C     		adds	r2, r3, #1
 758:easyflash/src/ef_env.c ****         }
 5103              		.loc 1 758 13 is_stmt 1 view .LVU1604
 762:easyflash/src/ef_env.c ****         }
 5104              		.loc 1 762 23 is_stmt 0 view .LVU1605
 5105 0018 18BF     		it	ne
 5106 001a 00EB4340 		addne	r0, r0, r3, lsl #17
 765:easyflash/src/ef_env.c ****         {
 5107              		.loc 1 765 40 view .LVU1606
 5108 001e 2368     		ldr	r3, [r4]
 758:easyflash/src/ef_env.c ****         }
 5109              		.loc 1 758 23 view .LVU1607
 5110 0020 08BF     		it	eq
 5111 0022 00F50030 		addeq	r0, r0, #131072
 762:easyflash/src/ef_env.c ****         }
 5112              		.loc 1 762 13 is_stmt 1 view .LVU1608
 5113              	.LVL462:
 765:easyflash/src/ef_env.c ****         {
 5114              		.loc 1 765 9 view .LVU1609
 765:easyflash/src/ef_env.c ****         {
 5115              		.loc 1 765 40 is_stmt 0 view .LVU1610
 5116 0026 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
 5117              		.loc 1 765 12 view .LVU1611
 5118 002a 8342     		cmp	r3, r0
 5119 002c 20D9     		bls	.L483
 5120              	.LVL463:
 5121              	.L480:
 765:easyflash/src/ef_env.c ****         {
 5122              		.loc 1 765 12 view .LVU1612
 5123              	.LBE350:
 5124              	.LBE353:
1135:easyflash/src/ef_env.c ****     {
 5125              		.loc 1 1135 11 view .LVU1613
 5126 002e 431C     		adds	r3, r0, #1
 5127 0030 1ED0     		beq	.L483
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 5128              		.loc 1 1137 9 is_stmt 1 view .LVU1614
 5129              	.LVL464:
 5130              	.LBB354:
ARM GAS  /tmp/ccSGDQKw.s 			page 153


 5131              	.LBI354:
 658:easyflash/src/ef_env.c **** {
 5132              		.loc 1 658 18 view .LVU1615
 5133              	.LBB355:
 660:easyflash/src/ef_env.c ****     struct sector_hdr_data sec_hdr;
 5134              		.loc 1 660 5 view .LVU1616
 661:easyflash/src/ef_env.c **** 
 5135              		.loc 1 661 5 view .LVU1617
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5136              		.loc 1 663 5 view .LVU1618
 5137 0032 C0F31002 		ubfx	r2, r0, #0, #17
 5138 0036 5AB9     		cbnz	r2, .L503
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5139              		.loc 1 663 39 view .LVU1619
 664:easyflash/src/ef_env.c **** 
 5140              		.loc 1 664 5 view .LVU1620
 5141 0038 02A9     		add	r1, sp, #8
 5142              	.LVL465:
 664:easyflash/src/ef_env.c **** 
 5143              		.loc 1 664 5 is_stmt 0 view .LVU1621
 5144 003a FFF7FEFF 		bl	read_sector_meta_data.part.0
 5145              	.LVL466:
 664:easyflash/src/ef_env.c **** 
 5146              		.loc 1 664 5 view .LVU1622
 5147              	.LBE355:
 5148              	.LBE354:
1138:easyflash/src/ef_env.c ****         {
 5149              		.loc 1 1138 9 is_stmt 1 view .LVU1623
1138:easyflash/src/ef_env.c ****         {
 5150              		.loc 1 1138 43 is_stmt 0 view .LVU1624
 5151 003e 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 5152 0042 012B     		cmp	r3, #1
 5153 0044 0ED0     		beq	.L504
 5154              	.L478:
 5155              	.LBB357:
 5156              	.LBB351:
 749:easyflash/src/ef_env.c ****     {
 5157              		.loc 1 749 16 view .LVU1625
 5158 0046 0398     		ldr	r0, [sp, #12]
 749:easyflash/src/ef_env.c ****     {
 5159              		.loc 1 749 16 view .LVU1626
 5160              	.LBE351:
 5161              	.LBE357:
1135:easyflash/src/ef_env.c ****     {
 5162              		.loc 1 1135 11 is_stmt 1 view .LVU1627
 5163              	.LVL467:
 5164              	.LBB358:
 745:easyflash/src/ef_env.c **** {
 5165              		.loc 1 745 17 view .LVU1628
 5166              	.LBB352:
 747:easyflash/src/ef_env.c **** 
 5167              		.loc 1 747 5 view .LVU1629
 749:easyflash/src/ef_env.c ****     {
 5168              		.loc 1 749 5 view .LVU1630
 749:easyflash/src/ef_env.c ****     {
 5169              		.loc 1 749 8 is_stmt 0 view .LVU1631
 5170 0048 411C     		adds	r1, r0, #1
ARM GAS  /tmp/ccSGDQKw.s 			page 154


 5171 004a E3D1     		bne	.L479
 5172              	.L502:
 751:easyflash/src/ef_env.c ****     }
 5173              		.loc 1 751 9 is_stmt 1 view .LVU1632
 751:easyflash/src/ef_env.c ****     }
 5174              		.loc 1 751 16 is_stmt 0 view .LVU1633
 5175 004c 2068     		ldr	r0, [r4]
 5176 004e EEE7     		b	.L480
 5177              	.LVL468:
 5178              	.L503:
 751:easyflash/src/ef_env.c ****     }
 5179              		.loc 1 751 16 view .LVU1634
 5180              	.LBE352:
 5181              	.LBE358:
 5182              	.LBB359:
 5183              	.LBB356:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5184              		.loc 1 663 5 is_stmt 1 view .LVU1635
 5185 0050 2449     		ldr	r1, .L506+4
 5186 0052 0091     		str	r1, [sp]
 5187 0054 244B     		ldr	r3, .L506+8
 5188 0056 254A     		ldr	r2, .L506+12
 5189 0058 2548     		ldr	r0, .L506+16
 5190              	.LVL469:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5191              		.loc 1 663 5 is_stmt 0 view .LVU1636
 5192 005a 40F29721 		movw	r1, #663
 5193 005e FFF7FEFF 		bl	ef_log_debug
 5194              	.LVL470:
 5195              	.L477:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5196              		.loc 1 663 5 is_stmt 1 view .LVU1637
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5197              		.loc 1 663 5 view .LVU1638
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5198              		.loc 1 663 5 view .LVU1639
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5199              		.loc 1 663 5 view .LVU1640
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5200              		.loc 1 663 5 view .LVU1641
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5201              		.loc 1 663 5 view .LVU1642
 5202 0062 FEE7     		b	.L477
 5203              	.LVL471:
 5204              	.L504:
 663:easyflash/src/ef_env.c ****     EF_ASSERT(sector);
 5205              		.loc 1 663 5 is_stmt 0 view .LVU1643
 5206              	.LBE356:
 5207              	.LBE359:
1140:easyflash/src/ef_env.c ****             {
 5208              		.loc 1 1140 13 is_stmt 1 view .LVU1644
1145:easyflash/src/ef_env.c ****             {
 5209              		.loc 1 1145 13 view .LVU1645
 5210              	.LBB360:
 5211              	.LBI360:
1377:easyflash/src/ef_env.c **** {
 5212              		.loc 1 1377 13 view .LVU1646
ARM GAS  /tmp/ccSGDQKw.s 			page 155


 5213              	.LBB361:
1379:easyflash/src/ef_env.c **** 
 5214              		.loc 1 1379 5 view .LVU1647
1381:easyflash/src/ef_env.c ****     {
 5215              		.loc 1 1381 5 view .LVU1648
1381:easyflash/src/ef_env.c ****     {
 5216              		.loc 1 1381 8 is_stmt 0 view .LVU1649
 5217 0064 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 5218 0068 002B     		cmp	r3, #0
 5219 006a ECD0     		beq	.L478
1383:easyflash/src/ef_env.c ****     }
 5220              		.loc 1 1383 9 is_stmt 1 view .LVU1650
1383:easyflash/src/ef_env.c ****     }
 5221              		.loc 1 1383 33 is_stmt 0 view .LVU1651
 5222 006c 0135     		adds	r5, r5, #1
 5223              	.LVL472:
1383:easyflash/src/ef_env.c ****     }
 5224              		.loc 1 1383 33 view .LVU1652
 5225 006e EAE7     		b	.L478
 5226              	.LVL473:
 5227              	.L483:
1383:easyflash/src/ef_env.c ****     }
 5228              		.loc 1 1383 33 view .LVU1653
 5229              	.LBE361:
 5230              	.LBE360:
 5231              	.LBE363:
 5232              	.LBE365:
1434:easyflash/src/ef_env.c ****     if (empty_sec <= EF_GC_EMPTY_SEC_THRESHOLD)
 5233              		.loc 1 1434 5 is_stmt 1 view .LVU1654
 5234 0070 0123     		movs	r3, #1
 5235 0072 0093     		str	r3, [sp]
 5236 0074 1F4A     		ldr	r2, .L506+20
 5237 0076 1E48     		ldr	r0, .L506+16
 5238 0078 2B46     		mov	r3, r5
 5239 007a 40F29A51 		movw	r1, #1434
 5240 007e FFF7FEFF 		bl	ef_log_debug
 5241              	.LVL474:
1435:easyflash/src/ef_env.c ****     {
 5242              		.loc 1 1435 5 view .LVU1655
1435:easyflash/src/ef_env.c ****     {
 5243              		.loc 1 1435 8 is_stmt 0 view .LVU1656
 5244 0082 012D     		cmp	r5, #1
 5245 0084 04D9     		bls	.L485
 5246              	.L492:
1440:easyflash/src/ef_env.c **** }
 5247              		.loc 1 1440 5 is_stmt 1 view .LVU1657
1440:easyflash/src/ef_env.c **** }
 5248              		.loc 1 1440 16 is_stmt 0 view .LVU1658
 5249 0086 1C4B     		ldr	r3, .L506+24
 5250 0088 0022     		movs	r2, #0
 5251 008a 1A70     		strb	r2, [r3]
 5252              	.LVL475:
1441:easyflash/src/ef_env.c **** 
 5253              		.loc 1 1441 1 view .LVU1659
 5254 008c 09B0     		add	sp, sp, #36
 5255              		.cfi_remember_state
 5256              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccSGDQKw.s 			page 156


 5257              		@ sp needed
 5258 008e 30BD     		pop	{r4, r5, pc}
 5259              	.LVL476:
 5260              	.L485:
 5261              		.cfi_restore_state
1437:easyflash/src/ef_env.c ****     }
 5262              		.loc 1 1437 9 is_stmt 1 view .LVU1660
 5263              	.LBB366:
 5264              	.LBI366:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 5265              		.loc 1 1128 13 view .LVU1661
 5266              	.LBB367:
1131:easyflash/src/ef_env.c **** 
 5267              		.loc 1 1131 5 view .LVU1662
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 5268              		.loc 1 1134 5 view .LVU1663
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 5269              		.loc 1 1134 18 is_stmt 0 view .LVU1664
 5270 0090 4FF0FF30 		mov	r0, #-1
 5271 0094 0390     		str	r0, [sp, #12]
1135:easyflash/src/ef_env.c ****     {
 5272              		.loc 1 1135 5 is_stmt 1 view .LVU1665
1135:easyflash/src/ef_env.c ****     {
 5273              		.loc 1 1135 11 is_stmt 0 view .LVU1666
 5274 0096 1BE0     		b	.L486
 5275              	.LVL477:
 5276              	.L488:
 5277              	.LBB368:
 5278              	.LBB369:
 756:easyflash/src/ef_env.c ****         {
 5279              		.loc 1 756 9 is_stmt 1 view .LVU1667
 756:easyflash/src/ef_env.c ****         {
 5280              		.loc 1 756 20 is_stmt 0 view .LVU1668
 5281 0098 059B     		ldr	r3, [sp, #20]
 756:easyflash/src/ef_env.c ****         {
 5282              		.loc 1 756 12 view .LVU1669
 5283 009a 5A1C     		adds	r2, r3, #1
 758:easyflash/src/ef_env.c ****         }
 5284              		.loc 1 758 13 is_stmt 1 view .LVU1670
 762:easyflash/src/ef_env.c ****         }
 5285              		.loc 1 762 23 is_stmt 0 view .LVU1671
 5286 009c 18BF     		it	ne
 5287 009e 00EB4340 		addne	r0, r0, r3, lsl #17
 765:easyflash/src/ef_env.c ****         {
 5288              		.loc 1 765 40 view .LVU1672
 5289 00a2 2368     		ldr	r3, [r4]
 758:easyflash/src/ef_env.c ****         }
 5290              		.loc 1 758 23 view .LVU1673
 5291 00a4 08BF     		it	eq
 5292 00a6 00F50030 		addeq	r0, r0, #131072
 762:easyflash/src/ef_env.c ****         }
 5293              		.loc 1 762 13 is_stmt 1 view .LVU1674
 5294              	.LVL478:
 765:easyflash/src/ef_env.c ****         {
 5295              		.loc 1 765 9 view .LVU1675
 765:easyflash/src/ef_env.c ****         {
 5296              		.loc 1 765 40 is_stmt 0 view .LVU1676
ARM GAS  /tmp/ccSGDQKw.s 			page 157


 5297 00aa 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
 5298              		.loc 1 765 12 view .LVU1677
 5299 00ae 8342     		cmp	r3, r0
 5300 00b0 E9D9     		bls	.L492
 5301              	.LVL479:
 5302              	.L489:
 765:easyflash/src/ef_env.c ****         {
 5303              		.loc 1 765 12 view .LVU1678
 5304              	.LBE369:
 5305              	.LBE368:
1135:easyflash/src/ef_env.c ****     {
 5306              		.loc 1 1135 11 view .LVU1679
 5307 00b2 431C     		adds	r3, r0, #1
 5308 00b4 E7D0     		beq	.L492
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 5309              		.loc 1 1137 9 is_stmt 1 view .LVU1680
 5310 00b6 0022     		movs	r2, #0
 5311 00b8 02A9     		add	r1, sp, #8
 5312              	.LVL480:
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 5313              		.loc 1 1137 9 is_stmt 0 view .LVU1681
 5314 00ba FFF7FEFF 		bl	read_sector_meta_data
 5315              	.LVL481:
1138:easyflash/src/ef_env.c ****         {
 5316              		.loc 1 1138 9 is_stmt 1 view .LVU1682
1140:easyflash/src/ef_env.c ****             {
 5317              		.loc 1 1140 13 view .LVU1683
1145:easyflash/src/ef_env.c ****             {
 5318              		.loc 1 1145 13 view .LVU1684
 5319              	.LBB372:
 5320              	.LBI372:
1390:easyflash/src/ef_env.c **** {
 5321              		.loc 1 1390 13 view .LVU1685
 5322              	.LBB373:
1392:easyflash/src/ef_env.c **** 
 5323              		.loc 1 1392 5 view .LVU1686
1394:easyflash/src/ef_env.c ****     {
 5324              		.loc 1 1394 5 view .LVU1687
1394:easyflash/src/ef_env.c ****     {
 5325              		.loc 1 1394 8 is_stmt 0 view .LVU1688
 5326 00be 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 5327 00c2 23B1     		cbz	r3, .L487
1394:easyflash/src/ef_env.c ****     {
 5328              		.loc 1 1394 72 view .LVU1689
 5329 00c4 9DF80A30 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
1394:easyflash/src/ef_env.c ****     {
 5330              		.loc 1 1394 26 view .LVU1690
 5331 00c8 023B     		subs	r3, r3, #2
 5332 00ca 012B     		cmp	r3, #1
 5333 00cc 04D9     		bls	.L505
 5334              	.L487:
 5335              	.LBE373:
 5336              	.LBE372:
 5337              	.LBB375:
 5338              	.LBB370:
 749:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 158


 5339              		.loc 1 749 16 view .LVU1691
 5340 00ce 0398     		ldr	r0, [sp, #12]
 5341              	.LVL482:
 5342              	.L486:
 749:easyflash/src/ef_env.c ****     {
 5343              		.loc 1 749 16 view .LVU1692
 5344              	.LBE370:
 5345              	.LBE375:
1135:easyflash/src/ef_env.c ****     {
 5346              		.loc 1 1135 11 is_stmt 1 view .LVU1693
 5347              	.LBB376:
 5348              	.LBI368:
 745:easyflash/src/ef_env.c **** {
 5349              		.loc 1 745 17 view .LVU1694
 5350              	.LBB371:
 747:easyflash/src/ef_env.c **** 
 5351              		.loc 1 747 5 view .LVU1695
 749:easyflash/src/ef_env.c ****     {
 5352              		.loc 1 749 5 view .LVU1696
 749:easyflash/src/ef_env.c ****     {
 5353              		.loc 1 749 8 is_stmt 0 view .LVU1697
 5354 00d0 411C     		adds	r1, r0, #1
 5355 00d2 E1D1     		bne	.L488
 751:easyflash/src/ef_env.c ****     }
 5356              		.loc 1 751 9 is_stmt 1 view .LVU1698
 751:easyflash/src/ef_env.c ****     }
 5357              		.loc 1 751 16 is_stmt 0 view .LVU1699
 5358 00d4 2068     		ldr	r0, [r4]
 5359 00d6 ECE7     		b	.L489
 5360              	.LVL483:
 5361              	.L505:
 751:easyflash/src/ef_env.c ****     }
 5362              		.loc 1 751 16 view .LVU1700
 5363              	.LBE371:
 5364              	.LBE376:
 5365              	.LBB377:
 5366              	.LBB374:
 5367 00d8 02A8     		add	r0, sp, #8
 5368              	.LVL484:
 751:easyflash/src/ef_env.c ****     }
 5369              		.loc 1 751 16 view .LVU1701
 5370 00da FFF7FEFF 		bl	do_gc.part.0
 5371              	.LVL485:
 751:easyflash/src/ef_env.c ****     }
 5372              		.loc 1 751 16 view .LVU1702
 5373 00de F6E7     		b	.L487
 5374              	.L507:
 5375              		.align	2
 5376              	.L506:
 5377 00e0 00000000 		.word	.LANCHOR7
 5378 00e4 00000000 		.word	.LANCHOR6
 5379 00e8 00000000 		.word	.LC8
 5380 00ec 1C000000 		.word	.LC1
 5381 00f0 3C000000 		.word	.LC2
 5382 00f4 00000000 		.word	.LC21
 5383 00f8 00000000 		.word	.LANCHOR2
 5384              	.LBE374:
ARM GAS  /tmp/ccSGDQKw.s 			page 159


 5385              	.LBE377:
 5386              	.LBE367:
 5387              	.LBE366:
 5388              		.cfi_endproc
 5389              	.LFE272:
 5391              		.section	.rodata.create_env_blob.str1.4,"aMS",%progbits,1
 5392              		.align	2
 5393              	.LC22:
 5394 0000 4572726F 		.ascii	"Error: The ENV name length is more than %d\000"
 5394      723A2054 
 5394      68652045 
 5394      4E56206E 
 5394      616D6520 
 5395 002b 00       		.align	2
 5396              	.LC23:
 5397 002c 4572726F 		.ascii	"Error: The ENV size is too big\000"
 5397      723A2054 
 5397      68652045 
 5397      4E562073 
 5397      697A6520 
 5398 004b 00       		.align	2
 5399              	.LC24:
 5400 004c 5761726E 		.ascii	"Warning: Alloc an ENV (size %d) failed when new ENV"
 5400      696E673A 
 5400      20416C6C 
 5400      6F632061 
 5400      6E20454E 
 5401 007f 2E204E6F 		.ascii	". Now will GC then retry.\000"
 5401      77207769 
 5401      6C6C2047 
 5401      43207468 
 5401      656E2072 
 5402 0099 000000   		.align	2
 5403              	.LC25:
 5404 009c 54726967 		.ascii	"Trigger a GC check after created ENV.\000"
 5404      67657220 
 5404      61204743 
 5404      20636865 
 5404      636B2061 
 5405              		.section	.text.create_env_blob,"ax",%progbits
 5406              		.align	1
 5407              		.p2align 2,,3
 5408              		.syntax unified
 5409              		.thumb
 5410              		.thumb_func
 5412              	create_env_blob:
 5413              	.LVL486:
 5414              	.LFB274:
1471:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 5415              		.loc 1 1471 1 is_stmt 1 view -0
 5416              		.cfi_startproc
 5417              		@ args = 0, pretend = 0, frame = 48
 5418              		@ frame_needed = 0, uses_anonymous_args = 0
1472:easyflash/src/ef_env.c ****     struct env_hdr_data env_hdr;
 5419              		.loc 1 1472 5 view .LVU1704
1473:easyflash/src/ef_env.c ****     bool is_full = false;
 5420              		.loc 1 1473 5 view .LVU1705
ARM GAS  /tmp/ccSGDQKw.s 			page 160


1474:easyflash/src/ef_env.c ****     uint32_t env_addr = sector->empty_env;
 5421              		.loc 1 1474 5 view .LVU1706
1471:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 5422              		.loc 1 1471 1 is_stmt 0 view .LVU1707
 5423 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5424              		.cfi_def_cfa_offset 28
 5425              		.cfi_offset 4, -28
 5426              		.cfi_offset 5, -24
 5427              		.cfi_offset 6, -20
 5428              		.cfi_offset 7, -16
 5429              		.cfi_offset 8, -12
 5430              		.cfi_offset 9, -8
 5431              		.cfi_offset 14, -4
 5432 0004 0F46     		mov	r7, r1
 5433 0006 8DB0     		sub	sp, sp, #52
 5434              		.cfi_def_cfa_offset 80
1474:easyflash/src/ef_env.c ****     uint32_t env_addr = sector->empty_env;
 5435              		.loc 1 1474 10 view .LVU1708
 5436 0008 0021     		movs	r1, #0
 5437              	.LVL487:
1471:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 5438              		.loc 1 1471 1 view .LVU1709
 5439 000a 0646     		mov	r6, r0
1477:easyflash/src/ef_env.c ****     {
 5440              		.loc 1 1477 9 view .LVU1710
 5441 000c 3846     		mov	r0, r7
 5442              	.LVL488:
1471:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 5443              		.loc 1 1471 1 view .LVU1711
 5444 000e 9146     		mov	r9, r2
 5445 0010 1D46     		mov	r5, r3
1474:easyflash/src/ef_env.c ****     uint32_t env_addr = sector->empty_env;
 5446              		.loc 1 1474 10 view .LVU1712
 5447 0012 8DF80610 		strb	r1, [sp, #6]
1475:easyflash/src/ef_env.c **** 
 5448              		.loc 1 1475 5 is_stmt 1 view .LVU1713
 5449              	.LVL489:
1477:easyflash/src/ef_env.c ****     {
 5450              		.loc 1 1477 5 view .LVU1714
1477:easyflash/src/ef_env.c ****     {
 5451              		.loc 1 1477 9 is_stmt 0 view .LVU1715
 5452 0016 FFF7FEFF 		bl	strlen
 5453              	.LVL490:
1477:easyflash/src/ef_env.c ****     {
 5454              		.loc 1 1477 8 view .LVU1716
 5455 001a 2028     		cmp	r0, #32
 5456 001c 00F2C080 		bhi	.L538
 5457 0020 0446     		mov	r4, r0
1483:easyflash/src/ef_env.c ****     env_hdr.magic = ENV_MAGIC_WORD;
 5458              		.loc 1 1483 5 view .LVU1717
 5459 0022 2422     		movs	r2, #36
 5460 0024 FF21     		movs	r1, #255
 5461 0026 02A8     		add	r0, sp, #8
1475:easyflash/src/ef_env.c **** 
 5462              		.loc 1 1475 14 view .LVU1718
 5463 0028 D6F81480 		ldr	r8, [r6, #20]
 5464              	.LVL491:
ARM GAS  /tmp/ccSGDQKw.s 			page 161


1483:easyflash/src/ef_env.c ****     env_hdr.magic = ENV_MAGIC_WORD;
 5465              		.loc 1 1483 5 is_stmt 1 view .LVU1719
 5466 002c FFF7FEFF 		bl	memset
 5467              	.LVL492:
1484:easyflash/src/ef_env.c ****     env_hdr.name_len = strlen(key);
 5468              		.loc 1 1484 5 view .LVU1720
1485:easyflash/src/ef_env.c ****     env_hdr.value_len = len;
 5469              		.loc 1 1485 22 is_stmt 0 view .LVU1721
 5470 0030 8DF82840 		strb	r4, [sp, #40]
1487:easyflash/src/ef_env.c **** 
 5471              		.loc 1 1487 39 view .LVU1722
 5472 0034 0334     		adds	r4, r4, #3
1487:easyflash/src/ef_env.c **** 
 5473              		.loc 1 1487 69 view .LVU1723
 5474 0036 24F00300 		bic	r0, r4, #3
1487:easyflash/src/ef_env.c **** 
 5475              		.loc 1 1487 71 view .LVU1724
 5476 003a EC1C     		adds	r4, r5, #3
 5477 003c 24F00304 		bic	r4, r4, #3
1489:easyflash/src/ef_env.c ****     {
 5478              		.loc 1 1489 8 view .LVU1725
 5479 0040 704B     		ldr	r3, .L544
1484:easyflash/src/ef_env.c ****     env_hdr.name_len = strlen(key);
 5480              		.loc 1 1484 19 view .LVU1726
 5481 0042 714A     		ldr	r2, .L544+4
1486:easyflash/src/ef_env.c ****     env_hdr.len = ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + EF_WG_ALIGN(env_hdr.value_len
 5482              		.loc 1 1486 23 view .LVU1727
 5483 0044 0B95     		str	r5, [sp, #44]
1487:easyflash/src/ef_env.c **** 
 5484              		.loc 1 1487 69 view .LVU1728
 5485 0046 2834     		adds	r4, r4, #40
 5486 0048 0444     		add	r4, r4, r0
1489:easyflash/src/ef_env.c ****     {
 5487              		.loc 1 1489 8 view .LVU1729
 5488 004a 9C42     		cmp	r4, r3
1487:easyflash/src/ef_env.c **** 
 5489              		.loc 1 1487 17 view .LVU1730
 5490 004c 0894     		str	r4, [sp, #32]
1484:easyflash/src/ef_env.c ****     env_hdr.name_len = strlen(key);
 5491              		.loc 1 1484 19 view .LVU1731
 5492 004e 0792     		str	r2, [sp, #28]
1485:easyflash/src/ef_env.c ****     env_hdr.value_len = len;
 5493              		.loc 1 1485 5 is_stmt 1 view .LVU1732
1486:easyflash/src/ef_env.c ****     env_hdr.len = ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + EF_WG_ALIGN(env_hdr.value_len
 5494              		.loc 1 1486 5 view .LVU1733
1487:easyflash/src/ef_env.c **** 
 5495              		.loc 1 1487 5 view .LVU1734
1489:easyflash/src/ef_env.c ****     {
 5496              		.loc 1 1489 5 view .LVU1735
1489:easyflash/src/ef_env.c ****     {
 5497              		.loc 1 1489 8 is_stmt 0 view .LVU1736
 5498 0050 00F2D380 		bhi	.L539
1495:easyflash/src/ef_env.c ****     {
 5499              		.loc 1 1495 5 is_stmt 1 view .LVU1737
1495:easyflash/src/ef_env.c ****     {
 5500              		.loc 1 1495 8 is_stmt 0 view .LVU1738
 5501 0054 B8F1FF3F 		cmp	r8, #-1
ARM GAS  /tmp/ccSGDQKw.s 			page 162


 5502 0058 0BD0     		beq	.L540
 5503              	.LVL493:
 5504              	.L512:
 5505              	.LBB384:
1497:easyflash/src/ef_env.c ****         /* update the sector status */
 5506              		.loc 1 1497 9 is_stmt 1 view .LVU1739
1499:easyflash/src/ef_env.c ****         {
 5507              		.loc 1 1499 9 view .LVU1740
1501:easyflash/src/ef_env.c ****         }
 5508              		.loc 1 1501 13 view .LVU1741
1501:easyflash/src/ef_env.c ****         }
 5509              		.loc 1 1501 22 is_stmt 0 view .LVU1742
 5510 005a 2146     		mov	r1, r4
 5511 005c 0DF10602 		add	r2, sp, #6
 5512 0060 3046     		mov	r0, r6
 5513 0062 FFF7FEFF 		bl	update_sec_status
 5514              	.LVL494:
1503:easyflash/src/ef_env.c ****         {
 5515              		.loc 1 1503 9 is_stmt 1 view .LVU1743
1503:easyflash/src/ef_env.c ****         {
 5516              		.loc 1 1503 12 is_stmt 0 view .LVU1744
 5517 0066 0446     		mov	r4, r0
 5518 0068 B0B1     		cbz	r0, .L541
 5519              	.LVL495:
 5520              	.L510:
1503:easyflash/src/ef_env.c ****         {
 5521              		.loc 1 1503 12 view .LVU1745
 5522              	.LBE384:
1562:easyflash/src/ef_env.c **** 
 5523              		.loc 1 1562 1 view .LVU1746
 5524 006a 2046     		mov	r0, r4
 5525 006c 0DB0     		add	sp, sp, #52
 5526              		.cfi_remember_state
 5527              		.cfi_def_cfa_offset 28
 5528              		@ sp needed
 5529 006e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5530              	.LVL496:
 5531              	.L540:
 5532              		.cfi_restore_state
 5533              	.LBB388:
 5534              	.LBB389:
1359:easyflash/src/ef_env.c ****     {
 5535              		.loc 1 1359 5 is_stmt 1 view .LVU1747
1359:easyflash/src/ef_env.c ****     {
 5536              		.loc 1 1359 22 is_stmt 0 view .LVU1748
 5537 0072 2146     		mov	r1, r4
 5538 0074 3046     		mov	r0, r6
 5539 0076 FFF7FEFF 		bl	alloc_env
 5540              	.LVL497:
1359:easyflash/src/ef_env.c ****     {
 5541              		.loc 1 1359 8 view .LVU1749
 5542 007a B0F1FF3F 		cmp	r0, #-1
1359:easyflash/src/ef_env.c ****     {
 5543              		.loc 1 1359 22 view .LVU1750
 5544 007e 8046     		mov	r8, r0
 5545              	.LVL498:
1359:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 163


 5546              		.loc 1 1359 8 view .LVU1751
 5547 0080 40F0A980 		bne	.L513
1359:easyflash/src/ef_env.c ****     {
 5548              		.loc 1 1359 66 view .LVU1752
 5549 0084 614D     		ldr	r5, .L544+8
 5550              	.LVL499:
1359:easyflash/src/ef_env.c ****     {
 5551              		.loc 1 1359 66 view .LVU1753
 5552 0086 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 5553 0088 002B     		cmp	r3, #0
 5554 008a 40F09280 		bne	.L542
 5555              	.LVL500:
 5556              	.L523:
1359:easyflash/src/ef_env.c ****     {
 5557              		.loc 1 1359 66 view .LVU1754
 5558              	.LBE389:
 5559              	.LBE388:
1558:easyflash/src/ef_env.c ****     }
 5560              		.loc 1 1558 16 view .LVU1755
 5561 008e 0624     		movs	r4, #6
 5562              	.LVL501:
1562:easyflash/src/ef_env.c **** 
 5563              		.loc 1 1562 1 view .LVU1756
 5564 0090 2046     		mov	r0, r4
 5565 0092 0DB0     		add	sp, sp, #52
 5566              		.cfi_remember_state
 5567              		.cfi_def_cfa_offset 28
 5568              		@ sp needed
 5569 0094 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5570              	.LVL502:
 5571              	.L541:
 5572              		.cfi_restore_state
 5573              	.LBB391:
 5574              	.LBB385:
1505:easyflash/src/ef_env.c ****             /* start calculate CRC32 */
 5575              		.loc 1 1505 13 is_stmt 1 view .LVU1757
1505:easyflash/src/ef_env.c ****             /* start calculate CRC32 */
 5576              		.loc 1 1505 21 is_stmt 0 view .LVU1758
 5577 0098 FF23     		movs	r3, #255
1507:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, key, env_hdr.name_len);
 5578              		.loc 1 1507 29 view .LVU1759
 5579 009a 0822     		movs	r2, #8
 5580 009c 0AA9     		add	r1, sp, #40
1505:easyflash/src/ef_env.c ****             /* start calculate CRC32 */
 5581              		.loc 1 1505 21 view .LVU1760
 5582 009e 8DF80730 		strb	r3, [sp, #7]
1507:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, key, env_hdr.name_len);
 5583              		.loc 1 1507 13 is_stmt 1 view .LVU1761
1507:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, key, env_hdr.name_len);
 5584              		.loc 1 1507 29 is_stmt 0 view .LVU1762
 5585 00a2 FFF7FEFF 		bl	ef_calc_crc32
 5586              	.LVL503:
1508:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.name_len) - env_hdr.name_len;
 5587              		.loc 1 1508 29 view .LVU1763
 5588 00a6 9DF82820 		ldrb	r2, [sp, #40]	@ zero_extendqisi2
1507:easyflash/src/ef_env.c ****             env_hdr.crc32 = ef_calc_crc32(env_hdr.crc32, key, env_hdr.name_len);
 5589              		.loc 1 1507 27 view .LVU1764
ARM GAS  /tmp/ccSGDQKw.s 			page 164


 5590 00aa 0990     		str	r0, [sp, #36]
1508:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.name_len) - env_hdr.name_len;
 5591              		.loc 1 1508 13 is_stmt 1 view .LVU1765
1508:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.name_len) - env_hdr.name_len;
 5592              		.loc 1 1508 29 is_stmt 0 view .LVU1766
 5593 00ac 3946     		mov	r1, r7
 5594 00ae FFF7FEFF 		bl	ef_calc_crc32
 5595              	.LVL504:
1509:easyflash/src/ef_env.c ****             while (align_remain--)
 5596              		.loc 1 1509 28 view .LVU1767
 5597 00b2 9DF82830 		ldrb	r3, [sp, #40]	@ zero_extendqisi2
1508:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.name_len) - env_hdr.name_len;
 5598              		.loc 1 1508 27 view .LVU1768
 5599 00b6 0990     		str	r0, [sp, #36]
1509:easyflash/src/ef_env.c ****             while (align_remain--)
 5600              		.loc 1 1509 13 is_stmt 1 view .LVU1769
1509:easyflash/src/ef_env.c ****             while (align_remain--)
 5601              		.loc 1 1509 28 is_stmt 0 view .LVU1770
 5602 00b8 DD1C     		adds	r5, r3, #3
 5603 00ba 25F00305 		bic	r5, r5, #3
 5604              	.LVL505:
1510:easyflash/src/ef_env.c ****             {
 5605              		.loc 1 1510 13 is_stmt 1 view .LVU1771
1510:easyflash/src/ef_env.c ****             {
 5606              		.loc 1 1510 19 view .LVU1772
1510:easyflash/src/ef_env.c ****             {
 5607              		.loc 1 1510 19 is_stmt 0 view .LVU1773
 5608 00be ED1A     		subs	r5, r5, r3
 5609              	.LVL506:
1510:easyflash/src/ef_env.c ****             {
 5610              		.loc 1 1510 19 view .LVU1774
 5611 00c0 08D0     		beq	.L516
 5612 00c2 0DF10704 		add	r4, sp, #7
 5613              	.LVL507:
 5614              	.L517:
1512:easyflash/src/ef_env.c ****             }
 5615              		.loc 1 1512 17 is_stmt 1 view .LVU1775
1512:easyflash/src/ef_env.c ****             }
 5616              		.loc 1 1512 33 is_stmt 0 view .LVU1776
 5617 00c6 0122     		movs	r2, #1
 5618 00c8 2146     		mov	r1, r4
 5619 00ca FFF7FEFF 		bl	ef_calc_crc32
 5620              	.LVL508:
1510:easyflash/src/ef_env.c ****             {
 5621              		.loc 1 1510 19 view .LVU1777
 5622 00ce 013D     		subs	r5, r5, #1
 5623              	.LVL509:
1512:easyflash/src/ef_env.c ****             }
 5624              		.loc 1 1512 31 view .LVU1778
 5625 00d0 0990     		str	r0, [sp, #36]
1510:easyflash/src/ef_env.c ****             {
 5626              		.loc 1 1510 19 is_stmt 1 view .LVU1779
 5627              	.LVL510:
1510:easyflash/src/ef_env.c ****             {
 5628              		.loc 1 1510 19 is_stmt 0 view .LVU1780
 5629 00d2 F8D1     		bne	.L517
 5630              	.L516:
ARM GAS  /tmp/ccSGDQKw.s 			page 165


1514:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.value_len) - env_hdr.value_len;
 5631              		.loc 1 1514 13 is_stmt 1 view .LVU1781
1514:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.value_len) - env_hdr.value_len;
 5632              		.loc 1 1514 29 is_stmt 0 view .LVU1782
 5633 00d4 0B9A     		ldr	r2, [sp, #44]
 5634 00d6 4946     		mov	r1, r9
 5635 00d8 FFF7FEFF 		bl	ef_calc_crc32
 5636              	.LVL511:
1515:easyflash/src/ef_env.c ****             while (align_remain--)
 5637              		.loc 1 1515 28 view .LVU1783
 5638 00dc 0B9A     		ldr	r2, [sp, #44]
1514:easyflash/src/ef_env.c ****             align_remain = EF_WG_ALIGN(env_hdr.value_len) - env_hdr.value_len;
 5639              		.loc 1 1514 27 view .LVU1784
 5640 00de 0990     		str	r0, [sp, #36]
1515:easyflash/src/ef_env.c ****             while (align_remain--)
 5641              		.loc 1 1515 13 is_stmt 1 view .LVU1785
1515:easyflash/src/ef_env.c ****             while (align_remain--)
 5642              		.loc 1 1515 28 is_stmt 0 view .LVU1786
 5643 00e0 D31C     		adds	r3, r2, #3
 5644 00e2 23F00303 		bic	r3, r3, #3
1515:easyflash/src/ef_env.c ****             while (align_remain--)
 5645              		.loc 1 1515 26 view .LVU1787
 5646 00e6 9B1A     		subs	r3, r3, r2
 5647              	.LVL512:
1516:easyflash/src/ef_env.c ****             {
 5648              		.loc 1 1516 13 is_stmt 1 view .LVU1788
1516:easyflash/src/ef_env.c ****             {
 5649              		.loc 1 1516 19 view .LVU1789
1516:easyflash/src/ef_env.c ****             {
 5650              		.loc 1 1516 32 is_stmt 0 view .LVU1790
 5651 00e8 5D1E     		subs	r5, r3, #1
 5652              	.LVL513:
1516:easyflash/src/ef_env.c ****             {
 5653              		.loc 1 1516 19 view .LVU1791
 5654 00ea 4BB1     		cbz	r3, .L521
 5655 00ec 0DF10704 		add	r4, sp, #7
 5656              	.L518:
1518:easyflash/src/ef_env.c ****             }
 5657              		.loc 1 1518 17 is_stmt 1 view .LVU1792
1518:easyflash/src/ef_env.c ****             }
 5658              		.loc 1 1518 33 is_stmt 0 view .LVU1793
 5659 00f0 0122     		movs	r2, #1
 5660 00f2 2146     		mov	r1, r4
 5661 00f4 FFF7FEFF 		bl	ef_calc_crc32
 5662              	.LVL514:
1516:easyflash/src/ef_env.c ****             {
 5663              		.loc 1 1516 32 view .LVU1794
 5664 00f8 013D     		subs	r5, r5, #1
 5665              	.LVL515:
1516:easyflash/src/ef_env.c ****             {
 5666              		.loc 1 1516 19 view .LVU1795
 5667 00fa 6B1C     		adds	r3, r5, #1
1518:easyflash/src/ef_env.c ****             }
 5668              		.loc 1 1518 31 view .LVU1796
 5669 00fc 0990     		str	r0, [sp, #36]
 5670              	.LVL516:
1516:easyflash/src/ef_env.c ****             {
ARM GAS  /tmp/ccSGDQKw.s 			page 166


 5671              		.loc 1 1516 19 is_stmt 1 view .LVU1797
1516:easyflash/src/ef_env.c ****             {
 5672              		.loc 1 1516 19 is_stmt 0 view .LVU1798
 5673 00fe F7D1     		bne	.L518
 5674              	.L521:
1521:easyflash/src/ef_env.c **** 
 5675              		.loc 1 1521 13 is_stmt 1 view .LVU1799
 5676              	.LVL517:
 5677              	.LBB386:
 5678              	.LBI386:
1047:easyflash/src/ef_env.c **** {
 5679              		.loc 1 1047 18 view .LVU1800
 5680              	.LBB387:
1049:easyflash/src/ef_env.c ****     /* write the status will by write granularity */
 5681              		.loc 1 1049 5 view .LVU1801
1051:easyflash/src/ef_env.c ****     if (result != EF_NO_ERR)
 5682              		.loc 1 1051 5 view .LVU1802
1051:easyflash/src/ef_env.c ****     if (result != EF_NO_ERR)
 5683              		.loc 1 1051 14 is_stmt 0 view .LVU1803
 5684 0100 0123     		movs	r3, #1
 5685 0102 0622     		movs	r2, #6
 5686 0104 02A9     		add	r1, sp, #8
 5687              	.LVL518:
1051:easyflash/src/ef_env.c ****     if (result != EF_NO_ERR)
 5688              		.loc 1 1051 14 view .LVU1804
 5689 0106 4046     		mov	r0, r8
 5690 0108 FFF7FEFF 		bl	write_status
 5691              	.LVL519:
1052:easyflash/src/ef_env.c ****     {
 5692              		.loc 1 1052 5 is_stmt 1 view .LVU1805
1052:easyflash/src/ef_env.c ****     {
 5693              		.loc 1 1052 8 is_stmt 0 view .LVU1806
 5694 010c 0446     		mov	r4, r0
 5695 010e 0028     		cmp	r0, #0
 5696 0110 ABD1     		bne	.L510
1057:easyflash/src/ef_env.c **** 
 5697              		.loc 1 1057 5 is_stmt 1 view .LVU1807
1057:easyflash/src/ef_env.c **** 
 5698              		.loc 1 1057 14 is_stmt 0 view .LVU1808
 5699 0112 1422     		movs	r2, #20
 5700 0114 07A9     		add	r1, sp, #28
 5701 0116 08EB0200 		add	r0, r8, r2
 5702              	.LVL520:
1057:easyflash/src/ef_env.c **** 
 5703              		.loc 1 1057 14 view .LVU1809
 5704 011a FFF7FEFF 		bl	ef_port_write
 5705              	.LVL521:
1059:easyflash/src/ef_env.c **** }
 5706              		.loc 1 1059 5 is_stmt 1 view .LVU1810
1059:easyflash/src/ef_env.c **** }
 5707              		.loc 1 1059 5 is_stmt 0 view .LVU1811
 5708              	.LBE387:
 5709              	.LBE386:
 5710              	.LBE385:
1525:easyflash/src/ef_env.c ****         {
 5711              		.loc 1 1525 9 is_stmt 1 view .LVU1812
1525:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 167


 5712              		.loc 1 1525 12 is_stmt 0 view .LVU1813
 5713 011e 0446     		mov	r4, r0
 5714 0120 0028     		cmp	r0, #0
 5715 0122 A2D1     		bne	.L510
1527:easyflash/src/ef_env.c **** 
 5716              		.loc 1 1527 13 is_stmt 1 view .LVU1814
1527:easyflash/src/ef_env.c **** 
 5717              		.loc 1 1527 22 is_stmt 0 view .LVU1815
 5718 0124 9DF82820 		ldrb	r2, [sp, #40]	@ zero_extendqisi2
 5719 0128 3946     		mov	r1, r7
 5720 012a 08F12800 		add	r0, r8, #40
 5721              	.LVL522:
1527:easyflash/src/ef_env.c **** 
 5722              		.loc 1 1527 22 view .LVU1816
 5723 012e FFF7FEFF 		bl	align_write
 5724              	.LVL523:
1530:easyflash/src/ef_env.c ****             {
 5725              		.loc 1 1530 16 view .LVU1817
 5726 0132 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
1527:easyflash/src/ef_env.c **** 
 5727              		.loc 1 1527 22 view .LVU1818
 5728 0136 0446     		mov	r4, r0
 5729              	.LVL524:
1530:easyflash/src/ef_env.c ****             {
 5730              		.loc 1 1530 13 is_stmt 1 view .LVU1819
1530:easyflash/src/ef_env.c ****             {
 5731              		.loc 1 1530 16 is_stmt 0 view .LVU1820
 5732 0138 002B     		cmp	r3, #0
 5733 013a 4ED0     		beq	.L543
 5734              	.L522:
1535:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
 5735              		.loc 1 1535 13 is_stmt 1 view .LVU1821
 5736 013c 9DF82810 		ldrb	r1, [sp, #40]	@ zero_extendqisi2
 5737 0140 3846     		mov	r0, r7
 5738 0142 4246     		mov	r2, r8
 5739 0144 FFF7FEFF 		bl	update_env_cache
 5740              	.LVL525:
1539:easyflash/src/ef_env.c ****         {
 5741              		.loc 1 1539 9 view .LVU1822
1539:easyflash/src/ef_env.c ****         {
 5742              		.loc 1 1539 12 is_stmt 0 view .LVU1823
 5743 0148 002C     		cmp	r4, #0
 5744 014a 8ED1     		bne	.L510
1541:easyflash/src/ef_env.c ****                                  env_hdr.value_len);
 5745              		.loc 1 1541 13 is_stmt 1 view .LVU1824
1541:easyflash/src/ef_env.c ****                                  env_hdr.value_len);
 5746              		.loc 1 1541 65 is_stmt 0 view .LVU1825
 5747 014c 9DF82800 		ldrb	r0, [sp, #40]	@ zero_extendqisi2
1541:easyflash/src/ef_env.c ****                                  env_hdr.value_len);
 5748              		.loc 1 1541 22 view .LVU1826
 5749 0150 0B9A     		ldr	r2, [sp, #44]
1541:easyflash/src/ef_env.c ****                                  env_hdr.value_len);
 5750              		.loc 1 1541 65 view .LVU1827
 5751 0152 0330     		adds	r0, r0, #3
 5752 0154 20F00300 		bic	r0, r0, #3
1541:easyflash/src/ef_env.c ****                                  env_hdr.value_len);
 5753              		.loc 1 1541 22 view .LVU1828
ARM GAS  /tmp/ccSGDQKw.s 			page 168


 5754 0158 2830     		adds	r0, r0, #40
 5755 015a 4946     		mov	r1, r9
 5756 015c 4044     		add	r0, r0, r8
 5757 015e FFF7FEFF 		bl	align_write
 5758              	.LVL526:
1545:easyflash/src/ef_env.c ****         {
 5759              		.loc 1 1545 9 is_stmt 1 view .LVU1829
1545:easyflash/src/ef_env.c ****         {
 5760              		.loc 1 1545 12 is_stmt 0 view .LVU1830
 5761 0162 0446     		mov	r4, r0
 5762 0164 0028     		cmp	r0, #0
 5763 0166 80D1     		bne	.L510
1547:easyflash/src/ef_env.c ****         }
 5764              		.loc 1 1547 13 is_stmt 1 view .LVU1831
1547:easyflash/src/ef_env.c ****         }
 5765              		.loc 1 1547 22 is_stmt 0 view .LVU1832
 5766 0168 0223     		movs	r3, #2
 5767 016a 0622     		movs	r2, #6
 5768 016c 02A9     		add	r1, sp, #8
 5769 016e 4046     		mov	r0, r8
 5770              	.LVL527:
1547:easyflash/src/ef_env.c ****         }
 5771              		.loc 1 1547 22 view .LVU1833
 5772 0170 FFF7FEFF 		bl	write_status
 5773              	.LVL528:
1550:easyflash/src/ef_env.c ****         {
 5774              		.loc 1 1550 9 is_stmt 1 view .LVU1834
1550:easyflash/src/ef_env.c ****         {
 5775              		.loc 1 1550 12 is_stmt 0 view .LVU1835
 5776 0174 0446     		mov	r4, r0
 5777 0176 0028     		cmp	r0, #0
 5778 0178 7FF477AF 		bne	.L510
1550:easyflash/src/ef_env.c ****         {
 5779              		.loc 1 1550 33 discriminator 1 view .LVU1836
 5780 017c 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 5781 0180 002B     		cmp	r3, #0
 5782 0182 3FF472AF 		beq	.L510
1552:easyflash/src/ef_env.c ****             gc_request = true;
 5783              		.loc 1 1552 13 is_stmt 1 view .LVU1837
 5784 0186 224A     		ldr	r2, .L544+12
 5785 0188 2248     		ldr	r0, .L544+16
 5786              	.LVL529:
1552:easyflash/src/ef_env.c ****             gc_request = true;
 5787              		.loc 1 1552 13 is_stmt 0 view .LVU1838
 5788 018a 4FF4C261 		mov	r1, #1552
 5789 018e FFF7FEFF 		bl	ef_log_debug
 5790              	.LVL530:
1553:easyflash/src/ef_env.c ****         }
 5791              		.loc 1 1553 13 is_stmt 1 view .LVU1839
1553:easyflash/src/ef_env.c ****         }
 5792              		.loc 1 1553 24 is_stmt 0 view .LVU1840
 5793 0192 1E4B     		ldr	r3, .L544+8
 5794 0194 0122     		movs	r2, #1
 5795              	.LBE391:
1562:easyflash/src/ef_env.c **** 
 5796              		.loc 1 1562 1 view .LVU1841
 5797 0196 2046     		mov	r0, r4
ARM GAS  /tmp/ccSGDQKw.s 			page 169


 5798              	.LBB392:
1553:easyflash/src/ef_env.c ****         }
 5799              		.loc 1 1553 24 view .LVU1842
 5800 0198 1A70     		strb	r2, [r3]
 5801              	.LVL531:
1553:easyflash/src/ef_env.c ****         }
 5802              		.loc 1 1553 24 view .LVU1843
 5803              	.LBE392:
1562:easyflash/src/ef_env.c **** 
 5804              		.loc 1 1562 1 view .LVU1844
 5805 019a 0DB0     		add	sp, sp, #52
 5806              		.cfi_remember_state
 5807              		.cfi_def_cfa_offset 28
 5808              		@ sp needed
 5809 019c BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5810              	.LVL532:
 5811              	.L538:
 5812              		.cfi_restore_state
1479:easyflash/src/ef_env.c ****         return EF_ENV_NAME_ERR;
 5813              		.loc 1 1479 9 is_stmt 1 view .LVU1845
 5814 01a0 1D48     		ldr	r0, .L544+20
 5815 01a2 2021     		movs	r1, #32
 5816 01a4 FFF7FEFF 		bl	ef_log_info
 5817              	.LVL533:
1480:easyflash/src/ef_env.c ****     }
 5818              		.loc 1 1480 9 view .LVU1846
1480:easyflash/src/ef_env.c ****     }
 5819              		.loc 1 1480 16 is_stmt 0 view .LVU1847
 5820 01a8 0424     		movs	r4, #4
 5821              	.LVL534:
1562:easyflash/src/ef_env.c **** 
 5822              		.loc 1 1562 1 view .LVU1848
 5823 01aa 2046     		mov	r0, r4
 5824 01ac 0DB0     		add	sp, sp, #52
 5825              		.cfi_remember_state
 5826              		.cfi_def_cfa_offset 28
 5827              		@ sp needed
 5828 01ae BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5829              	.LVL535:
 5830              	.L542:
 5831              		.cfi_restore_state
 5832              	.LBB393:
 5833              	.LBB390:
1361:easyflash/src/ef_env.c ****         gc_collect();
 5834              		.loc 1 1361 9 is_stmt 1 view .LVU1849
 5835 01b2 1A4A     		ldr	r2, .L544+24
 5836 01b4 1748     		ldr	r0, .L544+16
 5837              	.LVL536:
1361:easyflash/src/ef_env.c ****         gc_collect();
 5838              		.loc 1 1361 9 is_stmt 0 view .LVU1850
 5839 01b6 2346     		mov	r3, r4
 5840 01b8 40F25151 		movw	r1, #1361
 5841 01bc FFF7FEFF 		bl	ef_log_debug
 5842              	.LVL537:
1362:easyflash/src/ef_env.c ****         already_gc = true;
 5843              		.loc 1 1362 9 is_stmt 1 view .LVU1851
 5844 01c0 FFF7FEFF 		bl	gc_collect
ARM GAS  /tmp/ccSGDQKw.s 			page 170


 5845              	.LVL538:
1363:easyflash/src/ef_env.c ****         goto __retry;
 5846              		.loc 1 1363 9 view .LVU1852
1364:easyflash/src/ef_env.c ****     }
 5847              		.loc 1 1364 9 view .LVU1853
 5848              	.LDL1:
1359:easyflash/src/ef_env.c ****     {
 5849              		.loc 1 1359 5 view .LVU1854
1359:easyflash/src/ef_env.c ****     {
 5850              		.loc 1 1359 22 is_stmt 0 view .LVU1855
 5851 01c4 2146     		mov	r1, r4
 5852 01c6 3046     		mov	r0, r6
 5853 01c8 FFF7FEFF 		bl	alloc_env
 5854              	.LVL539:
1359:easyflash/src/ef_env.c ****     {
 5855              		.loc 1 1359 8 view .LVU1856
 5856 01cc B0F1FF3F 		cmp	r0, #-1
1359:easyflash/src/ef_env.c ****     {
 5857              		.loc 1 1359 22 view .LVU1857
 5858 01d0 8046     		mov	r8, r0
 5859              	.LVL540:
1359:easyflash/src/ef_env.c ****     {
 5860              		.loc 1 1359 8 view .LVU1858
 5861 01d2 3FF45CAF 		beq	.L523
 5862              	.LVL541:
 5863              	.L513:
1359:easyflash/src/ef_env.c ****     {
 5864              		.loc 1 1359 8 view .LVU1859
 5865              	.LBE390:
 5866              	.LBE393:
 5867              	.LBB394:
1501:easyflash/src/ef_env.c ****         }
 5868              		.loc 1 1501 55 view .LVU1860
 5869 01d6 089C     		ldr	r4, [sp, #32]
 5870 01d8 3FE7     		b	.L512
 5871              	.LVL542:
 5872              	.L543:
1532:easyflash/src/ef_env.c ****                                     env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + 
 5873              		.loc 1 1532 17 is_stmt 1 view .LVU1861
1533:easyflash/src/ef_env.c ****             }
 5874              		.loc 1 1533 100 is_stmt 0 view .LVU1862
 5875 01da 0B9B     		ldr	r3, [sp, #44]
1532:easyflash/src/ef_env.c ****                                     env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + 
 5876              		.loc 1 1532 17 view .LVU1863
 5877 01dc 7068     		ldr	r0, [r6, #4]
1533:easyflash/src/ef_env.c ****             }
 5878              		.loc 1 1533 100 view .LVU1864
 5879 01de D91C     		adds	r1, r3, #3
1533:easyflash/src/ef_env.c ****             }
 5880              		.loc 1 1533 68 view .LVU1865
 5881 01e0 9DF82830 		ldrb	r3, [sp, #40]	@ zero_extendqisi2
1533:easyflash/src/ef_env.c ****             }
 5882              		.loc 1 1533 100 view .LVU1866
 5883 01e4 21F00301 		bic	r1, r1, #3
1533:easyflash/src/ef_env.c ****             }
 5884              		.loc 1 1533 68 view .LVU1867
 5885 01e8 0333     		adds	r3, r3, #3
ARM GAS  /tmp/ccSGDQKw.s 			page 171


 5886 01ea 23F00303 		bic	r3, r3, #3
1532:easyflash/src/ef_env.c ****                                     env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + 
 5887              		.loc 1 1532 17 view .LVU1868
 5888 01ee 2831     		adds	r1, r1, #40
 5889 01f0 1944     		add	r1, r1, r3
 5890 01f2 4144     		add	r1, r1, r8
 5891 01f4 FFF7FEFF 		bl	update_sector_cache
 5892              	.LVL543:
 5893 01f8 A0E7     		b	.L522
 5894              	.LVL544:
 5895              	.L539:
1532:easyflash/src/ef_env.c ****                                     env_addr + ENV_HDR_DATA_SIZE + EF_WG_ALIGN(env_hdr.name_len) + 
 5896              		.loc 1 1532 17 view .LVU1869
 5897              	.LBE394:
1491:easyflash/src/ef_env.c ****         return EF_ENV_FULL;
 5898              		.loc 1 1491 9 is_stmt 1 view .LVU1870
 5899 01fa 0948     		ldr	r0, .L544+28
 5900 01fc FFF7FEFF 		bl	ef_log_info
 5901              	.LVL545:
1492:easyflash/src/ef_env.c ****     }
 5902              		.loc 1 1492 9 view .LVU1871
1492:easyflash/src/ef_env.c ****     }
 5903              		.loc 1 1492 16 is_stmt 0 view .LVU1872
 5904 0200 0624     		movs	r4, #6
 5905 0202 32E7     		b	.L510
 5906              	.L545:
 5907              		.align	2
 5908              	.L544:
 5909 0204 DCFF0100 		.word	131036
 5910 0208 4B563430 		.word	808736331
 5911 020c 00000000 		.word	.LANCHOR2
 5912 0210 9C000000 		.word	.LC25
 5913 0214 3C000000 		.word	.LC2
 5914 0218 00000000 		.word	.LC22
 5915 021c 4C000000 		.word	.LC24
 5916 0220 2C000000 		.word	.LC23
 5917              		.cfi_endproc
 5918              	.LFE274:
 5920              		.section	.text.check_and_recovery_gc_cb,"ax",%progbits
 5921              		.align	1
 5922              		.p2align 2,,3
 5923              		.syntax unified
 5924              		.thumb
 5925              		.thumb_func
 5927              	check_and_recovery_gc_cb:
 5928              	.LVL546:
 5929              	.LFB286:
1930:easyflash/src/ef_env.c ****     if (sector->check_ok && sector->status.dirty == SECTOR_DIRTY_GC)
 5930              		.loc 1 1930 1 is_stmt 1 view -0
 5931              		.cfi_startproc
 5932              		@ args = 0, pretend = 0, frame = 0
 5933              		@ frame_needed = 0, uses_anonymous_args = 0
1931:easyflash/src/ef_env.c ****     {
 5934              		.loc 1 1931 5 view .LVU1874
1930:easyflash/src/ef_env.c ****     if (sector->check_ok && sector->status.dirty == SECTOR_DIRTY_GC)
 5935              		.loc 1 1930 1 is_stmt 0 view .LVU1875
 5936 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/ccSGDQKw.s 			page 172


 5937              		.cfi_def_cfa_offset 8
 5938              		.cfi_offset 3, -8
 5939              		.cfi_offset 14, -4
1931:easyflash/src/ef_env.c ****     {
 5940              		.loc 1 1931 8 view .LVU1876
 5941 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 5942 0004 13B1     		cbz	r3, .L547
 5943              	.LBB397:
 5944              	.LBI397:
1929:easyflash/src/ef_env.c **** {
 5945              		.loc 1 1929 13 is_stmt 1 discriminator 1 view .LVU1877
 5946              	.LVL547:
 5947              	.LBB398:
1931:easyflash/src/ef_env.c ****     {
 5948              		.loc 1 1931 26 is_stmt 0 discriminator 1 view .LVU1878
 5949 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 5950 0008 032B     		cmp	r3, #3
 5951 000a 01D0     		beq	.L552
 5952              	.LVL548:
 5953              	.L547:
1931:easyflash/src/ef_env.c ****     {
 5954              		.loc 1 1931 26 discriminator 1 view .LVU1879
 5955              	.LBE398:
 5956              	.LBE397:
1939:easyflash/src/ef_env.c **** }
 5957              		.loc 1 1939 5 is_stmt 1 view .LVU1880
1940:easyflash/src/ef_env.c **** 
 5958              		.loc 1 1940 1 is_stmt 0 view .LVU1881
 5959 000c 0020     		movs	r0, #0
 5960              	.LVL549:
1940:easyflash/src/ef_env.c **** 
 5961              		.loc 1 1940 1 view .LVU1882
 5962 000e 08BD     		pop	{r3, pc}
 5963              	.LVL550:
 5964              	.L552:
 5965              	.LBB400:
 5966              	.LBB399:
1934:easyflash/src/ef_env.c ****         /* resume the GC operate */
 5967              		.loc 1 1934 9 is_stmt 1 view .LVU1883
1934:easyflash/src/ef_env.c ****         /* resume the GC operate */
 5968              		.loc 1 1934 20 is_stmt 0 view .LVU1884
 5969 0010 034B     		ldr	r3, .L553
 5970 0012 0122     		movs	r2, #1
 5971              	.LVL551:
1934:easyflash/src/ef_env.c ****         /* resume the GC operate */
 5972              		.loc 1 1934 20 view .LVU1885
 5973 0014 1A70     		strb	r2, [r3]
1936:easyflash/src/ef_env.c ****     }
 5974              		.loc 1 1936 9 is_stmt 1 view .LVU1886
 5975 0016 FFF7FEFF 		bl	gc_collect
 5976              	.LVL552:
1936:easyflash/src/ef_env.c ****     }
 5977              		.loc 1 1936 9 is_stmt 0 view .LVU1887
 5978              	.LBE399:
 5979              	.LBE400:
1939:easyflash/src/ef_env.c **** }
 5980              		.loc 1 1939 5 is_stmt 1 view .LVU1888
ARM GAS  /tmp/ccSGDQKw.s 			page 173


1940:easyflash/src/ef_env.c **** 
 5981              		.loc 1 1940 1 is_stmt 0 view .LVU1889
 5982 001a 0020     		movs	r0, #0
 5983 001c 08BD     		pop	{r3, pc}
 5984              	.L554:
 5985 001e 00BF     		.align	2
 5986              	.L553:
 5987 0020 00000000 		.word	.LANCHOR2
 5988              		.cfi_endproc
 5989              	.LFE286:
 5991              		.section	.rodata.ef_get_env_obj.str1.4,"aMS",%progbits,1
 5992              		.align	2
 5993              	.LC26:
 5994 0000 454E5620 		.ascii	"ENV isn't initialize OK.\000"
 5994      69736E27 
 5994      7420696E 
 5994      69746961 
 5994      6C697A65 
 5995              		.section	.text.ef_get_env_obj,"ax",%progbits
 5996              		.align	1
 5997              		.p2align 2,,3
 5998              		.global	ef_get_env_obj
 5999              		.syntax unified
 6000              		.thumb
 6001              		.thumb_func
 6003              	ef_get_env_obj:
 6004              	.LVL553:
 6005              	.LFB255:
 919:easyflash/src/ef_env.c ****     bool find_ok = false;
 6006              		.loc 1 919 1 is_stmt 1 view -0
 6007              		.cfi_startproc
 6008              		@ args = 0, pretend = 0, frame = 0
 6009              		@ frame_needed = 0, uses_anonymous_args = 0
 920:easyflash/src/ef_env.c **** 
 6010              		.loc 1 920 5 view .LVU1891
 922:easyflash/src/ef_env.c ****     {
 6011              		.loc 1 922 5 view .LVU1892
 922:easyflash/src/ef_env.c ****     {
 6012              		.loc 1 922 9 is_stmt 0 view .LVU1893
 6013 0000 0A4B     		ldr	r3, .L560
 919:easyflash/src/ef_env.c ****     bool find_ok = false;
 6014              		.loc 1 919 1 view .LVU1894
 6015 0002 70B5     		push	{r4, r5, r6, lr}
 6016              		.cfi_def_cfa_offset 16
 6017              		.cfi_offset 4, -16
 6018              		.cfi_offset 5, -12
 6019              		.cfi_offset 6, -8
 6020              		.cfi_offset 14, -4
 922:easyflash/src/ef_env.c ****     {
 6021              		.loc 1 922 9 view .LVU1895
 6022 0004 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 922:easyflash/src/ef_env.c ****     {
 6023              		.loc 1 922 8 view .LVU1896
 6024 0006 64B1     		cbz	r4, .L559
 6025 0008 0546     		mov	r5, r0
 6026 000a 0E46     		mov	r6, r1
 929:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 174


 6027              		.loc 1 929 5 is_stmt 1 view .LVU1897
 6028 000c FFF7FEFF 		bl	ef_port_env_lock
 6029              	.LVL554:
 931:easyflash/src/ef_env.c **** 
 6030              		.loc 1 931 5 view .LVU1898
 931:easyflash/src/ef_env.c **** 
 6031              		.loc 1 931 15 is_stmt 0 view .LVU1899
 6032 0010 3146     		mov	r1, r6
 6033 0012 2846     		mov	r0, r5
 6034 0014 FFF7FEFF 		bl	find_env
 6035              	.LVL555:
 6036 0018 0446     		mov	r4, r0
 6037              	.LVL556:
 934:easyflash/src/ef_env.c **** 
 6038              		.loc 1 934 5 is_stmt 1 view .LVU1900
 6039 001a FFF7FEFF 		bl	ef_port_env_unlock
 6040              	.LVL557:
 936:easyflash/src/ef_env.c **** }
 6041              		.loc 1 936 5 view .LVU1901
 937:easyflash/src/ef_env.c **** 
 6042              		.loc 1 937 1 is_stmt 0 view .LVU1902
 6043 001e 2046     		mov	r0, r4
 6044 0020 70BD     		pop	{r4, r5, r6, pc}
 6045              	.LVL558:
 6046              	.L559:
 924:easyflash/src/ef_env.c ****         return 0;
 6047              		.loc 1 924 9 is_stmt 1 view .LVU1903
 6048 0022 0348     		ldr	r0, .L560+4
 6049              	.LVL559:
 924:easyflash/src/ef_env.c ****         return 0;
 6050              		.loc 1 924 9 is_stmt 0 view .LVU1904
 6051 0024 FFF7FEFF 		bl	ef_log_info
 6052              	.LVL560:
 925:easyflash/src/ef_env.c ****     }
 6053              		.loc 1 925 9 is_stmt 1 view .LVU1905
 937:easyflash/src/ef_env.c **** 
 6054              		.loc 1 937 1 is_stmt 0 view .LVU1906
 6055 0028 2046     		mov	r0, r4
 6056 002a 70BD     		pop	{r4, r5, r6, pc}
 6057              	.L561:
 6058              		.align	2
 6059              	.L560:
 6060 002c 00000000 		.word	.LANCHOR10
 6061 0030 00000000 		.word	.LC26
 6062              		.cfi_endproc
 6063              	.LFE255:
 6065              		.section	.text.ef_get_env_blob,"ax",%progbits
 6066              		.align	1
 6067              		.p2align 2,,3
 6068              		.global	ef_get_env_blob
 6069              		.syntax unified
 6070              		.thumb
 6071              		.thumb_func
 6073              	ef_get_env_blob:
 6074              	.LVL561:
 6075              	.LFB256:
 950:easyflash/src/ef_env.c ****     size_t read_len = 0;
ARM GAS  /tmp/ccSGDQKw.s 			page 175


 6076              		.loc 1 950 1 is_stmt 1 view -0
 6077              		.cfi_startproc
 6078              		@ args = 0, pretend = 0, frame = 56
 6079              		@ frame_needed = 0, uses_anonymous_args = 0
 951:easyflash/src/ef_env.c **** 
 6080              		.loc 1 951 5 view .LVU1908
 953:easyflash/src/ef_env.c ****     {
 6081              		.loc 1 953 5 view .LVU1909
 950:easyflash/src/ef_env.c ****     size_t read_len = 0;
 6082              		.loc 1 950 1 is_stmt 0 view .LVU1910
 6083 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 6084              		.cfi_def_cfa_offset 24
 6085              		.cfi_offset 4, -24
 6086              		.cfi_offset 5, -20
 6087              		.cfi_offset 6, -16
 6088              		.cfi_offset 7, -12
 6089              		.cfi_offset 8, -8
 6090              		.cfi_offset 14, -4
 953:easyflash/src/ef_env.c ****     {
 6091              		.loc 1 953 9 view .LVU1911
 6092 0004 144C     		ldr	r4, .L574
 953:easyflash/src/ef_env.c ****     {
 6093              		.loc 1 953 8 view .LVU1912
 6094 0006 2478     		ldrb	r4, [r4]	@ zero_extendqisi2
 950:easyflash/src/ef_env.c ****     size_t read_len = 0;
 6095              		.loc 1 950 1 view .LVU1913
 6096 0008 8EB0     		sub	sp, sp, #56
 6097              		.cfi_def_cfa_offset 80
 953:easyflash/src/ef_env.c ****     {
 6098              		.loc 1 953 8 view .LVU1914
 6099 000a F4B1     		cbz	r4, .L573
 6100 000c 0546     		mov	r5, r0
 6101              	.LVL562:
 953:easyflash/src/ef_env.c ****     {
 6102              		.loc 1 953 8 view .LVU1915
 6103 000e 0F46     		mov	r7, r1
 6104              	.LVL563:
 953:easyflash/src/ef_env.c ****     {
 6105              		.loc 1 953 8 view .LVU1916
 6106 0010 9046     		mov	r8, r2
 6107              	.LVL564:
 953:easyflash/src/ef_env.c ****     {
 6108              		.loc 1 953 8 view .LVU1917
 6109 0012 1E46     		mov	r6, r3
 6110              	.LVL565:
 6111              	.LBB405:
 6112              	.LBI405:
 949:easyflash/src/ef_env.c **** {
 6113              		.loc 1 949 8 is_stmt 1 view .LVU1918
 6114              	.LBB406:
 960:easyflash/src/ef_env.c **** 
 6115              		.loc 1 960 5 view .LVU1919
 6116 0014 FFF7FEFF 		bl	ef_port_env_lock
 6117              	.LVL566:
 962:easyflash/src/ef_env.c **** 
 6118              		.loc 1 962 5 view .LVU1920
 6119              	.LBB407:
ARM GAS  /tmp/ccSGDQKw.s 			page 176


 6120              	.LBI407:
 882:easyflash/src/ef_env.c **** {
 6121              		.loc 1 882 15 view .LVU1921
 6122              	.LBB408:
 884:easyflash/src/ef_env.c ****     size_t read_len = 0;
 6123              		.loc 1 884 5 view .LVU1922
 885:easyflash/src/ef_env.c **** 
 6124              		.loc 1 885 5 view .LVU1923
 887:easyflash/src/ef_env.c ****     {
 6125              		.loc 1 887 5 view .LVU1924
 887:easyflash/src/ef_env.c ****     {
 6126              		.loc 1 887 9 is_stmt 0 view .LVU1925
 6127 0018 6946     		mov	r1, sp
 6128 001a 2846     		mov	r0, r5
 6129 001c FFF7FEFF 		bl	find_env
 6130              	.LVL567:
 887:easyflash/src/ef_env.c ****     {
 6131              		.loc 1 887 8 view .LVU1926
 6132 0020 60B1     		cbz	r0, .L568
 889:easyflash/src/ef_env.c ****         {
 6133              		.loc 1 889 9 is_stmt 1 view .LVU1927
 891:easyflash/src/ef_env.c ****         }
 6134              		.loc 1 891 29 is_stmt 0 view .LVU1928
 6135 0022 039C     		ldr	r4, [sp, #12]
 889:easyflash/src/ef_env.c ****         {
 6136              		.loc 1 889 12 view .LVU1929
 6137 0024 06B1     		cbz	r6, .L567
 891:easyflash/src/ef_env.c ****         }
 6138              		.loc 1 891 13 is_stmt 1 view .LVU1930
 891:easyflash/src/ef_env.c ****         }
 6139              		.loc 1 891 24 is_stmt 0 view .LVU1931
 6140 0026 3460     		str	r4, [r6]
 6141              	.L567:
 893:easyflash/src/ef_env.c ****         {
 6142              		.loc 1 893 9 is_stmt 1 view .LVU1932
 6143 0028 4445     		cmp	r4, r8
 6144 002a 28BF     		it	cs
 6145 002c 4446     		movcs	r4, r8
 6146              	.LVL568:
 901:easyflash/src/ef_env.c ****         {
 6147              		.loc 1 901 9 view .LVU1933
 901:easyflash/src/ef_env.c ****         {
 6148              		.loc 1 901 12 is_stmt 0 view .LVU1934
 6149 002e 37B1     		cbz	r7, .L565
 903:easyflash/src/ef_env.c ****         }
 6150              		.loc 1 903 13 is_stmt 1 view .LVU1935
 6151 0030 0D98     		ldr	r0, [sp, #52]
 6152 0032 2246     		mov	r2, r4
 6153 0034 3946     		mov	r1, r7
 6154 0036 FFF7FEFF 		bl	ef_port_read
 6155              	.LVL569:
 6156 003a 00E0     		b	.L565
 6157              	.LVL570:
 6158              	.L568:
 885:easyflash/src/ef_env.c **** 
 6159              		.loc 1 885 12 is_stmt 0 view .LVU1936
 6160 003c 0446     		mov	r4, r0
ARM GAS  /tmp/ccSGDQKw.s 			page 177


 6161              	.LVL571:
 6162              	.L565:
 907:easyflash/src/ef_env.c **** }
 6163              		.loc 1 907 5 is_stmt 1 view .LVU1937
 907:easyflash/src/ef_env.c **** }
 6164              		.loc 1 907 5 is_stmt 0 view .LVU1938
 6165              	.LBE408:
 6166              	.LBE407:
 965:easyflash/src/ef_env.c **** 
 6167              		.loc 1 965 5 is_stmt 1 view .LVU1939
 6168 003e FFF7FEFF 		bl	ef_port_env_unlock
 6169              	.LVL572:
 967:easyflash/src/ef_env.c **** }
 6170              		.loc 1 967 5 view .LVU1940
 967:easyflash/src/ef_env.c **** }
 6171              		.loc 1 967 5 is_stmt 0 view .LVU1941
 6172              	.LBE406:
 6173              	.LBE405:
 968:easyflash/src/ef_env.c **** 
 6174              		.loc 1 968 1 view .LVU1942
 6175 0042 2046     		mov	r0, r4
 6176 0044 0EB0     		add	sp, sp, #56
 6177              		.cfi_remember_state
 6178              		.cfi_def_cfa_offset 24
 6179              		@ sp needed
 6180 0046 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6181              	.LVL573:
 6182              	.L573:
 6183              		.cfi_restore_state
 955:easyflash/src/ef_env.c ****         return 0;
 6184              		.loc 1 955 9 is_stmt 1 view .LVU1943
 6185 004a 0448     		ldr	r0, .L574+4
 6186              	.LVL574:
 955:easyflash/src/ef_env.c ****         return 0;
 6187              		.loc 1 955 9 is_stmt 0 view .LVU1944
 6188 004c FFF7FEFF 		bl	ef_log_info
 6189              	.LVL575:
 956:easyflash/src/ef_env.c ****     }
 6190              		.loc 1 956 9 is_stmt 1 view .LVU1945
 968:easyflash/src/ef_env.c **** 
 6191              		.loc 1 968 1 is_stmt 0 view .LVU1946
 6192 0050 2046     		mov	r0, r4
 6193 0052 0EB0     		add	sp, sp, #56
 6194              		.cfi_def_cfa_offset 24
 6195              		@ sp needed
 6196 0054 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6197              	.L575:
 6198              		.align	2
 6199              	.L574:
 6200 0058 00000000 		.word	.LANCHOR10
 6201 005c 00000000 		.word	.LC26
 6202              		.cfi_endproc
 6203              	.LFE256:
 6205              		.section	.rodata.ef_get_env.str1.4,"aMS",%progbits,1
 6206              		.align	2
 6207              	.LC27:
 6208 0000 5761726E 		.ascii	"Warning: The ENV value isn't string. Could not be r"
ARM GAS  /tmp/ccSGDQKw.s 			page 178


 6208      696E673A 
 6208      20546865 
 6208      20454E56 
 6208      2076616C 
 6209 0033 65747572 		.ascii	"eturned\000"
 6209      6E656400 
 6210              		.section	.text.ef_get_env,"ax",%progbits
 6211              		.align	1
 6212              		.p2align 2,,3
 6213              		.global	ef_get_env
 6214              		.syntax unified
 6215              		.thumb
 6216              		.thumb_func
 6218              	ef_get_env:
 6219              	.LVL576:
 6220              	.LFB257:
 981:easyflash/src/ef_env.c ****     static char value[EF_STR_ENV_VALUE_MAX_SIZE + 1];
 6221              		.loc 1 981 1 is_stmt 1 view -0
 6222              		.cfi_startproc
 6223              		@ args = 0, pretend = 0, frame = 56
 6224              		@ frame_needed = 0, uses_anonymous_args = 0
 982:easyflash/src/ef_env.c ****     size_t get_size;
 6225              		.loc 1 982 5 view .LVU1948
 983:easyflash/src/ef_env.c **** 
 6226              		.loc 1 983 5 view .LVU1949
 985:easyflash/src/ef_env.c ****     {
 6227              		.loc 1 985 5 view .LVU1950
 981:easyflash/src/ef_env.c ****     static char value[EF_STR_ENV_VALUE_MAX_SIZE + 1];
 6228              		.loc 1 981 1 is_stmt 0 view .LVU1951
 6229 0000 70B5     		push	{r4, r5, r6, lr}
 6230              		.cfi_def_cfa_offset 16
 6231              		.cfi_offset 4, -16
 6232              		.cfi_offset 5, -12
 6233              		.cfi_offset 6, -8
 6234              		.cfi_offset 14, -4
 6235              	.LBB417:
 6236              	.LBB418:
 953:easyflash/src/ef_env.c ****     {
 6237              		.loc 1 953 9 view .LVU1952
 6238 0002 1F4B     		ldr	r3, .L589
 953:easyflash/src/ef_env.c ****     {
 6239              		.loc 1 953 8 view .LVU1953
 6240 0004 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 6241              	.LVL577:
 953:easyflash/src/ef_env.c ****     {
 6242              		.loc 1 953 8 view .LVU1954
 6243              	.LBE418:
 6244              	.LBI417:
 949:easyflash/src/ef_env.c **** {
 6245              		.loc 1 949 8 is_stmt 1 view .LVU1955
 6246              	.LBB427:
 951:easyflash/src/ef_env.c **** 
 6247              		.loc 1 951 5 view .LVU1956
 953:easyflash/src/ef_env.c ****     {
 6248              		.loc 1 953 5 view .LVU1957
 6249              	.LBE427:
 6250              	.LBE417:
ARM GAS  /tmp/ccSGDQKw.s 			page 179


 981:easyflash/src/ef_env.c ****     static char value[EF_STR_ENV_VALUE_MAX_SIZE + 1];
 6251              		.loc 1 981 1 is_stmt 0 view .LVU1958
 6252 0006 8EB0     		sub	sp, sp, #56
 6253              		.cfi_def_cfa_offset 72
 6254              	.LBB431:
 6255              	.LBB428:
 953:easyflash/src/ef_env.c ****     {
 6256              		.loc 1 953 8 view .LVU1959
 6257 0008 5CB3     		cbz	r4, .L587
 6258 000a 0546     		mov	r5, r0
 6259              	.LVL578:
 6260              	.LBB419:
 6261              	.LBI419:
 949:easyflash/src/ef_env.c **** {
 6262              		.loc 1 949 8 is_stmt 1 view .LVU1960
 6263              	.LBB420:
 960:easyflash/src/ef_env.c **** 
 6264              		.loc 1 960 5 view .LVU1961
 6265 000c FFF7FEFF 		bl	ef_port_env_lock
 6266              	.LVL579:
 962:easyflash/src/ef_env.c **** 
 6267              		.loc 1 962 5 view .LVU1962
 6268              	.LBB421:
 6269              	.LBI421:
 882:easyflash/src/ef_env.c **** {
 6270              		.loc 1 882 15 view .LVU1963
 6271              	.LBB422:
 884:easyflash/src/ef_env.c ****     size_t read_len = 0;
 6272              		.loc 1 884 5 view .LVU1964
 885:easyflash/src/ef_env.c **** 
 6273              		.loc 1 885 5 view .LVU1965
 887:easyflash/src/ef_env.c ****     {
 6274              		.loc 1 887 5 view .LVU1966
 887:easyflash/src/ef_env.c ****     {
 6275              		.loc 1 887 9 is_stmt 0 view .LVU1967
 6276 0010 6946     		mov	r1, sp
 6277 0012 2846     		mov	r0, r5
 6278 0014 FFF7FEFF 		bl	find_env
 6279              	.LVL580:
 887:easyflash/src/ef_env.c ****     {
 6280              		.loc 1 887 8 view .LVU1968
 6281 0018 0446     		mov	r4, r0
 6282 001a E8B1     		cbz	r0, .L588
 889:easyflash/src/ef_env.c ****         {
 6283              		.loc 1 889 9 is_stmt 1 view .LVU1969
 893:easyflash/src/ef_env.c ****         {
 6284              		.loc 1 893 9 view .LVU1970
 893:easyflash/src/ef_env.c ****         {
 6285              		.loc 1 893 26 is_stmt 0 view .LVU1971
 6286 001c 039C     		ldr	r4, [sp, #12]
 903:easyflash/src/ef_env.c ****         }
 6287              		.loc 1 903 13 view .LVU1972
 6288 001e 194E     		ldr	r6, .L589+4
 6289 0020 0D98     		ldr	r0, [sp, #52]
 6290 0022 802C     		cmp	r4, #128
 6291 0024 2546     		mov	r5, r4
 6292              	.LVL581:
ARM GAS  /tmp/ccSGDQKw.s 			page 180


 903:easyflash/src/ef_env.c ****         }
 6293              		.loc 1 903 13 view .LVU1973
 6294 0026 28BF     		it	cs
 6295 0028 8025     		movcs	r5, #128
 6296              	.LVL582:
 901:easyflash/src/ef_env.c ****         {
 6297              		.loc 1 901 9 is_stmt 1 view .LVU1974
 903:easyflash/src/ef_env.c ****         }
 6298              		.loc 1 903 13 view .LVU1975
 6299 002a 2A46     		mov	r2, r5
 6300 002c 3146     		mov	r1, r6
 6301 002e FFF7FEFF 		bl	ef_port_read
 6302              	.LVL583:
 907:easyflash/src/ef_env.c **** }
 6303              		.loc 1 907 5 view .LVU1976
 907:easyflash/src/ef_env.c **** }
 6304              		.loc 1 907 5 is_stmt 0 view .LVU1977
 6305              	.LBE422:
 6306              	.LBE421:
 965:easyflash/src/ef_env.c **** 
 6307              		.loc 1 965 5 is_stmt 1 view .LVU1978
 6308 0032 FFF7FEFF 		bl	ef_port_env_unlock
 6309              	.LVL584:
 967:easyflash/src/ef_env.c **** }
 6310              		.loc 1 967 5 view .LVU1979
 967:easyflash/src/ef_env.c **** }
 6311              		.loc 1 967 5 is_stmt 0 view .LVU1980
 6312              	.LBE420:
 6313              	.LBE419:
 6314              	.LBE428:
 6315              	.LBE431:
 985:easyflash/src/ef_env.c ****     {
 6316              		.loc 1 985 8 view .LVU1981
 6317 0036 04B3     		cbz	r4, .L583
 6318 0038 B446     		mov	ip, r6
 6319              	.LBB432:
 6320              	.LBB433:
 872:easyflash/src/ef_env.c ****     {
 6321              		.loc 1 872 12 view .LVU1982
 6322 003a 0020     		movs	r0, #0
 6323              	.L581:
 6324              	.LVL585:
 874:easyflash/src/ef_env.c ****         {
 6325              		.loc 1 874 9 is_stmt 1 view .LVU1983
 872:easyflash/src/ef_env.c ****     {
 6326              		.loc 1 872 26 view .LVU1984
 874:easyflash/src/ef_env.c ****         {
 6327              		.loc 1 874 14 is_stmt 0 view .LVU1985
 6328 003c 1CF8013B 		ldrb	r3, [ip], #1	@ zero_extendqisi2
 6329 0040 203B     		subs	r3, r3, #32
 874:easyflash/src/ef_env.c ****         {
 6330              		.loc 1 874 12 view .LVU1986
 6331 0042 5E2B     		cmp	r3, #94
 872:easyflash/src/ef_env.c ****     {
 6332              		.loc 1 872 27 view .LVU1987
 6333 0044 00F10100 		add	r0, r0, #1
 6334              	.LVL586:
ARM GAS  /tmp/ccSGDQKw.s 			page 181


 872:easyflash/src/ef_env.c ****     {
 6335              		.loc 1 872 17 is_stmt 1 view .LVU1988
 874:easyflash/src/ef_env.c ****         {
 6336              		.loc 1 874 12 is_stmt 0 view .LVU1989
 6337 0048 11D8     		bhi	.L580
 872:easyflash/src/ef_env.c ****     {
 6338              		.loc 1 872 5 view .LVU1990
 6339 004a A842     		cmp	r0, r5
 6340 004c F6D3     		bcc	.L581
 6341              	.LVL587:
 872:easyflash/src/ef_env.c ****     {
 6342              		.loc 1 872 5 view .LVU1991
 6343              	.LBE433:
 6344              	.LBE432:
 990:easyflash/src/ef_env.c ****             return value;
 6345              		.loc 1 990 13 is_stmt 1 view .LVU1992
 991:easyflash/src/ef_env.c ****         }
 6346              		.loc 1 991 20 is_stmt 0 view .LVU1993
 6347 004e 0D48     		ldr	r0, .L589+4
 990:easyflash/src/ef_env.c ****             return value;
 6348              		.loc 1 990 29 view .LVU1994
 6349 0050 0023     		movs	r3, #0
 6350 0052 7355     		strb	r3, [r6, r5]
 991:easyflash/src/ef_env.c ****         }
 6351              		.loc 1 991 13 is_stmt 1 view .LVU1995
1001:easyflash/src/ef_env.c **** 
 6352              		.loc 1 1001 1 is_stmt 0 view .LVU1996
 6353 0054 0EB0     		add	sp, sp, #56
 6354              		.cfi_remember_state
 6355              		.cfi_def_cfa_offset 16
 6356              		@ sp needed
 6357 0056 70BD     		pop	{r4, r5, r6, pc}
 6358              	.LVL588:
 6359              	.L588:
 6360              		.cfi_restore_state
 6361              	.LBB434:
 6362              	.LBB429:
 6363              	.LBB426:
 6364              	.LBB425:
 6365              	.LBB424:
 6366              	.LBB423:
 907:easyflash/src/ef_env.c **** }
 6367              		.loc 1 907 5 is_stmt 1 view .LVU1997
 907:easyflash/src/ef_env.c **** }
 6368              		.loc 1 907 5 is_stmt 0 view .LVU1998
 6369              	.LBE423:
 6370              	.LBE424:
 965:easyflash/src/ef_env.c **** 
 6371              		.loc 1 965 5 is_stmt 1 view .LVU1999
 6372 0058 FFF7FEFF 		bl	ef_port_env_unlock
 6373              	.LVL589:
 967:easyflash/src/ef_env.c **** }
 6374              		.loc 1 967 5 view .LVU2000
 967:easyflash/src/ef_env.c **** }
 6375              		.loc 1 967 5 is_stmt 0 view .LVU2001
 6376              	.LBE425:
 6377              	.LBE426:
ARM GAS  /tmp/ccSGDQKw.s 			page 182


 6378              	.LBE429:
 6379              	.LBE434:
1000:easyflash/src/ef_env.c **** }
 6380              		.loc 1 1000 12 view .LVU2002
 6381 005c 2046     		mov	r0, r4
 6382              	.LVL590:
 6383              	.L576:
1001:easyflash/src/ef_env.c **** 
 6384              		.loc 1 1001 1 view .LVU2003
 6385 005e 0EB0     		add	sp, sp, #56
 6386              		.cfi_remember_state
 6387              		.cfi_def_cfa_offset 16
 6388              		@ sp needed
 6389 0060 70BD     		pop	{r4, r5, r6, pc}
 6390              	.LVL591:
 6391              	.L587:
 6392              		.cfi_restore_state
 6393              	.LBB435:
 6394              	.LBB430:
 955:easyflash/src/ef_env.c ****         return 0;
 6395              		.loc 1 955 9 is_stmt 1 view .LVU2004
 6396 0062 0948     		ldr	r0, .L589+8
 6397              	.LVL592:
 955:easyflash/src/ef_env.c ****         return 0;
 6398              		.loc 1 955 9 is_stmt 0 view .LVU2005
 6399 0064 FFF7FEFF 		bl	ef_log_info
 6400              	.LVL593:
 956:easyflash/src/ef_env.c ****     }
 6401              		.loc 1 956 9 is_stmt 1 view .LVU2006
 956:easyflash/src/ef_env.c ****     }
 6402              		.loc 1 956 9 is_stmt 0 view .LVU2007
 6403              	.LBE430:
 6404              	.LBE435:
1000:easyflash/src/ef_env.c **** }
 6405              		.loc 1 1000 12 view .LVU2008
 6406 0068 2046     		mov	r0, r4
1001:easyflash/src/ef_env.c **** 
 6407              		.loc 1 1001 1 view .LVU2009
 6408 006a 0EB0     		add	sp, sp, #56
 6409              		.cfi_remember_state
 6410              		.cfi_def_cfa_offset 16
 6411              		@ sp needed
 6412 006c 70BD     		pop	{r4, r5, r6, pc}
 6413              	.LVL594:
 6414              	.L580:
 6415              		.cfi_restore_state
 995:easyflash/src/ef_env.c ****             return NULL;
 6416              		.loc 1 995 13 is_stmt 1 view .LVU2010
 6417 006e 0748     		ldr	r0, .L589+12
 6418 0070 FFF7FEFF 		bl	ef_log_info
 6419              	.LVL595:
 996:easyflash/src/ef_env.c ****         }
 6420              		.loc 1 996 13 view .LVU2011
 996:easyflash/src/ef_env.c ****         }
 6421              		.loc 1 996 20 is_stmt 0 view .LVU2012
 6422 0074 0020     		movs	r0, #0
1001:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 183


 6423              		.loc 1 1001 1 view .LVU2013
 6424 0076 0EB0     		add	sp, sp, #56
 6425              		.cfi_remember_state
 6426              		.cfi_def_cfa_offset 16
 6427              		@ sp needed
 6428 0078 70BD     		pop	{r4, r5, r6, pc}
 6429              	.LVL596:
 6430              	.L583:
 6431              		.cfi_restore_state
1000:easyflash/src/ef_env.c **** }
 6432              		.loc 1 1000 12 view .LVU2014
 6433 007a 2046     		mov	r0, r4
 6434 007c EFE7     		b	.L576
 6435              	.L590:
 6436 007e 00BF     		.align	2
 6437              	.L589:
 6438 0080 00000000 		.word	.LANCHOR10
 6439 0084 00000000 		.word	.LANCHOR11
 6440 0088 00000000 		.word	.LC26
 6441 008c 00000000 		.word	.LC27
 6442              		.cfi_endproc
 6443              	.LFE257:
 6445              		.section	.rodata.ef_read_env_value.str1.4,"aMS",%progbits,1
 6446              		.align	2
 6447              	.LC28:
 6448 0000 656E7600 		.ascii	"env\000"
 6449              		.align	2
 6450              	.LC29:
 6451 0004 76616C75 		.ascii	"value_buf\000"
 6451      655F6275 
 6451      6600
 6452              		.section	.text.ef_read_env_value,"ax",%progbits
 6453              		.align	1
 6454              		.p2align 2,,3
 6455              		.global	ef_read_env_value
 6456              		.syntax unified
 6457              		.thumb
 6458              		.thumb_func
 6460              	ef_read_env_value:
 6461              	.LVL597:
 6462              	.LFB258:
1013:easyflash/src/ef_env.c ****     size_t read_len = 0;
 6463              		.loc 1 1013 1 is_stmt 1 view -0
 6464              		.cfi_startproc
 6465              		@ args = 0, pretend = 0, frame = 0
 6466              		@ frame_needed = 0, uses_anonymous_args = 0
1014:easyflash/src/ef_env.c **** 
 6467              		.loc 1 1014 5 view .LVU2016
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6468              		.loc 1 1016 5 view .LVU2017
1013:easyflash/src/ef_env.c ****     size_t read_len = 0;
 6469              		.loc 1 1013 1 is_stmt 0 view .LVU2018
 6470 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 6471              		.cfi_def_cfa_offset 20
 6472              		.cfi_offset 4, -20
 6473              		.cfi_offset 5, -16
 6474              		.cfi_offset 6, -12
ARM GAS  /tmp/ccSGDQKw.s 			page 184


 6475              		.cfi_offset 7, -8
 6476              		.cfi_offset 14, -4
 6477 0002 83B0     		sub	sp, sp, #12
 6478              		.cfi_def_cfa_offset 32
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6479              		.loc 1 1016 5 view .LVU2019
 6480 0004 E0B1     		cbz	r0, .L600
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6481              		.loc 1 1016 19 is_stmt 1 discriminator 2 view .LVU2020
1017:easyflash/src/ef_env.c **** 
 6482              		.loc 1 1017 5 discriminator 2 view .LVU2021
 6483 0006 0F46     		mov	r7, r1
 6484 0008 21B3     		cbz	r1, .L601
1017:easyflash/src/ef_env.c **** 
 6485              		.loc 1 1017 25 discriminator 2 view .LVU2022
1019:easyflash/src/ef_env.c ****     {
 6486              		.loc 1 1019 5 discriminator 2 view .LVU2023
1019:easyflash/src/ef_env.c ****     {
 6487              		.loc 1 1019 9 is_stmt 0 discriminator 2 view .LVU2024
 6488 000a 1A4B     		ldr	r3, .L604
1019:easyflash/src/ef_env.c ****     {
 6489              		.loc 1 1019 8 discriminator 2 view .LVU2025
 6490 000c 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 6491 000e 5DB3     		cbz	r5, .L602
1025:easyflash/src/ef_env.c ****     {
 6492              		.loc 1 1025 5 is_stmt 1 view .LVU2026
1025:easyflash/src/ef_env.c ****     {
 6493              		.loc 1 1025 8 is_stmt 0 view .LVU2027
 6494 0010 4578     		ldrb	r5, [r0, #1]	@ zero_extendqisi2
 6495 0012 0446     		mov	r4, r0
 6496 0014 15B9     		cbnz	r5, .L603
1045:easyflash/src/ef_env.c **** 
 6497              		.loc 1 1045 1 view .LVU2028
 6498 0016 2846     		mov	r0, r5
 6499              	.LVL598:
1045:easyflash/src/ef_env.c **** 
 6500              		.loc 1 1045 1 view .LVU2029
 6501 0018 03B0     		add	sp, sp, #12
 6502              		.cfi_remember_state
 6503              		.cfi_def_cfa_offset 20
 6504              		@ sp needed
 6505 001a F0BD     		pop	{r4, r5, r6, r7, pc}
 6506              	.LVL599:
 6507              	.L603:
 6508              		.cfi_restore_state
1028:easyflash/src/ef_env.c **** 
 6509              		.loc 1 1028 9 is_stmt 1 view .LVU2030
 6510 001c 1646     		mov	r6, r2
 6511 001e FFF7FEFF 		bl	ef_port_env_lock
 6512              	.LVL600:
1030:easyflash/src/ef_env.c ****         {
 6513              		.loc 1 1030 9 view .LVU2031
 6514 0022 E368     		ldr	r3, [r4, #12]
1039:easyflash/src/ef_env.c ****         /* unlock the ENV cache */
 6515              		.loc 1 1039 9 is_stmt 0 view .LVU2032
 6516 0024 606B     		ldr	r0, [r4, #52]
 6517 0026 9E42     		cmp	r6, r3
ARM GAS  /tmp/ccSGDQKw.s 			page 185


 6518 0028 3546     		mov	r5, r6
 6519 002a 28BF     		it	cs
 6520 002c 1D46     		movcs	r5, r3
 6521              	.LVL601:
1039:easyflash/src/ef_env.c ****         /* unlock the ENV cache */
 6522              		.loc 1 1039 9 is_stmt 1 view .LVU2033
 6523 002e 3946     		mov	r1, r7
 6524 0030 2A46     		mov	r2, r5
 6525 0032 FFF7FEFF 		bl	ef_port_read
 6526              	.LVL602:
1041:easyflash/src/ef_env.c ****     }
 6527              		.loc 1 1041 9 view .LVU2034
 6528 0036 FFF7FEFF 		bl	ef_port_env_unlock
 6529              	.LVL603:
1045:easyflash/src/ef_env.c **** 
 6530              		.loc 1 1045 1 is_stmt 0 view .LVU2035
 6531 003a 2846     		mov	r0, r5
 6532 003c 03B0     		add	sp, sp, #12
 6533              		.cfi_remember_state
 6534              		.cfi_def_cfa_offset 20
 6535              		@ sp needed
 6536 003e F0BD     		pop	{r4, r5, r6, r7, pc}
 6537              	.LVL604:
 6538              	.L600:
 6539              		.cfi_restore_state
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6540              		.loc 1 1016 5 is_stmt 1 discriminator 1 view .LVU2036
 6541 0040 0D49     		ldr	r1, .L604+4
 6542              	.LVL605:
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6543              		.loc 1 1016 5 is_stmt 0 discriminator 1 view .LVU2037
 6544 0042 0091     		str	r1, [sp]
 6545 0044 0D4B     		ldr	r3, .L604+8
 6546 0046 0E4A     		ldr	r2, .L604+12
 6547              	.LVL606:
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6548              		.loc 1 1016 5 discriminator 1 view .LVU2038
 6549 0048 0E48     		ldr	r0, .L604+16
 6550              	.LVL607:
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6551              		.loc 1 1016 5 discriminator 1 view .LVU2039
 6552 004a 4FF47E71 		mov	r1, #1016
 6553 004e FFF7FEFF 		bl	ef_log_debug
 6554              	.LVL608:
 6555              	.L593:
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6556              		.loc 1 1016 5 is_stmt 1 discriminator 1 view .LVU2040
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6557              		.loc 1 1016 5 discriminator 1 view .LVU2041
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6558              		.loc 1 1016 5 discriminator 1 view .LVU2042
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6559              		.loc 1 1016 5 discriminator 1 view .LVU2043
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6560              		.loc 1 1016 5 discriminator 1 view .LVU2044
1016:easyflash/src/ef_env.c ****     EF_ASSERT(value_buf);
 6561              		.loc 1 1016 5 discriminator 1 view .LVU2045
ARM GAS  /tmp/ccSGDQKw.s 			page 186


 6562 0052 FEE7     		b	.L593
 6563              	.LVL609:
 6564              	.L601:
1017:easyflash/src/ef_env.c **** 
 6565              		.loc 1 1017 5 discriminator 1 view .LVU2046
 6566 0054 0849     		ldr	r1, .L604+4
 6567              	.LVL610:
1017:easyflash/src/ef_env.c **** 
 6568              		.loc 1 1017 5 is_stmt 0 discriminator 1 view .LVU2047
 6569 0056 0091     		str	r1, [sp]
 6570 0058 0B4B     		ldr	r3, .L604+20
 6571 005a 094A     		ldr	r2, .L604+12
 6572              	.LVL611:
1017:easyflash/src/ef_env.c **** 
 6573              		.loc 1 1017 5 discriminator 1 view .LVU2048
 6574 005c 0948     		ldr	r0, .L604+16
 6575              	.LVL612:
1017:easyflash/src/ef_env.c **** 
 6576              		.loc 1 1017 5 discriminator 1 view .LVU2049
 6577 005e 40F2F931 		movw	r1, #1017
 6578 0062 FFF7FEFF 		bl	ef_log_debug
 6579              	.LVL613:
 6580              	.L595:
1017:easyflash/src/ef_env.c **** 
 6581              		.loc 1 1017 5 is_stmt 1 discriminator 2 view .LVU2050
1017:easyflash/src/ef_env.c **** 
 6582              		.loc 1 1017 5 discriminator 2 view .LVU2051
1017:easyflash/src/ef_env.c **** 
 6583              		.loc 1 1017 5 discriminator 2 view .LVU2052
1017:easyflash/src/ef_env.c **** 
 6584              		.loc 1 1017 5 discriminator 2 view .LVU2053
1017:easyflash/src/ef_env.c **** 
 6585              		.loc 1 1017 5 discriminator 2 view .LVU2054
1017:easyflash/src/ef_env.c **** 
 6586              		.loc 1 1017 5 discriminator 2 view .LVU2055
 6587 0066 FEE7     		b	.L595
 6588              	.LVL614:
 6589              	.L602:
1021:easyflash/src/ef_env.c ****         return 0;
 6590              		.loc 1 1021 9 view .LVU2056
 6591 0068 0848     		ldr	r0, .L604+24
 6592              	.LVL615:
1021:easyflash/src/ef_env.c ****         return 0;
 6593              		.loc 1 1021 9 is_stmt 0 view .LVU2057
 6594 006a FFF7FEFF 		bl	ef_log_info
 6595              	.LVL616:
1022:easyflash/src/ef_env.c ****     }
 6596              		.loc 1 1022 9 is_stmt 1 view .LVU2058
1045:easyflash/src/ef_env.c **** 
 6597              		.loc 1 1045 1 is_stmt 0 view .LVU2059
 6598 006e 2846     		mov	r0, r5
 6599 0070 03B0     		add	sp, sp, #12
 6600              		.cfi_def_cfa_offset 20
 6601              		@ sp needed
 6602 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 6603              	.LVL617:
 6604              	.L605:
ARM GAS  /tmp/ccSGDQKw.s 			page 187


1045:easyflash/src/ef_env.c **** 
 6605              		.loc 1 1045 1 view .LVU2060
 6606              		.align	2
 6607              	.L604:
 6608 0074 00000000 		.word	.LANCHOR10
 6609 0078 00000000 		.word	.LANCHOR12
 6610 007c 00000000 		.word	.LC28
 6611 0080 1C000000 		.word	.LC1
 6612 0084 3C000000 		.word	.LC2
 6613 0088 04000000 		.word	.LC29
 6614 008c 00000000 		.word	.LC26
 6615              		.cfi_endproc
 6616              	.LFE258:
 6618              		.section	.rodata.ef_del_env.str1.4,"aMS",%progbits,1
 6619              		.align	2
 6620              	.LC30:
 6621 0000 4572726F 		.ascii	"Error: ENV isn't initialize OK.\000"
 6621      723A2045 
 6621      4E562069 
 6621      736E2774 
 6621      20696E69 
 6622              		.section	.text.ef_del_env,"ax",%progbits
 6623              		.align	1
 6624              		.p2align 2,,3
 6625              		.global	ef_del_env
 6626              		.syntax unified
 6627              		.thumb
 6628              		.thumb_func
 6630              	ef_del_env:
 6631              	.LVL618:
 6632              	.LFB275:
1572:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 6633              		.loc 1 1572 1 is_stmt 1 view -0
 6634              		.cfi_startproc
 6635              		@ args = 0, pretend = 0, frame = 8
 6636              		@ frame_needed = 0, uses_anonymous_args = 0
1573:easyflash/src/ef_env.c **** 
 6637              		.loc 1 1573 5 view .LVU2062
1575:easyflash/src/ef_env.c ****     {
 6638              		.loc 1 1575 5 view .LVU2063
1572:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 6639              		.loc 1 1572 1 is_stmt 0 view .LVU2064
 6640 0000 10B5     		push	{r4, lr}
 6641              		.cfi_def_cfa_offset 8
 6642              		.cfi_offset 4, -8
 6643              		.cfi_offset 14, -4
1575:easyflash/src/ef_env.c ****     {
 6644              		.loc 1 1575 9 view .LVU2065
 6645 0002 0C4B     		ldr	r3, .L611
1575:easyflash/src/ef_env.c ****     {
 6646              		.loc 1 1575 8 view .LVU2066
 6647 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1572:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 6648              		.loc 1 1572 1 view .LVU2067
 6649 0006 82B0     		sub	sp, sp, #8
 6650              		.cfi_def_cfa_offset 16
1575:easyflash/src/ef_env.c ****     {
ARM GAS  /tmp/ccSGDQKw.s 			page 188


 6651              		.loc 1 1575 8 view .LVU2068
 6652 0008 6BB1     		cbz	r3, .L610
 6653 000a 0446     		mov	r4, r0
1582:easyflash/src/ef_env.c **** 
 6654              		.loc 1 1582 5 is_stmt 1 view .LVU2069
 6655 000c FFF7FEFF 		bl	ef_port_env_lock
 6656              	.LVL619:
1584:easyflash/src/ef_env.c **** 
 6657              		.loc 1 1584 5 view .LVU2070
1584:easyflash/src/ef_env.c **** 
 6658              		.loc 1 1584 14 is_stmt 0 view .LVU2071
 6659 0010 0122     		movs	r2, #1
 6660 0012 0021     		movs	r1, #0
 6661 0014 2046     		mov	r0, r4
 6662 0016 FFF7FEFF 		bl	del_env
 6663              	.LVL620:
 6664 001a 0190     		str	r0, [sp, #4]
 6665              	.LVL621:
1587:easyflash/src/ef_env.c **** 
 6666              		.loc 1 1587 5 is_stmt 1 view .LVU2072
 6667 001c FFF7FEFF 		bl	ef_port_env_unlock
 6668              	.LVL622:
 6669 0020 0198     		ldr	r0, [sp, #4]
1589:easyflash/src/ef_env.c **** }
 6670              		.loc 1 1589 5 view .LVU2073
1590:easyflash/src/ef_env.c **** 
 6671              		.loc 1 1590 1 is_stmt 0 view .LVU2074
 6672 0022 02B0     		add	sp, sp, #8
 6673              		.cfi_remember_state
 6674              		.cfi_def_cfa_offset 8
 6675              		@ sp needed
 6676 0024 10BD     		pop	{r4, pc}
 6677              	.LVL623:
 6678              	.L610:
 6679              		.cfi_restore_state
1577:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 6680              		.loc 1 1577 9 is_stmt 1 view .LVU2075
 6681 0026 0448     		ldr	r0, .L611+4
 6682              	.LVL624:
1577:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 6683              		.loc 1 1577 9 is_stmt 0 view .LVU2076
 6684 0028 FFF7FEFF 		bl	ef_log_info
 6685              	.LVL625:
1578:easyflash/src/ef_env.c ****     }
 6686              		.loc 1 1578 9 is_stmt 1 view .LVU2077
1578:easyflash/src/ef_env.c ****     }
 6687              		.loc 1 1578 16 is_stmt 0 view .LVU2078
 6688 002c 0720     		movs	r0, #7
1590:easyflash/src/ef_env.c **** 
 6689              		.loc 1 1590 1 view .LVU2079
 6690 002e 02B0     		add	sp, sp, #8
 6691              		.cfi_def_cfa_offset 8
 6692              		@ sp needed
 6693 0030 10BD     		pop	{r4, pc}
 6694              	.L612:
 6695 0032 00BF     		.align	2
 6696              	.L611:
ARM GAS  /tmp/ccSGDQKw.s 			page 189


 6697 0034 00000000 		.word	.LANCHOR10
 6698 0038 00000000 		.word	.LC30
 6699              		.cfi_endproc
 6700              	.LFE275:
 6702              		.section	.text.ef_del_and_save_env,"ax",%progbits
 6703              		.align	1
 6704              		.p2align 2,,3
 6705              		.global	ef_del_and_save_env
 6706              		.syntax unified
 6707              		.thumb
 6708              		.thumb_func
 6710              	ef_del_and_save_env:
 6711              	.LVL626:
 6712              	.LFB276:
1603:easyflash/src/ef_env.c ****     return ef_del_env(key);
 6713              		.loc 1 1603 1 is_stmt 1 view -0
 6714              		.cfi_startproc
 6715              		@ args = 0, pretend = 0, frame = 8
 6716              		@ frame_needed = 0, uses_anonymous_args = 0
1604:easyflash/src/ef_env.c **** }
 6717              		.loc 1 1604 5 view .LVU2081
1603:easyflash/src/ef_env.c ****     return ef_del_env(key);
 6718              		.loc 1 1603 1 is_stmt 0 view .LVU2082
 6719 0000 10B5     		push	{r4, lr}
 6720              		.cfi_def_cfa_offset 8
 6721              		.cfi_offset 4, -8
 6722              		.cfi_offset 14, -4
 6723              	.LBB438:
 6724              	.LBB439:
1575:easyflash/src/ef_env.c ****     {
 6725              		.loc 1 1575 9 view .LVU2083
 6726 0002 0C4B     		ldr	r3, .L618
1575:easyflash/src/ef_env.c ****     {
 6727              		.loc 1 1575 8 view .LVU2084
 6728 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6729              	.LVL627:
1575:easyflash/src/ef_env.c ****     {
 6730              		.loc 1 1575 8 view .LVU2085
 6731              	.LBE439:
 6732              	.LBI438:
1571:easyflash/src/ef_env.c **** {
 6733              		.loc 1 1571 11 is_stmt 1 view .LVU2086
 6734              	.LBB440:
1573:easyflash/src/ef_env.c **** 
 6735              		.loc 1 1573 5 view .LVU2087
1575:easyflash/src/ef_env.c ****     {
 6736              		.loc 1 1575 5 view .LVU2088
 6737              	.LBE440:
 6738              	.LBE438:
1603:easyflash/src/ef_env.c ****     return ef_del_env(key);
 6739              		.loc 1 1603 1 is_stmt 0 view .LVU2089
 6740 0006 82B0     		sub	sp, sp, #8
 6741              		.cfi_def_cfa_offset 16
 6742              	.LBB443:
 6743              	.LBB441:
1575:easyflash/src/ef_env.c ****     {
 6744              		.loc 1 1575 8 view .LVU2090
ARM GAS  /tmp/ccSGDQKw.s 			page 190


 6745 0008 6BB1     		cbz	r3, .L617
 6746 000a 0446     		mov	r4, r0
1582:easyflash/src/ef_env.c **** 
 6747              		.loc 1 1582 5 is_stmt 1 view .LVU2091
 6748 000c FFF7FEFF 		bl	ef_port_env_lock
 6749              	.LVL628:
1584:easyflash/src/ef_env.c **** 
 6750              		.loc 1 1584 5 view .LVU2092
1584:easyflash/src/ef_env.c **** 
 6751              		.loc 1 1584 14 is_stmt 0 view .LVU2093
 6752 0010 0122     		movs	r2, #1
 6753 0012 0021     		movs	r1, #0
 6754 0014 2046     		mov	r0, r4
 6755 0016 FFF7FEFF 		bl	del_env
 6756              	.LVL629:
 6757 001a 0190     		str	r0, [sp, #4]
 6758              	.LVL630:
1587:easyflash/src/ef_env.c **** 
 6759              		.loc 1 1587 5 is_stmt 1 view .LVU2094
 6760 001c FFF7FEFF 		bl	ef_port_env_unlock
 6761              	.LVL631:
 6762 0020 0198     		ldr	r0, [sp, #4]
1589:easyflash/src/ef_env.c **** }
 6763              		.loc 1 1589 5 view .LVU2095
 6764              	.LVL632:
1589:easyflash/src/ef_env.c **** }
 6765              		.loc 1 1589 5 is_stmt 0 view .LVU2096
 6766              	.LBE441:
 6767              	.LBE443:
1605:easyflash/src/ef_env.c **** 
 6768              		.loc 1 1605 1 view .LVU2097
 6769 0022 02B0     		add	sp, sp, #8
 6770              		.cfi_remember_state
 6771              		.cfi_def_cfa_offset 8
 6772              		@ sp needed
 6773 0024 10BD     		pop	{r4, pc}
 6774              	.LVL633:
 6775              	.L617:
 6776              		.cfi_restore_state
 6777              	.LBB444:
 6778              	.LBB442:
1577:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 6779              		.loc 1 1577 9 is_stmt 1 view .LVU2098
 6780 0026 0448     		ldr	r0, .L618+4
 6781              	.LVL634:
1577:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 6782              		.loc 1 1577 9 is_stmt 0 view .LVU2099
 6783 0028 FFF7FEFF 		bl	ef_log_info
 6784              	.LVL635:
1578:easyflash/src/ef_env.c ****     }
 6785              		.loc 1 1578 9 is_stmt 1 view .LVU2100
1578:easyflash/src/ef_env.c ****     }
 6786              		.loc 1 1578 16 is_stmt 0 view .LVU2101
 6787 002c 0720     		movs	r0, #7
 6788              	.LVL636:
1578:easyflash/src/ef_env.c ****     }
 6789              		.loc 1 1578 16 view .LVU2102
ARM GAS  /tmp/ccSGDQKw.s 			page 191


 6790              	.LBE442:
 6791              	.LBE444:
1605:easyflash/src/ef_env.c **** 
 6792              		.loc 1 1605 1 view .LVU2103
 6793 002e 02B0     		add	sp, sp, #8
 6794              		.cfi_def_cfa_offset 8
 6795              		@ sp needed
 6796 0030 10BD     		pop	{r4, pc}
 6797              	.L619:
 6798 0032 00BF     		.align	2
 6799              	.L618:
 6800 0034 00000000 		.word	.LANCHOR10
 6801 0038 00000000 		.word	.LC30
 6802              		.cfi_endproc
 6803              	.LFE276:
 6805              		.section	.text.ef_set_env_blob,"ax",%progbits
 6806              		.align	1
 6807              		.p2align 2,,3
 6808              		.global	ef_set_env_blob
 6809              		.syntax unified
 6810              		.thumb
 6811              		.thumb_func
 6813              	ef_set_env_blob:
 6814              	.LVL637:
 6815              	.LFB278:
1662:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 6816              		.loc 1 1662 1 is_stmt 1 view -0
 6817              		.cfi_startproc
 6818              		@ args = 0, pretend = 0, frame = 0
 6819              		@ frame_needed = 0, uses_anonymous_args = 0
1663:easyflash/src/ef_env.c **** 
 6820              		.loc 1 1663 5 view .LVU2105
1666:easyflash/src/ef_env.c ****     {
 6821              		.loc 1 1666 5 view .LVU2106
1666:easyflash/src/ef_env.c ****     {
 6822              		.loc 1 1666 9 is_stmt 0 view .LVU2107
 6823 0000 394B     		ldr	r3, .L644
1666:easyflash/src/ef_env.c ****     {
 6824              		.loc 1 1666 8 view .LVU2108
 6825 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1662:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 6826              		.loc 1 1662 1 view .LVU2109
 6827 0004 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 6828              		.cfi_def_cfa_offset 24
 6829              		.cfi_offset 4, -24
 6830              		.cfi_offset 5, -20
 6831              		.cfi_offset 6, -16
 6832              		.cfi_offset 7, -12
 6833              		.cfi_offset 8, -8
 6834              		.cfi_offset 14, -4
1666:easyflash/src/ef_env.c ****     {
 6835              		.loc 1 1666 8 view .LVU2110
 6836 0008 002B     		cmp	r3, #0
 6837 000a 4DD0     		beq	.L641
1673:easyflash/src/ef_env.c **** 
 6838              		.loc 1 1673 5 is_stmt 1 view .LVU2111
 6839 000c 0E46     		mov	r6, r1
ARM GAS  /tmp/ccSGDQKw.s 			page 192


 6840 000e 0446     		mov	r4, r0
 6841 0010 1746     		mov	r7, r2
 6842 0012 FFF7FEFF 		bl	ef_port_env_lock
 6843              	.LVL638:
1675:easyflash/src/ef_env.c **** 
 6844              		.loc 1 1675 5 view .LVU2112
 6845              	.LBB451:
 6846              	.LBI451:
1607:easyflash/src/ef_env.c **** {
 6847              		.loc 1 1607 18 view .LVU2113
 6848              	.LBB452:
1609:easyflash/src/ef_env.c ****     static struct env_node_obj env;
 6849              		.loc 1 1609 5 view .LVU2114
1610:easyflash/src/ef_env.c ****     static struct sector_meta_data sector;
 6850              		.loc 1 1610 5 view .LVU2115
1611:easyflash/src/ef_env.c ****     bool env_is_found = false;
 6851              		.loc 1 1611 5 view .LVU2116
1612:easyflash/src/ef_env.c **** 
 6852              		.loc 1 1612 5 view .LVU2117
1614:easyflash/src/ef_env.c ****     {
 6853              		.loc 1 1614 5 view .LVU2118
1614:easyflash/src/ef_env.c ****     {
 6854              		.loc 1 1614 8 is_stmt 0 view .LVU2119
 6855 0016 002E     		cmp	r6, #0
 6856 0018 3FD0     		beq	.L642
1621:easyflash/src/ef_env.c ****         {
 6857              		.loc 1 1621 9 is_stmt 1 view .LVU2120
1621:easyflash/src/ef_env.c ****         {
 6858              		.loc 1 1621 13 is_stmt 0 view .LVU2121
 6859 001a 2046     		mov	r0, r4
 6860 001c FFF7FEFF 		bl	strlen
 6861              	.LVL639:
 6862              	.LBB453:
 6863              	.LBI453:
1370:easyflash/src/ef_env.c **** {
 6864              		.loc 1 1370 17 is_stmt 1 view .LVU2122
 6865              	.LBB454:
1372:easyflash/src/ef_env.c **** 
 6866              		.loc 1 1372 5 view .LVU2123
1372:easyflash/src/ef_env.c **** 
 6867              		.loc 1 1372 65 is_stmt 0 view .LVU2124
 6868 0020 07F1030C 		add	ip, r7, #3
1372:easyflash/src/ef_env.c **** 
 6869              		.loc 1 1372 42 view .LVU2125
 6870 0024 C51C     		adds	r5, r0, #3
1372:easyflash/src/ef_env.c **** 
 6871              		.loc 1 1372 65 view .LVU2126
 6872 0026 2CF0030C 		bic	ip, ip, #3
1372:easyflash/src/ef_env.c **** 
 6873              		.loc 1 1372 12 view .LVU2127
 6874 002a 0CF1280C 		add	ip, ip, #40
1372:easyflash/src/ef_env.c **** 
 6875              		.loc 1 1372 42 view .LVU2128
 6876 002e 25F00305 		bic	r5, r5, #3
1372:easyflash/src/ef_env.c **** 
 6877              		.loc 1 1372 12 view .LVU2129
 6878 0032 6544     		add	r5, r5, ip
ARM GAS  /tmp/ccSGDQKw.s 			page 193


 6879              	.LVL640:
1374:easyflash/src/ef_env.c **** }
 6880              		.loc 1 1374 5 is_stmt 1 view .LVU2130
 6881              	.LBB455:
 6882              	.LBI455:
1352:easyflash/src/ef_env.c **** {
 6883              		.loc 1 1352 17 view .LVU2131
 6884              	.LBB456:
1359:easyflash/src/ef_env.c ****     {
 6885              		.loc 1 1359 5 view .LVU2132
1359:easyflash/src/ef_env.c ****     {
 6886              		.loc 1 1359 22 is_stmt 0 view .LVU2133
 6887 0034 2D48     		ldr	r0, .L644+4
 6888              	.LVL641:
1359:easyflash/src/ef_env.c ****     {
 6889              		.loc 1 1359 66 view .LVU2134
 6890 0036 DFF8C880 		ldr	r8, .L644+24
1359:easyflash/src/ef_env.c ****     {
 6891              		.loc 1 1359 22 view .LVU2135
 6892 003a 2946     		mov	r1, r5
 6893 003c FFF7FEFF 		bl	alloc_env
 6894              	.LVL642:
1359:easyflash/src/ef_env.c ****     {
 6895              		.loc 1 1359 8 view .LVU2136
 6896 0040 0130     		adds	r0, r0, #1
 6897              	.LVL643:
1359:easyflash/src/ef_env.c ****     {
 6898              		.loc 1 1359 8 view .LVU2137
 6899 0042 17D1     		bne	.L625
1359:easyflash/src/ef_env.c ****     {
 6900              		.loc 1 1359 66 view .LVU2138
 6901 0044 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 6902 0048 2BB9     		cbnz	r3, .L643
 6903              	.LVL644:
 6904              	.L626:
1359:easyflash/src/ef_env.c ****     {
 6905              		.loc 1 1359 66 view .LVU2139
 6906              	.LBE456:
 6907              	.LBE455:
 6908              	.LBE454:
 6909              	.LBE453:
1623:easyflash/src/ef_env.c ****         }
 6910              		.loc 1 1623 20 view .LVU2140
 6911 004a 0625     		movs	r5, #6
 6912              	.LVL645:
 6913              	.L624:
1623:easyflash/src/ef_env.c ****         }
 6914              		.loc 1 1623 20 view .LVU2141
 6915              	.LBE452:
 6916              	.LBE451:
1678:easyflash/src/ef_env.c **** 
 6917              		.loc 1 1678 5 is_stmt 1 view .LVU2142
 6918 004c FFF7FEFF 		bl	ef_port_env_unlock
 6919              	.LVL646:
1680:easyflash/src/ef_env.c **** }
 6920              		.loc 1 1680 5 view .LVU2143
1681:easyflash/src/ef_env.c **** 
ARM GAS  /tmp/ccSGDQKw.s 			page 194


 6921              		.loc 1 1681 1 is_stmt 0 view .LVU2144
 6922 0050 2846     		mov	r0, r5
 6923 0052 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6924              	.LVL647:
 6925              	.L643:
 6926              	.LBB463:
 6927              	.LBB461:
 6928              	.LBB460:
 6929              	.LBB459:
 6930              	.LBB458:
 6931              	.LBB457:
1361:easyflash/src/ef_env.c ****         gc_collect();
 6932              		.loc 1 1361 9 is_stmt 1 view .LVU2145
 6933 0056 264A     		ldr	r2, .L644+8
 6934 0058 2648     		ldr	r0, .L644+12
 6935              	.LVL648:
1361:easyflash/src/ef_env.c ****         gc_collect();
 6936              		.loc 1 1361 9 is_stmt 0 view .LVU2146
 6937 005a 2B46     		mov	r3, r5
 6938 005c 40F25151 		movw	r1, #1361
 6939 0060 FFF7FEFF 		bl	ef_log_debug
 6940              	.LVL649:
1362:easyflash/src/ef_env.c ****         already_gc = true;
 6941              		.loc 1 1362 9 is_stmt 1 view .LVU2147
 6942 0064 FFF7FEFF 		bl	gc_collect
 6943              	.LVL650:
1363:easyflash/src/ef_env.c ****         goto __retry;
 6944              		.loc 1 1363 9 view .LVU2148
1364:easyflash/src/ef_env.c ****     }
 6945              		.loc 1 1364 9 view .LVU2149
 6946              	.LDL2:
1359:easyflash/src/ef_env.c ****     {
 6947              		.loc 1 1359 5 view .LVU2150
1359:easyflash/src/ef_env.c ****     {
 6948              		.loc 1 1359 22 is_stmt 0 view .LVU2151
 6949 0068 2048     		ldr	r0, .L644+4
 6950 006a 2946     		mov	r1, r5
 6951 006c FFF7FEFF 		bl	alloc_env
 6952              	.LVL651:
1359:easyflash/src/ef_env.c ****     {
 6953              		.loc 1 1359 8 view .LVU2152
 6954 0070 0130     		adds	r0, r0, #1
 6955              	.LVL652:
1359:easyflash/src/ef_env.c ****     {
 6956              		.loc 1 1359 8 view .LVU2153
 6957 0072 EAD0     		beq	.L626
 6958              	.LVL653:
 6959              	.L625:
1367:easyflash/src/ef_env.c **** }
 6960              		.loc 1 1367 5 is_stmt 1 view .LVU2154
1367:easyflash/src/ef_env.c **** }
 6961              		.loc 1 1367 5 is_stmt 0 view .LVU2155
 6962              	.LBE457:
 6963              	.LBE458:
 6964              	.LBE459:
 6965              	.LBE460:
1625:easyflash/src/ef_env.c ****         /* prepare to delete the old ENV */
ARM GAS  /tmp/ccSGDQKw.s 			page 195


 6966              		.loc 1 1625 9 is_stmt 1 view .LVU2156
1625:easyflash/src/ef_env.c ****         /* prepare to delete the old ENV */
 6967              		.loc 1 1625 24 is_stmt 0 view .LVU2157
 6968 0074 2049     		ldr	r1, .L644+16
 6969 0076 2046     		mov	r0, r4
 6970 0078 FFF7FEFF 		bl	find_env
 6971              	.LVL654:
1627:easyflash/src/ef_env.c ****         {
 6972              		.loc 1 1627 9 is_stmt 1 view .LVU2158
1627:easyflash/src/ef_env.c ****         {
 6973              		.loc 1 1627 12 is_stmt 0 view .LVU2159
 6974 007c D8B9     		cbnz	r0, .L629
 6975              	.LVL655:
1634:easyflash/src/ef_env.c ****         }
 6976              		.loc 1 1634 13 is_stmt 1 view .LVU2160
1634:easyflash/src/ef_env.c ****         }
 6977              		.loc 1 1634 22 is_stmt 0 view .LVU2161
 6978 007e 1B48     		ldr	r0, .L644+4
 6979              	.LVL656:
1634:easyflash/src/ef_env.c ****         }
 6980              		.loc 1 1634 22 view .LVU2162
 6981 0080 3B46     		mov	r3, r7
 6982 0082 3246     		mov	r2, r6
 6983 0084 2146     		mov	r1, r4
 6984 0086 FFF7FEFF 		bl	create_env_blob
 6985              	.LVL657:
 6986 008a 0546     		mov	r5, r0
 6987              	.LVL658:
1637:easyflash/src/ef_env.c ****         {
 6988              		.loc 1 1637 9 is_stmt 1 view .LVU2163
 6989              	.L628:
1642:easyflash/src/ef_env.c ****         {
 6990              		.loc 1 1642 9 view .LVU2164
1642:easyflash/src/ef_env.c ****         {
 6991              		.loc 1 1642 12 is_stmt 0 view .LVU2165
 6992 008c 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 6993 0090 002B     		cmp	r3, #0
 6994 0092 DBD0     		beq	.L624
1644:easyflash/src/ef_env.c ****         }
 6995              		.loc 1 1644 13 is_stmt 1 view .LVU2166
 6996 0094 FFF7FEFF 		bl	gc_collect
 6997              	.LVL659:
 6998 0098 D8E7     		b	.L624
 6999              	.LVL660:
 7000              	.L642:
1616:easyflash/src/ef_env.c ****     }
 7001              		.loc 1 1616 9 view .LVU2167
1616:easyflash/src/ef_env.c ****     }
 7002              		.loc 1 1616 18 is_stmt 0 view .LVU2168
 7003 009a 0122     		movs	r2, #1
 7004 009c 3146     		mov	r1, r6
 7005 009e 2046     		mov	r0, r4
 7006 00a0 FFF7FEFF 		bl	del_env
 7007              	.LVL661:
 7008 00a4 0546     		mov	r5, r0
 7009              	.LVL662:
1616:easyflash/src/ef_env.c ****     }
ARM GAS  /tmp/ccSGDQKw.s 			page 196


 7010              		.loc 1 1616 18 view .LVU2169
 7011 00a6 D1E7     		b	.L624
 7012              	.LVL663:
 7013              	.L641:
1616:easyflash/src/ef_env.c ****     }
 7014              		.loc 1 1616 18 view .LVU2170
 7015              	.LBE461:
 7016              	.LBE463:
1668:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 7017              		.loc 1 1668 9 is_stmt 1 view .LVU2171
 7018 00a8 1448     		ldr	r0, .L644+20
 7019              	.LVL664:
1669:easyflash/src/ef_env.c ****     }
 7020              		.loc 1 1669 16 is_stmt 0 view .LVU2172
 7021 00aa 0725     		movs	r5, #7
1668:easyflash/src/ef_env.c ****         return EF_ENV_INIT_FAILED;
 7022              		.loc 1 1668 9 view .LVU2173
 7023 00ac FFF7FEFF 		bl	ef_log_info
 7024              	.LVL665:
1669:easyflash/src/ef_env.c ****     }
 7025              		.loc 1 1669 9 is_stmt 1 view .LVU2174
1681:easyflash/src/ef_env.c **** 
 7026              		.loc 1 1681 1 is_stmt 0 view .LVU2175
 7027 00b0 2846     		mov	r0, r5
 7028 00b2 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 7029              	.LVL666:
 7030              	.L629:
 7031              	.LBB464:
 7032              	.LBB462:
1629:easyflash/src/ef_env.c ****         }
 7033              		.loc 1 1629 13 is_stmt 1 view .LVU2176
1629:easyflash/src/ef_env.c ****         }
 7034              		.loc 1 1629 22 is_stmt 0 view .LVU2177
 7035 00b6 1049     		ldr	r1, .L644+16
 7036 00b8 0022     		movs	r2, #0
 7037 00ba 2046     		mov	r0, r4
 7038              	.LVL667:
1629:easyflash/src/ef_env.c ****         }
 7039              		.loc 1 1629 22 view .LVU2178
 7040 00bc FFF7FEFF 		bl	del_env
 7041              	.LVL668:
1632:easyflash/src/ef_env.c ****         {
 7042              		.loc 1 1632 9 is_stmt 1 view .LVU2179
1632:easyflash/src/ef_env.c ****         {
 7043              		.loc 1 1632 12 is_stmt 0 view .LVU2180
 7044 00c0 0546     		mov	r5, r0
 7045 00c2 0028     		cmp	r0, #0
 7046 00c4 E2D1     		bne	.L628
 7047              	.LVL669:
1634:easyflash/src/ef_env.c ****         }
 7048              		.loc 1 1634 13 is_stmt 1 view .LVU2181
1634:easyflash/src/ef_env.c ****         }
 7049              		.loc 1 1634 22 is_stmt 0 view .LVU2182
 7050 00c6 0948     		ldr	r0, .L644+4
 7051 00c8 3B46     		mov	r3, r7
 7052 00ca 3246     		mov	r2, r6
 7053 00cc 2146     		mov	r1, r4
ARM GAS  /tmp/ccSGDQKw.s 			page 197


 7054 00ce FFF7FEFF 		bl	create_env_blob
 7055              	.LVL670:
1637:easyflash/src/ef_env.c ****         {
 7056              		.loc 1 1637 9 is_stmt 1 view .LVU2183
1637:easyflash/src/ef_env.c ****         {
 7057              		.loc 1 1637 26 is_stmt 0 view .LVU2184
 7058 00d2 0546     		mov	r5, r0
 7059 00d4 0028     		cmp	r0, #0
 7060 00d6 D9D1     		bne	.L628
1639:easyflash/src/ef_env.c ****         }
 7061              		.loc 1 1639 13 is_stmt 1 view .LVU2185
1639:easyflash/src/ef_env.c ****         }
 7062              		.loc 1 1639 22 is_stmt 0 view .LVU2186
 7063 00d8 0749     		ldr	r1, .L644+16
 7064 00da 0122     		movs	r2, #1
 7065 00dc 2046     		mov	r0, r4
 7066              	.LVL671:
1639:easyflash/src/ef_env.c ****         }
 7067              		.loc 1 1639 22 view .LVU2187
 7068 00de FFF7FEFF 		bl	del_env
 7069              	.LVL672:
 7070 00e2 0546     		mov	r5, r0
 7071              	.LVL673:
1639:easyflash/src/ef_env.c ****         }
 7072              		.loc 1 1639 22 view .LVU2188
 7073 00e4 D2E7     		b	.L628
 7074              	.L645:
 7075 00e6 00BF     		.align	2
 7076              	.L644:
 7077 00e8 00000000 		.word	.LANCHOR10
 7078 00ec 00000000 		.word	.LANCHOR13
 7079 00f0 4C000000 		.word	.LC24
 7080 00f4 3C000000 		.word	.LC2
 7081 00f8 00000000 		.word	.LANCHOR14
 7082 00fc 00000000 		.word	.LC26
 7083 0100 00000000 		.word	.LANCHOR2
 7084              	.LBE462:
 7085              	.LBE464:
 7086              		.cfi_endproc
 7087              	.LFE278:
 7089              		.section	.text.ef_set_env,"ax",%progbits
 7090              		.align	1
 7091              		.p2align 2,,3
 7092              		.global	ef_set_env
 7093              		.syntax unified
 7094              		.thumb
 7095              		.thumb_func
 7097              	ef_set_env:
 7098              	.LVL674:
 7099              	.LFB279:
1693:easyflash/src/ef_env.c ****     return ef_set_env_blob(key, value, strlen(value));
 7100              		.loc 1 1693 1 is_stmt 1 view -0
 7101              		.cfi_startproc
 7102              		@ args = 0, pretend = 0, frame = 8
 7103              		@ frame_needed = 0, uses_anonymous_args = 0
1694:easyflash/src/ef_env.c **** }
 7104              		.loc 1 1694 5 view .LVU2190
ARM GAS  /tmp/ccSGDQKw.s 			page 198


1693:easyflash/src/ef_env.c ****     return ef_set_env_blob(key, value, strlen(value));
 7105              		.loc 1 1693 1 is_stmt 0 view .LVU2191
 7106 0000 10B5     		push	{r4, lr}
 7107              		.cfi_def_cfa_offset 8
 7108              		.cfi_offset 4, -8
 7109              		.cfi_offset 14, -4
 7110 0002 82B0     		sub	sp, sp, #8
 7111              		.cfi_def_cfa_offset 16
1693:easyflash/src/ef_env.c ****     return ef_set_env_blob(key, value, strlen(value));
 7112              		.loc 1 1693 1 view .LVU2192
 7113 0004 0446     		mov	r4, r0
1694:easyflash/src/ef_env.c **** }
 7114              		.loc 1 1694 12 view .LVU2193
 7115 0006 0846     		mov	r0, r1
 7116              	.LVL675:
1694:easyflash/src/ef_env.c **** }
 7117              		.loc 1 1694 12 view .LVU2194
 7118 0008 0191     		str	r1, [sp, #4]
 7119 000a FFF7FEFF 		bl	strlen
 7120              	.LVL676:
1694:easyflash/src/ef_env.c **** }
 7121              		.loc 1 1694 12 view .LVU2195
 7122 000e 0199     		ldr	r1, [sp, #4]
 7123 0010 0246     		mov	r2, r0
 7124 0012 2046     		mov	r0, r4
1695:easyflash/src/ef_env.c **** 
 7125              		.loc 1 1695 1 view .LVU2196
 7126 0014 02B0     		add	sp, sp, #8
 7127              		.cfi_def_cfa_offset 8
 7128              		@ sp needed
 7129 0016 BDE81040 		pop	{r4, lr}
 7130              		.cfi_restore 14
 7131              		.cfi_restore 4
 7132              		.cfi_def_cfa_offset 0
 7133              	.LVL677:
1694:easyflash/src/ef_env.c **** }
 7134              		.loc 1 1694 12 view .LVU2197
 7135 001a FFF7FEBF 		b	ef_set_env_blob
 7136              	.LVL678:
1694:easyflash/src/ef_env.c **** }
 7137              		.loc 1 1694 12 view .LVU2198
 7138              		.cfi_endproc
 7139              	.LFE279:
 7141 001e 00BF     		.section	.text.ef_set_and_save_env,"ax",%progbits
 7142              		.align	1
 7143              		.p2align 2,,3
 7144              		.global	ef_set_and_save_env
 7145              		.syntax unified
 7146              		.thumb
 7147              		.thumb_func
 7149              	ef_set_and_save_env:
 7150              	.LFB304:
 7151              		.cfi_startproc
 7152              		@ args = 0, pretend = 0, frame = 8
 7153              		@ frame_needed = 0, uses_anonymous_args = 0
 7154 0000 10B5     		push	{r4, lr}
 7155              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccSGDQKw.s 			page 199


 7156              		.cfi_offset 4, -8
 7157              		.cfi_offset 14, -4
 7158 0002 82B0     		sub	sp, sp, #8
 7159              		.cfi_def_cfa_offset 16
 7160 0004 0446     		mov	r4, r0
 7161 0006 0846     		mov	r0, r1
 7162 0008 0191     		str	r1, [sp, #4]
 7163 000a FFF7FEFF 		bl	strlen
 7164 000e 0199     		ldr	r1, [sp, #4]
 7165 0010 0246     		mov	r2, r0
 7166 0012 2046     		mov	r0, r4
 7167 0014 02B0     		add	sp, sp, #8
 7168              		.cfi_def_cfa_offset 8
 7169              		@ sp needed
 7170 0016 BDE81040 		pop	{r4, lr}
 7171              		.cfi_restore 14
 7172              		.cfi_restore 4
 7173              		.cfi_def_cfa_offset 0
 7174 001a FFF7FEBF 		b	ef_set_env_blob
 7175              		.cfi_endproc
 7176              	.LFE304:
 7178 001e 00BF     		.section	.text.ef_save_env,"ax",%progbits
 7179              		.align	1
 7180              		.p2align 2,,3
 7181              		.global	ef_save_env
 7182              		.syntax unified
 7183              		.thumb
 7184              		.thumb_func
 7186              	ef_save_env:
 7187              	.LFB281:
1719:easyflash/src/ef_env.c ****     /* do nothing not cur mode */
 7188              		.loc 1 1719 1 is_stmt 1 view -0
 7189              		.cfi_startproc
 7190              		@ args = 0, pretend = 0, frame = 0
 7191              		@ frame_needed = 0, uses_anonymous_args = 0
 7192              		@ link register save eliminated.
1721:easyflash/src/ef_env.c **** }
 7193              		.loc 1 1721 5 view .LVU2200
1722:easyflash/src/ef_env.c **** 
 7194              		.loc 1 1722 1 is_stmt 0 view .LVU2201
 7195 0000 0020     		movs	r0, #0
 7196 0002 7047     		bx	lr
 7197              		.cfi_endproc
 7198              	.LFE281:
 7200              		.section	.rodata.ef_env_set_default.str1.4,"aMS",%progbits,1
 7201              		.align	2
 7202              	.LC31:
 7203 0000 64656661 		.ascii	"default_env_set\000"
 7203      756C745F 
 7203      656E765F 
 7203      73657400 
 7204              		.align	2
 7205              	.LC32:
 7206 0010 64656661 		.ascii	"default_env_set_size\000"
 7206      756C745F 
 7206      656E765F 
 7206      7365745F 
ARM GAS  /tmp/ccSGDQKw.s 			page 200


 7206      73697A65 
 7207              		.section	.text.ef_env_set_default,"ax",%progbits
 7208              		.align	1
 7209              		.p2align 2,,3
 7210              		.global	ef_env_set_default
 7211              		.syntax unified
 7212              		.thumb
 7213              		.thumb_func
 7215              	ef_env_set_default:
 7216              	.LFB282:
1730:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7217              		.loc 1 1730 1 is_stmt 1 view -0
 7218              		.cfi_startproc
 7219              		@ args = 0, pretend = 0, frame = 32
 7220              		@ frame_needed = 0, uses_anonymous_args = 0
1731:easyflash/src/ef_env.c ****     uint32_t addr, i, value_len;
 7221              		.loc 1 1731 5 view .LVU2203
 7222              	.LVL679:
1732:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 7223              		.loc 1 1732 5 view .LVU2204
1733:easyflash/src/ef_env.c **** 
 7224              		.loc 1 1733 5 view .LVU2205
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7225              		.loc 1 1735 5 view .LVU2206
1730:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7226              		.loc 1 1730 1 is_stmt 0 view .LVU2207
 7227 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 7228              		.cfi_def_cfa_offset 28
 7229              		.cfi_offset 4, -28
 7230              		.cfi_offset 5, -24
 7231              		.cfi_offset 6, -20
 7232              		.cfi_offset 7, -16
 7233              		.cfi_offset 8, -12
 7234              		.cfi_offset 9, -8
 7235              		.cfi_offset 14, -4
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7236              		.loc 1 1735 5 view .LVU2208
 7237 0004 2C4F     		ldr	r7, .L671
 7238 0006 3B68     		ldr	r3, [r7]
1730:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7239              		.loc 1 1730 1 view .LVU2209
 7240 0008 8BB0     		sub	sp, sp, #44
 7241              		.cfi_def_cfa_offset 72
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7242              		.loc 1 1735 5 view .LVU2210
 7243 000a 002B     		cmp	r3, #0
 7244 000c 4AD0     		beq	.L668
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7245              		.loc 1 1735 31 is_stmt 1 discriminator 2 view .LVU2211
1736:easyflash/src/ef_env.c **** 
 7246              		.loc 1 1736 5 discriminator 2 view .LVU2212
 7247 000e DFF8C480 		ldr	r8, .L671+28
 7248 0012 D8F80030 		ldr	r3, [r8]
 7249 0016 D3B1     		cbz	r3, .L669
 7250              	.LBB467:
 7251              	.LBI467:
1729:easyflash/src/ef_env.c **** {
ARM GAS  /tmp/ccSGDQKw.s 			page 201


 7252              		.loc 1 1729 11 view .LVU2213
 7253              	.LBB468:
1736:easyflash/src/ef_env.c **** 
 7254              		.loc 1 1736 36 view .LVU2214
1739:easyflash/src/ef_env.c ****     /* format all sectors */
 7255              		.loc 1 1739 5 view .LVU2215
1741:easyflash/src/ef_env.c ****     {
 7256              		.loc 1 1741 15 is_stmt 0 view .LVU2216
 7257 0018 284D     		ldr	r5, .L671+4
1739:easyflash/src/ef_env.c ****     /* format all sectors */
 7258              		.loc 1 1739 5 view .LVU2217
 7259 001a FFF7FEFF 		bl	ef_port_env_lock
 7260              	.LVL680:
1741:easyflash/src/ef_env.c ****     {
 7261              		.loc 1 1741 5 is_stmt 1 view .LVU2218
1741:easyflash/src/ef_env.c ****     {
 7262              		.loc 1 1741 15 is_stmt 0 view .LVU2219
 7263 001e 2C68     		ldr	r4, [r5]
 7264              	.LVL681:
1741:easyflash/src/ef_env.c ****     {
 7265              		.loc 1 1741 33 is_stmt 1 view .LVU2220
1741:easyflash/src/ef_env.c ****     {
 7266              		.loc 1 1741 5 is_stmt 0 view .LVU2221
 7267 0020 14F5802F 		cmn	r4, #262144
 7268 0024 05D3     		bcc	.L656
 7269 0026 1CE0     		b	.L660
 7270              	.LVL682:
 7271              	.L670:
1741:easyflash/src/ef_env.c ****     {
 7272              		.loc 1 1741 55 view .LVU2222
 7273 0028 2B68     		ldr	r3, [r5]
 7274 002a 03F58023 		add	r3, r3, #262144
1741:easyflash/src/ef_env.c ****     {
 7275              		.loc 1 1741 5 view .LVU2223
 7276 002e 9C42     		cmp	r4, r3
 7277 0030 17D2     		bcs	.L660
 7278              	.LVL683:
 7279              	.L656:
1743:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
 7280              		.loc 1 1743 9 is_stmt 1 view .LVU2224
1743:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
 7281              		.loc 1 1743 18 is_stmt 0 view .LVU2225
 7282 0032 2046     		mov	r0, r4
1741:easyflash/src/ef_env.c ****     {
 7283              		.loc 1 1741 77 view .LVU2226
 7284 0034 04F50034 		add	r4, r4, #131072
 7285              	.LVL684:
1743:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
 7286              		.loc 1 1743 18 view .LVU2227
 7287 0038 FFF7FEFF 		bl	format_sector.constprop.0
 7288              	.LVL685:
1741:easyflash/src/ef_env.c ****     {
 7289              		.loc 1 1741 72 is_stmt 1 view .LVU2228
1741:easyflash/src/ef_env.c ****     {
 7290              		.loc 1 1741 33 view .LVU2229
1744:easyflash/src/ef_env.c ****         {
 7291              		.loc 1 1744 9 view .LVU2230
ARM GAS  /tmp/ccSGDQKw.s 			page 202


1744:easyflash/src/ef_env.c ****         {
 7292              		.loc 1 1744 12 is_stmt 0 view .LVU2231
 7293 003c 0028     		cmp	r0, #0
 7294 003e F3D0     		beq	.L670
 7295              	.LVL686:
 7296              	.L659:
1744:easyflash/src/ef_env.c ****         {
 7297              		.loc 1 1744 12 view .LVU2232
 7298 0040 0390     		str	r0, [sp, #12]
 7299              	.LVL687:
1772:easyflash/src/ef_env.c **** 
 7300              		.loc 1 1772 5 is_stmt 1 view .LVU2233
 7301 0042 FFF7FEFF 		bl	ef_port_env_unlock
 7302              	.LVL688:
1774:easyflash/src/ef_env.c **** }
 7303              		.loc 1 1774 5 view .LVU2234
1774:easyflash/src/ef_env.c **** }
 7304              		.loc 1 1774 5 is_stmt 0 view .LVU2235
 7305              	.LBE468:
 7306              	.LBE467:
1775:easyflash/src/ef_env.c **** 
 7307              		.loc 1 1775 1 view .LVU2236
 7308 0046 0398     		ldr	r0, [sp, #12]
 7309 0048 0BB0     		add	sp, sp, #44
 7310              		.cfi_remember_state
 7311              		.cfi_def_cfa_offset 28
 7312              		@ sp needed
 7313 004a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 7314              	.L669:
 7315              		.cfi_restore_state
1736:easyflash/src/ef_env.c **** 
 7316              		.loc 1 1736 5 is_stmt 1 discriminator 1 view .LVU2237
 7317 004e 1C49     		ldr	r1, .L671+8
 7318 0050 0091     		str	r1, [sp]
 7319 0052 1C4B     		ldr	r3, .L671+12
 7320 0054 1C4A     		ldr	r2, .L671+16
 7321 0056 1D48     		ldr	r0, .L671+20
 7322 0058 4FF4D961 		mov	r1, #1736
 7323 005c FFF7FEFF 		bl	ef_log_debug
 7324              	.LVL689:
 7325              	.L655:
1736:easyflash/src/ef_env.c **** 
 7326              		.loc 1 1736 5 discriminator 2 view .LVU2238
1736:easyflash/src/ef_env.c **** 
 7327              		.loc 1 1736 5 discriminator 2 view .LVU2239
1736:easyflash/src/ef_env.c **** 
 7328              		.loc 1 1736 5 discriminator 2 view .LVU2240
1736:easyflash/src/ef_env.c **** 
 7329              		.loc 1 1736 5 discriminator 2 view .LVU2241
1736:easyflash/src/ef_env.c **** 
 7330              		.loc 1 1736 5 discriminator 2 view .LVU2242
1736:easyflash/src/ef_env.c **** 
 7331              		.loc 1 1736 5 discriminator 2 view .LVU2243
 7332 0060 FEE7     		b	.L655
 7333              	.LVL690:
 7334              	.L660:
 7335              	.LBB470:
ARM GAS  /tmp/ccSGDQKw.s 			page 203


 7336              	.LBB469:
1750:easyflash/src/ef_env.c ****     {
 7337              		.loc 1 1750 17 view .LVU2244
1750:easyflash/src/ef_env.c ****     {
 7338              		.loc 1 1750 5 is_stmt 0 view .LVU2245
 7339 0062 D8F80030 		ldr	r3, [r8]
 7340 0066 DBB1     		cbz	r3, .L658
 7341 0068 0025     		movs	r5, #0
1750:easyflash/src/ef_env.c ****     {
 7342              		.loc 1 1750 12 view .LVU2246
 7343 006a 2E46     		mov	r6, r5
1762:easyflash/src/ef_env.c ****         create_env_blob(&sector, default_env_set[i].key, default_env_set[i].value, value_len);
 7344              		.loc 1 1762 26 view .LVU2247
 7345 006c 4FF0FF39 		mov	r9, #-1
 7346              	.LVL691:
 7347              	.L657:
1754:easyflash/src/ef_env.c ****         {
 7348              		.loc 1 1754 9 is_stmt 1 view .LVU2248
1756:easyflash/src/ef_env.c ****         }
 7349              		.loc 1 1756 13 view .LVU2249
1754:easyflash/src/ef_env.c ****         {
 7350              		.loc 1 1754 28 is_stmt 0 view .LVU2250
 7351 0070 3C68     		ldr	r4, [r7]
 7352 0072 2C44     		add	r4, r4, r5
1756:easyflash/src/ef_env.c ****         }
 7353              		.loc 1 1756 50 view .LVU2251
 7354 0074 D4E90123 		ldrd	r2, r3, [r4, #4]
1754:easyflash/src/ef_env.c ****         {
 7355              		.loc 1 1754 12 view .LVU2252
 7356 0078 2BB9     		cbnz	r3, .L662
1756:easyflash/src/ef_env.c ****         }
 7357              		.loc 1 1756 25 view .LVU2253
 7358 007a 1046     		mov	r0, r2
 7359 007c 0392     		str	r2, [sp, #12]
 7360 007e FFF7FEFF 		bl	strlen
 7361              	.LVL692:
 7362 0082 039A     		ldr	r2, [sp, #12]
 7363 0084 0346     		mov	r3, r0
 7364              	.LVL693:
 7365              	.L662:
1762:easyflash/src/ef_env.c ****         create_env_blob(&sector, default_env_set[i].key, default_env_set[i].value, value_len);
 7366              		.loc 1 1762 9 is_stmt 1 view .LVU2254
1763:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
 7367              		.loc 1 1763 9 is_stmt 0 view .LVU2255
 7368 0086 2168     		ldr	r1, [r4]
1762:easyflash/src/ef_env.c ****         create_env_blob(&sector, default_env_set[i].key, default_env_set[i].value, value_len);
 7369              		.loc 1 1762 26 view .LVU2256
 7370 0088 CDF82490 		str	r9, [sp, #36]
1763:easyflash/src/ef_env.c ****         if (result != EF_NO_ERR)
 7371              		.loc 1 1763 9 is_stmt 1 view .LVU2257
 7372 008c 04A8     		add	r0, sp, #16
 7373 008e FFF7FEFF 		bl	create_env_blob
 7374              	.LVL694:
1764:easyflash/src/ef_env.c ****         {
 7375              		.loc 1 1764 9 view .LVU2258
1750:easyflash/src/ef_env.c ****     {
 7376              		.loc 1 1750 43 view .LVU2259
ARM GAS  /tmp/ccSGDQKw.s 			page 204


1750:easyflash/src/ef_env.c ****     {
 7377              		.loc 1 1750 5 is_stmt 0 view .LVU2260
 7378 0092 D8F80030 		ldr	r3, [r8]
1750:easyflash/src/ef_env.c ****     {
 7379              		.loc 1 1750 44 view .LVU2261
 7380 0096 0136     		adds	r6, r6, #1
 7381              	.LVL695:
1750:easyflash/src/ef_env.c ****     {
 7382              		.loc 1 1750 17 is_stmt 1 view .LVU2262
1750:easyflash/src/ef_env.c ****     {
 7383              		.loc 1 1750 5 is_stmt 0 view .LVU2263
 7384 0098 9E42     		cmp	r6, r3
 7385 009a 05F10C05 		add	r5, r5, #12
 7386 009e E7D3     		bcc	.L657
 7387              	.LVL696:
 7388              	.L658:
1750:easyflash/src/ef_env.c ****     {
 7389              		.loc 1 1750 12 view .LVU2264
 7390 00a0 0020     		movs	r0, #0
 7391 00a2 CDE7     		b	.L659
 7392              	.L668:
1750:easyflash/src/ef_env.c ****     {
 7393              		.loc 1 1750 12 view .LVU2265
 7394              	.LBE469:
 7395              	.LBE470:
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7396              		.loc 1 1735 5 is_stmt 1 discriminator 1 view .LVU2266
 7397 00a4 0649     		ldr	r1, .L671+8
 7398 00a6 0091     		str	r1, [sp]
 7399 00a8 094B     		ldr	r3, .L671+24
 7400 00aa 074A     		ldr	r2, .L671+16
 7401 00ac 0748     		ldr	r0, .L671+20
 7402 00ae 40F2C761 		movw	r1, #1735
 7403 00b2 FFF7FEFF 		bl	ef_log_debug
 7404              	.LVL697:
 7405              	.L653:
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7406              		.loc 1 1735 5 discriminator 1 view .LVU2267
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7407              		.loc 1 1735 5 discriminator 1 view .LVU2268
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7408              		.loc 1 1735 5 discriminator 1 view .LVU2269
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7409              		.loc 1 1735 5 discriminator 1 view .LVU2270
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7410              		.loc 1 1735 5 discriminator 1 view .LVU2271
1735:easyflash/src/ef_env.c ****     EF_ASSERT(default_env_set_size);
 7411              		.loc 1 1735 5 discriminator 1 view .LVU2272
 7412 00b6 FEE7     		b	.L653
 7413              	.L672:
 7414              		.align	2
 7415              	.L671:
 7416 00b8 00000000 		.word	.LANCHOR15
 7417 00bc 00000000 		.word	.LANCHOR7
 7418 00c0 00000000 		.word	.LANCHOR16
 7419 00c4 10000000 		.word	.LC32
 7420 00c8 1C000000 		.word	.LC1
ARM GAS  /tmp/ccSGDQKw.s 			page 205


 7421 00cc 3C000000 		.word	.LC2
 7422 00d0 00000000 		.word	.LC31
 7423 00d4 00000000 		.word	.LANCHOR17
 7424              		.cfi_endproc
 7425              	.LFE282:
 7427              		.section	.rodata.ef_print_env.str1.4,"aMS",%progbits,1
 7428              		.align	2
 7429              	.LC33:
 7430 0000 0D0A6D6F 		.ascii	"\015\012mode: next generation\015\012\000"
 7430      64653A20 
 7430      6E657874 
 7430      2067656E 
 7430      65726174 
 7431 001a 0000     		.align	2
 7432              	.LC34:
 7433 001c 73697A65 		.ascii	"size: %lu/%lu bytes.\015\012\000"
 7433      3A20256C 
 7433      752F256C 
 7433      75206279 
 7433      7465732E 
 7434              		.section	.text.ef_print_env,"ax",%progbits
 7435              		.align	1
 7436              		.p2align 2,,3
 7437              		.global	ef_print_env
 7438              		.syntax unified
 7439              		.thumb
 7440              		.thumb_func
 7442              	ef_print_env:
 7443              	.LFB284:
1844:easyflash/src/ef_env.c ****     struct env_node_obj env;
 7444              		.loc 1 1844 1 view -0
 7445              		.cfi_startproc
 7446              		@ args = 0, pretend = 0, frame = 64
 7447              		@ frame_needed = 0, uses_anonymous_args = 0
1845:easyflash/src/ef_env.c ****     size_t using_size = 0;
 7448              		.loc 1 1845 5 view .LVU2274
1846:easyflash/src/ef_env.c **** 
 7449              		.loc 1 1846 5 view .LVU2275
1844:easyflash/src/ef_env.c ****     struct env_node_obj env;
 7450              		.loc 1 1844 1 is_stmt 0 view .LVU2276
 7451 0000 10B5     		push	{r4, lr}
 7452              		.cfi_def_cfa_offset 8
 7453              		.cfi_offset 4, -8
 7454              		.cfi_offset 14, -4
1848:easyflash/src/ef_env.c ****     {
 7455              		.loc 1 1848 9 view .LVU2277
 7456 0002 104B     		ldr	r3, .L678
1844:easyflash/src/ef_env.c ****     struct env_node_obj env;
 7457              		.loc 1 1844 1 view .LVU2278
 7458 0004 90B0     		sub	sp, sp, #64
 7459              		.cfi_def_cfa_offset 72
1848:easyflash/src/ef_env.c ****     {
 7460              		.loc 1 1848 8 view .LVU2279
 7461 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1846:easyflash/src/ef_env.c **** 
 7462              		.loc 1 1846 12 view .LVU2280
 7463 0008 0024     		movs	r4, #0
ARM GAS  /tmp/ccSGDQKw.s 			page 206


 7464 000a 0194     		str	r4, [sp, #4]
1848:easyflash/src/ef_env.c ****     {
 7465              		.loc 1 1848 5 is_stmt 1 view .LVU2281
1848:easyflash/src/ef_env.c ****     {
 7466              		.loc 1 1848 8 is_stmt 0 view .LVU2282
 7467 000c ABB1     		cbz	r3, .L677
1855:easyflash/src/ef_env.c **** 
 7468              		.loc 1 1855 5 is_stmt 1 view .LVU2283
 7469 000e FFF7FEFF 		bl	ef_port_env_lock
 7470              	.LVL698:
1857:easyflash/src/ef_env.c **** 
 7471              		.loc 1 1857 5 view .LVU2284
 7472 0012 0D4B     		ldr	r3, .L678+4
 7473 0014 2246     		mov	r2, r4
 7474 0016 01A9     		add	r1, sp, #4
 7475 0018 02A8     		add	r0, sp, #8
 7476 001a FFF7FEFF 		bl	env_iterator
 7477              	.LVL699:
1859:easyflash/src/ef_env.c ****     ef_print("size: %lu/%lu bytes.\r\n", using_size + (SECTOR_NUM - EF_GC_EMPTY_SEC_THRESHOLD) * SE
 7478              		.loc 1 1859 5 view .LVU2285
 7479 001e 0B48     		ldr	r0, .L678+8
 7480 0020 FFF7FEFF 		bl	ef_print
 7481              	.LVL700:
1860:easyflash/src/ef_env.c ****              ENV_AREA_SIZE - SECTOR_SIZE * EF_GC_EMPTY_SEC_THRESHOLD);
 7482              		.loc 1 1860 5 view .LVU2286
 7483 0024 0199     		ldr	r1, [sp, #4]
 7484 0026 0A48     		ldr	r0, .L678+12
 7485 0028 4FF40032 		mov	r2, #131072
 7486 002c 2431     		adds	r1, r1, #36
 7487 002e FFF7FEFF 		bl	ef_print
 7488              	.LVL701:
1864:easyflash/src/ef_env.c **** }
 7489              		.loc 1 1864 5 view .LVU2287
 7490 0032 FFF7FEFF 		bl	ef_port_env_unlock
 7491              	.LVL702:
1865:easyflash/src/ef_env.c **** 
 7492              		.loc 1 1865 1 is_stmt 0 view .LVU2288
 7493 0036 10B0     		add	sp, sp, #64
 7494              		.cfi_remember_state
 7495              		.cfi_def_cfa_offset 8
 7496              		@ sp needed
 7497 0038 10BD     		pop	{r4, pc}
 7498              	.L677:
 7499              		.cfi_restore_state
1850:easyflash/src/ef_env.c ****         return;
 7500              		.loc 1 1850 9 is_stmt 1 view .LVU2289
 7501 003a 0648     		ldr	r0, .L678+16
 7502 003c FFF7FEFF 		bl	ef_log_info
 7503              	.LVL703:
1851:easyflash/src/ef_env.c ****     }
 7504              		.loc 1 1851 9 view .LVU2290
1865:easyflash/src/ef_env.c **** 
 7505              		.loc 1 1865 1 is_stmt 0 view .LVU2291
 7506 0040 10B0     		add	sp, sp, #64
 7507              		.cfi_def_cfa_offset 8
 7508              		@ sp needed
 7509 0042 10BD     		pop	{r4, pc}
ARM GAS  /tmp/ccSGDQKw.s 			page 207


 7510              	.L679:
 7511              		.align	2
 7512              	.L678:
 7513 0044 00000000 		.word	.LANCHOR10
 7514 0048 00000000 		.word	print_env_cb
 7515 004c 00000000 		.word	.LC33
 7516 0050 1C000000 		.word	.LC34
 7517 0054 00000000 		.word	.LC26
 7518              		.cfi_endproc
 7519              	.LFE284:
 7521              		.section	.rodata.ef_load_env.str1.4,"aMS",%progbits,1
 7522              		.align	2
 7523              	.LC35:
 7524 0000 5761726E 		.ascii	"Warning: All sector header check failed. Set it to "
 7524      696E673A 
 7524      20416C6C 
 7524      20736563 
 7524      746F7220 
 7525 0033 64656661 		.ascii	"default.\000"
 7525      756C742E 
 7525      00
 7526              		.section	.text.ef_load_env,"ax",%progbits
 7527              		.align	1
 7528              		.p2align 2,,3
 7529              		.global	ef_load_env
 7530              		.syntax unified
 7531              		.thumb
 7532              		.thumb_func
 7534              	ef_load_env:
 7535              	.LFB288:
1969:easyflash/src/ef_env.c **** 
1970:easyflash/src/ef_env.c **** /**
1971:easyflash/src/ef_env.c ****  * Check and load the flash ENV meta data.
1972:easyflash/src/ef_env.c ****  *
1973:easyflash/src/ef_env.c ****  * @return result
1974:easyflash/src/ef_env.c ****  */
1975:easyflash/src/ef_env.c **** EfErrCode ef_load_env(void)
1976:easyflash/src/ef_env.c **** {
 7536              		.loc 1 1976 1 is_stmt 1 view -0
 7537              		.cfi_startproc
 7538              		@ args = 0, pretend = 0, frame = 80
 7539              		@ frame_needed = 0, uses_anonymous_args = 0
1977:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7540              		.loc 1 1977 5 view .LVU2293
 7541              	.LVL704:
1978:easyflash/src/ef_env.c ****     struct env_node_obj env;
 7542              		.loc 1 1978 5 view .LVU2294
1979:easyflash/src/ef_env.c ****     struct sector_meta_data sector;
 7543              		.loc 1 1979 5 view .LVU2295
1980:easyflash/src/ef_env.c ****     size_t check_failed_count = 0;
 7544              		.loc 1 1980 5 view .LVU2296
1981:easyflash/src/ef_env.c **** 
1982:easyflash/src/ef_env.c ****     in_recovery_check = true;
 7545              		.loc 1 1982 5 view .LVU2297
1976:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7546              		.loc 1 1976 1 is_stmt 0 view .LVU2298
 7547 0000 F0B5     		push	{r4, r5, r6, r7, lr}
ARM GAS  /tmp/ccSGDQKw.s 			page 208


 7548              		.cfi_def_cfa_offset 20
 7549              		.cfi_offset 4, -20
 7550              		.cfi_offset 5, -16
 7551              		.cfi_offset 6, -12
 7552              		.cfi_offset 7, -8
 7553              		.cfi_offset 14, -4
 7554              		.loc 1 1982 23 view .LVU2299
 7555 0002 3C4D     		ldr	r5, .L710
 7556 0004 3C4C     		ldr	r4, .L710+4
 7557              	.LBB488:
 7558              	.LBB489:
 7559              	.LBB490:
 7560              	.LBB491:
 7561              	.LBB492:
 7562              	.LBB493:
1921:easyflash/src/ef_env.c ****         (*failed_count) ++;
 7563              		.loc 1 1921 9 view .LVU2300
 7564 0006 3D4F     		ldr	r7, .L710+8
 7565              	.LBE493:
 7566              	.LBE492:
 7567              	.LBE491:
 7568              	.LBE490:
 7569              	.LBE489:
 7570              	.LBE488:
1976:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7571              		.loc 1 1976 1 view .LVU2301
 7572 0008 95B0     		sub	sp, sp, #84
 7573              		.cfi_def_cfa_offset 104
 7574              	.LBB511:
 7575              	.LBB508:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 7576              		.loc 1 1134 18 view .LVU2302
 7577 000a 4FF0FF30 		mov	r0, #-1
 7578              	.LBE508:
 7579              	.LBE511:
 7580              		.loc 1 1982 23 view .LVU2303
 7581 000e 0123     		movs	r3, #1
 7582 0010 2B70     		strb	r3, [r5]
1983:easyflash/src/ef_env.c ****     /* check all sector header */
1984:easyflash/src/ef_env.c ****     sector_iterator(&sector, SECTOR_STORE_UNUSED, &check_failed_count, NULL, check_sec_hdr_cb, fals
 7583              		.loc 1 1984 5 is_stmt 1 view .LVU2304
 7584              	.LVL705:
 7585              	.LBB512:
 7586              	.LBI488:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 7587              		.loc 1 1128 13 view .LVU2305
 7588              	.LBB509:
1131:easyflash/src/ef_env.c **** 
 7589              		.loc 1 1131 5 view .LVU2306
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 7590              		.loc 1 1134 5 view .LVU2307
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 7591              		.loc 1 1134 18 is_stmt 0 view .LVU2308
 7592 0012 0190     		str	r0, [sp, #4]
1135:easyflash/src/ef_env.c ****     {
 7593              		.loc 1 1135 5 is_stmt 1 view .LVU2309
 7594              	.LBE509:
ARM GAS  /tmp/ccSGDQKw.s 			page 209


 7595              	.LBE512:
1980:easyflash/src/ef_env.c **** 
 7596              		.loc 1 1980 12 is_stmt 0 view .LVU2310
 7597 0014 0026     		movs	r6, #0
 7598              	.LVL706:
 7599              	.L683:
 7600              	.LBB513:
 7601              	.LBB510:
1135:easyflash/src/ef_env.c ****     {
 7602              		.loc 1 1135 11 is_stmt 1 view .LVU2311
 7603              	.LBB498:
 7604              	.LBI498:
 745:easyflash/src/ef_env.c **** {
 7605              		.loc 1 745 17 view .LVU2312
 7606              	.LBB499:
 747:easyflash/src/ef_env.c **** 
 7607              		.loc 1 747 5 view .LVU2313
 749:easyflash/src/ef_env.c ****     {
 7608              		.loc 1 749 5 view .LVU2314
 756:easyflash/src/ef_env.c ****         {
 7609              		.loc 1 756 9 view .LVU2315
 762:easyflash/src/ef_env.c ****         }
 7610              		.loc 1 762 13 view .LVU2316
 749:easyflash/src/ef_env.c ****     {
 7611              		.loc 1 749 8 is_stmt 0 view .LVU2317
 7612 0016 411C     		adds	r1, r0, #1
 7613 0018 19D0     		beq	.L705
 7614              	.L684:
 756:easyflash/src/ef_env.c ****         {
 7615              		.loc 1 756 20 view .LVU2318
 7616 001a 039B     		ldr	r3, [sp, #12]
 756:easyflash/src/ef_env.c ****         {
 7617              		.loc 1 756 12 view .LVU2319
 7618 001c 5A1C     		adds	r2, r3, #1
 758:easyflash/src/ef_env.c ****         }
 7619              		.loc 1 758 13 is_stmt 1 view .LVU2320
 762:easyflash/src/ef_env.c ****         }
 7620              		.loc 1 762 23 is_stmt 0 view .LVU2321
 7621 001e 18BF     		it	ne
 7622 0020 00EB4340 		addne	r0, r0, r3, lsl #17
 765:easyflash/src/ef_env.c ****         {
 7623              		.loc 1 765 40 view .LVU2322
 7624 0024 2368     		ldr	r3, [r4]
 758:easyflash/src/ef_env.c ****         }
 7625              		.loc 1 758 23 view .LVU2323
 7626 0026 08BF     		it	eq
 7627 0028 00F50030 		addeq	r0, r0, #131072
 7628              	.LVL707:
 765:easyflash/src/ef_env.c ****         {
 7629              		.loc 1 765 9 is_stmt 1 view .LVU2324
 765:easyflash/src/ef_env.c ****         {
 7630              		.loc 1 765 40 is_stmt 0 view .LVU2325
 7631 002c 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
 7632              		.loc 1 765 12 view .LVU2326
 7633 0030 8342     		cmp	r3, r0
 7634 0032 18D9     		bls	.L688
ARM GAS  /tmp/ccSGDQKw.s 			page 210


 7635              	.LVL708:
 7636              	.L685:
 765:easyflash/src/ef_env.c ****         {
 7637              		.loc 1 765 12 view .LVU2327
 7638              	.LBE499:
 7639              	.LBE498:
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 7640              		.loc 1 1137 9 is_stmt 1 view .LVU2328
1135:easyflash/src/ef_env.c ****     {
 7641              		.loc 1 1135 11 is_stmt 0 view .LVU2329
 7642 0034 431C     		adds	r3, r0, #1
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 7643              		.loc 1 1137 9 view .LVU2330
 7644 0036 4FF00002 		mov	r2, #0
 7645 003a 6946     		mov	r1, sp
1135:easyflash/src/ef_env.c ****     {
 7646              		.loc 1 1135 11 view .LVU2331
 7647 003c 13D0     		beq	.L688
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 7648              		.loc 1 1137 9 view .LVU2332
 7649 003e FFF7FEFF 		bl	read_sector_meta_data
 7650              	.LVL709:
1138:easyflash/src/ef_env.c ****         {
 7651              		.loc 1 1138 9 is_stmt 1 view .LVU2333
1140:easyflash/src/ef_env.c ****             {
 7652              		.loc 1 1140 13 view .LVU2334
1145:easyflash/src/ef_env.c ****             {
 7653              		.loc 1 1145 13 view .LVU2335
 7654              	.LBB503:
 7655              	.LBI490:
1915:easyflash/src/ef_env.c **** {
 7656              		.loc 1 1915 13 view .LVU2336
 7657              	.LBB496:
1917:easyflash/src/ef_env.c ****     {
 7658              		.loc 1 1917 5 view .LVU2337
1917:easyflash/src/ef_env.c ****     {
 7659              		.loc 1 1917 8 is_stmt 0 view .LVU2338
 7660 0042 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 7661 0046 23B1     		cbz	r3, .L682
 7662              	.LBE496:
 7663              	.LBE503:
 7664              	.LBB504:
 7665              	.LBB500:
 749:easyflash/src/ef_env.c ****     {
 7666              		.loc 1 749 16 view .LVU2339
 7667 0048 0198     		ldr	r0, [sp, #4]
 7668              	.LVL710:
 749:easyflash/src/ef_env.c ****     {
 7669              		.loc 1 749 16 view .LVU2340
 7670              	.LBE500:
 7671              	.LBE504:
1135:easyflash/src/ef_env.c ****     {
 7672              		.loc 1 1135 11 is_stmt 1 view .LVU2341
 7673              	.LBB505:
 745:easyflash/src/ef_env.c **** {
 7674              		.loc 1 745 17 view .LVU2342
 7675              	.LBB501:
ARM GAS  /tmp/ccSGDQKw.s 			page 211


 747:easyflash/src/ef_env.c **** 
 7676              		.loc 1 747 5 view .LVU2343
 749:easyflash/src/ef_env.c ****     {
 7677              		.loc 1 749 5 view .LVU2344
 756:easyflash/src/ef_env.c ****         {
 7678              		.loc 1 756 9 view .LVU2345
 762:easyflash/src/ef_env.c ****         }
 7679              		.loc 1 762 13 view .LVU2346
 749:easyflash/src/ef_env.c ****     {
 7680              		.loc 1 749 8 is_stmt 0 view .LVU2347
 7681 004a 411C     		adds	r1, r0, #1
 7682 004c E5D1     		bne	.L684
 7683              	.L705:
 751:easyflash/src/ef_env.c ****     }
 7684              		.loc 1 751 9 is_stmt 1 view .LVU2348
 751:easyflash/src/ef_env.c ****     }
 7685              		.loc 1 751 16 is_stmt 0 view .LVU2349
 7686 004e 2068     		ldr	r0, [r4]
 7687 0050 F0E7     		b	.L685
 7688              	.LVL711:
 7689              	.L682:
 751:easyflash/src/ef_env.c ****     }
 7690              		.loc 1 751 16 view .LVU2350
 7691              	.LBE501:
 7692              	.LBE505:
 7693              	.LBB506:
 7694              	.LBB497:
 7695              	.LBB495:
 7696              	.LBI492:
1915:easyflash/src/ef_env.c **** {
 7697              		.loc 1 1915 13 is_stmt 1 view .LVU2351
 7698              	.LBB494:
1919:easyflash/src/ef_env.c **** 
 7699              		.loc 1 1919 9 view .LVU2352
1921:easyflash/src/ef_env.c ****         (*failed_count) ++;
 7700              		.loc 1 1921 9 view .LVU2353
 7701 0052 0199     		ldr	r1, [sp, #4]
 7702 0054 3846     		mov	r0, r7
 7703 0056 FFF7FEFF 		bl	ef_log_info
 7704              	.LVL712:
1922:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
 7705              		.loc 1 1922 9 view .LVU2354
1923:easyflash/src/ef_env.c ****     }
 7706              		.loc 1 1923 9 is_stmt 0 view .LVU2355
 7707 005a 0198     		ldr	r0, [sp, #4]
 7708 005c FFF7FEFF 		bl	format_sector.constprop.0
 7709              	.LVL713:
1922:easyflash/src/ef_env.c ****         format_sector(sector->addr, SECTOR_NOT_COMBINED);
 7710              		.loc 1 1922 25 view .LVU2356
 7711 0060 0136     		adds	r6, r6, #1
 7712              	.LVL714:
1923:easyflash/src/ef_env.c ****     }
 7713              		.loc 1 1923 9 is_stmt 1 view .LVU2357
 7714              	.LBE494:
 7715              	.LBE495:
 7716              	.LBE497:
 7717              	.LBE506:
ARM GAS  /tmp/ccSGDQKw.s 			page 212


 7718              	.LBB507:
 7719              	.LBB502:
 749:easyflash/src/ef_env.c ****     {
 7720              		.loc 1 749 16 is_stmt 0 view .LVU2358
 7721 0062 0198     		ldr	r0, [sp, #4]
 7722 0064 D7E7     		b	.L683
 7723              	.LVL715:
 7724              	.L688:
 749:easyflash/src/ef_env.c ****     {
 7725              		.loc 1 749 16 view .LVU2359
 7726              	.LBE502:
 7727              	.LBE507:
 7728              	.LBE510:
 7729              	.LBE513:
1985:easyflash/src/ef_env.c ****     /* all sector header check failed */
1986:easyflash/src/ef_env.c ****     if (check_failed_count == SECTOR_NUM)
 7730              		.loc 1 1986 5 is_stmt 1 view .LVU2360
 7731              		.loc 1 1986 8 is_stmt 0 view .LVU2361
 7732 0066 022E     		cmp	r6, #2
 7733 0068 3DD0     		beq	.L706
 7734              	.L690:
1987:easyflash/src/ef_env.c ****     {
1988:easyflash/src/ef_env.c ****         EF_INFO("Warning: All sector header check failed. Set it to default.");
1989:easyflash/src/ef_env.c ****         ef_env_set_default();
1990:easyflash/src/ef_env.c ****     }
1991:easyflash/src/ef_env.c **** 
1992:easyflash/src/ef_env.c ****     /* lock the ENV cache */
1993:easyflash/src/ef_env.c ****     ef_port_env_lock();
 7735              		.loc 1 1993 5 is_stmt 1 view .LVU2362
 7736 006a FFF7FEFF 		bl	ef_port_env_lock
 7737              	.LVL716:
1994:easyflash/src/ef_env.c ****     /* check all sector header for recovery GC */
1995:easyflash/src/ef_env.c ****     sector_iterator(&sector, SECTOR_STORE_UNUSED, NULL, NULL, check_and_recovery_gc_cb, false);
 7738              		.loc 1 1995 5 view .LVU2363
 7739              	.LBB514:
 7740              	.LBI514:
1128:easyflash/src/ef_env.c ****                             bool (*callback)(sector_meta_data_t sector, void *arg1, void *arg2), bo
 7741              		.loc 1 1128 13 view .LVU2364
 7742              	.LBB515:
1131:easyflash/src/ef_env.c **** 
 7743              		.loc 1 1131 5 view .LVU2365
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 7744              		.loc 1 1134 5 view .LVU2366
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 7745              		.loc 1 1134 18 is_stmt 0 view .LVU2367
 7746 006e 4FF0FF30 		mov	r0, #-1
 7747 0072 234E     		ldr	r6, .L710+12
 7748              	.LVL717:
1134:easyflash/src/ef_env.c ****     while ((sec_addr = get_next_sector_addr(sector)) != FAILED_ADDR)
 7749              		.loc 1 1134 18 view .LVU2368
 7750 0074 0190     		str	r0, [sp, #4]
1135:easyflash/src/ef_env.c ****     {
 7751              		.loc 1 1135 5 is_stmt 1 view .LVU2369
 7752              	.LBB516:
 7753              	.LBB517:
 7754              	.LBB518:
 7755              	.LBB519:
ARM GAS  /tmp/ccSGDQKw.s 			page 213


1934:easyflash/src/ef_env.c ****         /* resume the GC operate */
 7756              		.loc 1 1934 20 is_stmt 0 view .LVU2370
 7757 0076 0127     		movs	r7, #1
 7758              	.LBE519:
 7759              	.LBE518:
 7760              	.LBE517:
 7761              	.LBE516:
1135:easyflash/src/ef_env.c ****     {
 7762              		.loc 1 1135 11 view .LVU2371
 7763 0078 0DE0     		b	.L691
 7764              	.LVL718:
 7765              	.L694:
1135:easyflash/src/ef_env.c ****     {
 7766              		.loc 1 1135 11 view .LVU2372
 7767 007a 431C     		adds	r3, r0, #1
 7768 007c 1AD0     		beq	.L697
1137:easyflash/src/ef_env.c ****         if (status == SECTOR_STORE_UNUSED || status == sector->status.store)
 7769              		.loc 1 1137 9 is_stmt 1 view .LVU2373
 7770 007e 0022     		movs	r2, #0
 7771 0080 6946     		mov	r1, sp
 7772 0082 FFF7FEFF 		bl	read_sector_meta_data
 7773              	.LVL719:
1138:easyflash/src/ef_env.c ****         {
 7774              		.loc 1 1138 9 view .LVU2374
1140:easyflash/src/ef_env.c ****             {
 7775              		.loc 1 1140 13 view .LVU2375
1145:easyflash/src/ef_env.c ****             {
 7776              		.loc 1 1145 13 view .LVU2376
 7777              	.LBB526:
 7778              	.LBI516:
1929:easyflash/src/ef_env.c **** {
 7779              		.loc 1 1929 13 view .LVU2377
 7780              	.LBB524:
1931:easyflash/src/ef_env.c ****     {
 7781              		.loc 1 1931 5 view .LVU2378
1931:easyflash/src/ef_env.c ****     {
 7782              		.loc 1 1931 8 is_stmt 0 view .LVU2379
 7783 0086 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 7784 008a 1BB1     		cbz	r3, .L692
 7785              	.LBB522:
 7786              	.LBI518:
1929:easyflash/src/ef_env.c **** {
 7787              		.loc 1 1929 13 is_stmt 1 view .LVU2380
 7788              	.LVL720:
 7789              	.LBB520:
1931:easyflash/src/ef_env.c ****     {
 7790              		.loc 1 1931 26 is_stmt 0 view .LVU2381
 7791 008c 9DF80230 		ldrb	r3, [sp, #2]	@ zero_extendqisi2
 7792 0090 032B     		cmp	r3, #3
 7793 0092 24D0     		beq	.L707
 7794              	.LVL721:
 7795              	.L692:
1931:easyflash/src/ef_env.c ****     {
 7796              		.loc 1 1931 26 view .LVU2382
 7797              	.LBE520:
 7798              	.LBE522:
 7799              	.LBE524:
ARM GAS  /tmp/ccSGDQKw.s 			page 214


 7800              	.LBE526:
 7801              	.LBB527:
 7802              	.LBB528:
 749:easyflash/src/ef_env.c ****     {
 7803              		.loc 1 749 16 view .LVU2383
 7804 0094 0198     		ldr	r0, [sp, #4]
 7805              	.LVL722:
 7806              	.L691:
 749:easyflash/src/ef_env.c ****     {
 7807              		.loc 1 749 16 view .LVU2384
 7808              	.LBE528:
 7809              	.LBE527:
1135:easyflash/src/ef_env.c ****     {
 7810              		.loc 1 1135 11 is_stmt 1 view .LVU2385
 7811              	.LBB531:
 7812              	.LBI527:
 745:easyflash/src/ef_env.c **** {
 7813              		.loc 1 745 17 view .LVU2386
 7814              	.LBB529:
 747:easyflash/src/ef_env.c **** 
 7815              		.loc 1 747 5 view .LVU2387
 749:easyflash/src/ef_env.c ****     {
 7816              		.loc 1 749 5 view .LVU2388
 749:easyflash/src/ef_env.c ****     {
 7817              		.loc 1 749 8 is_stmt 0 view .LVU2389
 7818 0096 411C     		adds	r1, r0, #1
 7819 0098 1FD0     		beq	.L708
 756:easyflash/src/ef_env.c ****         {
 7820              		.loc 1 756 9 is_stmt 1 view .LVU2390
 756:easyflash/src/ef_env.c ****         {
 7821              		.loc 1 756 20 is_stmt 0 view .LVU2391
 7822 009a 039B     		ldr	r3, [sp, #12]
 756:easyflash/src/ef_env.c ****         {
 7823              		.loc 1 756 12 view .LVU2392
 7824 009c 5A1C     		adds	r2, r3, #1
 758:easyflash/src/ef_env.c ****         }
 7825              		.loc 1 758 13 is_stmt 1 view .LVU2393
 762:easyflash/src/ef_env.c ****         }
 7826              		.loc 1 762 23 is_stmt 0 view .LVU2394
 7827 009e 18BF     		it	ne
 7828 00a0 00EB4340 		addne	r0, r0, r3, lsl #17
 765:easyflash/src/ef_env.c ****         {
 7829              		.loc 1 765 40 view .LVU2395
 7830 00a4 2368     		ldr	r3, [r4]
 758:easyflash/src/ef_env.c ****         }
 7831              		.loc 1 758 23 view .LVU2396
 7832 00a6 08BF     		it	eq
 7833 00a8 00F50030 		addeq	r0, r0, #131072
 762:easyflash/src/ef_env.c ****         }
 7834              		.loc 1 762 13 is_stmt 1 view .LVU2397
 7835              	.LVL723:
 765:easyflash/src/ef_env.c ****         {
 7836              		.loc 1 765 9 view .LVU2398
 765:easyflash/src/ef_env.c ****         {
 7837              		.loc 1 765 40 is_stmt 0 view .LVU2399
 7838 00ac 03F58023 		add	r3, r3, #262144
 765:easyflash/src/ef_env.c ****         {
ARM GAS  /tmp/ccSGDQKw.s 			page 215


 7839              		.loc 1 765 12 view .LVU2400
 7840 00b0 8342     		cmp	r3, r0
 7841 00b2 E2D8     		bhi	.L694
 7842              	.LVL724:
 7843              	.L697:
 765:easyflash/src/ef_env.c ****         {
 7844              		.loc 1 765 12 view .LVU2401
 7845              	.LBE529:
 7846              	.LBE531:
 7847              	.LBE515:
 7848              	.LBE514:
1996:easyflash/src/ef_env.c **** 
1997:easyflash/src/ef_env.c **** __retry:
1998:easyflash/src/ef_env.c ****     /* check all ENV for recovery */
1999:easyflash/src/ef_env.c ****     env_iterator(&env, NULL, NULL, check_and_recovery_env_cb);
 7849              		.loc 1 1999 5 view .LVU2402
 7850 00b4 134F     		ldr	r7, .L710+16
 7851 00b6 01E0     		b	.L700
 7852              	.LVL725:
 7853              	.L709:
2000:easyflash/src/ef_env.c ****     if (gc_request)
2001:easyflash/src/ef_env.c ****     {
2002:easyflash/src/ef_env.c ****         gc_collect();
 7854              		.loc 1 2002 9 view .LVU2403
 7855 00b8 FFF7FEFF 		bl	gc_collect
 7856              	.LVL726:
2003:easyflash/src/ef_env.c ****         goto __retry;
 7857              		.loc 1 2003 9 is_stmt 1 view .LVU2404
 7858              	.L700:
1999:easyflash/src/ef_env.c ****     if (gc_request)
 7859              		.loc 1 1999 5 view .LVU2405
 7860 00bc 0022     		movs	r2, #0
 7861 00be 3B46     		mov	r3, r7
 7862 00c0 1146     		mov	r1, r2
 7863 00c2 06A8     		add	r0, sp, #24
 7864 00c4 FFF7FEFF 		bl	env_iterator
 7865              	.LVL727:
2000:easyflash/src/ef_env.c ****     if (gc_request)
 7866              		.loc 1 2000 5 view .LVU2406
2002:easyflash/src/ef_env.c ****         goto __retry;
 7867              		.loc 1 2002 9 view .LVU2407
2000:easyflash/src/ef_env.c ****     {
 7868              		.loc 1 2000 8 is_stmt 0 view .LVU2408
 7869 00c8 3478     		ldrb	r4, [r6]	@ zero_extendqisi2
 7870 00ca 002C     		cmp	r4, #0
 7871 00cc F4D1     		bne	.L709
2004:easyflash/src/ef_env.c ****     }
2005:easyflash/src/ef_env.c **** 
2006:easyflash/src/ef_env.c ****     in_recovery_check = false;
 7872              		.loc 1 2006 5 is_stmt 1 view .LVU2409
 7873              		.loc 1 2006 23 is_stmt 0 view .LVU2410
 7874 00ce 2C70     		strb	r4, [r5]
2007:easyflash/src/ef_env.c **** 
2008:easyflash/src/ef_env.c ****     /* unlock the ENV cache */
2009:easyflash/src/ef_env.c ****     ef_port_env_unlock();
 7875              		.loc 1 2009 5 is_stmt 1 view .LVU2411
 7876 00d0 FFF7FEFF 		bl	ef_port_env_unlock
ARM GAS  /tmp/ccSGDQKw.s 			page 216


 7877              	.LVL728:
2010:easyflash/src/ef_env.c **** 
2011:easyflash/src/ef_env.c ****     return result;
 7878              		.loc 1 2011 5 view .LVU2412
2012:easyflash/src/ef_env.c **** }
 7879              		.loc 1 2012 1 is_stmt 0 view .LVU2413
 7880 00d4 2046     		mov	r0, r4
 7881 00d6 15B0     		add	sp, sp, #84
 7882              		.cfi_remember_state
 7883              		.cfi_def_cfa_offset 20
 7884              		@ sp needed
 7885 00d8 F0BD     		pop	{r4, r5, r6, r7, pc}
 7886              	.LVL729:
 7887              	.L708:
 7888              		.cfi_restore_state
 7889              	.LBB535:
 7890              	.LBB534:
 7891              	.LBB532:
 7892              	.LBB530:
 751:easyflash/src/ef_env.c ****     }
 7893              		.loc 1 751 9 is_stmt 1 view .LVU2414
 751:easyflash/src/ef_env.c ****     }
 7894              		.loc 1 751 16 is_stmt 0 view .LVU2415
 7895 00da 2068     		ldr	r0, [r4]
 7896 00dc CDE7     		b	.L694
 7897              	.LVL730:
 7898              	.L707:
 751:easyflash/src/ef_env.c ****     }
 7899              		.loc 1 751 16 view .LVU2416
 7900              	.LBE530:
 7901              	.LBE532:
 7902              	.LBB533:
 7903              	.LBB525:
 7904              	.LBB523:
 7905              	.LBB521:
1934:easyflash/src/ef_env.c ****         /* resume the GC operate */
 7906              		.loc 1 1934 9 is_stmt 1 view .LVU2417
1934:easyflash/src/ef_env.c ****         /* resume the GC operate */
 7907              		.loc 1 1934 20 is_stmt 0 view .LVU2418
 7908 00de 3770     		strb	r7, [r6]
1936:easyflash/src/ef_env.c ****     }
 7909              		.loc 1 1936 9 is_stmt 1 view .LVU2419
 7910 00e0 FFF7FEFF 		bl	gc_collect
 7911              	.LVL731:
 7912 00e4 D6E7     		b	.L692
 7913              	.LVL732:
 7914              	.L706:
1936:easyflash/src/ef_env.c ****     }
 7915              		.loc 1 1936 9 is_stmt 0 view .LVU2420
 7916              	.LBE521:
 7917              	.LBE523:
 7918              	.LBE525:
 7919              	.LBE533:
 7920              	.LBE534:
 7921              	.LBE535:
1988:easyflash/src/ef_env.c ****         ef_env_set_default();
 7922              		.loc 1 1988 9 is_stmt 1 view .LVU2421
ARM GAS  /tmp/ccSGDQKw.s 			page 217


 7923 00e6 0848     		ldr	r0, .L710+20
 7924 00e8 FFF7FEFF 		bl	ef_log_info
 7925              	.LVL733:
1989:easyflash/src/ef_env.c ****     }
 7926              		.loc 1 1989 9 view .LVU2422
 7927 00ec FFF7FEFF 		bl	ef_env_set_default
 7928              	.LVL734:
 7929 00f0 BBE7     		b	.L690
 7930              	.L711:
 7931 00f2 00BF     		.align	2
 7932              	.L710:
 7933 00f4 00000000 		.word	.LANCHOR9
 7934 00f8 00000000 		.word	.LANCHOR7
 7935 00fc 00000000 		.word	.LC9
 7936 0100 00000000 		.word	.LANCHOR2
 7937 0104 00000000 		.word	check_and_recovery_env_cb
 7938 0108 00000000 		.word	.LC35
 7939              		.cfi_endproc
 7940              	.LFE288:
 7942              		.section	.rodata.ef_env_init.str1.4,"aMS",%progbits,1
 7943              		.align	2
 7944              	.LC36:
 7945 0000 64656661 		.ascii	"default_env\000"
 7945      756C745F 
 7945      656E7600 
 7946              		.align	2
 7947              	.LC37:
 7948 000c 454E5620 		.ascii	"ENV start address is 0x%08X, size is %d bytes.\000"
 7948      73746172 
 7948      74206164 
 7948      64726573 
 7948      73206973 
 7949              		.section	.text.ef_env_init,"ax",%progbits
 7950              		.align	1
 7951              		.p2align 2,,3
 7952              		.global	ef_env_init
 7953              		.syntax unified
 7954              		.thumb
 7955              		.thumb_func
 7957              	ef_env_init:
 7958              	.LVL735:
 7959              	.LFB289:
2013:easyflash/src/ef_env.c **** 
2014:easyflash/src/ef_env.c **** /**
2015:easyflash/src/ef_env.c ****  * Flash ENV initialize.
2016:easyflash/src/ef_env.c ****  *
2017:easyflash/src/ef_env.c ****  * @param default_env default ENV set for user
2018:easyflash/src/ef_env.c ****  * @param default_env_size default ENV set size
2019:easyflash/src/ef_env.c ****  *
2020:easyflash/src/ef_env.c ****  * @return result
2021:easyflash/src/ef_env.c ****  */
2022:easyflash/src/ef_env.c **** EfErrCode ef_env_init(ef_env const *default_env, size_t default_env_size)
2023:easyflash/src/ef_env.c **** {
 7960              		.loc 1 2023 1 view -0
 7961              		.cfi_startproc
 7962              		@ args = 0, pretend = 0, frame = 0
 7963              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccSGDQKw.s 			page 218


2024:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7964              		.loc 1 2024 5 view .LVU2424
2025:easyflash/src/ef_env.c **** 
2026:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
2027:easyflash/src/ef_env.c ****     size_t i;
 7965              		.loc 1 2027 5 view .LVU2425
2028:easyflash/src/ef_env.c **** #endif
2029:easyflash/src/ef_env.c **** 
2030:easyflash/src/ef_env.c ****     EF_ASSERT(default_env);
 7966              		.loc 1 2030 5 view .LVU2426
2023:easyflash/src/ef_env.c ****     EfErrCode result = EF_NO_ERR;
 7967              		.loc 1 2023 1 is_stmt 0 view .LVU2427
 7968 0000 10B5     		push	{r4, lr}
 7969              		.cfi_def_cfa_offset 8
 7970              		.cfi_offset 4, -8
 7971              		.cfi_offset 14, -4
 7972 0002 82B0     		sub	sp, sp, #8
 7973              		.cfi_def_cfa_offset 16
 7974              		.loc 1 2030 5 view .LVU2428
 7975 0004 50B3     		cbz	r0, .L720
 7976              		.loc 1 2030 27 is_stmt 1 discriminator 2 view .LVU2429
2031:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 7977              		.loc 1 2031 5 discriminator 2 view .LVU2430
 7978              		.loc 1 2031 29 discriminator 2 view .LVU2431
2032:easyflash/src/ef_env.c ****     /* must be aligned with erase_min_size */
2033:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE % EF_ERASE_MIN_SIZE == 0);
 7979              		.loc 1 2033 5 discriminator 2 view .LVU2432
 7980              		.loc 1 2033 54 discriminator 2 view .LVU2433
2034:easyflash/src/ef_env.c ****     /* sector number must be greater than or equal to 2 */
2035:easyflash/src/ef_env.c ****     EF_ASSERT(SECTOR_NUM >= 2);
 7981              		.loc 1 2035 5 discriminator 2 view .LVU2434
 7982              		.loc 1 2035 31 discriminator 2 view .LVU2435
2036:easyflash/src/ef_env.c ****     /* must be aligned with write granularity */
2037:easyflash/src/ef_env.c ****     EF_ASSERT((EF_STR_ENV_VALUE_MAX_SIZE * 8) % EF_WRITE_GRAN == 0);
 7983              		.loc 1 2037 5 discriminator 2 view .LVU2436
 7984              		.loc 1 2037 68 discriminator 2 view .LVU2437
2038:easyflash/src/ef_env.c **** 
2039:easyflash/src/ef_env.c ****     if (init_ok)
 7985              		.loc 1 2039 5 discriminator 2 view .LVU2438
 7986              		.loc 1 2039 9 is_stmt 0 discriminator 2 view .LVU2439
 7987 0006 1A4C     		ldr	r4, .L721
 7988              		.loc 1 2039 8 discriminator 2 view .LVU2440
 7989 0008 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 7990 000a 23BB     		cbnz	r3, .L717
 7991              	.LVL736:
2040:easyflash/src/ef_env.c ****     {
2041:easyflash/src/ef_env.c ****         return EF_NO_ERR;
2042:easyflash/src/ef_env.c ****     }
2043:easyflash/src/ef_env.c **** 
2044:easyflash/src/ef_env.c **** #ifdef EF_ENV_USING_CACHE
2045:easyflash/src/ef_env.c ****     for (i = 0; i < EF_SECTOR_CACHE_TABLE_SIZE; i++)
 7992              		.loc 1 2045 17 is_stmt 1 view .LVU2441
2046:easyflash/src/ef_env.c ****     {
2047:easyflash/src/ef_env.c ****         sector_cache_table[i].addr = FAILED_ADDR;
 7993              		.loc 1 2047 9 view .LVU2442
 7994              		.loc 1 2047 36 is_stmt 0 view .LVU2443
 7995 000c 194B     		ldr	r3, .L721+4
ARM GAS  /tmp/ccSGDQKw.s 			page 219


 7996 000e 4FF0FF32 		mov	r2, #-1
 7997 0012 1A60     		str	r2, [r3]
2045:easyflash/src/ef_env.c ****     {
 7998              		.loc 1 2045 49 is_stmt 1 view .LVU2444
 7999              	.LVL737:
2045:easyflash/src/ef_env.c ****     {
 8000              		.loc 1 2045 17 view .LVU2445
 8001              		.loc 1 2047 9 view .LVU2446
 8002              		.loc 1 2047 36 is_stmt 0 view .LVU2447
 8003 0014 9A60     		str	r2, [r3, #8]
2045:easyflash/src/ef_env.c ****     {
 8004              		.loc 1 2045 49 is_stmt 1 view .LVU2448
 8005              	.LVL738:
2045:easyflash/src/ef_env.c ****     {
 8006              		.loc 1 2045 17 view .LVU2449
 8007              		.loc 1 2047 9 view .LVU2450
 8008              		.loc 1 2047 36 is_stmt 0 view .LVU2451
 8009 0016 1A61     		str	r2, [r3, #16]
2045:easyflash/src/ef_env.c ****     {
 8010              		.loc 1 2045 49 is_stmt 1 view .LVU2452
 8011              	.LVL739:
2045:easyflash/src/ef_env.c ****     {
 8012              		.loc 1 2045 17 view .LVU2453
 8013              		.loc 1 2047 9 view .LVU2454
 8014              		.loc 1 2047 36 is_stmt 0 view .LVU2455
 8015 0018 9A61     		str	r2, [r3, #24]
2045:easyflash/src/ef_env.c ****     {
 8016              		.loc 1 2045 49 is_stmt 1 view .LVU2456
 8017              	.LVL740:
2045:easyflash/src/ef_env.c ****     {
 8018              		.loc 1 2045 17 view .LVU2457
2048:easyflash/src/ef_env.c ****     }
2049:easyflash/src/ef_env.c ****     for (i = 0; i < EF_ENV_CACHE_TABLE_SIZE; i++)
 8019              		.loc 1 2049 17 view .LVU2458
 8020 001a 174B     		ldr	r3, .L721+8
 8021 001c 03F1800C 		add	ip, r3, #128
 8022              	.LVL741:
 8023              	.L716:
2050:easyflash/src/ef_env.c ****     {
2051:easyflash/src/ef_env.c ****         env_cache_table[i].addr = FAILED_ADDR;
 8024              		.loc 1 2051 9 discriminator 3 view .LVU2459
 8025              		.loc 1 2051 33 is_stmt 0 discriminator 3 view .LVU2460
 8026 0020 5A60     		str	r2, [r3, #4]
2049:easyflash/src/ef_env.c ****     {
 8027              		.loc 1 2049 46 is_stmt 1 discriminator 3 view .LVU2461
2049:easyflash/src/ef_env.c ****     {
 8028              		.loc 1 2049 17 discriminator 3 view .LVU2462
2049:easyflash/src/ef_env.c ****     {
 8029              		.loc 1 2049 5 is_stmt 0 discriminator 3 view .LVU2463
 8030 0022 0833     		adds	r3, r3, #8
 8031 0024 6345     		cmp	r3, ip
 8032 0026 FBD1     		bne	.L716
2052:easyflash/src/ef_env.c ****     }
2053:easyflash/src/ef_env.c **** #endif /* EF_ENV_USING_CACHE */
2054:easyflash/src/ef_env.c **** 
2055:easyflash/src/ef_env.c ****     env_start_addr = EF_START_ADDR;
 8033              		.loc 1 2055 5 is_stmt 1 view .LVU2464
ARM GAS  /tmp/ccSGDQKw.s 			page 220


 8034              		.loc 1 2055 20 is_stmt 0 view .LVU2465
 8035 0028 144A     		ldr	r2, .L721+12
 8036 002a 154B     		ldr	r3, .L721+16
 8037 002c 1360     		str	r3, [r2]
2056:easyflash/src/ef_env.c ****     default_env_set = default_env;
 8038              		.loc 1 2056 5 is_stmt 1 view .LVU2466
 8039              		.loc 1 2056 21 is_stmt 0 view .LVU2467
 8040 002e 154A     		ldr	r2, .L721+20
 8041 0030 1060     		str	r0, [r2]
2057:easyflash/src/ef_env.c ****     default_env_set_size = default_env_size;
 8042              		.loc 1 2057 5 is_stmt 1 view .LVU2468
 8043              		.loc 1 2057 26 is_stmt 0 view .LVU2469
 8044 0032 1548     		ldr	r0, .L721+24
 8045              	.LVL742:
2058:easyflash/src/ef_env.c **** 
2059:easyflash/src/ef_env.c ****     EF_DEBUG("ENV start address is 0x%08X, size is %d bytes.", EF_START_ADDR, ENV_AREA_SIZE);
 8046              		.loc 1 2059 5 view .LVU2470
 8047 0034 4FF48022 		mov	r2, #262144
 8048              		.loc 1 2059 5 view .LVU2471
 8049 0038 0092     		str	r2, [sp]
2057:easyflash/src/ef_env.c ****     default_env_set_size = default_env_size;
 8050              		.loc 1 2057 26 view .LVU2472
 8051 003a 0160     		str	r1, [r0]
 8052              		.loc 1 2059 5 is_stmt 1 view .LVU2473
 8053 003c 134A     		ldr	r2, .L721+28
 8054 003e 1448     		ldr	r0, .L721+32
 8055 0040 40F60B01 		movw	r1, #2059
 8056              	.LVL743:
 8057              		.loc 1 2059 5 is_stmt 0 view .LVU2474
 8058 0044 FFF7FEFF 		bl	ef_log_debug
 8059              	.LVL744:
2060:easyflash/src/ef_env.c **** 
2061:easyflash/src/ef_env.c ****     result = ef_load_env();
 8060              		.loc 1 2061 5 is_stmt 1 view .LVU2475
 8061              		.loc 1 2061 14 is_stmt 0 view .LVU2476
 8062 0048 FFF7FEFF 		bl	ef_load_env
 8063              	.LVL745:
2062:easyflash/src/ef_env.c **** 
2063:easyflash/src/ef_env.c **** #ifdef EF_ENV_AUTO_UPDATE
2064:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR)
2065:easyflash/src/ef_env.c ****     {
2066:easyflash/src/ef_env.c ****         env_auto_update();
2067:easyflash/src/ef_env.c ****     }
2068:easyflash/src/ef_env.c **** #endif
2069:easyflash/src/ef_env.c **** 
2070:easyflash/src/ef_env.c ****     if (result == EF_NO_ERR)
 8064              		.loc 1 2070 5 is_stmt 1 view .LVU2477
 8065              		.loc 1 2070 8 is_stmt 0 view .LVU2478
 8066 004c 08B9     		cbnz	r0, .L715
2071:easyflash/src/ef_env.c ****     {
2072:easyflash/src/ef_env.c ****         init_ok = true;
 8067              		.loc 1 2072 9 is_stmt 1 view .LVU2479
 8068              		.loc 1 2072 17 is_stmt 0 view .LVU2480
 8069 004e 0123     		movs	r3, #1
 8070 0050 2370     		strb	r3, [r4]
 8071              	.L715:
2073:easyflash/src/ef_env.c ****     }
ARM GAS  /tmp/ccSGDQKw.s 			page 221


2074:easyflash/src/ef_env.c **** 
2075:easyflash/src/ef_env.c ****     return result;
2076:easyflash/src/ef_env.c **** }
 8072              		.loc 1 2076 1 view .LVU2481
 8073 0052 02B0     		add	sp, sp, #8
 8074              		.cfi_remember_state
 8075              		.cfi_def_cfa_offset 8
 8076              		@ sp needed
 8077 0054 10BD     		pop	{r4, pc}
 8078              	.LVL746:
 8079              	.L717:
 8080              		.cfi_restore_state
2041:easyflash/src/ef_env.c ****     }
 8081              		.loc 1 2041 16 view .LVU2482
 8082 0056 0020     		movs	r0, #0
 8083              	.LVL747:
 8084              		.loc 1 2076 1 view .LVU2483
 8085 0058 02B0     		add	sp, sp, #8
 8086              		.cfi_remember_state
 8087              		.cfi_def_cfa_offset 8
 8088              		@ sp needed
 8089 005a 10BD     		pop	{r4, pc}
 8090              	.LVL748:
 8091              	.L720:
 8092              		.cfi_restore_state
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8093              		.loc 1 2030 5 is_stmt 1 discriminator 1 view .LVU2484
 8094 005c 0D49     		ldr	r1, .L721+36
 8095              	.LVL749:
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8096              		.loc 1 2030 5 is_stmt 0 discriminator 1 view .LVU2485
 8097 005e 0091     		str	r1, [sp]
 8098 0060 0D4B     		ldr	r3, .L721+40
 8099 0062 0E4A     		ldr	r2, .L721+44
 8100 0064 0A48     		ldr	r0, .L721+32
 8101              	.LVL750:
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8102              		.loc 1 2030 5 discriminator 1 view .LVU2486
 8103 0066 40F2EE71 		movw	r1, #2030
 8104 006a FFF7FEFF 		bl	ef_log_debug
 8105              	.LVL751:
 8106              	.L714:
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8107              		.loc 1 2030 5 is_stmt 1 discriminator 1 view .LVU2487
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8108              		.loc 1 2030 5 discriminator 1 view .LVU2488
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8109              		.loc 1 2030 5 discriminator 1 view .LVU2489
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8110              		.loc 1 2030 5 discriminator 1 view .LVU2490
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8111              		.loc 1 2030 5 discriminator 1 view .LVU2491
2030:easyflash/src/ef_env.c ****     EF_ASSERT(ENV_AREA_SIZE);
 8112              		.loc 1 2030 5 discriminator 1 view .LVU2492
 8113 006e FEE7     		b	.L714
 8114              	.L722:
 8115              		.align	2
ARM GAS  /tmp/ccSGDQKw.s 			page 222


 8116              	.L721:
 8117 0070 00000000 		.word	.LANCHOR10
 8118 0074 00000000 		.word	.LANCHOR0
 8119 0078 00000000 		.word	.LANCHOR1
 8120 007c 00000000 		.word	.LANCHOR7
 8121 0080 00000C08 		.word	135004160
 8122 0084 00000000 		.word	.LANCHOR15
 8123 0088 00000000 		.word	.LANCHOR17
 8124 008c 0C000000 		.word	.LC37
 8125 0090 3C000000 		.word	.LC2
 8126 0094 00000000 		.word	.LANCHOR18
 8127 0098 00000000 		.word	.LC36
 8128 009c 1C000000 		.word	.LC1
 8129              		.cfi_endproc
 8130              	.LFE289:
 8132              		.global	sector_cache_table
 8133              		.global	env_cache_table
 8134              		.section	.bss.default_env_set,"aw",%nobits
 8135              		.align	2
 8136              		.set	.LANCHOR15,. + 0
 8139              	default_env_set:
 8140 0000 00000000 		.space	4
 8141              		.section	.bss.default_env_set_size,"aw",%nobits
 8142              		.align	2
 8143              		.set	.LANCHOR17,. + 0
 8146              	default_env_set_size:
 8147 0000 00000000 		.space	4
 8148              		.section	.bss.env.3,"aw",%nobits
 8149              		.align	2
 8150              		.set	.LANCHOR14,. + 0
 8153              	env.3:
 8154 0000 00000000 		.space	56
 8154      00000000 
 8154      00000000 
 8154      00000000 
 8154      00000000 
 8155              		.section	.bss.env_cache_table,"aw",%nobits
 8156              		.align	2
 8157              		.set	.LANCHOR1,. + 0
 8160              	env_cache_table:
 8161 0000 00000000 		.space	128
 8161      00000000 
 8161      00000000 
 8161      00000000 
 8161      00000000 
 8162              		.section	.bss.env_start_addr,"aw",%nobits
 8163              		.align	2
 8164              		.set	.LANCHOR7,. + 0
 8167              	env_start_addr:
 8168 0000 00000000 		.space	4
 8169              		.section	.bss.gc_request,"aw",%nobits
 8170              		.set	.LANCHOR2,. + 0
 8173              	gc_request:
 8174 0000 00       		.space	1
 8175              		.section	.bss.in_recovery_check,"aw",%nobits
 8176              		.set	.LANCHOR9,. + 0
 8179              	in_recovery_check:
ARM GAS  /tmp/ccSGDQKw.s 			page 223


 8180 0000 00       		.space	1
 8181              		.section	.bss.init_ok,"aw",%nobits
 8182              		.set	.LANCHOR10,. + 0
 8185              	init_ok:
 8186 0000 00       		.space	1
 8187              		.section	.bss.last_is_complete_del.6,"aw",%nobits
 8188              		.set	.LANCHOR8,. + 0
 8191              	last_is_complete_del.6:
 8192 0000 00       		.space	1
 8193              		.section	.bss.sector.4,"aw",%nobits
 8194              		.align	2
 8195              		.set	.LANCHOR13,. + 0
 8198              	sector.4:
 8199 0000 00000000 		.space	24
 8199      00000000 
 8199      00000000 
 8199      00000000 
 8199      00000000 
 8200              		.section	.bss.sector_cache_table,"aw",%nobits
 8201              		.align	2
 8202              		.set	.LANCHOR0,. + 0
 8205              	sector_cache_table:
 8206 0000 00000000 		.space	32
 8206      00000000 
 8206      00000000 
 8206      00000000 
 8206      00000000 
 8207              		.section	.bss.value.8,"aw",%nobits
 8208              		.align	2
 8209              		.set	.LANCHOR11,. + 0
 8212              	value.8:
 8213 0000 00000000 		.space	129
 8213      00000000 
 8213      00000000 
 8213      00000000 
 8213      00000000 
 8214              		.section	.rodata.__FUNCTION__.0,"a"
 8215              		.align	2
 8216              		.set	.LANCHOR18,. + 0
 8219              	__FUNCTION__.0:
 8220 0000 65665F65 		.ascii	"ef_env_init\000"
 8220      6E765F69 
 8220      6E697400 
 8221              		.section	.rodata.__FUNCTION__.1,"a"
 8222              		.align	2
 8223              		.set	.LANCHOR16,. + 0
 8226              	__FUNCTION__.1:
 8227 0000 65665F65 		.ascii	"ef_env_set_default\000"
 8227      6E765F73 
 8227      65745F64 
 8227      65666175 
 8227      6C7400
 8228              		.section	.rodata.__FUNCTION__.10,"a"
 8229              		.align	2
 8230              		.set	.LANCHOR3,. + 0
 8233              	__FUNCTION__.10:
 8234 0000 77726974 		.ascii	"write_status\000"
ARM GAS  /tmp/ccSGDQKw.s 			page 224


 8234      655F7374 
 8234      61747573 
 8234      00
 8235              		.section	.rodata.__FUNCTION__.11,"a"
 8236              		.align	2
 8237              		.set	.LANCHOR5,. + 0
 8240              	__FUNCTION__.11:
 8241 0000 72656164 		.ascii	"read_env\000"
 8241      5F656E76 
 8241      00
 8242              		.section	.rodata.__FUNCTION__.2,"a"
 8243              		.align	2
 8244              		.set	.LANCHOR4,. + 0
 8247              	__FUNCTION__.2:
 8248 0000 666F726D 		.ascii	"format_sector\000"
 8248      61745F73 
 8248      6563746F 
 8248      7200
 8249              		.section	.rodata.__FUNCTION__.7,"a"
 8250              		.align	2
 8251              		.set	.LANCHOR12,. + 0
 8254              	__FUNCTION__.7:
 8255 0000 65665F72 		.ascii	"ef_read_env_value\000"
 8255      6561645F 
 8255      656E765F 
 8255      76616C75 
 8255      6500
 8256              		.section	.rodata.__FUNCTION__.9,"a"
 8257              		.align	2
 8258              		.set	.LANCHOR6,. + 0
 8261              	__FUNCTION__.9:
 8262 0000 72656164 		.ascii	"read_sector_meta_data\000"
 8262      5F736563 
 8262      746F725F 
 8262      6D657461 
 8262      5F646174 
 8263              		.text
 8264              	.Letext0:
 8265              		.file 2 "/opt/gcc-arm-none-eabi-10.3-2021.10/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 8266              		.file 3 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/machine/_default_types.h"
 8267              		.file 4 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/sys/_stdint.h"
 8268              		.file 5 "easyflash/inc/ef_def.h"
 8269              		.file 6 "easyflash/inc/easyflash.h"
 8270              		.file 7 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/string.h"
 8271              		.file 8 "<built-in>"
ARM GAS  /tmp/ccSGDQKw.s 			page 225


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ef_env.c
     /tmp/ccSGDQKw.s:20     .text.update_sector_cache:0000000000000000 $t
     /tmp/ccSGDQKw.s:26     .text.update_sector_cache:0000000000000000 update_sector_cache
     /tmp/ccSGDQKw.s:129    .text.update_sector_cache:0000000000000058 $d
     /tmp/ccSGDQKw.s:134    .text.gc_check_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:140    .text.gc_check_cb:0000000000000000 gc_check_cb
     /tmp/ccSGDQKw.s:172    .text.update_env_cache:0000000000000000 $t
     /tmp/ccSGDQKw.s:178    .text.update_env_cache:0000000000000000 update_env_cache
     /tmp/ccSGDQKw.s:371    .text.update_env_cache:00000000000000a4 $d
     /tmp/ccSGDQKw.s:376    .text.find_next_env_addr:0000000000000000 $t
     /tmp/ccSGDQKw.s:382    .text.find_next_env_addr:0000000000000000 find_next_env_addr
     /tmp/ccSGDQKw.s:554    .text.find_next_env_addr:0000000000000090 $d
     /tmp/ccSGDQKw.s:560    .text.get_next_env_addr:0000000000000000 $t
     /tmp/ccSGDQKw.s:566    .text.get_next_env_addr:0000000000000000 get_next_env_addr
     /tmp/ccSGDQKw.s:663    .text.find_env_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:669    .text.find_env_cb:0000000000000000 find_env_cb
     /tmp/ccSGDQKw.s:745    .text.align_write:0000000000000000 $t
     /tmp/ccSGDQKw.s:751    .text.align_write:0000000000000000 align_write
     /tmp/ccSGDQKw.s:838    .text.alloc_env_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:844    .text.alloc_env_cb:0000000000000000 alloc_env_cb
     /tmp/ccSGDQKw.s:929    .text.alloc_env_cb:0000000000000034 $d
     /tmp/ccSGDQKw.s:934    .rodata.write_status.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:947    .text.write_status:0000000000000000 $t
     /tmp/ccSGDQKw.s:953    .text.write_status:0000000000000000 write_status
     /tmp/ccSGDQKw.s:1117   .text.write_status:0000000000000064 $d
     /tmp/ccSGDQKw.s:1126   .text.update_sec_status:0000000000000000 $t
     /tmp/ccSGDQKw.s:1132   .text.update_sec_status:0000000000000000 update_sec_status
     /tmp/ccSGDQKw.s:1298   .rodata.print_env_cb.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:1311   .text.print_env_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:1317   .text.print_env_cb:0000000000000000 print_env_cb
     /tmp/ccSGDQKw.s:1559   .text.print_env_cb:00000000000000c4 $d
     /tmp/ccSGDQKw.s:1569   .rodata.format_sector.constprop.0.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:1573   .text.format_sector.constprop.0:0000000000000000 $t
     /tmp/ccSGDQKw.s:1579   .text.format_sector.constprop.0:0000000000000000 format_sector.constprop.0
     /tmp/ccSGDQKw.s:1762   .text.format_sector.constprop.0:0000000000000070 $d
     /tmp/ccSGDQKw.s:1771   .rodata.check_sec_hdr_cb.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:1776   .text.check_sec_hdr_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:1782   .text.check_sec_hdr_cb:0000000000000000 check_sec_hdr_cb
     /tmp/ccSGDQKw.s:1851   .text.check_sec_hdr_cb:0000000000000028 $d
     /tmp/ccSGDQKw.s:1856   .text.sector_statistics_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:1862   .text.sector_statistics_cb:0000000000000000 sector_statistics_cb
     /tmp/ccSGDQKw.s:1938   .rodata.read_env.isra.0.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:1945   .text.read_env.isra.0:0000000000000000 $t
     /tmp/ccSGDQKw.s:1951   .text.read_env.isra.0:0000000000000000 read_env.isra.0
     /tmp/ccSGDQKw.s:2282   .text.read_env.isra.0:0000000000000130 $d
     /tmp/ccSGDQKw.s:2293   .rodata.read_sector_meta_data.part.0.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:2297   .text.read_sector_meta_data.part.0:0000000000000000 $t
     /tmp/ccSGDQKw.s:2303   .text.read_sector_meta_data.part.0:0000000000000000 read_sector_meta_data.part.0
     /tmp/ccSGDQKw.s:2845   .text.read_sector_meta_data.part.0:00000000000001c0 $d
     /tmp/ccSGDQKw.s:2857   .text.read_sector_meta_data:0000000000000000 $t
     /tmp/ccSGDQKw.s:2863   .text.read_sector_meta_data:0000000000000000 read_sector_meta_data
     /tmp/ccSGDQKw.s:2913   .text.read_sector_meta_data:0000000000000024 $d
     /tmp/ccSGDQKw.s:2921   .text.env_iterator:0000000000000000 $t
     /tmp/ccSGDQKw.s:2927   .text.env_iterator:0000000000000000 env_iterator
     /tmp/ccSGDQKw.s:3105   .text.env_iterator:0000000000000088 $d
     /tmp/ccSGDQKw.s:3110   .text.find_env:0000000000000000 $t
ARM GAS  /tmp/ccSGDQKw.s 			page 226


     /tmp/ccSGDQKw.s:3116   .text.find_env:0000000000000000 find_env
     /tmp/ccSGDQKw.s:3324   .text.find_env:00000000000000b8 $d
     /tmp/ccSGDQKw.s:3330   .rodata.del_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:3334   .text.del_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:3340   .text.del_env:0000000000000000 del_env
     /tmp/ccSGDQKw.s:3569   .text.del_env:00000000000000c4 $d
     /tmp/ccSGDQKw.s:3577   .rodata.alloc_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:3581   .text.alloc_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:3587   .text.alloc_env:0000000000000000 alloc_env
     /tmp/ccSGDQKw.s:4205   .text.alloc_env:0000000000000190 $d
     /tmp/ccSGDQKw.s:4216   .rodata.move_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:4220   .text.move_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:4226   .text.move_env:0000000000000000 move_env
     /tmp/ccSGDQKw.s:4532   .text.move_env:0000000000000150 $d
     /tmp/ccSGDQKw.s:4540   .rodata.check_and_recovery_env_cb.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:4552   .text.check_and_recovery_env_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:4558   .text.check_and_recovery_env_cb:0000000000000000 check_and_recovery_env_cb
     /tmp/ccSGDQKw.s:4691   .text.check_and_recovery_env_cb:0000000000000068 $d
     /tmp/ccSGDQKw.s:4701   .rodata.do_gc.part.0.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:4708   .text.do_gc.part.0:0000000000000000 $t
     /tmp/ccSGDQKw.s:4714   .text.do_gc.part.0:0000000000000000 do_gc.part.0
     /tmp/ccSGDQKw.s:4957   .text.do_gc.part.0:00000000000000d8 $d
     /tmp/ccSGDQKw.s:4965   .text.do_gc:0000000000000000 $t
     /tmp/ccSGDQKw.s:4971   .text.do_gc:0000000000000000 do_gc
     /tmp/ccSGDQKw.s:5029   .rodata.gc_collect.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:5033   .text.gc_collect:0000000000000000 $t
     /tmp/ccSGDQKw.s:5039   .text.gc_collect:0000000000000000 gc_collect
     /tmp/ccSGDQKw.s:5377   .text.gc_collect:00000000000000e0 $d
     /tmp/ccSGDQKw.s:5392   .rodata.create_env_blob.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:5406   .text.create_env_blob:0000000000000000 $t
     /tmp/ccSGDQKw.s:5412   .text.create_env_blob:0000000000000000 create_env_blob
     /tmp/ccSGDQKw.s:5909   .text.create_env_blob:0000000000000204 $d
     /tmp/ccSGDQKw.s:5921   .text.check_and_recovery_gc_cb:0000000000000000 $t
     /tmp/ccSGDQKw.s:5927   .text.check_and_recovery_gc_cb:0000000000000000 check_and_recovery_gc_cb
     /tmp/ccSGDQKw.s:5987   .text.check_and_recovery_gc_cb:0000000000000020 $d
     /tmp/ccSGDQKw.s:5992   .rodata.ef_get_env_obj.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:5996   .text.ef_get_env_obj:0000000000000000 $t
     /tmp/ccSGDQKw.s:6003   .text.ef_get_env_obj:0000000000000000 ef_get_env_obj
     /tmp/ccSGDQKw.s:6060   .text.ef_get_env_obj:000000000000002c $d
     /tmp/ccSGDQKw.s:6066   .text.ef_get_env_blob:0000000000000000 $t
     /tmp/ccSGDQKw.s:6073   .text.ef_get_env_blob:0000000000000000 ef_get_env_blob
     /tmp/ccSGDQKw.s:6200   .text.ef_get_env_blob:0000000000000058 $d
     /tmp/ccSGDQKw.s:6206   .rodata.ef_get_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:6211   .text.ef_get_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:6218   .text.ef_get_env:0000000000000000 ef_get_env
     /tmp/ccSGDQKw.s:6438   .text.ef_get_env:0000000000000080 $d
     /tmp/ccSGDQKw.s:6446   .rodata.ef_read_env_value.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:6453   .text.ef_read_env_value:0000000000000000 $t
     /tmp/ccSGDQKw.s:6460   .text.ef_read_env_value:0000000000000000 ef_read_env_value
     /tmp/ccSGDQKw.s:6608   .text.ef_read_env_value:0000000000000074 $d
     /tmp/ccSGDQKw.s:6619   .rodata.ef_del_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:6623   .text.ef_del_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:6630   .text.ef_del_env:0000000000000000 ef_del_env
     /tmp/ccSGDQKw.s:6697   .text.ef_del_env:0000000000000034 $d
     /tmp/ccSGDQKw.s:6703   .text.ef_del_and_save_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:6710   .text.ef_del_and_save_env:0000000000000000 ef_del_and_save_env
     /tmp/ccSGDQKw.s:6800   .text.ef_del_and_save_env:0000000000000034 $d
ARM GAS  /tmp/ccSGDQKw.s 			page 227


     /tmp/ccSGDQKw.s:6806   .text.ef_set_env_blob:0000000000000000 $t
     /tmp/ccSGDQKw.s:6813   .text.ef_set_env_blob:0000000000000000 ef_set_env_blob
     /tmp/ccSGDQKw.s:7077   .text.ef_set_env_blob:00000000000000e8 $d
     /tmp/ccSGDQKw.s:7090   .text.ef_set_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:7097   .text.ef_set_env:0000000000000000 ef_set_env
     /tmp/ccSGDQKw.s:7142   .text.ef_set_and_save_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:7149   .text.ef_set_and_save_env:0000000000000000 ef_set_and_save_env
     /tmp/ccSGDQKw.s:7179   .text.ef_save_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:7186   .text.ef_save_env:0000000000000000 ef_save_env
     /tmp/ccSGDQKw.s:7201   .rodata.ef_env_set_default.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:7208   .text.ef_env_set_default:0000000000000000 $t
     /tmp/ccSGDQKw.s:7215   .text.ef_env_set_default:0000000000000000 ef_env_set_default
     /tmp/ccSGDQKw.s:7416   .text.ef_env_set_default:00000000000000b8 $d
     /tmp/ccSGDQKw.s:7428   .rodata.ef_print_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:7435   .text.ef_print_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:7442   .text.ef_print_env:0000000000000000 ef_print_env
     /tmp/ccSGDQKw.s:7513   .text.ef_print_env:0000000000000044 $d
     /tmp/ccSGDQKw.s:7522   .rodata.ef_load_env.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:7527   .text.ef_load_env:0000000000000000 $t
     /tmp/ccSGDQKw.s:7534   .text.ef_load_env:0000000000000000 ef_load_env
     /tmp/ccSGDQKw.s:7933   .text.ef_load_env:00000000000000f4 $d
     /tmp/ccSGDQKw.s:7943   .rodata.ef_env_init.str1.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:7950   .text.ef_env_init:0000000000000000 $t
     /tmp/ccSGDQKw.s:7957   .text.ef_env_init:0000000000000000 ef_env_init
     /tmp/ccSGDQKw.s:8117   .text.ef_env_init:0000000000000070 $d
     /tmp/ccSGDQKw.s:8205   .bss.sector_cache_table:0000000000000000 sector_cache_table
     /tmp/ccSGDQKw.s:8160   .bss.env_cache_table:0000000000000000 env_cache_table
     /tmp/ccSGDQKw.s:8135   .bss.default_env_set:0000000000000000 $d
     /tmp/ccSGDQKw.s:8139   .bss.default_env_set:0000000000000000 default_env_set
     /tmp/ccSGDQKw.s:8142   .bss.default_env_set_size:0000000000000000 $d
     /tmp/ccSGDQKw.s:8146   .bss.default_env_set_size:0000000000000000 default_env_set_size
     /tmp/ccSGDQKw.s:8149   .bss.env.3:0000000000000000 $d
     /tmp/ccSGDQKw.s:8153   .bss.env.3:0000000000000000 env.3
     /tmp/ccSGDQKw.s:8156   .bss.env_cache_table:0000000000000000 $d
     /tmp/ccSGDQKw.s:8163   .bss.env_start_addr:0000000000000000 $d
     /tmp/ccSGDQKw.s:8167   .bss.env_start_addr:0000000000000000 env_start_addr
     /tmp/ccSGDQKw.s:8173   .bss.gc_request:0000000000000000 gc_request
     /tmp/ccSGDQKw.s:8174   .bss.gc_request:0000000000000000 $d
     /tmp/ccSGDQKw.s:8179   .bss.in_recovery_check:0000000000000000 in_recovery_check
     /tmp/ccSGDQKw.s:8180   .bss.in_recovery_check:0000000000000000 $d
     /tmp/ccSGDQKw.s:8185   .bss.init_ok:0000000000000000 init_ok
     /tmp/ccSGDQKw.s:8186   .bss.init_ok:0000000000000000 $d
     /tmp/ccSGDQKw.s:8191   .bss.last_is_complete_del.6:0000000000000000 last_is_complete_del.6
     /tmp/ccSGDQKw.s:8192   .bss.last_is_complete_del.6:0000000000000000 $d
     /tmp/ccSGDQKw.s:8194   .bss.sector.4:0000000000000000 $d
     /tmp/ccSGDQKw.s:8198   .bss.sector.4:0000000000000000 sector.4
     /tmp/ccSGDQKw.s:8201   .bss.sector_cache_table:0000000000000000 $d
     /tmp/ccSGDQKw.s:8208   .bss.value.8:0000000000000000 $d
     /tmp/ccSGDQKw.s:8212   .bss.value.8:0000000000000000 value.8
     /tmp/ccSGDQKw.s:8215   .rodata.__FUNCTION__.0:0000000000000000 $d
     /tmp/ccSGDQKw.s:8219   .rodata.__FUNCTION__.0:0000000000000000 __FUNCTION__.0
     /tmp/ccSGDQKw.s:8222   .rodata.__FUNCTION__.1:0000000000000000 $d
     /tmp/ccSGDQKw.s:8226   .rodata.__FUNCTION__.1:0000000000000000 __FUNCTION__.1
     /tmp/ccSGDQKw.s:8229   .rodata.__FUNCTION__.10:0000000000000000 $d
     /tmp/ccSGDQKw.s:8233   .rodata.__FUNCTION__.10:0000000000000000 __FUNCTION__.10
     /tmp/ccSGDQKw.s:8236   .rodata.__FUNCTION__.11:0000000000000000 $d
     /tmp/ccSGDQKw.s:8240   .rodata.__FUNCTION__.11:0000000000000000 __FUNCTION__.11
ARM GAS  /tmp/ccSGDQKw.s 			page 228


     /tmp/ccSGDQKw.s:8243   .rodata.__FUNCTION__.2:0000000000000000 $d
     /tmp/ccSGDQKw.s:8247   .rodata.__FUNCTION__.2:0000000000000000 __FUNCTION__.2
     /tmp/ccSGDQKw.s:8250   .rodata.__FUNCTION__.7:0000000000000000 $d
     /tmp/ccSGDQKw.s:8254   .rodata.__FUNCTION__.7:0000000000000000 __FUNCTION__.7
     /tmp/ccSGDQKw.s:8257   .rodata.__FUNCTION__.9:0000000000000000 $d
     /tmp/ccSGDQKw.s:8261   .rodata.__FUNCTION__.9:0000000000000000 __FUNCTION__.9

UNDEFINED SYMBOLS
ef_calc_crc32
ef_port_read
strlen
strncmp
ef_port_write
memcpy
memset
ef_log_debug
ef_print
ef_port_erase
ef_log_info
strncpy
ef_port_env_lock
ef_port_env_unlock
